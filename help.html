<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Help Center - Flow Business Suite</title>
    <link rel="stylesheet" href="dist/css/style.min.css">
    <link rel="stylesheet" href="dist/css/Theme.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Fredoka+One&display=swap" rel="stylesheet">

    <!-- Google Tag Manager (Part 1) -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5V9JPN4N');</script>
    <!-- End Google Tag Manager -->

    <style>
        .help-container { max-width: 900px; margin: 20px auto; }
        .faq-search { width: 100%; padding: 15px; font-size: 1.1rem; border-radius: 8px; border: 1px solid var(--card-border-color); background-color: rgba(0,0,0,0.2); color: var(--text-light); margin-bottom: 30px; box-sizing: border-box; }
        .faq-section details { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid var(--card-border-color); border-radius: 8px; margin-bottom: 15px; transition: background-color 0.3s ease; }
        .faq-section details[open] { background: rgba(255, 255, 255, 0.15); }
        .faq-section summary { font-size: 1.3rem; font-weight: 600; padding: 20px; cursor: pointer; outline: none; list-style: none; position: relative; }
        .faq-section summary::after { content: '+'; position: absolute; right: 20px; font-size: 1.5rem; transition: transform 0.3s ease; }
        .faq-section details[open] summary::after { transform: rotate(45deg); }
        .faq-content { padding: 0 20px 20px; border-top: 1px solid var(--card-border-color); }
        .faq-item { padding: 15px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        .faq-item:last-child { border-bottom: none; }
        .faq-item h4 { margin: 0 0 10px 0; color: var(--primary-accent); }
        .faq-item p, .faq-item ol, .faq-item ul { margin: 0; line-height: 1.6; color: var(--text-medium); } /* Added ul to styling */
        .faq-item ol, .faq-item ul { padding-left: 20px; margin-top: 10px; } /* Indent lists */
        .faq-item li { margin-bottom: 5px; }
        .card { background-color: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid var(--card-border-color); padding: 25px; border-radius: 16px; margin-top: 40px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 8px; }
        .form-group select, .form-group textarea { width: 100%; padding: 12px; border-radius: 6px; border: 1px solid rgba(255, 255, 255, 0.2); background-color: rgba(0,0,0,0.2); color: var(--text-light); box-sizing: border-box; font-family: 'Poppins', sans-serif; }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript Part 2) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V9JPN4N"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="background-animation"></div>
    <div class="container">
        <header class="dashboard-header">
            <a href="suite-hub.html" style="text-decoration: none;"><h1 class="app-title">Flow Business Suite</h1></a>
            <div class="settings-menu">
                <button id="settings-button" class="btn btn-secondary">⚙</button>
                <div id="settings-dropdown" class="settings-dropdown">
                  <a href="account.html">My Account</a>
                  <a href="admin.html">Admin Settings</a>
                  <a href="pricing.html" id="upgrade-plan-link">Upgrade Plan</a>
                  <a href="help.html">Help & FAQ</a>
                  <button id="logout-button">Logout</button>
                </div>
            </div>
        </header>

        <main class="help-container">
            <h2 style="color: var(--text-light); text-align: center; margin-bottom: 30px;">Help Center & FAQ</h2>
            <input type="text" id="faq-search" class="faq-search" placeholder="Search for a topic...">
            
            <div class="faq-section">
                <!-- NEW: Getting Started Tutorial Section -->
                <details open> <!-- Open by default for prominence -->
                    <summary>Getting Started: A Comprehensive Tutorial</summary>
                    <div class="faq-content">
                        <div class="faq-item">
                            <h4>Part 1: Initial Company Setup (As a Super Admin)</h4>
                            <p>When you first begin with Flow Business Suite, you'll register your company and automatically become its "Super Admin."</p>
                            <h5>Register Your Company:</h5>
                            <ol>
                                <li>Navigate to your Flow Business Suite's main landing page.</li>
                                <li>Click on the "Get Started for Free" or "Sign Up Now" button. This will take you to the registration page.</li>
                                <li>Fill in the required details:
                                    <ul>
                                        <li><strong>Company Name:</strong> This will be used to create your first default location (e.g., "Your Company Inc. HQ").</li>
                                        <li><strong>Your Full Name:</strong> Your name as the primary administrator.</li>
                                        <li><strong>Email Address:</strong> Your login email.</li>
                                        <li><strong>Password:</strong> Your secure password.</li>
                                    </ul>
                                </li>
                                <li>Click "Create Account."</li>
                                <li>You will receive a confirmation message, and then be redirected to the login page.</li>
                            </ol>
                            <h5>Log In to Your New Account:</h5>
                            <ol>
                                <li>On the login page, enter the email and password you just registered.</li>
                                <li>Click "Sign In."</li>
                                <li>As a Super Admin, you will be redirected to the <strong>App Hub</strong>.</li>
                            </ol>
                        </div>

                        <div class="faq-item">
                            <h4>Part 2: Essential Admin Settings Configuration</h4>
                            <p>As the Super Admin, your first stop should be the Admin Settings to tailor the suite to your company's needs.</p>
                            <h5>Access Admin Settings:</h5>
                            <ol>
                                <li>From the App Hub, click the <strong>⚙ (gear) icon</strong> in the top right corner.</li>
                                <li>Select "Admin Settings" from the dropdown menu.</li>
                            </ol>
                            <h5>Set Operating Hours:</h5>
                            <ol>
                                <li>In the "Business Settings" card, define your company's standard daily operating hours. These hours can be used for scheduling and availability planning.</li>
                                <li>Click "Save Settings."</li>
                            </ol>
                            <h5>Manage Locations (If Applicable):</h5>
                            <p>If your company has multiple physical branches, offices, or departments that operate as separate entities for scheduling or user management, use the "Manage Locations" card.</p>
                            <ol>
                                <li><strong>Add Location:</strong> Enter a "Location Name" (e.g., "Downtown Branch," "Warehouse") and its "Address." Click "Add Location."</li>
                                <li>All users and shifts will be associated with a location.</li>
                            </ol>
                        </div>

                        <div class="faq-item">
                            <h4>Part 3: Setting Up Onboarding & Task Lists</h4>
                            <p>This is crucial for standardizing your new hire process.</p>
                            <h5>Go to Task Lists:</h5>
                            <ol>
                                <li>From the App Hub, click on the "Onboarding" app card.</li>
                                <li>Then, click on "Task Lists" in the navigation bar.</li>
                            </ol>
                            <h5>Create New Task Lists:</h5>
                            <ol>
                                <li>In the "Create New Task List" form:
                                    <ul>
                                        <li><strong>Task List for Position:</strong> Enter the specific job title or position this list applies to (e.g., "Sales Associate," "Software Developer," "General Employee"). This is vital for automatic assignment later.</li>
                                        <li><strong>Task List Title:</strong> Give it a descriptive name (e.g., "Q3 Sales Team Onboarding," "New Employee Welcome Checklist").</li>
                                        <li><strong>Add Tasks:</strong> For each task:
                                            <ul>
                                                <li>Enter a "Task Description" (e.g., "Complete HR paperwork," "Attend IT orientation," "Read Employee Handbook").</li>
                                                <li><strong>Attach Documents:</strong> Click the "Attach" button. A modal will appear showing your uploaded documents. Select a relevant document (e.g., "Employee Handbook.txt") to link it to this task.</li>
                                            </ul>
                                        </li>
                                        <li>Click "Add Another Task" to add more items.</li>
                                        <li>Click "Create Task List" when done.</li>
                                    </ul>
                                </li>
                                <li>You can create multiple task lists for different positions.</li>
                            </ol>
                            <h5>Upload Documents (If not already done):</h5>
                            <p>If you need to attach documents to tasks (like employee handbooks, training manuals, policy documents), go to the "Documents" app from the App Hub.</p>
                            <ol>
                                <li>Upload your files here. These will then be available to attach to tasks.</li>
                            </ol>
                            <h5>Invite Employees:</h5>
                            <ol>
                                <li>Go back to "Admin Settings" (⚙ icon > Admin Settings).</li>
                                <li>In the "Invite New Employee" card:
                                    <ul>
                                        <li>Fill in their "Full Name," "Email," and a "Temporary Password."</li>
                                        <li>Crucially, set their "Position/Title" to exactly match one of the Task List Positions you created earlier (e.g., "Sales Associate").</li>
                                        <li>Assign them to a "Location."</li>
                                    </ul>
                                </li>
                                <li>Click "Invite Employee."</li>
                                <li>The system will automatically assign the matching task list to this new employee.</li>
                            </ol>
                            <h5>Onboard Existing Employees (If Needed):</h5>
                            <ol>
                                <li>Go to the "Onboarding Dashboard" from the App Hub.</li>
                                <li>Click the "Onboard Employee" button.</li>
                                <li>Select an existing employee from the dropdown. The system will show you which task list will be assigned based on their existing "Position."</li>
                                <li>Click "Assign Task List."</li>
                            </ol>
                        </div>

                        <div class="faq-item">
                            <h4>Part 4: Managing Hiring (Job Postings & Applicants)</h4>
                            <p>Streamline your recruitment process.</p>
                            <h5>Go to Hiring:</h5>
                            <ol>
                                <li>From the App Hub, click on the "Hiring" app card.</li>
                            </ol>
                            <h5>Create New Job Postings:</h5>
                            <ol>
                                <li>Use the "Create New Job Posting" form.</li>
                                <li>Provide a "Job Title," "Description," "Requirements," and assign it to a "Location."</li>
                                <li>Click "Create Posting."</li>
                            </ol>
                            <h5>Share Job Postings:</h5>
                            <ol>
                                <li>Once a job is posted, it will appear in the "Current Job Postings" list.</li>
                                <li>Click the "Share" button next to a job. A modal will appear with a direct link and embed code.</li>
                                <li>Copy the "Direct Link" and share it with potential applicants.</li>
                            </ol>
                            <h5>Review Applicants:</h5>
                            <ol>
                                <li>In the "Recent Applicants" section, you'll see new applications as they come in.</li>
                                <li>You can click the "Archive Applicant" button to remove them from the active list once processed.</li>
                            </ol>
                        </div>

                        <div class="faq-item">
                            <h4>Part 5: Employee Scheduling</h4>
                            <p>Efficiently manage your team's shifts.</p>
                            <h5>Go to Scheduling:</h5>
                            <ol>
                                <li>From the App Hub, click on the "Scheduling" app card.</li>
                            </ol>
                            <h5>Select a Location (Super Admins):</h5>
                            <p>If you are a Super Admin, use the "View Schedule For" dropdown in the sidebar to select the location whose schedule you want to manage. Location Admins will automatically see their assigned location's schedule.</p>
                            <h5>Create New Shifts:</h5>
                            <ol>
                                <li>Use the "Create New Shift" form in the sidebar.</li>
                                <li>Select the "Employee," "Location," and the "Start Time" and "End Time" (date and time).</li>
                                <li>Add any "Notes" if necessary.</li>
                                <li>Click "Add Shift." The shift will appear on the calendar grid.</li>
                            </ol>
                            <h5>Navigate the Schedule:</h5>
                            <ol>
                                <li>Use the "◀ Prev" and "Next ▶" buttons in the calendar header to navigate between weeks.</li>
                            </ol>
                            <h5>Print Schedule:</h5>
                            <ol>
                                <li>Click the "Print Schedule" button to open a printer-friendly version of the current week's schedule for the selected location.</li>
                            </ol>
                            <h5>Delete Old Shifts:</h5>
                            <p>In the "Data Management" card in the sidebar, you can select a date to delete all shifts that end before that date. Use with caution!</p>
                        </div>

                        <div class="faq-item">
                            <h4>Part 6: Employee Experience (For Invited Employees)</h4>
                            <p>Once an employee logs in, their view is streamlined to their tasks and schedule.</p>
                            <h5>Log In:</h5>
                            <ol>
                                <li>Employees log in with the email and temporary password provided by their admin. They should change their password immediately in "My Account."</li>
                            </ol>
                            <h5>View Onboarding Tasks:</h5>
                            <ol>
                                <li>The first thing they'll see is their "Onboard Flow - Your Tasks" page.</li>
                                <li>They can see their assigned tasks.</li>
                                <li><strong>Mark Tasks Complete:</strong> Click the checkbox next to a task to mark it as complete. Completed tasks will disappear from their list, and they'll see their progress updated (e.g., "You have completed 1 of 3 tasks").</li>
                                <li><strong>Access Attached Documents:</strong> If a task has an attached document, they can click the link to view it.</li>
                            </ol>
                            <h5>View Schedule:</h5>
                            <ol>
                                <li>The "Your Schedule This Week" section displays their assigned shifts.</li>
                                <li>They can use the "Print Schedule" button to get a physical copy.</li>
                            </ol>
                            <h5>View Messages:</h5>
                            <ol>
                                <li>The "Messages for You" section displays any internal messages sent to them by administrators. They can delete messages after reading.</li>
                            </ol>
                        </div>

                        <div class="faq-item">
                            <h4>Part 7: Managing Your Subscription</h4>
                            <h5>Upgrade Your Plan:</h5>
                            <ol>
                                <li>From the App Hub, click the <strong>⚙ (gear) icon</strong> in the top right corner.</li>
                                <li>Select "Upgrade Plan" (or navigate directly to <code>pricing.html</code>).</li>
                                <li>Choose your desired plan (Pro or Enterprise) and follow the prompts to complete the upgrade via Stripe's secure checkout. Your new plan will be activated immediately.</li>
                            </ol>
                            <h5>Cancel Your Subscription:</h5>
                            <p>To cancel your subscription, you must manage it directly through your <strong>Stripe customer portal</strong>.</p>
                            <ol>
                                <li>Refer to your original subscription confirmation email from Stripe for a link to your customer portal, or contact support for assistance.</li>
                                <li>Once canceled in Stripe, your account will automatically revert to the Free tier at the end of your current billing period.</li>
                            </ol>
                        </div>
                    </div>
                </details>

                <!-- Original General & Account FAQ (now below Getting Started) -->
                <details>
                    <summary>General & Account</summary>
                    <div class="faq-content">
                        <div class="faq-item">
                            <h4>How do I change my password?</h4>
                            <p>Navigate to "My Account" from the settings menu (⚙ icon). You will find fields to enter your current and new passwords.</p>
                        </div>
                        <div class="faq-item">
                            <h4>What do the different user roles mean?</h4>
                            <p><strong>Super Admin:</strong> Has full access to all settings, including creating locations and inviting other admins. <br><strong>Location Admin:</strong> Can manage users, schedules, and tasks for their assigned location. <br><strong>Employee:</strong> Can view their schedule, messages, and complete assigned onboarding tasks.</p>
                        </div>
                    </div>
                </details>

                <!-- Original Subscription Management FAQ (now below Getting Started) -->
                <details>
                    <summary>Subscription Management</summary>
                    <div class="faq-content">
                        <div class="faq-item">
                            <h4>How do I upgrade my plan?</h4>
                            <p>You can upgrade your subscription plan at any time by visiting the <a href="pricing.html" style="color: var(--primary-accent);">Pricing page</a>. Choose your desired plan (Pro or Enterprise) and follow the prompts to complete the upgrade via Stripe's secure checkout. Your new plan will be activated immediately.</p>
                        </div>
                        <div class="faq-item">
                            <h4>How do I cancel my subscription?</h4>
                            <p>To cancel your subscription, you will need to manage it directly through your Stripe customer portal. Please refer to your original subscription confirmation email from Stripe for a link to your customer portal, or contact support for assistance. Once canceled in Stripe, your account will automatically revert to the Free tier at the end of your current billing period.</p>
                        </div>
                    </div>
                </details>

                <!-- Original Admin Settings FAQ (now below Getting Started) -->
                <details>
                    <summary>Admin Settings</summary>
                    <div class="faq-content">
                        <div class="faq-item">
                            <h4>How do I invite a new employee?</h4>
                            <p>Go to "Admin Settings", find the "Invite New Employee" card, fill in their details, assign them to a location, and click "Invite Employee". They will receive an email with a temporary password.</p>
                        </div>
                        <div class="faq-item">
                            <h4>How do I create a new location?</h4>
                            <p>Only Super Admins can do this. Go to "Admin Settings" and use the "Manage Locations" card to add a new location name and address.</p>
                        </div>
                    </div>
                </details>
                
                <!-- Original Scheduling FAQ (now below Getting Started) -->
                <details>
                    <summary>Scheduling</summary>
                    <div class="faq-content">
                        <div class="faq-item">
                            <h4>How do I create a new shift?</h4>
                            <p>On the "Scheduling" page, use the "Create New Shift" form in the sidebar. Select an employee, location, start/end date and time, and click "Add Shift". The new shift will appear on the calendar instantly.</p>
                        </div>
                         <div class="faq-item">
                            <h4>How do I print the schedule?</h4>
                            <p>On the "Scheduling" page, use the "Print Schedule" button in the calendar header. This will open a printer-friendly version of the current week's schedule for the selected location.</p>
                        </div>
                    </div>
                </details>
                
                <!-- Original Onboarding & Task Lists FAQ (now below Getting Started) -->
                <details>
                    <summary>Onboarding & Task Lists</summary>
                    <div class="faq-content">
                        <div class="faq-item">
                            <h4>How do I create a task list for a new position?</h4>
                            <p>Navigate to the "Task Lists" page from the Onboarding Dashboard. Fill out the "Create New Task List" form, specifying which position it's for (e.g., "Sales Associate"). Add as many tasks as you need.</p>
                        </div>
                        <div class="faq-item">
                            <h4>How do I assign a task list to an employee?</h4>
                            <p>Go to the "Onboarding Dashboard" and click the "Onboard Employee" button. Select an employee from the dropdown. The system will automatically find the correct task list based on the employee's position and show you which one will be assigned.</p>
                        </div>
                    </div>
                </details>
            </div>

            <!-- Feedback Form -->
            <div class="card">
                <h3>Contact Us & Submit Feedback</h3>
                <form id="feedback-form">
                    <div class="form-group">
                        <label for="feedback-type">Type of Feedback</label>
                        <select id="feedback-type" required>
                            <option value="Suggestion">Suggestion</option>
                            <option value="Bug Report">Bug Report</option>
                            <option value="Question">Question</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="feedback-message">Your Message</label>
                        <textarea id="feedback-message" rows="5" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit Feedback</button>
                    <p id="feedback-status" style="margin-top: 15px; text-align: center;"></p>
                </form>
            </div>
        </main>
    </div>

    <script type="module" src="dist/js/bundle.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('faq-search');
            if (searchInput) {
                searchInput.addEventListener('keyup', () => {
                    const filter = searchInput.value.toLowerCase();
                    const sections = document.querySelectorAll('.faq-section details');
                    sections.forEach(section => {
                        const items = section.querySelectorAll('.faq-item');
                        let hasMatch = false;
                        items.forEach(item => {
                            if (item.textContent.toLowerCase().includes(filter)) {
                                item.style.display = "";
                                hasMatch = true;
                            } else {
                                item.style.display = "none";
                            }
                        });
                        if (hasMatch || filter === '') {
                            section.style.display = "";
                        } else {
                            section.style.display = "none";
                        }
                    });
                });
            }

            const feedbackForm = document.getElementById('feedback-form');
            if(feedbackForm) {
                feedbackForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const statusEl = document.getElementById('feedback-status');
                    statusEl.textContent = 'Submitting...';

                    const payload = {
                        feedback_type: document.getElementById('feedback-type').value,
                        message: document.getElementById('feedback-message').value
                    };
                    
                    try {
                        const token = localStorage.getItem('authToken');
                        if (!token) {
                            throw new Error('You must be logged in to submit feedback.');
                        }

                        const response = await fetch('/api/feedback', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${token}`
                            },
                            body: JSON.stringify(payload)
                        });

                        const result = await response.json();
                        if (!response.ok) {
                            throw new Error(result.error || 'An unknown error occurred.');
                        }
                        
                        statusEl.textContent = result.message;
                        statusEl.style.color = 'var(--primary-accent)';
                        feedbackForm.reset();

                    } catch(error) {
                        statusEl.textContent = `Error: ${error.message}`;
                        statusEl.style.color = '#ff8a80';
                    }
                });
            }
        });
    </script>
</body>
</html>
