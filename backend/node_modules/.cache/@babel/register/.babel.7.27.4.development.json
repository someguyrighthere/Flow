{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\test\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\",\"filename\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\test\\\\server.test.cjs\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$47\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.27.4:development":{"value":{"code":"\"use strict\";\n\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2); } }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n// --- Imports ---\nvar express = require('express');\nvar sqlite3 = require('sqlite3').verbose();\nvar bcrypt = require('bcryptjs');\nvar jwt = require('jsonwebtoken');\nvar cors = require('cors'); // Import cors\nvar path = require('path');\nvar csv = require('csv-parser'); // For CSV parsing\nvar _require = require('stream'),\n  Readable = _require.Readable; // For creating a readable stream from a string\nvar rateLimit = require('express-rate-limit'); // Import rate-limiting middleware\nvar morgan = require('morgan'); // Import morgan for request logging\n\n// Load environment variables from .env file in development\n// IMPORTANT: Only load .env if server.js is run directly, NOT when required by tests.\nif (process.env.NODE_ENV !== 'production' && require.main === module) {\n  require('dotenv').config();\n}\n\n// Import the Stripe library and initialize it with your secret key\n// Use process.env.STRIPE_SECRET_KEY for production\nvar stripeInstance = require('stripe')(process.env.STRIPE_SECRET_KEY || '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');\n\n// --- App Initialization ---\nvar app = express();\n\n// Configure CORS for production environment\nvar allowedOrigins = process.env.CORS_ORIGIN ? process.env.CORS_ORIGIN.split(',') : ['http://localhost:8000']; // Default to localhost for development\n\n// Add 'null' to allowed origins if not in production and not explicitly set for local file access\nif (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\n  allowedOrigins.push('null');\n}\nvar corsOptions = {\n  origin: function origin(_origin, callback) {\n    // Allow requests with no origin (like mobile apps, curl, or local file access if 'null' is in allowedOrigins)\n    if (!_origin) {\n      // Check if 'null' is explicitly allowed or if we're in dev and no CORS_ORIGIN is set\n      if (allowedOrigins.includes('null') || process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\n        return callback(null, true);\n      }\n      var msg = 'The CORS policy for this site does not allow access from the specified Origin.';\n      return callback(new Error(msg), false);\n    }\n    if (allowedOrigins.indexOf(_origin) === -1) {\n      var _msg = 'The CORS policy for this site does not allow access from the specified Origin.';\n      return callback(new Error(_msg), false);\n    }\n    return callback(null, true);\n  },\n  methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\n  credentials: true,\n  // Allow cookies to be sent\n  optionsSuccessStatus: 204 // Some legacy browsers (IE11, various SmartTVs) choke on 204\n};\napp.use(cors(corsOptions));\n\n// Use process.env.PORT for production, fallback to 3000 for local development\nvar PORT = process.env.PORT || 3000;\n\n// Define a webhook secret for Stripe. This should also be an environment variable.\nvar STRIPE_WEBHOOK_SECRET = process.env.STRIPE_WEBHOOK_SECRET || 'whsec_YOUR_WEBHOOK_SECRET';\n\n// --- Rate Limiting Configuration ---\nvar authLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000,\n  // 15 minutes\n  max: 10,\n  // Max 10 requests per 15 minutes per IP\n  message: 'Too many login/registration attempts from this IP, please try again after 15 minutes',\n  standardHeaders: true,\n  // Return rate limit info in the `RateLimit-*` headers\n  legacyHeaders: false // Disable the `X-RateLimit-*` headers\n});\n\n// --- Middleware for Stripe Webhook (MUST be before express.json() for other routes) --\n// This route needs the raw body for signature verification.\napp.post('/api/stripe-webhook', express.raw({\n  type: 'application/json'\n}), /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(req, res) {\n    var sig, event, session, userId, planId, subscriptionUpdated, subscriptionDeleted, invoiceSucceeded, invoiceFailed, _t, _t2;\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          sig = req.headers['stripe-signature'];\n          _context.p = 1;\n          event = stripeInstance.webhooks.constructEvent(req.body, sig, STRIPE_WEBHOOK_SECRET);\n          _context.n = 3;\n          break;\n        case 2:\n          _context.p = 2;\n          _t = _context.v;\n          console.error(\"Webhook Error: \".concat(_t.message));\n          return _context.a(2, res.status(400).send(\"Webhook Error: \".concat(_t.message)));\n        case 3:\n          _t2 = event.type;\n          _context.n = _t2 === 'checkout.session.completed' ? 4 : _t2 === 'customer.subscription.updated' ? 5 : _t2 === 'customer.subscription.deleted' ? 6 : _t2 === 'invoice.payment_succeeded' ? 7 : _t2 === 'invoice.payment_failed' ? 8 : 9;\n          break;\n        case 4:\n          session = event.data.object;\n          console.log('Checkout Session Completed:', session.id);\n          userId = session.metadata.userId;\n          planId = session.metadata.planId;\n          if (session.payment_status === 'paid' && userId && planId) {\n            db.run('UPDATE Users SET stripe_customer_id = ?, stripe_subscription_id = ?, subscription_status = ?, plan_id = ? WHERE user_id = ?', [session.customer, session.subscription, 'active', planId, userId], function (err) {\n              if (err) console.error('Database update error for checkout.session.completed:', err.message);else console.log(\"User \".concat(userId, \" subscription updated to \").concat(planId, \" (active).\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 5:\n          subscriptionUpdated = event.data.object;\n          console.log('Subscription Updated:', subscriptionUpdated.id);\n          if (subscriptionUpdated.customer && subscriptionUpdated.status && subscriptionUpdated.plan && subscriptionUpdated.plan.id) {\n            db.run('UPDATE Users SET subscription_status = ?, plan_id = ? WHERE stripe_customer_id = ?', [subscriptionUpdated.status, subscriptionUpdated.plan.id, subscriptionUpdated.customer], function (err) {\n              if (err) console.error('Database update error for customer.subscription.updated:', err.message);else console.log(\"Subscription for customer \".concat(subscriptionUpdated.customer, \" status updated to \").concat(subscriptionUpdated.status, \" and plan to \").concat(subscriptionUpdated.plan.id, \".\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 6:\n          subscriptionDeleted = event.data.object;\n          console.log('Subscription Deleted:', subscriptionDeleted.id);\n          if (subscriptionDeleted.customer) {\n            db.run('UPDATE Users SET subscription_status = ?, plan_id = ?, stripe_subscription_id = NULL WHERE stripe_customer_id = ?', ['cancelled', 'free', subscriptionDeleted.customer], function (err) {\n              if (err) console.error('Database update error for customer.subscription.deleted:', err.message);else console.log(\"Subscription for customer \".concat(subscriptionDeleted.customer, \" marked as cancelled and reverted to free.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 7:\n          invoiceSucceeded = event.data.object;\n          console.log('Invoice Payment Succeeded:', invoiceSucceeded.id);\n          if (invoiceSucceeded.subscription && invoiceSucceeded.customer) {\n            db.run('UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?', ['active', invoiceSucceeded.subscription, invoiceSucceeded.customer], function (err) {\n              if (err) console.error('Database update error for invoice.payment_succeeded:', err.message);else console.log(\"Subscription \".concat(invoiceSucceeded.subscription, \" status set to active.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 8:\n          invoiceFailed = event.data.object;\n          console.log('Invoice Payment Failed:', invoiceFailed.id);\n          if (invoiceFailed.subscription && invoiceFailed.customer) {\n            db.run('UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?', ['past_due', invoiceFailed.subscription, invoiceFailed.customer], function (err) {\n              if (err) console.error('Database update error for invoice.payment_failed:', err.message);else console.log(\"Subscription \".concat(invoiceFailed.subscription, \" status set to past_due.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 9:\n          console.log(\"Unhandled event type \".concat(event.type));\n        case 10:\n          res.status(200).json({\n            received: true\n          });\n        case 11:\n          return _context.a(2);\n      }\n    }, _callee, null, [[1, 2]]);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\n\n// IMPORTANT: express.json() for parsing JSON request bodies MUST come AFTER the webhook route\napp.use(express.json());\n\n// --- JWT Secret ---\n// CRUCIAL FOR TESTING: Directly access process.env.JWT_SECRET without fallback.\n// This ensures tests control the secret used by the app instance.\nvar JWT_SECRET = process.env.JWT_SECRET; // Ensure it *must* come from process.env\n\n// --- Request Logging (using Morgan) ---\n// 'dev' format is good for development, 'combined' or 'tiny' for production logs\napp.use(morgan('dev'));\n\n// --- Serve Static Files (Frontend) with Caching ---\n// This middleware serves static files from the 'onboardflow' root directory\n// and sets Cache-Control headers for browser caching.\napp.use(express[\"static\"](path.join(__dirname, '..'), {\n  maxAge: '7d',\n  // Cache static assets for 7 days (e.g., CSS, JS, images, favicon)\n  immutable: false // Set to true if asset filenames include content hashes (e.g., app.min.js?v=hash)\n}));\n\n// --- Database Setup ---\nvar db = new sqlite3.Database('./onboardflow.db', function (err) {\n  if (err) {\n    // Log database connection error and exit\n    console.error(\"Error opening database:\", err.message);\n    process.exit(1); // Exit process if database connection fails\n  } else {\n    console.log(\"Successfully connected to the database.\");\n    db.get(\"PRAGMA foreign_keys = ON\");\n    db.serialize(function () {\n      db.run(\"CREATE TABLE IF NOT EXISTS Companies (company_id INTEGER PRIMARY KEY AUTOINCREMENT, company_name TEXT NOT NULL UNIQUE)\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Locations (location_id INTEGER PRIMARY KEY AUTOINCREMENT, company_id INTEGER, location_name TEXT NOT NULL, location_address TEXT NOT NULL, FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE)\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Users (\\n                user_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER,\\n                location_id INTEGER,\\n                full_name TEXT NOT NULL,\\n                email TEXT NOT NULL UNIQUE,\\n                password_hash TEXT NOT NULL,\\n                position TEXT,\\n                employee_id TEXT,\\n                role TEXT NOT NULL,\\n                stripe_customer_id TEXT,\\n                stripe_subscription_id TEXT,\\n                subscription_status TEXT,\\n                plan_id TEXT,\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Schedules (\\n                schedule_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                employee_id INTEGER NOT NULL,\\n                location_id INTEGER NOT NULL,\\n                start_time TEXT NOT NULL,\\n                end_time TEXT NOT NULL,\\n                notes TEXT,\\n                FOREIGN KEY (employee_id) REFERENCES Users(user_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      // NEW: Create JobPostings table\n      db.run(\"CREATE TABLE IF NOT EXISTS JobPostings (\\n                job_posting_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                location_id INTEGER, -- Optional: link job posting to a specific location\\n                title TEXT NOT NULL,\\n                description TEXT NOT NULL,\\n                requirements TEXT, -- Optional: job requirements\\n                status TEXT NOT NULL DEFAULT 'Open', -- e.g., 'Open', 'Closed', 'Filled'\\n                created_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      // Update Applicants table schema to link to JobPostings and add phone_number\n      db.run(\"CREATE TABLE IF NOT EXISTS Applicants (\\n                applicant_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                location_id INTEGER, -- Optional: applicant's preferred location or location applied for\\n                job_posting_id INTEGER, -- NEW: Link to JobPostings table\\n                full_name TEXT NOT NULL,\\n                email TEXT NOT NULL,\\n                phone_number TEXT, -- NEW: Phone number field\\n                status TEXT NOT NULL DEFAULT 'Applied', -- e.g., 'Applied', 'Interviewing', 'Rejected', 'Hired'\\n                resume_url TEXT, -- Optional: URL to a resume document (e.g., hosted on cloud storage)\\n                notes TEXT,\\n                application_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE,\\n                FOREIGN KEY (job_posting_id) REFERENCES JobPostings(job_posting_id) ON DELETE SET NULL -- If job posting is deleted, set this to NULL\\n            )\");\n      // NEW: Create Documents table for file/video uploads\n      db.run(\"CREATE TABLE IF NOT EXISTS Documents (\\n                document_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                user_id INTEGER NOT NULL, -- User who uploaded the document\\n                title TEXT NOT NULL,\\n                file_name TEXT NOT NULL,\\n                file_type TEXT NOT NULL,\\n                file_url TEXT NOT NULL, -- URL to the stored file (e.g., S3, GCS)\\n                description TEXT,\\n                upload_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (user_id) REFERENCES Users(user_id) ON DELETE CASCADE\\n            )\");\n    });\n  }\n});\n\n// --- Authentication Middleware ---\nfunction authenticateToken(req, res, next) {\n  var authHeader = req.headers['authorization'];\n  var token = authHeader && authHeader.split(' ')[1];\n  if (token == null) {\n    return res.status(401).json({\n      error: 'Unauthorized: No token provided.'\n    });\n  }\n  jwt.verify(token, JWT_SECRET, function (err, user) {\n    if (err) {\n      // Log the specific JWT error for debugging\n      console.error(\"JWT Verification Error:\", err.message);\n      return res.status(403).json({\n        error: 'Forbidden: Invalid or expired token.'\n      });\n    }\n    req.user = user;\n    next();\n  });\n}\n\n// --- Helper for Input Validation ---\nvar isValidEmail = function isValidEmail(email) {\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n};\n\n// --- API Routes (ALL API ROUTES SHOULD BE DEFINED HERE, BEFORE STATIC FILE SERVING) ---\n\n// Apply rate limiting to authentication routes\napp.post('/api/register', authLimiter, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(req, res, next) {\n    var _req$body, company_name, full_name, email, password, password_hash, _t3;\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          // Added 'next'\n          _req$body = req.body, company_name = _req$body.company_name, full_name = _req$body.full_name, email = _req$body.email, password = _req$body.password; // Input Validation for Registration\n          if (!(!company_name || typeof company_name !== 'string' || company_name.trim() === '')) {\n            _context2.n = 1;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Company name is required and must be a non-empty string.\"\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context2.n = 2;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context2.n = 3;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context2.n = 4;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          _context2.p = 4;\n          _context2.n = 5;\n          return bcrypt.hash(password, 10);\n        case 5:\n          password_hash = _context2.v;\n          db.serialize(function () {\n            db.run('BEGIN TRANSACTION');\n            db.run('INSERT INTO Companies (company_name) VALUES (?)', [company_name], function (err) {\n              if (err) {\n                db.run('ROLLBACK');\n                console.error(\"Database error creating company:\", err);\n                return next(new Error(\"Could not create company.\")); // Pass error to error handling middleware\n              }\n              var newCompanyId = this.lastID;\n              db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'super_admin', 'active', 'free')\", [newCompanyId, null, full_name, email, password_hash], function (userInsertErr) {\n                if (userInsertErr) {\n                  db.run('ROLLBACK');\n                  console.error(\"Database error creating user:\", userInsertErr);\n                  if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                    return res.status(409).json({\n                      error: 'Email already registered.'\n                    });\n                  }\n                  return next(new Error(\"Could not create user.\")); // Pass error\n                }\n                db.run('COMMIT');\n                res.status(201).json({\n                  message: \"Company and user registered successfully!\",\n                  userId: this.lastID\n                });\n              });\n            });\n          });\n          _context2.n = 7;\n          break;\n        case 6:\n          _context2.p = 6;\n          _t3 = _context2.v;\n          console.error(\"Registration error:\", _t3);\n          next(_t3); // Pass error to error handling middleware\n        case 7:\n          return _context2.a(2);\n      }\n    }, _callee2, null, [[4, 6]]);\n  }));\n  return function (_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}());\napp.post('/api/login', authLimiter, function (req, res, next) {\n  // Added 'next'\n  var _req$body2 = req.body,\n    email = _req$body2.email,\n    password = _req$body2.password;\n\n  // Input Validation for Login\n  if (!email || !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address is required.\"\n    });\n  }\n  if (!password || typeof password !== 'string' || password.length === 0) {\n    return res.status(400).json({\n      error: \"Password is required.\"\n    });\n  }\n  db.get(\"SELECT * FROM Users WHERE email = ?\", [email], /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(err, user) {\n      var isMatch, payload, token;\n      return _regenerator().w(function (_context3) {\n        while (1) switch (_context3.n) {\n          case 0:\n            if (!err) {\n              _context3.n = 1;\n              break;\n            }\n            console.error(\"Database error during login:\", err);\n            return _context3.a(2, next(new Error(\"A server error occurred during login.\")));\n          case 1:\n            if (user) {\n              _context3.n = 2;\n              break;\n            }\n            return _context3.a(2, res.status(401).json({\n              error: \"Invalid credentials.\"\n            }));\n          case 2:\n            _context3.n = 3;\n            return bcrypt.compare(password, user.password_hash);\n          case 3:\n            isMatch = _context3.v;\n            if (isMatch) {\n              _context3.n = 4;\n              break;\n            }\n            return _context3.a(2, res.status(401).json({\n              error: \"Invalid credentials.\"\n            }));\n          case 4:\n            payload = {\n              userId: user.user_id,\n              email: user.email,\n              role: user.role,\n              fullName: user.full_name,\n              companyId: user.company_id,\n              locationId: user.location_id,\n              subscriptionStatus: user.subscription_status,\n              planId: user.plan_id\n            };\n            token = jwt.sign(payload, JWT_SECRET, {\n              expiresIn: '1h'\n            });\n            res.status(200).json({\n              message: \"Login successful!\",\n              token: token,\n              role: user.role\n            });\n          case 5:\n            return _context3.a(2);\n        }\n      }, _callee3);\n    }));\n    return function (_x6, _x7) {\n      return _ref3.apply(this, arguments);\n    };\n  }());\n});\napp.post('/api/invite-admin', authenticateToken, /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(req, res, next) {\n    var _req$body3, full_name, email, password, location_id, _req$user, companyId, role, password_hash, _t4;\n    return _regenerator().w(function (_context4) {\n      while (1) switch (_context4.n) {\n        case 0:\n          // Added 'next'\n          _req$body3 = req.body, full_name = _req$body3.full_name, email = _req$body3.email, password = _req$body3.password, location_id = _req$body3.location_id;\n          _req$user = req.user, companyId = _req$user.companyId, role = _req$user.role; // Input Validation for Invite Admin\n          if (!(role !== 'super_admin')) {\n            _context4.n = 1;\n            break;\n          }\n          return _context4.a(2, res.status(403).json({\n            error: 'Access Denied: Only super admins can invite other admins.'\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context4.n = 2;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context4.n = 3;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context4.n = 4;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"Temporary password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          if (!(typeof location_id !== 'number' || location_id <= 0)) {\n            _context4.n = 5;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"A valid location ID is required.\"\n          }));\n        case 5:\n          _context4.p = 5;\n          _context4.n = 6;\n          return bcrypt.hash(password, 10);\n        case 6:\n          password_hash = _context4.v;\n          db.get('SELECT * FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n            if (err) {\n              console.error(\"Database error checking location:\", err);\n              return next(new Error('Database error when verifying location.'));\n            } // Pass error\n            if (!location) {\n              return res.status(400).json({\n                error: 'Selected location does not exist or does not belong to your company.'\n              });\n            }\n            db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'location_admin', 'active', 'free')\", [companyId, location_id, full_name, email, password_hash], function (userInsertErr) {\n              if (userInsertErr) {\n                console.error(\"Database error inviting admin:\", userInsertErr);\n                if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                  return res.status(409).json({\n                    error: 'Email already registered.'\n                  });\n                }\n                return next(new Error('Failed to invite admin.')); // Pass error\n              }\n              res.status(201).json({\n                message: \"Location admin invited successfully!\",\n                userId: this.lastID\n              });\n            });\n          });\n          _context4.n = 8;\n          break;\n        case 7:\n          _context4.p = 7;\n          _t4 = _context4.v;\n          console.error(\"Invite admin error:\", _t4);\n          next(_t4);\n        case 8:\n          return _context4.a(2);\n      }\n    }, _callee4, null, [[5, 7]]);\n  }));\n  return function (_x8, _x9, _x0) {\n    return _ref4.apply(this, arguments);\n  };\n}());\n\n// NEW: API endpoint for inviting employees\napp.post('/api/invite-employee', authenticateToken, /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(req, res, next) {\n    var _req$body4, full_name, email, password, position, employee_id, location_id, _req$user2, companyId, role, currentUserLocationId, isLocationIdValid, password_hash, locationVerification, _t5;\n    return _regenerator().w(function (_context5) {\n      while (1) switch (_context5.n) {\n        case 0:\n          _req$body4 = req.body, full_name = _req$body4.full_name, email = _req$body4.email, password = _req$body4.password, position = _req$body4.position, employee_id = _req$body4.employee_id, location_id = _req$body4.location_id;\n          _req$user2 = req.user, companyId = _req$user2.companyId, role = _req$user2.role, currentUserLocationId = _req$user2.locationId; // Authorization: Super admin can invite anyone, Location admin can only invite to their location or unassigned\n          if (['super_admin', 'location_admin'].includes(role)) {\n            _context5.n = 1;\n            break;\n          }\n          return _context5.a(2, res.status(403).json({\n            error: 'Access Denied: Only admins can invite employees.'\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context5.n = 2;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context5.n = 3;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context5.n = 4;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"Temporary password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          // Corrected location_id validation: Must be a number > 0.\n          // If location_id is null, it indicates an unassigned location, which is valid for a super admin.\n          // For location_admin, it must match their current location.\n          // This revised logic correctly checks for null OR a valid positive integer.\n          isLocationIdValid = location_id === null || typeof location_id === 'number' && !isNaN(location_id) && location_id > 0;\n          if (isLocationIdValid) {\n            _context5.n = 5;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"A valid location ID (positive number) is required for employee, or null for unassigned.\"\n          }));\n        case 5:\n          if (!(position !== undefined && typeof position !== 'string')) {\n            _context5.n = 6;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Position must be a string if provided.'\n          }));\n        case 6:\n          if (!(employee_id !== undefined && typeof employee_id !== 'string')) {\n            _context5.n = 7;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Employee ID must be a string if provided.'\n          }));\n        case 7:\n          if (!(role === 'location_admin')) {\n            _context5.n = 8;\n            break;\n          }\n          if (!(location_id !== currentUserLocationId)) {\n            _context5.n = 8;\n            break;\n          }\n          if (location_id === null && currentUserLocationId === null) {\n            _context5.n = 8;\n            break;\n          }\n          return _context5.a(2, res.status(403).json({\n            error: 'Access Denied: Location admin can only invite employees to their assigned location.'\n          }));\n        case 8:\n          _context5.p = 8;\n          _context5.n = 9;\n          return bcrypt.hash(password, 10);\n        case 9:\n          password_hash = _context5.v;\n          if (!(location_id !== null)) {\n            _context5.n = 11;\n            break;\n          }\n          _context5.n = 10;\n          return new Promise(function (resolve, reject) {\n            db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n              if (err) reject(err);\n              resolve(location);\n            });\n          });\n        case 10:\n          locationVerification = _context5.v;\n          if (locationVerification) {\n            _context5.n = 11;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Selected location does not exist or does not belong to your company.'\n          }));\n        case 11:\n          db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, position, employee_id, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, ?, ?, 'employee', 'active', 'free')\", [companyId, location_id, full_name, email, password_hash, position, employee_id],\n          // Default new employees to 'employee' role\n          function (userInsertErr) {\n            if (userInsertErr) {\n              console.error(\"Database error inviting employee:\", userInsertErr);\n              if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                return res.status(409).json({\n                  error: 'Email already registered.'\n                });\n              }\n              return next(new Error('Failed to invite employee.'));\n            }\n            res.status(201).json({\n              message: \"Employee invited successfully!\",\n              userId: this.lastID\n            });\n          });\n          _context5.n = 13;\n          break;\n        case 12:\n          _context5.p = 12;\n          _t5 = _context5.v;\n          console.error(\"Invite employee error:\", _t5);\n          next(_t5);\n        case 13:\n          return _context5.a(2);\n      }\n    }, _callee5, null, [[8, 12]]);\n  }));\n  return function (_x1, _x10, _x11) {\n    return _ref5.apply(this, arguments);\n  };\n}());\napp.get('/api/profile', authenticateToken, function (req, res) {\n  var _req$user3 = req.user,\n    userId = _req$user3.userId,\n    fullName = _req$user3.fullName,\n    email = _req$user3.email,\n    role = _req$user3.role,\n    companyId = _req$user3.companyId,\n    locationId = _req$user3.locationId,\n    subscriptionStatus = _req$user3.subscriptionStatus,\n    planId = _req$user3.planId;\n  res.status(200).json({\n    userId: userId,\n    fullName: fullName,\n    email: email,\n    role: role,\n    companyId: companyId,\n    locationId: locationId,\n    subscriptionStatus: subscriptionStatus,\n    planId: planId\n  });\n});\napp.put('/api/profile', authenticateToken, /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7(req, res, next) {\n    var _req$body5, fullName, email, currentPassword, newPassword, userId;\n    return _regenerator().w(function (_context7) {\n      while (1) switch (_context7.n) {\n        case 0:\n          // Added 'next'\n          _req$body5 = req.body, fullName = _req$body5.fullName, email = _req$body5.email, currentPassword = _req$body5.currentPassword, newPassword = _req$body5.newPassword;\n          userId = req.user.userId; // Input Validation for Profile Update\n          if (!(fullName === undefined && email === undefined && (!currentPassword || !newPassword))) {\n            _context7.n = 1;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: 'No data provided for update.'\n          }));\n        case 1:\n          if (!(fullName !== undefined && (typeof fullName !== 'string' || fullName.trim() === ''))) {\n            _context7.n = 2;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"Full name must be a non-empty string if provided.\"\n          }));\n        case 2:\n          if (!(email !== undefined && !isValidEmail(email))) {\n            _context7.n = 3;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"A valid email address must be provided if changing email.\"\n          }));\n        case 3:\n          if (!(newPassword !== undefined && (typeof newPassword !== 'string' || newPassword.length < 6))) {\n            _context7.n = 4;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"New password must be at least 6 characters long if changing password.\"\n          }));\n        case 4:\n          if (!(currentPassword && !newPassword || !currentPassword && newPassword)) {\n            _context7.n = 5;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: 'Both current password and new password are required to change password.'\n          }));\n        case 5:\n          db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], /*#__PURE__*/function () {\n            var _ref7 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6(err, user) {\n              var updateSql, updateParams, clauses, changesMade, existingUser, isMatch, newPasswordHash, _t6;\n              return _regenerator().w(function (_context6) {\n                while (1) switch (_context6.n) {\n                  case 0:\n                    if (!err) {\n                      _context6.n = 1;\n                      break;\n                    }\n                    console.error(\"Database error fetching user for profile update:\", err);\n                    return _context6.a(2, next(new Error(\"Server error during profile update.\")));\n                  case 1:\n                    if (user) {\n                      _context6.n = 2;\n                      break;\n                    }\n                    return _context6.a(2, res.status(404).json({\n                      error: \"User not found.\"\n                    }));\n                  case 2:\n                    updateSql = 'UPDATE Users SET ';\n                    updateParams = [];\n                    clauses = [];\n                    changesMade = false;\n                    if (fullName !== undefined && fullName !== user.full_name) {\n                      clauses.push('full_name = ?');\n                      updateParams.push(fullName);\n                      changesMade = true;\n                    }\n                    if (!(email !== undefined && email !== user.email)) {\n                      _context6.n = 8;\n                      break;\n                    }\n                    _context6.p = 3;\n                    _context6.n = 4;\n                    return new Promise(function (resolve, reject) {\n                      db.get(\"SELECT user_id FROM Users WHERE email = ? AND user_id != ?\", [email, userId], function (err, row) {\n                        if (err) reject(err);\n                        resolve(row);\n                      });\n                    });\n                  case 4:\n                    existingUser = _context6.v;\n                    if (!existingUser) {\n                      _context6.n = 5;\n                      break;\n                    }\n                    return _context6.a(2, res.status(409).json({\n                      error: 'Email already in use by another account.'\n                    }));\n                  case 5:\n                    _context6.n = 7;\n                    break;\n                  case 6:\n                    _context6.p = 6;\n                    _t6 = _context6.v;\n                    console.error(\"Database error checking existing email:\", _t6);\n                    return _context6.a(2, next(new Error(\"Server error verifying email availability.\")));\n                  case 7:\n                    clauses.push('email = ?');\n                    updateParams.push(email);\n                    changesMade = true;\n                  case 8:\n                    if (!(currentPassword && newPassword)) {\n                      _context6.n = 12;\n                      break;\n                    }\n                    _context6.n = 9;\n                    return bcrypt.compare(currentPassword, user.password_hash);\n                  case 9:\n                    isMatch = _context6.v;\n                    if (isMatch) {\n                      _context6.n = 10;\n                      break;\n                    }\n                    return _context6.a(2, res.status(401).json({\n                      error: \"Current password incorrect.\"\n                    }));\n                  case 10:\n                    _context6.n = 11;\n                    return bcrypt.hash(newPassword, 10);\n                  case 11:\n                    newPasswordHash = _context6.v;\n                    clauses.push('password_hash = ?');\n                    updateParams.push(newPasswordHash);\n                    changesMade = true;\n                  case 12:\n                    if (changesMade) {\n                      _context6.n = 13;\n                      break;\n                    }\n                    return _context6.a(2, res.status(200).json({\n                      message: 'No changes detected. Profile remains the same.'\n                    }));\n                  case 13:\n                    updateSql += clauses.join(', ') + ' WHERE user_id = ?';\n                    updateParams.push(userId);\n                    db.run(updateSql, updateParams, function (updateErr) {\n                      if (updateErr) {\n                        console.error(\"Database error updating profile:\", updateErr);\n                        return next(new Error('Failed to update profile.'));\n                      } // Pass error\n                      if (this.changes > 0) {\n                        db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], function (fetchErr, updatedUser) {\n                          if (fetchErr || !updatedUser) {\n                            console.error(\"Error fetching updated user for new token:\", fetchErr);\n                            return res.status(200).json({\n                              message: 'Profile updated successfully, but token could not be refreshed.'\n                            });\n                          }\n                          var newPayload = {\n                            userId: updatedUser.user_id,\n                            email: updatedUser.email,\n                            role: updatedUser.role,\n                            fullName: updatedUser.full_name,\n                            companyId: updatedUser.company_id,\n                            locationId: updatedUser.location_id,\n                            subscriptionStatus: updatedUser.subscription_status,\n                            planId: user.plan_id\n                          };\n                          var newToken = jwt.sign(newPayload, JWT_SECRET, {\n                            expiresIn: '1h'\n                          });\n                          res.status(200).json({\n                            message: 'Profile updated successfully!',\n                            token: newToken\n                          });\n                        });\n                      } else {\n                        res.status(200).json({\n                          message: 'No changes applied as data was identical.'\n                        });\n                      }\n                    });\n                  case 14:\n                    return _context6.a(2);\n                }\n              }, _callee6, null, [[3, 6]]);\n            }));\n            return function (_x15, _x16) {\n              return _ref7.apply(this, arguments);\n            };\n          }());\n        case 6:\n          return _context7.a(2);\n      }\n    }, _callee7);\n  }));\n  return function (_x12, _x13, _x14) {\n    return _ref6.apply(this, arguments);\n  };\n}());\napp.get('/api/locations', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user4 = req.user,\n    companyId = _req$user4.companyId,\n    role = _req$user4.role;\n  var sql = 'SELECT location_id, location_name, location_address FROM Locations WHERE company_id = ?';\n  var params = [companyId];\n\n  // Allowing super_admin, location_admin, and employee to view all locations in their company for dropdowns/selection\n  if (!['super_admin', 'location_admin', 'employee'].includes(role)) {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view locations.'\n    });\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching locations:\", err);\n      return next(new Error('Database error fetching locations.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp.post('/api/locations', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body6 = req.body,\n    location_name = _req$body6.location_name,\n    location_address = _req$body6.location_address;\n  var _req$user5 = req.user,\n    companyId = _req$user5.companyId,\n    role = _req$user5.role;\n\n  // Input Validation for Create Location\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can create locations.'\n    });\n  }\n  if (!location_name || typeof location_name !== 'string' || location_name.trim() === '') {\n    return res.status(400).json({\n      error: \"Location name is required and must be a non-empty string.\"\n    });\n  }\n  if (!location_address || typeof location_address !== 'string' || location_address.trim() === '') {\n    return res.status(400).json({\n      error: \"Location address is required and must be a non-empty string.\"\n    });\n  }\n  db.run('INSERT INTO Locations (company_id, location_name, location_address) VALUES (?, ?, ?)', [companyId, location_name, location_address], function (err) {\n    if (err) {\n      console.error(\"Database error creating location:\", err);\n      return next(new Error('Failed to create location.'));\n    } // Pass error\n    res.status(201).json({\n      message: 'Location created!',\n      locationId: this.lastID\n    });\n  });\n});\napp[\"delete\"]('/api/locations/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user6 = req.user,\n    companyId = _req$user6.companyId,\n    role = _req$user6.role;\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can delete locations.'\n    });\n  }\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID provided.'\n    });\n  }\n  db.run('DELETE FROM Locations WHERE location_id = ? AND company_id = ?', [id, companyId], function (err) {\n    if (err) {\n      console.error(\"Database error deleting location:\", err);\n      return next(new Error('Failed to delete location.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Location not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\napp.get('/api/users', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user7 = req.user,\n    companyId = _req$user7.companyId,\n    role = _req$user7.role,\n    currentUserId = _req$user7.userId,\n    currentUserLocationId = _req$user7.locationId;\n  var _req$query = req.query,\n    filterRole = _req$query.filterRole,\n    filterLocationId = _req$query.filterLocationId;\n  var sql = \"SELECT Users.user_id, Users.full_name, Users.email, Users.role, Locations.location_name\\n               FROM Users\\n               LEFT JOIN Locations ON Users.location_id = Locations.location_id\\n               WHERE Users.company_id = ?\";\n  var params = [companyId];\n  if (role === 'super_admin') {\n    // Super admin can view all users in their company.\n  } else if (role === 'location_admin') {\n    // Location admin can view all users within their assigned location, plus unassigned users for their company.\n    if (currentUserLocationId) {\n      sql += \" AND (Users.location_id = ? OR Users.location_id IS NULL)\"; // Admins might need to see unassigned users\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Users.user_id = ?\";\n    params.push(currentUserId);\n  } else {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view users.'\n    });\n  }\n\n  // Input validation for filterRole and filterLocationId\n  var allowedRoles = ['super_admin', 'location_admin', 'employee'];\n  if (filterRole && (!allowedRoles.includes(filterRole) || role === 'location_admin' && filterRole === 'super_admin')) {\n    return res.status(400).json({\n      error: 'Invalid filter role provided or insufficient permissions to filter by this role.'\n    });\n  }\n  if (filterLocationId && isNaN(parseInt(filterLocationId))) {\n    return res.status(400).json({\n      error: 'Invalid filter location ID provided.'\n    });\n  }\n  if (filterRole) {\n    if (role === 'super_admin' || role === 'location_admin' && (filterRole === 'employee' || filterRole === 'location_admin') || role === 'employee' && filterRole === 'employee') {\n      sql += \" AND Users.role = ?\";\n      params.push(filterRole);\n    } else {\n      // This case should ideally be caught by the earlier validation for allowedRoles, but for defense-in-depth:\n      return res.status(403).json({\n        error: 'Access Denied: Insufficient permissions to filter by role.'\n      });\n    }\n  }\n  if (filterLocationId) {\n    // Ensure location_admin can only filter by their own location\n    if (role === 'super_admin' || role === 'location_admin' && parseInt(filterLocationId) === currentUserLocationId) {\n      sql += \" AND Users.location_id = ?\";\n      params.push(filterLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Insufficient permissions to filter by location.'\n      });\n    }\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching users:\", err);\n      return next(new Error('Database error fetching users.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp[\"delete\"]('/api/users/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user8 = req.user,\n    companyId = _req$user8.companyId,\n    role = _req$user8.role,\n    authenticatedUserId = _req$user8.userId;\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can delete users.'\n    });\n  }\n  if (parseInt(id) === authenticatedUserId) {\n    return res.status(403).json({\n      error: 'Cannot delete your own super admin account via this interface.'\n    });\n  }\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid user ID provided.'\n    });\n  }\n  db.run('DELETE FROM Users WHERE user_id = ? AND company_id = ? AND role != \\'super_admin\\'', [id, companyId], function (err) {\n    if (err) {\n      console.error(\"Database error deleting user:\", err);\n      return next(new Error('Failed to delete user.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'User not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\napp.post('/api/create-checkout-session', authenticateToken, /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee8(req, res, next) {\n    var planId, _req$user9, userId, email, companyId, allowedPlanIds, priceIdMap, stripePriceId, customerId, userRecord, customer, session, _t7;\n    return _regenerator().w(function (_context8) {\n      while (1) switch (_context8.n) {\n        case 0:\n          // Added 'next'\n          planId = req.body.planId;\n          _req$user9 = req.user, userId = _req$user9.userId, email = _req$user9.email, companyId = _req$user9.companyId; // Input Validation for planId\n          allowedPlanIds = ['pro', 'enterprise'];\n          if (!(!planId || !allowedPlanIds.includes(planId))) {\n            _context8.n = 1;\n            break;\n          }\n          return _context8.a(2, res.status(400).json({\n            error: 'Invalid plan ID provided.'\n          }));\n        case 1:\n          priceIdMap = {\n            'pro': process.env.STRIPE_PRICE_ID_PRO,\n            // Use environment variable\n            'enterprise': process.env.STRIPE_PRICE_ID_ENT // Use environment variable\n          };\n          stripePriceId = priceIdMap[planId];\n          if (stripePriceId) {\n            _context8.n = 2;\n            break;\n          }\n          return _context8.a(2, res.status(500).json({\n            error: 'Stripe price ID not configured for this plan.'\n          }));\n        case 2:\n          _context8.p = 2;\n          _context8.n = 3;\n          return new Promise(function (resolve, reject) {\n            db.get('SELECT stripe_customer_id FROM Users WHERE user_id = ?', [userId], function (err, row) {\n              if (err) reject(err);\n              resolve(row);\n            });\n          });\n        case 3:\n          userRecord = _context8.v;\n          if (!(userRecord && userRecord.stripe_customer_id)) {\n            _context8.n = 4;\n            break;\n          }\n          customerId = userRecord.stripe_customer_id;\n          _context8.n = 6;\n          break;\n        case 4:\n          _context8.n = 5;\n          return stripeInstance.customers.create({\n            email: email,\n            metadata: {\n              userId: userId,\n              companyId: companyId\n            }\n          });\n        case 5:\n          customer = _context8.v;\n          customerId = customer.id;\n          db.run('UPDATE Users SET stripe_customer_id = ? WHERE user_id = ?', [customerId, userId], function (err) {\n            if (err) console.error('Failed to save Stripe customer ID to DB:', err);\n          });\n        case 6:\n          _context8.n = 7;\n          return stripeInstance.checkout.sessions.create({\n            customer: customerId,\n            mode: 'subscription',\n            line_items: [{\n              price: stripePriceId,\n              quantity: 1\n            }],\n            // Use environment variables for success/cancel URLs, or relative paths if handled client-side\n            success_url: \"\".concat(process.env.FRONTEND_URL || 'http://localhost:8000', \"/suite-hub.html?payment=success&session_id={CHECKOUT_SESSION_ID}\"),\n            cancel_url: \"\".concat(process.env.FRONTEND_URL || 'http://localhost:8000', \"/pricing.html?payment=cancelled\"),\n            metadata: {\n              userId: userId,\n              planId: planId\n            }\n          });\n        case 7:\n          session = _context8.v;\n          res.status(200).json({\n            url: session.url\n          });\n          _context8.n = 9;\n          break;\n        case 8:\n          _context8.p = 8;\n          _t7 = _context8.v;\n          console.error('Error creating Stripe Checkout Session:', _t7);\n          next(_t7);\n        case 9:\n          return _context8.a(2);\n      }\n    }, _callee8, null, [[2, 8]]);\n  }));\n  return function (_x17, _x18, _x19) {\n    return _ref8.apply(this, arguments);\n  };\n}());\napp.post('/api/schedules', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body7 = req.body,\n    employee_id = _req$body7.employee_id,\n    location_id = _req$body7.location_id,\n    start_time = _req$body7.start_time,\n    end_time = _req$body7.end_time,\n    notes = _req$body7.notes;\n  var _req$user0 = req.user,\n    companyId = _req$user0.companyId,\n    role = _req$user0.role,\n    currentUserId = _req$user0.userId;\n\n  // Input Validation for Create Schedule\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can create schedules.'\n    });\n  }\n  if (typeof employee_id !== 'number' || employee_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid employee ID is required.'\n    });\n  }\n  if (typeof location_id !== 'number' || location_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid location ID is required.'\n    });\n  }\n  if (!start_time || !end_time || isNaN(new Date(start_time).getTime()) || isNaN(new Date(end_time).getTime())) {\n    return res.status(400).json({\n      error: 'Valid start and end times are required.'\n    });\n  }\n  if (new Date(start_time) >= new Date(end_time)) {\n    return res.status(400).json({\n      error: 'Start time must be before end time.'\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  db.get('SELECT user_id FROM Users WHERE user_id = ? AND company_id = ?', [employee_id, companyId], function (err, employee) {\n    if (err) {\n      console.error(\"Database error verifying employee:\", err);\n      return next(new Error('Database error during employee verification.'));\n    } // Pass error\n    if (!employee) {\n      return res.status(400).json({\n        error: 'Employee not found in your company.'\n      });\n    }\n    db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n      if (err) {\n        console.error(\"Database error verifying location:\", err);\n        return next(new Error('Database error during location verification.'));\n      } // Pass error\n      if (!location) {\n        return res.status(400).json({\n          error: 'Location not found in your company.'\n        });\n      }\n      db.run('INSERT INTO Schedules (employee_id, location_id, start_time, end_time, notes) VALUES (?, ?, ?, ?, ?)', [employee_id, location_id, start_time, end_time, notes], function (insertErr) {\n        if (insertErr) {\n          console.error(\"Database error creating schedule:\", insertErr);\n          return next(new Error('Failed to create schedule.'));\n        } // Pass error\n        res.status(201).json({\n          message: 'Schedule created successfully!',\n          scheduleId: this.lastID\n        });\n      });\n    });\n  });\n});\napp.get('/api/schedules', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query2 = req.query,\n    employee_id = _req$query2.employee_id,\n    location_id = _req$query2.location_id,\n    start_date = _req$query2.start_date,\n    end_date = _req$query2.end_date;\n  var _req$user1 = req.user,\n    companyId = _req$user1.companyId,\n    role = _req$user1.role,\n    currentUserId = _req$user1.userId,\n    currentUserLocationId = _req$user1.locationId;\n  var sql = \"SELECT Schedules.*, Users.full_name AS employee_name, Users.email AS employee_email, Locations.location_name\\n               FROM Schedules\\n               JOIN Users ON Schedules.employee_id = Users.user_id\\n               JOIN Locations ON Schedules.location_id = Locations.location_id\\n               WHERE Users.company_id = ?\";\n  var params = [companyId];\n  if (role === 'location_admin') {\n    if (currentUserLocationId) {\n      sql += \" AND Schedules.location_id = ?\";\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Users.user_id = ?\";\n    params.push(currentUserId);\n  }\n\n  // Input validation for query parameters\n  if (employee_id && isNaN(parseInt(employee_id))) {\n    return res.status(400).json({\n      error: 'Invalid employee ID filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (start_date && isNaN(new Date(start_date).getTime())) {\n    return res.status(400).json({\n      error: 'Invalid start date filter provided.'\n    });\n  }\n  if (end_date && isNaN(new Date(end_date).getTime())) {\n    return res.status(400).json({\n      error: 'Invalid end date filter provided.'\n    });\n  }\n  if (employee_id && (role === 'super_admin' || role === 'location_admin' && parseInt(employee_id) === currentUserId || role === 'employee' && parseInt(employee_id) === currentUserId)) {\n    sql += \" AND Users.role = ?\";\n    params.push(filterRole); // This should be employee_id, not filterRole\n  }\n  if (location_id && (role === 'super_admin' || role === 'location_admin' && parseInt(location_id) === currentUserLocationId)) {\n    sql += \" AND Schedules.location_id = ?\";\n    params.push(location_id);\n  }\n  if (start_date) {\n    sql += \" AND Schedules.start_time >= ?\";\n    params.push(start_date);\n  }\n  if (end_date) {\n    sql += \" AND Schedules.end_time <= ?\";\n    params.push(end_date);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching schedules:\", err);\n      return next(new Error('Database error fetching schedules.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp[\"delete\"]('/api/schedules/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user10 = req.user,\n    companyId = _req$user10.companyId,\n    role = _req$user10.role,\n    currentUserId = _req$user10.userId,\n    currentUserLocationId = _req$user10.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid schedule ID provided.'\n    });\n  }\n  if (role === 'employee') {\n    return res.status(403).json({\n      error: 'Access Denied: Employees cannot delete schedules.'\n    });\n  }\n  var sql = \"DELETE FROM Schedules WHERE schedule_id = ?\";\n  var params = [id];\n  if (role === 'location_admin') {\n    sql += \" AND employee_id IN (SELECT user_id FROM Users WHERE location_id = ? AND company_id = ?)\";\n    params.push(currentUserLocationId, companyId);\n  } else if (role === 'super_admin') {\n    sql += \" AND employee_id IN (SELECT user_id FROM Users WHERE company_id = ?)\";\n    params.push(companyId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting schedule:\", err);\n      return next(new Error('Failed to delete schedule.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Schedule not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// --- Hiring Routes ---\n\n/**\r\n * POST /api/job-postings\r\n * Creates a new job posting.\r\n * Requires super_admin or location_admin role.\r\n */\napp.post('/api/job-postings', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body8 = req.body,\n    title = _req$body8.title,\n    description = _req$body8.description,\n    requirements = _req$body8.requirements,\n    location_id = _req$body8.location_id;\n  var _req$user11 = req.user,\n    companyId = _req$user11.companyId,\n    role = _req$user11.role,\n    currentUserLocationId = _req$user11.locationId;\n  var created_date = new Date().toISOString(); // Current date/time for creation\n\n  // Input Validation for Create Job Posting\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can create job postings.'\n    });\n  }\n  if (!title || typeof title !== 'string' || title.trim() === '') {\n    return res.status(400).json({\n      error: \"Job title is required and must be a non-empty string.\"\n    });\n  }\n  if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\n    // Line 1009\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  } else if (description !== undefined) {\n    clauses.push('description = ?');\n    updateParams.push(description);\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  } else if (requirements !== undefined) {\n    clauses.push('requirements = ?');\n    updateParams.push(requirements);\n  }\n  if (status !== undefined) {\n    clauses.push('status = ?');\n    updateParams.push(status);\n  }\n\n  // super_admin can change location_id. location_admin cannot change location_id or change to different location\n  if (location_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    } else if (role === 'location_admin') {\n      if (location_id !== currentUserLocationId && location_id !== null) {\n        // location_id can be null (company-wide)\n        return res.status(403).json({\n          error: 'Access Denied: Location admin cannot change job posting location to another location.'\n        });\n      }\n      // If location admin updates job posting, and it's their location, or setting to null, it's allowed\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    }\n  }\n  if (clauses.length === 0) {\n    return res.status(400).json({\n      error: 'No fields provided for update.'\n    });\n  }\n  updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\n  updateParams.push(id, companyId);\n\n  // Additional security for location_admin: ensure they only update their own location's postings\n  if (role === 'location_admin') {\n    updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\n    params.push(currentUserLocationId);\n  }\n  db.run(updateSql, updateParams, function (err) {\n    if (err) {\n      console.error(\"Database error updating job posting:\", err);\n      return next(new Error('Failed to update job posting.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Job posting not found or not authorized to update.'\n      });\n    }\n    res.status(200).json({\n      message: 'Job posting updated successfully!'\n    });\n  });\n});\n\n/**\r\n * GET /api/job-postings\r\n * Retrieves job postings.\r\n * Can filter by location_id and status.\r\n * Requires super_admin or location_admin.\r\n */\napp.get('/api/job-postings', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query3 = req.query,\n    status = _req$query3.status,\n    location_id = _req$query3.location_id;\n  var _req$user12 = req.user,\n    companyId = _req$user12.companyId,\n    role = _req$user12.role,\n    currentUserLocationId = _req$user12.locationId;\n  var sql = 'SELECT * FROM JobPostings WHERE company_id = ?';\n  var params = [companyId];\n\n  // Authorization: super_admin sees all, location_admin sees their location's postings\n  if (role === 'location_admin') {\n    if (currentUserLocationId) {\n      sql += ' AND (location_id = ? OR location_id IS NULL)'; // Location admin sees their location's postings or company-wide\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    // Employees generally shouldn't see job postings list via this admin API\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view job postings.'\n    });\n  }\n\n  // Input validation for query parameters\n  var allowedStatuses = ['Open', 'Closed', 'Filled']; // Assuming these are your valid statuses\n  if (status && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid job posting status filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (status) {\n    sql += ' AND status = ?';\n    params.push(status);\n  }\n  // Only super admin can filter by any location_id beyond their own scope\n  if (location_id && role === 'super_admin') {\n    sql += \" AND location_id = ?\";\n    params.push(location_id);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching job postings:\", err);\n      return next(new Error('Database error fetching job postings.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * PUT /api/job-postings/:id\r\n * Updates a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\napp.put('/api/job-postings/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$body9 = req.body,\n    title = _req$body9.title,\n    description = _req$body9.description,\n    requirements = _req$body9.requirements,\n    status = _req$body9.status,\n    location_id = _req$body9.location_id;\n  var _req$user13 = req.user,\n    companyId = _req$user13.companyId,\n    role = _req$user13.role,\n    currentUserLocationId = _req$user13.locationId;\n\n  // Input Validation for Job Posting Update\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can update job postings.'\n    });\n  }\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID provided.'\n    });\n  }\n  if (title !== undefined && (typeof title !== 'string' || title.trim() === '')) {\n    return res.status(400).json({\n      error: 'Job title must be a non-empty string if provided.'\n    });\n  }\n  if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  }\n  var allowedStatuses = ['Open', 'Closed', 'Filled'];\n  if (status !== undefined && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid status provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n  var updateSql = 'UPDATE JobPostings SET ';\n  var updateParams = [];\n  var clauses = [];\n  if (title !== undefined) {\n    clauses.push('title = ?');\n    updateParams.push(title);\n  }\n  // Line 1009 fix: Ensure this line and surrounding logic is correct.\n  if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\n    // Line 1009\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  } else if (description !== undefined) {\n    clauses.push('description = ?');\n    updateParams.push(description);\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  } else if (requirements !== undefined) {\n    clauses.push('requirements = ?');\n    updateParams.push(requirements);\n  }\n  if (status !== undefined) {\n    clauses.push('status = ?');\n    updateParams.push(status);\n  }\n\n  // super_admin can change location_id. location_admin cannot change location_id or change to different location\n  if (location_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    } else if (role === 'location_admin') {\n      if (location_id !== currentUserLocationId && location_id !== null) {\n        // location_id can be null (company-wide)\n        return res.status(403).json({\n          error: 'Access Denied: Location admin cannot change job posting location to another location.'\n        });\n      }\n      // If location admin updates job posting, and it's their location, or setting to null, it's allowed\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    }\n  }\n  if (clauses.length === 0) {\n    return res.status(400).json({\n      error: 'No fields provided for update.'\n    });\n  }\n  updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\n  updateParams.push(id, companyId);\n\n  // Additional security for location_admin: ensure they only update their own location's postings\n  if (role === 'location_admin') {\n    updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\n    params.push(currentUserLocationId);\n  }\n  db.run(updateSql, updateParams, function (err) {\n    if (err) {\n      console.error(\"Database error updating job posting:\", err);\n      return next(new Error('Failed to update job posting.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Job posting not found or not authorized to update.'\n      });\n    }\n    res.status(200).json({\n      message: 'Job posting updated successfully!'\n    });\n  });\n});\n\n/**\r\n * DELETE /api/job-postings/:id\r\n * Deletes a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\napp[\"delete\"]('/api/job-postings/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user14 = req.user,\n    companyId = _req$user14.companyId,\n    role = _req$user14.role,\n    currentUserLocationId = _req$user14.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID provided.'\n    });\n  }\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can delete job postings.'\n    });\n  }\n  var sql = 'DELETE FROM JobPostings WHERE job_posting_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Additional security for location_admin: ensure they only delete their own location's postings\n  if (role === 'location_admin') {\n    sql += ' AND (location_id = ? OR location_id IS NULL)';\n    params.push(currentUserLocationId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting job posting:\", err);\n      return next(new Error('Failed to delete job posting.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Job posting not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// Update Applicant API endpoints to use job_posting_id\napp.post('/api/applicants', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body0 = req.body,\n    job_posting_id = _req$body0.job_posting_id,\n    full_name = _req$body0.full_name,\n    email = _req$body0.email,\n    notes = _req$body0.notes,\n    location_id = _req$body0.location_id,\n    phone_number = _req$body0.phone_number; // Added phone_number\n  var _req$user15 = req.user,\n    companyId = _req$user15.companyId,\n    role = _req$user15.role,\n    currentUserLocationId = _req$user15.locationId;\n  var application_date = new Date().toISOString(); // Current date/time for application\n\n  // Input Validation for Adding Applicant\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can add applicants.'\n    });\n  }\n  if (typeof job_posting_id !== 'number' || job_posting_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid job posting ID is required.'\n    });\n  }\n  if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\n    return res.status(400).json({\n      error: \"Full name is required and must be a non-empty string.\"\n    });\n  }\n  if (!email || !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address is required.\"\n    });\n  }\n  // Basic phone number validation (simple check for non-empty string, could be more complex with regex)\n  if (!phone_number || typeof phone_number !== 'string' || phone_number.trim() === '') {\n    return res.status(400).json({\n      error: \"Phone number is required.\"\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n\n  // Verify job_posting_id belongs to the company, and for location_admin, to their location\n  db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], function (err, jobPosting) {\n    if (err) {\n      console.error(\"Database error verifying job posting:\", err);\n      return next(new Error('Database error when verifying job posting.'));\n    } // Pass error\n    if (!jobPosting) {\n      return res.status(400).json({\n        error: 'Job Posting not found or does not belong to your company.'\n      });\n    }\n\n    // Location admin can only add applicants to jobs in their assigned location or unassigned jobs\n    if (role === 'location_admin' && jobPosting.location_id !== currentUserLocationId && jobPosting.location_id !== null) {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin cannot add applicants to jobs outside their assigned location.'\n      });\n    }\n    db.run('INSERT INTO Applicants (company_id, location_id, job_posting_id, full_name, email, phone_number, notes, application_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)', [companyId, location_id || jobPosting.location_id, job_posting_id, full_name, email, phone_number, notes, application_date],\n    // Use location_id from payload or job posting\n    function (insertErr) {\n      if (insertErr) {\n        console.error(\"Database error creating applicant:\", insertErr);\n        return next(new Error('Failed to create applicant.'));\n      } // Pass error\n      res.status(201).json({\n        message: 'Applicant added successfully!',\n        applicantId: this.lastID\n      });\n    });\n  });\n});\napp.get('/api/applicants', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query4 = req.query,\n    job_posting_id = _req$query4.job_posting_id,\n    status = _req$query4.status,\n    location_id = _req$query4.location_id; // Added job_posting_id, status, location_id filters\n  var _req$user16 = req.user,\n    companyId = _req$user16.companyId,\n    role = _req$user16.role,\n    currentUserId = _req$user16.userId,\n    currentUserLocationId = _req$user16.locationId;\n  var sql = \"SELECT Applicants.*, JobPostings.title AS job_title_name\\n               FROM Applicants\\n               LEFT JOIN JobPostings ON Applicants.job_posting_id = JobPostings.job_posting_id\\n               WHERE Applicants.company_id = ?\";\n  var params = [companyId];\n\n  // Input validation for query parameters\n  var allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired']; // Define valid statuses\n  if (status && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid applicant status filter provided.'\n    });\n  }\n  if (job_posting_id && isNaN(parseInt(job_posting_id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (status) {\n    sql += \" AND Applicants.status = ?\";\n    params.push(status);\n  }\n  if (role === 'location_admin') {\n    if (currentUserLocationId) {\n      sql += \" AND (Applicants.location_id = ? OR Applicants.location_id IS NULL)\"; // Location admin sees applicants for their location or unassigned\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Applicants.user_id = ?\";\n    params.push(currentUserId);\n  } else {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view applicants.'\n    });\n  }\n\n  // Apply job_posting_id filter if provided\n  if (job_posting_id) {\n    sql += \" AND Applicants.job_posting_id = ?\";\n    params.push(job_posting_id);\n  }\n  // Apply location filter from query params for super_admin\n  if (location_id && role === 'super_admin') {\n    sql += \" AND Applicants.location_id = ?\";\n    params.push(location_id);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching applicants:\", err);\n      return next(new Error('Database error fetching applicants.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * PUT /api/applicants/:id\r\n * Updates an applicant's details (e.g., status, notes).\r\n */\napp.put('/api/applicants/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$body1 = req.body,\n    full_name = _req$body1.full_name,\n    email = _req$body1.email,\n    status = _req$body1.status,\n    resume_url = _req$body1.resume_url,\n    notes = _req$body1.notes,\n    location_id = _req$body1.location_id,\n    job_posting_id = _req$body1.job_posting_id,\n    phone_number = _req$body1.phone_number;\n  var _req$user17 = req.user,\n    companyId = _req$user17.companyId,\n    role = _req$user17.role,\n    currentUserLocationId = _req$user17.locationId;\n\n  // Input Validation for Applicant Update\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can update applicant records.'\n    });\n  }\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid applicant ID provided.'\n    });\n  }\n  if (full_name !== undefined && (typeof full_name !== 'string' || full_name.trim() === '')) {\n    return res.status(400).json({\n      error: \"Full name must be a non-empty string if provided.\"\n    });\n  }\n  if (email !== undefined && !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address must be provided if changing email.\"\n    });\n  }\n  if (phone_number !== undefined && (typeof phone_number !== 'string' || phone_number.trim() === '')) {\n    return res.status(400).json({\n      error: \"Phone number must be a non-empty string if provided.\"\n    });\n  }\n  var allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired'];\n  if (status !== undefined && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid status provided.'\n    });\n  }\n  if (resume_url !== undefined && typeof resume_url !== 'string') {\n    // Assuming resume_url is a string URL\n    return res.status(400).json({\n      error: 'Resume URL must be a string if provided.'\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n  if (job_posting_id !== undefined && typeof job_posting_id !== 'number' && job_posting_id !== null) {\n    return res.status(400).json({\n      error: 'Job posting ID must be a number or null if provided.'\n    });\n  }\n  var updateSql = 'UPDATE Applicants SET ';\n  var updateParams = [];\n  var clauses = [];\n  if (full_name !== undefined) {\n    clauses.push('full_name = ?');\n    updateParams.push(full_name);\n  }\n  if (email !== undefined) {\n    clauses.push('email = ?');\n    updateParams.push(email);\n  }\n  if (phone_number !== undefined) {\n    clauses.push('phone_number = ?');\n    updateParams.push(phone_number);\n  }\n  if (status !== undefined) {\n    clauses.push('status = ?');\n    updateParams.push(status);\n  }\n  if (resume_url !== undefined) {\n    clauses.push('resume_url = ?');\n    updateParams.push(resume_url);\n  }\n  if (notes !== undefined) {\n    clauses.push('notes = ?');\n    updateParams.push(notes);\n  }\n\n  // Admins can update location_id or job_posting_id, with restrictions for location_admin\n  if (location_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    } else if (role === 'location_admin') {\n      if (location_id !== currentUserLocationId && location_id !== null) {\n        // location_id can be null (company-wide)\n        return res.status(403).json({\n          error: 'Access Denied: Location admin cannot assign applicants to another location.'\n        });\n      }\n      // If location admin updates applicant location, and it's their location, or setting to null, it's allowed\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    }\n  }\n  if (job_posting_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('job_posting_id = ?');\n      updateParams.push(job_posting_id);\n    } else if (role === 'location_admin') {\n      // Verify new job_posting_id belongs to the location admin's assigned location or is company-wide\n      db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], function (err, job) {\n        if (err) {\n          console.error(\"DB error verifying job posting for update:\", err);\n          return next(new Error('Database error verifying job posting.'));\n        } // Pass error\n        if (!job) {\n          return res.status(400).json({\n            error: 'Job Posting not found or does not belong to your company.'\n          });\n        }\n        if (job.location_id !== null && job.location_id !== currentUserLocationId) {\n          return res.status(403).json({\n            error: 'Access Denied: Location admin cannot assign applicants to jobs outside their assigned location.'\n          });\n        }\n      });\n      clauses.push('job_posting_id = ?');\n      updateParams.push(job_posting_id);\n    }\n  }\n  if (clauses.length === 0) {\n    return res.status(400).json({\n      error: 'No fields provided for update.'\n    });\n  }\n  updateSql += clauses.join(', ') + ' WHERE applicant_id = ? AND company_id = ?';\n  updateParams.push(id, companyId);\n\n  // For location_admin, ensure they can only update applicants within their assigned location\n  if (role === 'location_admin') {\n    updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned applicants too\n    params.push(currentUserLocationId);\n  }\n  db.run(updateSql, updateParams, function (err) {\n    if (err) {\n      console.error(\"Database error updating applicant:\", err);\n      return next(new Error('Failed to update applicant.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Applicant not found or not authorized to update.'\n      });\n    }\n    res.status(200).json({\n      message: 'Applicant updated successfully!'\n    });\n  });\n});\n\n/**\r\n * DELETE /api/applicants/:id\r\n * Deletes an applicant.\r\n * Requires super_admin or location_admin (for their location's applicants).\r\n */\napp[\"delete\"]('/api/applicants/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user18 = req.user,\n    companyId = _req$user18.companyId,\n    role = _req$user18.role,\n    currentUserLocationId = _req$user18.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid applicant ID provided.'\n    });\n  }\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can delete applicants.'\n    });\n  }\n  var sql = 'DELETE FROM Applicants WHERE applicant_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Additional security for location_admin: ensure they only delete applicants in their own location\n  if (role === 'location_admin') {\n    sql += ' AND (location_id = ? OR location_id IS NULL)';\n    params.push(currentUserLocationId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting applicant:\", err);\n      return next(new Error('Failed to delete applicant.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Applicant not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// --- Document Management Routes ---\n\n/**\r\n * POST /api/documents\r\n * Uploads (saves metadata for) a new document.\r\n * Requires authenticated user.\r\n * Note: Actual file storage is assumed to be handled by a separate service (e.g., S3).\r\n * This endpoint only stores the metadata and a URL.\r\n */\napp.post('/api/documents', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body10 = req.body,\n    title = _req$body10.title,\n    file_name = _req$body10.file_name,\n    file_type = _req$body10.file_type,\n    file_url = _req$body10.file_url,\n    description = _req$body10.description;\n  var _req$user19 = req.user,\n    companyId = _req$user19.companyId,\n    userId = _req$user19.userId;\n  var upload_date = new Date().toISOString();\n\n  // Input Validation for Document Upload\n  if (!title || typeof title !== 'string' || title.trim() === '') {\n    return res.status(400).json({\n      error: 'Document title is required and must be a non-empty string.'\n    });\n  }\n  if (!file_name || typeof file_name !== 'string' || file_name.trim() === '') {\n    return res.status(400).json({\n      error: 'File name is required and must be a non-empty string.'\n    });\n  }\n  if (!file_type || typeof file_type !== 'string' || file_type.trim() === '') {\n    return res.status(400).json({\n      error: 'File type is required and must be a non-empty string.'\n    });\n  }\n  // Basic URL validation: checks for http(s) protocol and some content. Can be more robust.\n  var urlRegex = /^https?:\\/\\/[^\\s$.?#].[^\\s]*$/i;\n  if (!file_url || typeof file_url !== 'string' || !urlRegex.test(file_url)) {\n    return res.status(400).json({\n      error: 'A valid file URL (starting with http or https) is required.'\n    });\n  }\n  if (description !== undefined && typeof description !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  db.run('INSERT INTO Documents (company_id, user_id, title, file_name, file_type, file_url, description, upload_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)', [companyId, userId, title, file_name, file_type, file_url, description, upload_date], function (err) {\n    if (err) {\n      console.error(\"Database error uploading document:\", err);\n      return next(new Error('Failed to upload document metadata.')); // Pass error\n    }\n    res.status(201).json({\n      message: 'Document metadata saved successfully!',\n      documentId: this.lastID\n    });\n  });\n});\n\n/**\r\n * GET /api/documents\r\n * Retrieves a list of documents for the company.\r\n * Filters can be added (e.g., by uploader, by type).\r\n * Requires authenticated user. Super admins can see all, others can see own documents.\r\n */\napp.get('/api/documents', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user20 = req.user,\n    companyId = _req$user20.companyId,\n    userId = _req$user20.userId,\n    role = _req$user20.role;\n  var sql = 'SELECT * FROM Documents WHERE company_id = ?';\n  var params = [companyId];\n\n  // Non-super-admins only see their own documents\n  if (role !== 'super_admin') {\n    sql += ' AND user_id = ?';\n    params.push(userId);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching documents:\", err);\n      return next(new Error('Database error fetching documents.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * DELETE /api/documents/:id\r\n * Deletes a document record.\r\n * Requires super_admin or the user who uploaded it.\r\n */\napp[\"delete\"]('/api/documents/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user21 = req.user,\n    companyId = _req$user21.companyId,\n    userId = _req$user21.userId,\n    role = _req$user21.role;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid document ID provided.'\n    });\n  }\n  var sql = 'DELETE FROM Documents WHERE document_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Only super_admin or the original uploader can delete\n  if (role !== 'super_admin') {\n    sql += ' AND user_id = ?';\n    params.push(userId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting document:\", err);\n      return next(new Error('Failed to delete document.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Document not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// Fallback for any other GET request not handled by an API route (serves index.html for SPA behavior)\n// This should always be the LAST route in your Express app\napp.get(/'*'/, function (req, res) {\n  // Correctly serve the index.html from the parent directory\n  res.sendFile(path.join(__dirname, '..', 'index.html'));\n});\n\n// --- Global Error Handling Middleware ---\n// This should be the very last middleware in your Express app\napp.use(function (err, req, res, next) {\n  console.error(\"Unhandled Error: \".concat(err.stack)); // Log the full stack trace for debugging\n  // Respond with a generic error message for the client\n  res.status(500).json({\n    error: 'An unexpected server error occurred. Please try again later.'\n    // In development, you might send more details:\n    // message: err.message,\n    // stack: process.env.NODE_ENV === 'development' ? err.stack : undefined\n  });\n});\n\n// --- Server Start ---\n// This conditional export allows the app to be imported for testing\n// without starting the server listener when the test runner requires it.\nif (require.main === module) {\n  // Only listen if this file is run directly (not required as a module)\n  app.listen(PORT, function () {\n    console.log(\"Server is running successfully on http://localhost:\".concat(PORT));\n  });\n} else {\n  // Export the app for testing purposes\n  module.exports = app;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiX2ludm9rZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsImV4cHJlc3MiLCJyZXF1aXJlIiwic3FsaXRlMyIsInZlcmJvc2UiLCJiY3J5cHQiLCJqd3QiLCJjb3JzIiwicGF0aCIsImNzdiIsIl9yZXF1aXJlIiwiUmVhZGFibGUiLCJyYXRlTGltaXQiLCJtb3JnYW4iLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJtYWluIiwibW9kdWxlIiwiY29uZmlnIiwic3RyaXBlSW5zdGFuY2UiLCJTVFJJUEVfU0VDUkVUX0tFWSIsImFwcCIsImFsbG93ZWRPcmlnaW5zIiwiQ09SU19PUklHSU4iLCJzcGxpdCIsInB1c2giLCJjb3JzT3B0aW9ucyIsIm9yaWdpbiIsImNhbGxiYWNrIiwiaW5jbHVkZXMiLCJtc2ciLCJFcnJvciIsImluZGV4T2YiLCJtZXRob2RzIiwiY3JlZGVudGlhbHMiLCJvcHRpb25zU3VjY2Vzc1N0YXR1cyIsInVzZSIsIlBPUlQiLCJTVFJJUEVfV0VCSE9PS19TRUNSRVQiLCJhdXRoTGltaXRlciIsIndpbmRvd01zIiwibWF4IiwibWVzc2FnZSIsInN0YW5kYXJkSGVhZGVycyIsImxlZ2FjeUhlYWRlcnMiLCJwb3N0IiwicmF3IiwidHlwZSIsIl9yZWYiLCJfY2FsbGVlIiwicmVxIiwicmVzIiwic2lnIiwiZXZlbnQiLCJzZXNzaW9uIiwidXNlcklkIiwicGxhbklkIiwic3Vic2NyaXB0aW9uVXBkYXRlZCIsInN1YnNjcmlwdGlvbkRlbGV0ZWQiLCJpbnZvaWNlU3VjY2VlZGVkIiwiaW52b2ljZUZhaWxlZCIsIl90IiwiX3QyIiwiX2NvbnRleHQiLCJoZWFkZXJzIiwid2ViaG9va3MiLCJjb25zdHJ1Y3RFdmVudCIsImJvZHkiLCJjb25zb2xlIiwiZXJyb3IiLCJjb25jYXQiLCJzdGF0dXMiLCJzZW5kIiwiZGF0YSIsIm9iamVjdCIsImxvZyIsImlkIiwibWV0YWRhdGEiLCJwYXltZW50X3N0YXR1cyIsImRiIiwicnVuIiwiY3VzdG9tZXIiLCJzdWJzY3JpcHRpb24iLCJlcnIiLCJwbGFuIiwianNvbiIsInJlY2VpdmVkIiwiX3giLCJfeDIiLCJKV1RfU0VDUkVUIiwiam9pbiIsIl9fZGlybmFtZSIsIm1heEFnZSIsImltbXV0YWJsZSIsIkRhdGFiYXNlIiwiZXhpdCIsImdldCIsInNlcmlhbGl6ZSIsImF1dGhlbnRpY2F0ZVRva2VuIiwibmV4dCIsImF1dGhIZWFkZXIiLCJ0b2tlbiIsInZlcmlmeSIsInVzZXIiLCJpc1ZhbGlkRW1haWwiLCJlbWFpbCIsInRlc3QiLCJfcmVmMiIsIl9jYWxsZWUyIiwiX3JlcSRib2R5IiwiY29tcGFueV9uYW1lIiwiZnVsbF9uYW1lIiwicGFzc3dvcmQiLCJwYXNzd29yZF9oYXNoIiwiX3QzIiwiX2NvbnRleHQyIiwidHJpbSIsImhhc2giLCJuZXdDb21wYW55SWQiLCJsYXN0SUQiLCJ1c2VySW5zZXJ0RXJyIiwiX3gzIiwiX3g0IiwiX3g1IiwiX3JlcSRib2R5MiIsIl9yZWYzIiwiX2NhbGxlZTMiLCJpc01hdGNoIiwicGF5bG9hZCIsIl9jb250ZXh0MyIsImNvbXBhcmUiLCJ1c2VyX2lkIiwicm9sZSIsImZ1bGxOYW1lIiwiY29tcGFueUlkIiwiY29tcGFueV9pZCIsImxvY2F0aW9uSWQiLCJsb2NhdGlvbl9pZCIsInN1YnNjcmlwdGlvblN0YXR1cyIsInN1YnNjcmlwdGlvbl9zdGF0dXMiLCJwbGFuX2lkIiwic2lnbiIsImV4cGlyZXNJbiIsIl94NiIsIl94NyIsIl9yZWY0IiwiX2NhbGxlZTQiLCJfcmVxJGJvZHkzIiwiX3JlcSR1c2VyIiwiX3Q0IiwiX2NvbnRleHQ0IiwibG9jYXRpb24iLCJfeDgiLCJfeDkiLCJfeDAiLCJfcmVmNSIsIl9jYWxsZWU1IiwiX3JlcSRib2R5NCIsInBvc2l0aW9uIiwiZW1wbG95ZWVfaWQiLCJfcmVxJHVzZXIyIiwiY3VycmVudFVzZXJMb2NhdGlvbklkIiwiaXNMb2NhdGlvbklkVmFsaWQiLCJsb2NhdGlvblZlcmlmaWNhdGlvbiIsIl90NSIsIl9jb250ZXh0NSIsImlzTmFOIiwidW5kZWZpbmVkIiwicmVqZWN0IiwiX3gxIiwiX3gxMCIsIl94MTEiLCJfcmVxJHVzZXIzIiwicHV0IiwiX3JlZjYiLCJfY2FsbGVlNyIsIl9yZXEkYm9keTUiLCJjdXJyZW50UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsIl9jb250ZXh0NyIsIl9yZWY3IiwiX2NhbGxlZTYiLCJ1cGRhdGVTcWwiLCJ1cGRhdGVQYXJhbXMiLCJjbGF1c2VzIiwiY2hhbmdlc01hZGUiLCJleGlzdGluZ1VzZXIiLCJuZXdQYXNzd29yZEhhc2giLCJfdDYiLCJfY29udGV4dDYiLCJyb3ciLCJ1cGRhdGVFcnIiLCJjaGFuZ2VzIiwiZmV0Y2hFcnIiLCJ1cGRhdGVkVXNlciIsIm5ld1BheWxvYWQiLCJuZXdUb2tlbiIsIl94MTUiLCJfeDE2IiwiX3gxMiIsIl94MTMiLCJfeDE0IiwiX3JlcSR1c2VyNCIsInNxbCIsInBhcmFtcyIsImFsbCIsInJvd3MiLCJfcmVxJGJvZHk2IiwibG9jYXRpb25fbmFtZSIsImxvY2F0aW9uX2FkZHJlc3MiLCJfcmVxJHVzZXI1IiwiX3JlcSR1c2VyNiIsInBhcnNlSW50IiwiX3JlcSR1c2VyNyIsImN1cnJlbnRVc2VySWQiLCJfcmVxJHF1ZXJ5IiwicXVlcnkiLCJmaWx0ZXJSb2xlIiwiZmlsdGVyTG9jYXRpb25JZCIsImFsbG93ZWRSb2xlcyIsIl9yZXEkdXNlcjgiLCJhdXRoZW50aWNhdGVkVXNlcklkIiwiX3JlZjgiLCJfY2FsbGVlOCIsIl9yZXEkdXNlcjkiLCJhbGxvd2VkUGxhbklkcyIsInByaWNlSWRNYXAiLCJzdHJpcGVQcmljZUlkIiwiY3VzdG9tZXJJZCIsInVzZXJSZWNvcmQiLCJfdDciLCJfY29udGV4dDgiLCJTVFJJUEVfUFJJQ0VfSURfUFJPIiwiU1RSSVBFX1BSSUNFX0lEX0VOVCIsInN0cmlwZV9jdXN0b21lcl9pZCIsImN1c3RvbWVycyIsImNoZWNrb3V0Iiwic2Vzc2lvbnMiLCJtb2RlIiwibGluZV9pdGVtcyIsInByaWNlIiwicXVhbnRpdHkiLCJzdWNjZXNzX3VybCIsIkZST05URU5EX1VSTCIsImNhbmNlbF91cmwiLCJ1cmwiLCJfeDE3IiwiX3gxOCIsIl94MTkiLCJfcmVxJGJvZHk3Iiwic3RhcnRfdGltZSIsImVuZF90aW1lIiwibm90ZXMiLCJfcmVxJHVzZXIwIiwiRGF0ZSIsImdldFRpbWUiLCJlbXBsb3llZSIsImluc2VydEVyciIsInNjaGVkdWxlSWQiLCJfcmVxJHF1ZXJ5MiIsInN0YXJ0X2RhdGUiLCJlbmRfZGF0ZSIsIl9yZXEkdXNlcjEiLCJfcmVxJHVzZXIxMCIsIl9yZXEkYm9keTgiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicmVxdWlyZW1lbnRzIiwiX3JlcSR1c2VyMTEiLCJjcmVhdGVkX2RhdGUiLCJ0b0lTT1N0cmluZyIsIl9yZXEkcXVlcnkzIiwiX3JlcSR1c2VyMTIiLCJhbGxvd2VkU3RhdHVzZXMiLCJfcmVxJGJvZHk5IiwiX3JlcSR1c2VyMTMiLCJfcmVxJHVzZXIxNCIsIl9yZXEkYm9keTAiLCJqb2JfcG9zdGluZ19pZCIsInBob25lX251bWJlciIsIl9yZXEkdXNlcjE1IiwiYXBwbGljYXRpb25fZGF0ZSIsImpvYlBvc3RpbmciLCJhcHBsaWNhbnRJZCIsIl9yZXEkcXVlcnk0IiwiX3JlcSR1c2VyMTYiLCJfcmVxJGJvZHkxIiwicmVzdW1lX3VybCIsIl9yZXEkdXNlcjE3Iiwiam9iIiwiX3JlcSR1c2VyMTgiLCJfcmVxJGJvZHkxMCIsImZpbGVfbmFtZSIsImZpbGVfdHlwZSIsImZpbGVfdXJsIiwiX3JlcSR1c2VyMTkiLCJ1cGxvYWRfZGF0ZSIsInVybFJlZ2V4IiwiZG9jdW1lbnRJZCIsIl9yZXEkdXNlcjIwIiwiX3JlcSR1c2VyMjEiLCJzZW5kRmlsZSIsInN0YWNrIiwibGlzdGVuIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFx4YXJjeVxcT25lRHJpdmVcXERlc2t0b3BcXG9uYm9hcmRmbG93XFxiYWNrZW5kXFx0ZXN0XFwiLCJzb3VyY2VzIjpbInNlcnZlci50ZXN0LmNqcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAtLS0gSW1wb3J0cyAtLS1cclxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3Qgc3FsaXRlMyA9IHJlcXVpcmUoJ3NxbGl0ZTMnKS52ZXJib3NlKCk7XHJcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7XHJcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xyXG5jb25zdCBjb3JzID0gcmVxdWlyZSgnY29ycycpOyAvLyBJbXBvcnQgY29yc1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5jb25zdCBjc3YgPSByZXF1aXJlKCdjc3YtcGFyc2VyJyk7IC8vIEZvciBDU1YgcGFyc2luZ1xyXG5jb25zdCB7IFJlYWRhYmxlIH0gPSByZXF1aXJlKCdzdHJlYW0nKTsgLy8gRm9yIGNyZWF0aW5nIGEgcmVhZGFibGUgc3RyZWFtIGZyb20gYSBzdHJpbmdcclxuY29uc3QgcmF0ZUxpbWl0ID0gcmVxdWlyZSgnZXhwcmVzcy1yYXRlLWxpbWl0Jyk7IC8vIEltcG9ydCByYXRlLWxpbWl0aW5nIG1pZGRsZXdhcmVcclxuY29uc3QgbW9yZ2FuID0gcmVxdWlyZSgnbW9yZ2FuJyk7IC8vIEltcG9ydCBtb3JnYW4gZm9yIHJlcXVlc3QgbG9nZ2luZ1xyXG5cclxuLy8gTG9hZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZnJvbSAuZW52IGZpbGUgaW4gZGV2ZWxvcG1lbnRcclxuLy8gSU1QT1JUQU5UOiBPbmx5IGxvYWQgLmVudiBpZiBzZXJ2ZXIuanMgaXMgcnVuIGRpcmVjdGx5LCBOT1Qgd2hlbiByZXF1aXJlZCBieSB0ZXN0cy5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgcmVxdWlyZS5tYWluID09PSBtb2R1bGUpIHtcclxuICAgIHJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xyXG59XHJcblxyXG4vLyBJbXBvcnQgdGhlIFN0cmlwZSBsaWJyYXJ5IGFuZCBpbml0aWFsaXplIGl0IHdpdGggeW91ciBzZWNyZXQga2V5XHJcbi8vIFVzZSBwcm9jZXNzLmVudi5TVFJJUEVfU0VDUkVUX0tFWSBmb3IgcHJvZHVjdGlvblxyXG5jb25zdCBzdHJpcGVJbnN0YW5jZSA9IHJlcXVpcmUoJ3N0cmlwZScpKHByb2Nlc3MuZW52LlNUUklQRV9TRUNSRVRfS0VZIHx8ICdza19saXZlXzUxUmE0UkpHMDZOSHJ3c1k5dVpySHBXeVRySm0yMXFlaDNXV0VDVXVwWDR6VTZiTmJqYTE1aEhFeDZOTGxEOWY3WXZ5YTZCNkI2OU5JSEF0VG1UZjhRT0g1MDBsOFo3enJIWScpO1xyXG5cclxuLy8gLS0tIEFwcCBJbml0aWFsaXphdGlvbiAtLS1cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuLy8gQ29uZmlndXJlIENPUlMgZm9yIHByb2R1Y3Rpb24gZW52aXJvbm1lbnRcclxuY29uc3QgYWxsb3dlZE9yaWdpbnMgPSBwcm9jZXNzLmVudi5DT1JTX09SSUdJTiA/IHByb2Nlc3MuZW52LkNPUlNfT1JJR0lOLnNwbGl0KCcsJykgOiBbJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCddOyAvLyBEZWZhdWx0IHRvIGxvY2FsaG9zdCBmb3IgZGV2ZWxvcG1lbnRcclxuXHJcbi8vIEFkZCAnbnVsbCcgdG8gYWxsb3dlZCBvcmlnaW5zIGlmIG5vdCBpbiBwcm9kdWN0aW9uIGFuZCBub3QgZXhwbGljaXRseSBzZXQgZm9yIGxvY2FsIGZpbGUgYWNjZXNzXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFwcm9jZXNzLmVudi5DT1JTX09SSUdJTikge1xyXG4gICAgYWxsb3dlZE9yaWdpbnMucHVzaCgnbnVsbCcpO1xyXG59XHJcblxyXG5jb25zdCBjb3JzT3B0aW9ucyA9IHtcclxuICAgIG9yaWdpbjogZnVuY3Rpb24gKG9yaWdpbiwgY2FsbGJhY2spIHtcclxuICAgICAgICAvLyBBbGxvdyByZXF1ZXN0cyB3aXRoIG5vIG9yaWdpbiAobGlrZSBtb2JpbGUgYXBwcywgY3VybCwgb3IgbG9jYWwgZmlsZSBhY2Nlc3MgaWYgJ251bGwnIGlzIGluIGFsbG93ZWRPcmlnaW5zKVxyXG4gICAgICAgIGlmICghb3JpZ2luKSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmICdudWxsJyBpcyBleHBsaWNpdGx5IGFsbG93ZWQgb3IgaWYgd2UncmUgaW4gZGV2IGFuZCBubyBDT1JTX09SSUdJTiBpcyBzZXRcclxuICAgICAgICAgICAgaWYgKGFsbG93ZWRPcmlnaW5zLmluY2x1ZGVzKCdudWxsJykgfHwgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXByb2Nlc3MuZW52LkNPUlNfT1JJR0lOKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9ICdUaGUgQ09SUyBwb2xpY3kgZm9yIHRoaXMgc2l0ZSBkb2VzIG5vdCBhbGxvdyBhY2Nlc3MgZnJvbSB0aGUgc3BlY2lmaWVkIE9yaWdpbi4nO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKG1zZyksIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhbGxvd2VkT3JpZ2lucy5pbmRleE9mKG9yaWdpbikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9ICdUaGUgQ09SUyBwb2xpY3kgZm9yIHRoaXMgc2l0ZSBkb2VzIG5vdCBhbGxvdyBhY2Nlc3MgZnJvbSB0aGUgc3BlY2lmaWVkIE9yaWdpbi4nO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKG1zZyksIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRydWUpO1xyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6ICdHRVQsSEVBRCxQVVQsUEFUQ0gsUE9TVCxERUxFVEUnLFxyXG4gICAgY3JlZGVudGlhbHM6IHRydWUsIC8vIEFsbG93IGNvb2tpZXMgdG8gYmUgc2VudFxyXG4gICAgb3B0aW9uc1N1Y2Nlc3NTdGF0dXM6IDIwNCAvLyBTb21lIGxlZ2FjeSBicm93c2VycyAoSUUxMSwgdmFyaW91cyBTbWFydFRWcykgY2hva2Ugb24gMjA0XHJcbn07XHJcbmFwcC51c2UoY29ycyhjb3JzT3B0aW9ucykpO1xyXG5cclxuXHJcbi8vIFVzZSBwcm9jZXNzLmVudi5QT1JUIGZvciBwcm9kdWN0aW9uLCBmYWxsYmFjayB0byAzMDAwIGZvciBsb2NhbCBkZXZlbG9wbWVudFxyXG5jb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwO1xyXG5cclxuLy8gRGVmaW5lIGEgd2ViaG9vayBzZWNyZXQgZm9yIFN0cmlwZS4gVGhpcyBzaG91bGQgYWxzbyBiZSBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZS5cclxuY29uc3QgU1RSSVBFX1dFQkhPT0tfU0VDUkVUID0gcHJvY2Vzcy5lbnYuU1RSSVBFX1dFQkhPT0tfU0VDUkVUIHx8ICd3aHNlY19ZT1VSX1dFQkhPT0tfU0VDUkVUJztcclxuXHJcbi8vIC0tLSBSYXRlIExpbWl0aW5nIENvbmZpZ3VyYXRpb24gLS0tXHJcbmNvbnN0IGF1dGhMaW1pdGVyID0gcmF0ZUxpbWl0KHtcclxuICAgIHdpbmRvd01zOiAxNSAqIDYwICogMTAwMCwgLy8gMTUgbWludXRlc1xyXG4gICAgbWF4OiAxMCwgLy8gTWF4IDEwIHJlcXVlc3RzIHBlciAxNSBtaW51dGVzIHBlciBJUFxyXG4gICAgbWVzc2FnZTogJ1RvbyBtYW55IGxvZ2luL3JlZ2lzdHJhdGlvbiBhdHRlbXB0cyBmcm9tIHRoaXMgSVAsIHBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgMTUgbWludXRlcycsXHJcbiAgICBzdGFuZGFyZEhlYWRlcnM6IHRydWUsIC8vIFJldHVybiByYXRlIGxpbWl0IGluZm8gaW4gdGhlIGBSYXRlTGltaXQtKmAgaGVhZGVyc1xyXG4gICAgbGVnYWN5SGVhZGVyczogZmFsc2UsIC8vIERpc2FibGUgdGhlIGBYLVJhdGVMaW1pdC0qYCBoZWFkZXJzXHJcbn0pO1xyXG5cclxuLy8gLS0tIE1pZGRsZXdhcmUgZm9yIFN0cmlwZSBXZWJob29rIChNVVNUIGJlIGJlZm9yZSBleHByZXNzLmpzb24oKSBmb3Igb3RoZXIgcm91dGVzKSAtLVxyXG4vLyBUaGlzIHJvdXRlIG5lZWRzIHRoZSByYXcgYm9keSBmb3Igc2lnbmF0dXJlIHZlcmlmaWNhdGlvbi5cclxuYXBwLnBvc3QoJy9hcGkvc3RyaXBlLXdlYmhvb2snLCBleHByZXNzLnJhdyh7dHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nfSksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgc2lnID0gcmVxLmhlYWRlcnNbJ3N0cmlwZS1zaWduYXR1cmUnXTtcclxuXHJcbiAgICBsZXQgZXZlbnQ7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBldmVudCA9IHN0cmlwZUluc3RhbmNlLndlYmhvb2tzLmNvbnN0cnVjdEV2ZW50KHJlcS5ib2R5LCBzaWcsIFNUUklQRV9XRUJIT09LX1NFQ1JFVCk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBXZWJob29rIEVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChgV2ViaG9vayBFcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBIYW5kbGUgdGhlIGV2ZW50XHJcbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcclxuICAgICAgICBjYXNlICdjaGVja291dC5zZXNzaW9uLmNvbXBsZXRlZCc6XHJcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBldmVudC5kYXRhLm9iamVjdDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NoZWNrb3V0IFNlc3Npb24gQ29tcGxldGVkOicsIHNlc3Npb24uaWQpO1xyXG4gICAgICAgICAgICBjb25zdCB1c2VySWQgPSBzZXNzaW9uLm1ldGFkYXRhLnVzZXJJZDtcclxuICAgICAgICAgICAgY29uc3QgcGxhbklkID0gc2Vzc2lvbi5tZXRhZGF0YS5wbGFuSWQ7XHJcbiAgICAgICAgICAgIGlmIChzZXNzaW9uLnBheW1lbnRfc3RhdHVzID09PSAncGFpZCcgJiYgdXNlcklkICYmIHBsYW5JZCkge1xyXG4gICAgICAgICAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAgICAgICAgICdVUERBVEUgVXNlcnMgU0VUIHN0cmlwZV9jdXN0b21lcl9pZCA9ID8sIHN0cmlwZV9zdWJzY3JpcHRpb25faWQgPSA/LCBzdWJzY3JpcHRpb25fc3RhdHVzID0gPywgcGxhbl9pZCA9ID8gV0hFUkUgdXNlcl9pZCA9ID8nLFxyXG4gICAgICAgICAgICAgICAgICAgIFtzZXNzaW9uLmN1c3RvbWVyLCBzZXNzaW9uLnN1YnNjcmlwdGlvbiwgJ2FjdGl2ZScsIHBsYW5JZCwgdXNlcklkXSxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgY29uc29sZS5lcnJvcignRGF0YWJhc2UgdXBkYXRlIGVycm9yIGZvciBjaGVja291dC5zZXNzaW9uLmNvbXBsZXRlZDonLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgY29uc29sZS5sb2coYFVzZXIgJHt1c2VySWR9IHN1YnNjcmlwdGlvbiB1cGRhdGVkIHRvICR7cGxhbklkfSAoYWN0aXZlKS5gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2N1c3RvbWVyLnN1YnNjcmlwdGlvbi51cGRhdGVkJzpcclxuICAgICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uVXBkYXRlZCA9IGV2ZW50LmRhdGEub2JqZWN0O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU3Vic2NyaXB0aW9uIFVwZGF0ZWQ6Jywgc3Vic2NyaXB0aW9uVXBkYXRlZC5pZCk7XHJcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25VcGRhdGVkLmN1c3RvbWVyICYmIHN1YnNjcmlwdGlvblVwZGF0ZWQuc3RhdHVzICYmIHN1YnNjcmlwdGlvblVwZGF0ZWQucGxhbiAmJiBzdWJzY3JpcHRpb25VcGRhdGVkLnBsYW4uaWQpIHtcclxuICAgICAgICAgICAgICAgIGRiLnJ1bihcclxuICAgICAgICAgICAgICAgICAgICAnVVBEQVRFIFVzZXJzIFNFVCBzdWJzY3JpcHRpb25fc3RhdHVzID0gPywgcGxhbl9pZCA9ID8gV0hFUkUgc3RyaXBlX2N1c3RvbWVyX2lkID0gPycsXHJcbiAgICAgICAgICAgICAgICAgICAgW3N1YnNjcmlwdGlvblVwZGF0ZWQuc3RhdHVzLCBzdWJzY3JpcHRpb25VcGRhdGVkLnBsYW4uaWQsIHN1YnNjcmlwdGlvblVwZGF0ZWQuY3VzdG9tZXJdLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSB1cGRhdGUgZXJyb3IgZm9yIGN1c3RvbWVyLnN1YnNjcmlwdGlvbi51cGRhdGVkOicsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBjb25zb2xlLmxvZyhgU3Vic2NyaXB0aW9uIGZvciBjdXN0b21lciAke3N1YnNjcmlwdGlvblVwZGF0ZWQuY3VzdG9tZXJ9IHN0YXR1cyB1cGRhdGVkIHRvICR7c3Vic2NyaXB0aW9uVXBkYXRlZC5zdGF0dXN9IGFuZCBwbGFuIHRvICR7c3Vic2NyaXB0aW9uVXBkYXRlZC5wbGFuLmlkfS5gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2N1c3RvbWVyLnN1YnNjcmlwdGlvbi5kZWxldGVkJzpcclxuICAgICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uRGVsZXRlZCA9IGV2ZW50LmRhdGEub2JqZWN0O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU3Vic2NyaXB0aW9uIERlbGV0ZWQ6Jywgc3Vic2NyaXB0aW9uRGVsZXRlZC5pZCk7XHJcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25EZWxldGVkLmN1c3RvbWVyKSB7XHJcbiAgICAgICAgICAgICAgICBkYi5ydW4oXHJcbiAgICAgICAgICAgICAgICAgICAgJ1VQREFURSBVc2VycyBTRVQgc3Vic2NyaXB0aW9uX3N0YXR1cyA9ID8sIHBsYW5faWQgPSA/LCBzdHJpcGVfc3Vic2NyaXB0aW9uX2lkID0gTlVMTCBXSEVSRSBzdHJpcGVfY3VzdG9tZXJfaWQgPSA/JyxcclxuICAgICAgICAgICAgICAgICAgICBbJ2NhbmNlbGxlZCcsICdmcmVlJywgc3Vic2NyaXB0aW9uRGVsZXRlZC5jdXN0b21lcl0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIHVwZGF0ZSBlcnJvciBmb3IgY3VzdG9tZXIuc3Vic2NyaXB0aW9uLmRlbGV0ZWQ6JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGNvbnNvbGUubG9nKGBTdWJzY3JpcHRpb24gZm9yIGN1c3RvbWVyICR7c3Vic2NyaXB0aW9uRGVsZXRlZC5jdXN0b21lcn0gbWFya2VkIGFzIGNhbmNlbGxlZCBhbmQgcmV2ZXJ0ZWQgdG8gZnJlZS5gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2ludm9pY2UucGF5bWVudF9zdWNjZWVkZWQnOlxyXG4gICAgICAgICAgICBjb25zdCBpbnZvaWNlU3VjY2VlZGVkID0gZXZlbnQuZGF0YS5vYmplY3Q7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbnZvaWNlIFBheW1lbnQgU3VjY2VlZGVkOicsIGludm9pY2VTdWNjZWVkZWQuaWQpO1xyXG4gICAgICAgICAgICBpZiAoaW52b2ljZVN1Y2NlZWRlZC5zdWJzY3JpcHRpb24gJiYgaW52b2ljZVN1Y2NlZWRlZC5jdXN0b21lcikge1xyXG4gICAgICAgICAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAgICAgICAgICdVUERBVEUgVXNlcnMgU0VUIHN1YnNjcmlwdGlvbl9zdGF0dXMgPSA/IFdIRVJFIHN0cmlwZV9zdWJzY3JpcHRpb25faWQgPSA/IEFORCBzdHJpcGVfY3VzdG9tZXJfaWQgPSA/JyxcclxuICAgICAgICAgICAgICAgICAgICBbJ2FjdGl2ZScsIGludm9pY2VTdWNjZWVkZWQuc3Vic2NyaXB0aW9uLCBpbnZvaWNlU3VjY2VlZGVkLmN1c3RvbWVyXSxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgY29uc29sZS5lcnJvcignRGF0YWJhc2UgdXBkYXRlIGVycm9yIGZvciBpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkOicsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBjb25zb2xlLmxvZyhgU3Vic2NyaXB0aW9uICR7aW52b2ljZVN1Y2NlZWRlZC5zdWJzY3JpcHRpb259IHN0YXR1cyBzZXQgdG8gYWN0aXZlLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnaW52b2ljZS5wYXltZW50X2ZhaWxlZCc6XHJcbiAgICAgICAgICAgIGNvbnN0IGludm9pY2VGYWlsZWQgPSBldmVudC5kYXRhLm9iamVjdDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ludm9pY2UgUGF5bWVudCBGYWlsZWQ6JywgaW52b2ljZUZhaWxlZC5pZCk7XHJcbiAgICAgICAgICAgIGlmIChpbnZvaWNlRmFpbGVkLnN1YnNjcmlwdGlvbiAmJiBpbnZvaWNlRmFpbGVkLmN1c3RvbWVyKSB7XHJcbiAgICAgICAgICAgICAgICBkYi5ydW4oXHJcbiAgICAgICAgICAgICAgICAgICAgJ1VQREFURSBVc2VycyBTRVQgc3Vic2NyaXB0aW9uX3N0YXR1cyA9ID8gV0hFUkUgc3RyaXBlX3N1YnNjcmlwdGlvbl9pZCA9ID8gQU5EIHN0cmlwZV9jdXN0b21lcl9pZCA9ID8nLFxyXG4gICAgICAgICAgICAgICAgICAgIFsncGFzdF9kdWUnLCBpbnZvaWNlRmFpbGVkLnN1YnNjcmlwdGlvbiwgaW52b2ljZUZhaWxlZC5jdXN0b21lcl0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIHVwZGF0ZSBlcnJvciBmb3IgaW52b2ljZS5wYXltZW50X2ZhaWxlZDonLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgY29uc29sZS5sb2coYFN1YnNjcmlwdGlvbiAke2ludm9pY2VGYWlsZWQuc3Vic2NyaXB0aW9ufSBzdGF0dXMgc2V0IHRvIHBhc3RfZHVlLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFVuaGFuZGxlZCBldmVudCB0eXBlICR7ZXZlbnQudHlwZX1gKTtcclxuICAgIH1cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcmVjZWl2ZWQ6IHRydWUgfSk7XHJcbn0pO1xyXG5cclxuLy8gSU1QT1JUQU5UOiBleHByZXNzLmpzb24oKSBmb3IgcGFyc2luZyBKU09OIHJlcXVlc3QgYm9kaWVzIE1VU1QgY29tZSBBRlRFUiB0aGUgd2ViaG9vayByb3V0ZVxyXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcclxuXHJcbi8vIC0tLSBKV1QgU2VjcmV0IC0tLVxyXG4vLyBDUlVDSUFMIEZPUiBURVNUSU5HOiBEaXJlY3RseSBhY2Nlc3MgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB3aXRob3V0IGZhbGxiYWNrLlxyXG4vLyBUaGlzIGVuc3VyZXMgdGVzdHMgY29udHJvbCB0aGUgc2VjcmV0IHVzZWQgYnkgdGhlIGFwcCBpbnN0YW5jZS5cclxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQ7IC8vIEVuc3VyZSBpdCAqbXVzdCogY29tZSBmcm9tIHByb2Nlc3MuZW52XHJcblxyXG4vLyAtLS0gUmVxdWVzdCBMb2dnaW5nICh1c2luZyBNb3JnYW4pIC0tLVxyXG4vLyAnZGV2JyBmb3JtYXQgaXMgZ29vZCBmb3IgZGV2ZWxvcG1lbnQsICdjb21iaW5lZCcgb3IgJ3RpbnknIGZvciBwcm9kdWN0aW9uIGxvZ3NcclxuYXBwLnVzZShtb3JnYW4oJ2RldicpKTtcclxuXHJcbi8vIC0tLSBTZXJ2ZSBTdGF0aWMgRmlsZXMgKEZyb250ZW5kKSB3aXRoIENhY2hpbmcgLS0tXHJcbi8vIFRoaXMgbWlkZGxld2FyZSBzZXJ2ZXMgc3RhdGljIGZpbGVzIGZyb20gdGhlICdvbmJvYXJkZmxvdycgcm9vdCBkaXJlY3RvcnlcclxuLy8gYW5kIHNldHMgQ2FjaGUtQ29udHJvbCBoZWFkZXJzIGZvciBicm93c2VyIGNhY2hpbmcuXHJcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJyksIHtcclxuICAgIG1heEFnZTogJzdkJywgLy8gQ2FjaGUgc3RhdGljIGFzc2V0cyBmb3IgNyBkYXlzIChlLmcuLCBDU1MsIEpTLCBpbWFnZXMsIGZhdmljb24pXHJcbiAgICBpbW11dGFibGU6IGZhbHNlIC8vIFNldCB0byB0cnVlIGlmIGFzc2V0IGZpbGVuYW1lcyBpbmNsdWRlIGNvbnRlbnQgaGFzaGVzIChlLmcuLCBhcHAubWluLmpzP3Y9aGFzaClcclxufSkpO1xyXG5cclxuLy8gLS0tIERhdGFiYXNlIFNldHVwIC0tLVxyXG5jb25zdCBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlKCcuL29uYm9hcmRmbG93LmRiJywgKGVycikgPT4ge1xyXG4gICAgaWYgKGVycikge1xyXG4gICAgICAgIC8vIExvZyBkYXRhYmFzZSBjb25uZWN0aW9uIGVycm9yIGFuZCBleGl0XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9wZW5pbmcgZGF0YWJhc2U6XCIsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7IC8vIEV4aXQgcHJvY2VzcyBpZiBkYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxzXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byB0aGUgZGF0YWJhc2UuXCIpO1xyXG4gICAgICAgIGRiLmdldChcIlBSQUdNQSBmb3JlaWduX2tleXMgPSBPTlwiKTtcclxuICAgICAgICBkYi5zZXJpYWxpemUoKCkgPT4ge1xyXG4gICAgICAgICAgICBkYi5ydW4oYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIENvbXBhbmllcyAoY29tcGFueV9pZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsIGNvbXBhbnlfbmFtZSBURVhUIE5PVCBOVUxMIFVOSVFVRSlgKTtcclxuICAgICAgICAgICAgZGIucnVuKGBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBMb2NhdGlvbnMgKGxvY2F0aW9uX2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCwgY29tcGFueV9pZCBJTlRFR0VSLCBsb2NhdGlvbl9uYW1lIFRFWFQgTk9UIE5VTEwsIGxvY2F0aW9uX2FkZHJlc3MgVEVYVCBOT1QgTlVMTCwgRk9SRUlHTiBLRVkgKGNvbXBhbnlfaWQpIFJFRkVSRU5DRVMgQ29tcGFuaWVzKGNvbXBhbnlfaWQpIE9OIERFTEVURSBDQVNDQURFKWApO1xyXG4gICAgICAgICAgICBkYi5ydW4oYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFVzZXJzIChcclxuICAgICAgICAgICAgICAgIHVzZXJfaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxyXG4gICAgICAgICAgICAgICAgY29tcGFueV9pZCBJTlRFR0VSLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25faWQgSU5URUdFUixcclxuICAgICAgICAgICAgICAgIGZ1bGxfbmFtZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgZW1haWwgVEVYVCBOT1QgTlVMTCBVTklRVUUsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZF9oYXNoIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiBURVhULFxyXG4gICAgICAgICAgICAgICAgZW1wbG95ZWVfaWQgVEVYVCxcclxuICAgICAgICAgICAgICAgIHJvbGUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIHN0cmlwZV9jdXN0b21lcl9pZCBURVhULFxyXG4gICAgICAgICAgICAgICAgc3RyaXBlX3N1YnNjcmlwdGlvbl9pZCBURVhULFxyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uX3N0YXR1cyBURVhULFxyXG4gICAgICAgICAgICAgICAgcGxhbl9pZCBURVhULFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGNvbXBhbnlfaWQpIFJFRkVSRU5DRVMgQ29tcGFuaWVzKGNvbXBhbnlfaWQpIE9OIERFTEVURSBDQVNDQURFLFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGxvY2F0aW9uX2lkKSBSRUZFUkVOQ0VTIExvY2F0aW9ucyhsb2NhdGlvbl9pZCkgT04gREVMRVRFIENBU0NBREVcclxuICAgICAgICAgICAgKWApO1xyXG4gICAgICAgICAgICBkYi5ydW4oYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFNjaGVkdWxlcyAoXHJcbiAgICAgICAgICAgICAgICBzY2hlZHVsZV9pZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXHJcbiAgICAgICAgICAgICAgICBlbXBsb3llZV9pZCBJTlRFR0VSIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25faWQgSU5URUdFUiBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGVuZF90aW1lIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBub3RlcyBURVhULFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGVtcGxveWVlX2lkKSBSRUZFUkVOQ0VTIFVzZXJzKHVzZXJfaWQpIE9OIERFTEVURSBDQVNDQURFLFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGxvY2F0aW9uX2lkKSBSRUZFUkVOQ0VTIExvY2F0aW9ucyhsb2NhdGlvbl9pZCkgT04gREVMRVRFIENBU0NBREVcclxuICAgICAgICAgICAgKWApO1xyXG4gICAgICAgICAgICAvLyBORVc6IENyZWF0ZSBKb2JQb3N0aW5ncyB0YWJsZVxyXG4gICAgICAgICAgICBkYi5ydW4oYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIEpvYlBvc3RpbmdzIChcclxuICAgICAgICAgICAgICAgIGpvYl9wb3N0aW5nX2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcclxuICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQgSU5URUdFUiBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkIElOVEVHRVIsIC0tIE9wdGlvbmFsOiBsaW5rIGpvYiBwb3N0aW5nIHRvIGEgc3BlY2lmaWMgbG9jYXRpb25cclxuICAgICAgICAgICAgICAgIHRpdGxlIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZW1lbnRzIFRFWFQsIC0tIE9wdGlvbmFsOiBqb2IgcmVxdWlyZW1lbnRzXHJcbiAgICAgICAgICAgICAgICBzdGF0dXMgVEVYVCBOT1QgTlVMTCBERUZBVUxUICdPcGVuJywgLS0gZS5nLiwgJ09wZW4nLCAnQ2xvc2VkJywgJ0ZpbGxlZCdcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfZGF0ZSBURVhUIE5PVCBOVUxMLCAtLSBJU08gODYwMSBmb3JtYXRcclxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZIChjb21wYW55X2lkKSBSRUZFUkVOQ0VTIENvbXBhbmllcyhjb21wYW55X2lkKSBPTiBERUxFVEUgQ0FTQ0FERSxcclxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZIChsb2NhdGlvbl9pZCkgUkVGRVJFTkNFUyBMb2NhdGlvbnMobG9jYXRpb25faWQpIE9OIERFTEVURSBDQVNDQURFXHJcbiAgICAgICAgICAgIClgKTtcclxuICAgICAgICAgICAgLy8gVXBkYXRlIEFwcGxpY2FudHMgdGFibGUgc2NoZW1hIHRvIGxpbmsgdG8gSm9iUG9zdGluZ3MgYW5kIGFkZCBwaG9uZV9udW1iZXJcclxuICAgICAgICAgICAgZGIucnVuKGBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBBcHBsaWNhbnRzIChcclxuICAgICAgICAgICAgICAgIGFwcGxpY2FudF9pZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXHJcbiAgICAgICAgICAgICAgICBjb21wYW55X2lkIElOVEVHRVIgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbl9pZCBJTlRFR0VSLCAtLSBPcHRpb25hbDogYXBwbGljYW50J3MgcHJlZmVycmVkIGxvY2F0aW9uIG9yIGxvY2F0aW9uIGFwcGxpZWQgZm9yXHJcbiAgICAgICAgICAgICAgICBqb2JfcG9zdGluZ19pZCBJTlRFR0VSLCAtLSBORVc6IExpbmsgdG8gSm9iUG9zdGluZ3MgdGFibGVcclxuICAgICAgICAgICAgICAgIGZ1bGxfbmFtZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgZW1haWwgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIHBob25lX251bWJlciBURVhULCAtLSBORVc6IFBob25lIG51bWJlciBmaWVsZFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzIFRFWFQgTk9UIE5VTEwgREVGQVVMVCAnQXBwbGllZCcsIC0tIGUuZy4sICdBcHBsaWVkJywgJ0ludGVydmlld2luZycsICdSZWplY3RlZCcsICdIaXJlZCdcclxuICAgICAgICAgICAgICAgIHJlc3VtZV91cmwgVEVYVCwgLS0gT3B0aW9uYWw6IFVSTCB0byBhIHJlc3VtZSBkb2N1bWVudCAoZS5nLiwgaG9zdGVkIG9uIGNsb3VkIHN0b3JhZ2UpXHJcbiAgICAgICAgICAgICAgICBub3RlcyBURVhULFxyXG4gICAgICAgICAgICAgICAgYXBwbGljYXRpb25fZGF0ZSBURVhUIE5PVCBOVUxMLCAtLSBJU08gODYwMSBmb3JtYXRcclxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZIChjb21wYW55X2lkKSBSRUZFUkVOQ0VTIENvbXBhbmllcyhjb21wYW55X2lkKSBPTiBERUxFVEUgQ0FTQ0FERSxcclxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZIChsb2NhdGlvbl9pZCkgUkVGRVJFTkNFUyBMb2NhdGlvbnMobG9jYXRpb25faWQpIE9OIERFTEVURSBDQVNDQURFLFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGpvYl9wb3N0aW5nX2lkKSBSRUZFUkVOQ0VTIEpvYlBvc3RpbmdzKGpvYl9wb3N0aW5nX2lkKSBPTiBERUxFVEUgU0VUIE5VTEwgLS0gSWYgam9iIHBvc3RpbmcgaXMgZGVsZXRlZCwgc2V0IHRoaXMgdG8gTlVMTFxyXG4gICAgICAgICAgICApYCk7XHJcbiAgICAgICAgICAgIC8vIE5FVzogQ3JlYXRlIERvY3VtZW50cyB0YWJsZSBmb3IgZmlsZS92aWRlbyB1cGxvYWRzXHJcbiAgICAgICAgICAgIGRiLnJ1bihgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgRG9jdW1lbnRzIChcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50X2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcclxuICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQgSU5URUdFUiBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIHVzZXJfaWQgSU5URUdFUiBOT1QgTlVMTCwgLS0gVXNlciB3aG8gdXBsb2FkZWQgdGhlIGRvY3VtZW50XHJcbiAgICAgICAgICAgICAgICB0aXRsZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgZmlsZV9uYW1lIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBmaWxlX3R5cGUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGZpbGVfdXJsIFRFWFQgTk9UIE5VTEwsIC0tIFVSTCB0byB0aGUgc3RvcmVkIGZpbGUgKGUuZy4sIFMzLCBHQ1MpXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiBURVhULFxyXG4gICAgICAgICAgICAgICAgdXBsb2FkX2RhdGUgVEVYVCBOT1QgTlVMTCwgLS0gSVNPIDg2MDEgZm9ybWF0XHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAoY29tcGFueV9pZCkgUkVGRVJFTkNFUyBDb21wYW5pZXMoY29tcGFueV9pZCkgT04gREVMRVRFIENBU0NBREUsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyBVc2Vycyh1c2VyX2lkKSBPTiBERUxFVEUgQ0FTQ0FERVxyXG4gICAgICAgICAgICApYCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy8gLS0tIEF1dGhlbnRpY2F0aW9uIE1pZGRsZXdhcmUgLS0tXHJcbmZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVRva2VuKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnNbJ2F1dGhvcml6YXRpb24nXTtcclxuICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlciAmJiBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV07XHJcbiAgICBpZiAodG9rZW4gPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkOiBObyB0b2tlbiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCwgKGVyciwgdXNlcikgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgLy8gTG9nIHRoZSBzcGVjaWZpYyBKV1QgZXJyb3IgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSldUIFZlcmlmaWNhdGlvbiBFcnJvcjpcIiwgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0ZvcmJpZGRlbjogSW52YWxpZCBvciBleHBpcmVkIHRva2VuLicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlcS51c2VyID0gdXNlcjtcclxuICAgICAgICBuZXh0KCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gLS0tIEhlbHBlciBmb3IgSW5wdXQgVmFsaWRhdGlvbiAtLS1cclxuY29uc3QgaXNWYWxpZEVtYWlsID0gKGVtYWlsKSA9PiB7XHJcbiAgICByZXR1cm4gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC8udGVzdChlbWFpbCk7XHJcbn07XHJcblxyXG4vLyAtLS0gQVBJIFJvdXRlcyAoQUxMIEFQSSBST1VURVMgU0hPVUxEIEJFIERFRklORUQgSEVSRSwgQkVGT1JFIFNUQVRJQyBGSUxFIFNFUlZJTkcpIC0tLVxyXG5cclxuLy8gQXBwbHkgcmF0ZSBsaW1pdGluZyB0byBhdXRoZW50aWNhdGlvbiByb3V0ZXNcclxuYXBwLnBvc3QoJy9hcGkvcmVnaXN0ZXInLCBhdXRoTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBjb21wYW55X25hbWUsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBSZWdpc3RyYXRpb25cclxuICAgIGlmICghY29tcGFueV9uYW1lIHx8IHR5cGVvZiBjb21wYW55X25hbWUgIT09ICdzdHJpbmcnIHx8IGNvbXBhbnlfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQ29tcGFueSBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZnVsbF9uYW1lIHx8IHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZW1haWwgfHwgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXBhc3N3b3JkIHx8IHR5cGVvZiBwYXNzd29yZCAhPT0gJ3N0cmluZycgfHwgcGFzc3dvcmQubGVuZ3RoIDwgNikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlBhc3N3b3JkIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycyBsb25nLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFzc3dvcmRfaGFzaCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMCk7XHJcbiAgICAgICAgZGIuc2VyaWFsaXplKCgpID0+IHtcclxuICAgICAgICAgICAgZGIucnVuKCdCRUdJTiBUUkFOU0FDVElPTicpO1xyXG4gICAgICAgICAgICBkYi5ydW4oJ0lOU0VSVCBJTlRPIENvbXBhbmllcyAoY29tcGFueV9uYW1lKSBWQUxVRVMgKD8pJywgW2NvbXBhbnlfbmFtZV0sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikgeyBcclxuICAgICAgICAgICAgICAgICAgICBkYi5ydW4oJ1JPTExCQUNLJyk7IFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBjcmVhdGluZyBjb21wYW55OlwiLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcihcIkNvdWxkIG5vdCBjcmVhdGUgY29tcGFueS5cIikpOyAvLyBQYXNzIGVycm9yIHRvIGVycm9yIGhhbmRsaW5nIG1pZGRsZXdhcmVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbXBhbnlJZCA9IHRoaXMubGFzdElEO1xyXG4gICAgICAgICAgICAgICAgZGIucnVuKGBJTlNFUlQgSU5UTyBVc2VycyAoY29tcGFueV9pZCwgbG9jYXRpb25faWQsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkX2hhc2gsIHJvbGUsIHN1YnNjcmlwdGlvbl9zdGF0dXMsIHBsYW5faWQpIFZBTFVFUyAoPywgPywgPywgPywgPywgJ3N1cGVyX2FkbWluJywgJ2FjdGl2ZScsICdmcmVlJylgLCBbbmV3Q29tcGFueUlkLCBudWxsLCBmdWxsX25hbWUsIGVtYWlsLCBwYXNzd29yZF9oYXNoXSwgZnVuY3Rpb24odXNlckluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VySW5zZXJ0RXJyKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5ydW4oJ1JPTExCQUNLJyk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgY3JlYXRpbmcgdXNlcjpcIiwgdXNlckluc2VydEVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VySW5zZXJ0RXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ1VOSVFVRSBjb25zdHJhaW50IGZhaWxlZDogVXNlcnMuZW1haWwnKSkgeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IGVycm9yOiAnRW1haWwgYWxyZWFkeSByZWdpc3RlcmVkLicgfSk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcihcIkNvdWxkIG5vdCBjcmVhdGUgdXNlci5cIikpOyAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRiLnJ1bignQ09NTUlUJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIkNvbXBhbnkgYW5kIHVzZXIgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHkhXCIsIHVzZXJJZDogdGhpcy5sYXN0SUQgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikgeyBcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiUmVnaXN0cmF0aW9uIGVycm9yOlwiLCBlcnJvcik7XHJcbiAgICAgICAgbmV4dChlcnJvcik7IC8vIFBhc3MgZXJyb3IgdG8gZXJyb3IgaGFuZGxpbmcgbWlkZGxld2FyZVxyXG4gICAgfVxyXG59KTtcclxuXHJcbmFwcC5wb3N0KCcvYXBpL2xvZ2luJywgYXV0aExpbWl0ZXIsIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBMb2dpblxyXG4gICAgaWYgKCFlbWFpbCB8fCAhaXNWYWxpZEVtYWlsKGVtYWlsKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkEgdmFsaWQgZW1haWwgYWRkcmVzcyBpcyByZXF1aXJlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghcGFzc3dvcmQgfHwgdHlwZW9mIHBhc3N3b3JkICE9PSAnc3RyaW5nJyB8fCBwYXNzd29yZC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJQYXNzd29yZCBpcyByZXF1aXJlZC5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5nZXQoXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIGVtYWlsID0gP1wiLCBbZW1haWxdLCBhc3luYyAoZXJyLCB1c2VyKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZHVyaW5nIGxvZ2luOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoXCJBIHNlcnZlciBlcnJvciBvY2N1cnJlZCBkdXJpbmcgbG9naW4uXCIpKTsgLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXVzZXIpIHsgXHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkludmFsaWQgY3JlZGVudGlhbHMuXCIgfSk7IFxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmRfaGFzaCk7XHJcbiAgICAgICAgaWYgKCFpc01hdGNoKSB7IFxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIGNyZWRlbnRpYWxzLlwiIH0pOyBcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHsgdXNlcklkOiB1c2VyLnVzZXJfaWQsIGVtYWlsOiB1c2VyLmVtYWlsLCByb2xlOiB1c2VyLnJvbGUsIGZ1bGxOYW1lOiB1c2VyLmZ1bGxfbmFtZSwgY29tcGFueUlkOiB1c2VyLmNvbXBhbnlfaWQsIGxvY2F0aW9uSWQ6IHVzZXIubG9jYXRpb25faWQsIHN1YnNjcmlwdGlvblN0YXR1czogdXNlci5zdWJzY3JpcHRpb25fc3RhdHVzLCBwbGFuSWQ6IHVzZXIucGxhbl9pZCB9O1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24ocGF5bG9hZCwgSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46ICcxaCcgfSk7XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIkxvZ2luIHN1Y2Nlc3NmdWwhXCIsIHRva2VuLCByb2xlOiB1c2VyLnJvbGUgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAucG9zdCgnL2FwaS9pbnZpdGUtYWRtaW4nLCBhdXRoZW50aWNhdGVUb2tlbiwgYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBmdWxsX25hbWUsIGVtYWlsLCBwYXNzd29yZCwgbG9jYXRpb25faWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIEludml0ZSBBZG1pblxyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IHN1cGVyIGFkbWlucyBjYW4gaW52aXRlIG90aGVyIGFkbWlucy4nIH0pOyB9XHJcbiAgICBpZiAoIWZ1bGxfbmFtZSB8fCB0eXBlb2YgZnVsbF9uYW1lICE9PSAnc3RyaW5nJyB8fCBmdWxsX25hbWUudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkZ1bGwgbmFtZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWVtYWlsIHx8ICFpc1ZhbGlkRW1haWwoZW1haWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBlbWFpbCBhZGRyZXNzIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwYXNzd29yZCB8fCB0eXBlb2YgcGFzc3dvcmQgIT09ICdzdHJpbmcnIHx8IHBhc3N3b3JkLmxlbmd0aCA8IDYpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJUZW1wb3JhcnkgcGFzc3dvcmQgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzIGxvbmcuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGxvY2F0aW9uX2lkICE9PSAnbnVtYmVyJyB8fCBsb2NhdGlvbl9pZCA8PSAwKSB7IC8vIEFzc3VtaW5nIGxvY2F0aW9uX2lkIGlzIGFuIGludGVnZXIgSURcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGxvY2F0aW9uIElEIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFzc3dvcmRfaGFzaCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMCk7XHJcbiAgICAgICAgZGIuZ2V0KCdTRUxFQ1QgKiBGUk9NIExvY2F0aW9ucyBXSEVSRSBsb2NhdGlvbl9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JywgW2xvY2F0aW9uX2lkLCBjb21wYW55SWRdLCAoZXJyLCBsb2NhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBjaGVja2luZyBsb2NhdGlvbjpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciB3aGVuIHZlcmlmeWluZyBsb2NhdGlvbi4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgICAgICBpZiAoIWxvY2F0aW9uKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnU2VsZWN0ZWQgbG9jYXRpb24gZG9lcyBub3QgZXhpc3Qgb3IgZG9lcyBub3QgYmVsb25nIHRvIHlvdXIgY29tcGFueS4nIH0pOyB9XHJcbiAgICAgICAgICAgIGRiLnJ1bihgSU5TRVJUIElOVE8gVXNlcnMgKGNvbXBhbnlfaWQsIGxvY2F0aW9uX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBwYXNzd29yZF9oYXNoLCByb2xlLCBzdWJzY3JpcHRpb25fc3RhdHVzLCBwbGFuX2lkKSBWQUxVRVMgKD8sID8sID8sID8sID8sICdsb2NhdGlvbl9hZG1pbicsICdhY3RpdmUnLCAnZnJlZScpYCwgW2NvbXBhbnlJZCwgbG9jYXRpb25faWQsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkX2hhc2hdLCBmdW5jdGlvbih1c2VySW5zZXJ0RXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlckluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBpbnZpdGluZyBhZG1pbjpcIiwgdXNlckluc2VydEVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJJbnNlcnRFcnIubWVzc2FnZS5pbmNsdWRlcygnVU5JUVVFIGNvbnN0cmFpbnQgZmFpbGVkOiBVc2Vycy5lbWFpbCcpKSB7IHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IGVycm9yOiAnRW1haWwgYWxyZWFkeSByZWdpc3RlcmVkLicgfSk7IH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBpbnZpdGUgYWRtaW4uJykpOyAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6IFwiTG9jYXRpb24gYWRtaW4gaW52aXRlZCBzdWNjZXNzZnVsbHkhXCIsIHVzZXJJZDogdGhpcy5sYXN0SUQgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHsgY29uc29sZS5lcnJvcihcIkludml0ZSBhZG1pbiBlcnJvcjpcIiwgZXJyb3IpOyBuZXh0KGVycm9yKTsgfSAvLyBQYXNzIGVycm9yXHJcbn0pO1xyXG5cclxuLy8gTkVXOiBBUEkgZW5kcG9pbnQgZm9yIGludml0aW5nIGVtcGxveWVlc1xyXG5hcHAucG9zdCgnL2FwaS9pbnZpdGUtZW1wbG95ZWUnLCBhdXRoZW50aWNhdGVUb2tlbiwgYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgICBjb25zdCB7IGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBwb3NpdGlvbiwgZW1wbG95ZWVfaWQsIGxvY2F0aW9uX2lkIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIEF1dGhvcml6YXRpb246IFN1cGVyIGFkbWluIGNhbiBpbnZpdGUgYW55b25lLCBMb2NhdGlvbiBhZG1pbiBjYW4gb25seSBpbnZpdGUgdG8gdGhlaXIgbG9jYXRpb24gb3IgdW5hc3NpZ25lZFxyXG4gICAgaWYgKCFbJ3N1cGVyX2FkbWluJywgJ2xvY2F0aW9uX2FkbWluJ10uaW5jbHVkZXMocm9sZSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgYWRtaW5zIGNhbiBpbnZpdGUgZW1wbG95ZWVzLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgSW52aXRlIEVtcGxveWVlXHJcbiAgICBpZiAoIWZ1bGxfbmFtZSB8fCB0eXBlb2YgZnVsbF9uYW1lICE9PSAnc3RyaW5nJyB8fCBmdWxsX25hbWUudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkZ1bGwgbmFtZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWVtYWlsIHx8ICFpc1ZhbGlkRW1haWwoZW1haWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBlbWFpbCBhZGRyZXNzIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwYXNzd29yZCB8fCB0eXBlb2YgcGFzc3dvcmQgIT09ICdzdHJpbmcnIHx8IHBhc3N3b3JkLmxlbmd0aCA8IDYpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJUZW1wb3JhcnkgcGFzc3dvcmQgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzIGxvbmcuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENvcnJlY3RlZCBsb2NhdGlvbl9pZCB2YWxpZGF0aW9uOiBNdXN0IGJlIGEgbnVtYmVyID4gMC5cclxuICAgIC8vIElmIGxvY2F0aW9uX2lkIGlzIG51bGwsIGl0IGluZGljYXRlcyBhbiB1bmFzc2lnbmVkIGxvY2F0aW9uLCB3aGljaCBpcyB2YWxpZCBmb3IgYSBzdXBlciBhZG1pbi5cclxuICAgIC8vIEZvciBsb2NhdGlvbl9hZG1pbiwgaXQgbXVzdCBtYXRjaCB0aGVpciBjdXJyZW50IGxvY2F0aW9uLlxyXG4gICAgLy8gVGhpcyByZXZpc2VkIGxvZ2ljIGNvcnJlY3RseSBjaGVja3MgZm9yIG51bGwgT1IgYSB2YWxpZCBwb3NpdGl2ZSBpbnRlZ2VyLlxyXG4gICAgY29uc3QgaXNMb2NhdGlvbklkVmFsaWQgPSBsb2NhdGlvbl9pZCA9PT0gbnVsbCB8fCAodHlwZW9mIGxvY2F0aW9uX2lkID09PSAnbnVtYmVyJyAmJiAhaXNOYU4obG9jYXRpb25faWQpICYmIGxvY2F0aW9uX2lkID4gMCk7XHJcbiAgICBpZiAoIWlzTG9jYXRpb25JZFZhbGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBsb2NhdGlvbiBJRCAocG9zaXRpdmUgbnVtYmVyKSBpcyByZXF1aXJlZCBmb3IgZW1wbG95ZWUsIG9yIG51bGwgZm9yIHVuYXNzaWduZWQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChwb3NpdGlvbiAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBwb3NpdGlvbiAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1Bvc2l0aW9uIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChlbXBsb3llZV9pZCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbXBsb3llZV9pZCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0VtcGxveWVlIElEIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb2NhdGlvbiBBZG1pbiBzcGVjaWZpYyBjaGVjazogZW5zdXJlIHRoZXkgYXJlIGludml0aW5nIHRvIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uIG9yIG51bGxcclxuICAgIC8vIElmIGxvY2F0aW9uX2FkbWluIHRyaWVzIHRvIHNldCBhIGxvY2F0aW9uIHRoYXQgaXMgTk9UIHRoZWlyIG93biwgYmxvY2sgaXQuXHJcbiAgICAvLyBBbGxvdyBsb2NhdGlvbl9hZG1pbiB0byBzZXQgdG8gbnVsbCBpZiB0aGVpciBjdXJyZW50IGxvY2F0aW9uIGlzIG51bGwuXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIC8vIEEgbG9jYXRpb24gYWRtaW4gY2FuIE9OTFkgYXNzaWduIGFuIGVtcGxveWVlIHRvIHRoZWlyIG93biBsb2NhdGlvbiBvciB0byBudWxsICh1bmFzc2lnbmVkKVxyXG4gICAgICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSB0YXJnZXQgbG9jYXRpb25faWQgaXMgbm90IHRoZSBjdXJyZW50IHVzZXIncyBsb2NhdGlvbiwgY2hlY2sgaWYgYm90aCBhcmUgbnVsbFxyXG4gICAgICAgICAgICBpZiAoIShsb2NhdGlvbl9pZCA9PT0gbnVsbCAmJiBjdXJyZW50VXNlckxvY2F0aW9uSWQgPT09IG51bGwpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIGNhbiBvbmx5IGludml0ZSBlbXBsb3llZXMgdG8gdGhlaXIgYXNzaWduZWQgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXNzd29yZF9oYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKTtcclxuXHJcbiAgICAgICAgLy8gVmVyaWZ5IHRoZSBsb2NhdGlvbl9pZCBiZWxvbmdzIHRvIHRoZSBjb21wYW55IGFuZCwgaWYgbG9jYXRpb25fYWRtaW4sIG1hdGNoZXMgdGhlaXIgYXNzaWduZWQgbG9jYXRpb25cclxuICAgICAgICAvLyBUaGlzIGNoZWNrIGlzIGNydWNpYWwgaWYgbG9jYXRpb25faWQgaXMgTk9UIG51bGxcclxuICAgICAgICBpZiAobG9jYXRpb25faWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3QgbG9jYXRpb25WZXJpZmljYXRpb24gPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkYi5nZXQoJ1NFTEVDVCBsb2NhdGlvbl9pZCBGUk9NIExvY2F0aW9ucyBXSEVSRSBsb2NhdGlvbl9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JywgW2xvY2F0aW9uX2lkLCBjb21wYW55SWRdLCAoZXJyLCBsb2NhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUobG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoIWxvY2F0aW9uVmVyaWZpY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1NlbGVjdGVkIGxvY2F0aW9uIGRvZXMgbm90IGV4aXN0IG9yIGRvZXMgbm90IGJlbG9uZyB0byB5b3VyIGNvbXBhbnkuJyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICBgSU5TRVJUIElOVE8gVXNlcnMgKGNvbXBhbnlfaWQsIGxvY2F0aW9uX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBwYXNzd29yZF9oYXNoLCBwb3NpdGlvbiwgZW1wbG95ZWVfaWQsIHJvbGUsIHN1YnNjcmlwdGlvbl9zdGF0dXMsIHBsYW5faWQpIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgJ2VtcGxveWVlJywgJ2FjdGl2ZScsICdmcmVlJylgLFxyXG4gICAgICAgICAgICBbY29tcGFueUlkLCBsb2NhdGlvbl9pZCwgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmRfaGFzaCwgcG9zaXRpb24sIGVtcGxveWVlX2lkLF0sIC8vIERlZmF1bHQgbmV3IGVtcGxveWVlcyB0byAnZW1wbG95ZWUnIHJvbGVcclxuICAgICAgICAgICAgZnVuY3Rpb24odXNlckluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJJbnNlcnRFcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgaW52aXRpbmcgZW1wbG95ZWU6XCIsIHVzZXJJbnNlcnRFcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VySW5zZXJ0RXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ1VOSVFVRSBjb25zdHJhaW50IGZhaWxlZDogVXNlcnMuZW1haWwnKSkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oeyBlcnJvcjogJ0VtYWlsIGFscmVhZHkgcmVnaXN0ZXJlZC4nIH0pOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gaW52aXRlIGVtcGxveWVlLicpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogXCJFbXBsb3llZSBpbnZpdGVkIHN1Y2Nlc3NmdWxseSFcIiwgdXNlcklkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbnZpdGUgZW1wbG95ZWUgZXJyb3I6XCIsIGVycm9yKTtcclxuICAgICAgICBuZXh0KGVycm9yKTtcclxuICAgIH1cclxufSk7XHJcblxyXG5cclxuYXBwLmdldCgnL2FwaS9wcm9maWxlJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyB1c2VySWQsIGZ1bGxOYW1lLCBlbWFpbCwgcm9sZSwgY29tcGFueUlkLCBsb2NhdGlvbklkLCBzdWJzY3JpcHRpb25TdGF0dXMsIHBsYW5JZCB9ID0gcmVxLnVzZXI7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVzZXJJZCwgZnVsbE5hbWUsIGVtYWlsLCByb2xlLCBjb21wYW55SWQsIGxvY2F0aW9uSWQsIHN1YnNjcmlwdGlvblN0YXR1cywgcGxhbklkIH0pO1xyXG59KTtcclxuXHJcbmFwcC5wdXQoJy9hcGkvcHJvZmlsZScsIGF1dGhlbnRpY2F0ZVRva2VuLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGZ1bGxOYW1lLCBlbWFpbCwgY3VycmVudFBhc3N3b3JkLCBuZXdQYXNzd29yZCB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgUHJvZmlsZSBVcGRhdGVcclxuICAgIGlmIChmdWxsTmFtZSA9PT0gdW5kZWZpbmVkICYmIGVtYWlsID09PSB1bmRlZmluZWQgJiYgKCFjdXJyZW50UGFzc3dvcmQgfHwgIW5ld1Bhc3N3b3JkKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm8gZGF0YSBwcm92aWRlZCBmb3IgdXBkYXRlLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZnVsbE5hbWUgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIGZ1bGxOYW1lICE9PSAnc3RyaW5nJyB8fCBmdWxsTmFtZS50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkZ1bGwgbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmIChlbWFpbCAhPT0gdW5kZWZpbmVkICYmICFpc1ZhbGlkRW1haWwoZW1haWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBlbWFpbCBhZGRyZXNzIG11c3QgYmUgcHJvdmlkZWQgaWYgY2hhbmdpbmcgZW1haWwuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobmV3UGFzc3dvcmQgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIG5ld1Bhc3N3b3JkICE9PSAnc3RyaW5nJyB8fCBuZXdQYXNzd29yZC5sZW5ndGggPCA2KSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIk5ldyBwYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycyBsb25nIGlmIGNoYW5naW5nIHBhc3N3b3JkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKChjdXJyZW50UGFzc3dvcmQgJiYgIW5ld1Bhc3N3b3JkKSB8fCAoIWN1cnJlbnRQYXNzd29yZCAmJiBuZXdQYXNzd29yZCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0JvdGggY3VycmVudCBwYXNzd29yZCBhbmQgbmV3IHBhc3N3b3JkIGFyZSByZXF1aXJlZCB0byBjaGFuZ2UgcGFzc3dvcmQuJyB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZGIuZ2V0KFwiU0VMRUNUICogRlJPTSBVc2VycyBXSEVSRSB1c2VyX2lkID0gP1wiLCBbdXNlcklkXSwgYXN5bmMgKGVyciwgdXNlcikgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGZldGNoaW5nIHVzZXIgZm9yIHByb2ZpbGUgdXBkYXRlOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoXCJTZXJ2ZXIgZXJyb3IgZHVyaW5nIHByb2ZpbGUgdXBkYXRlLlwiKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICghdXNlcikgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJVc2VyIG5vdCBmb3VuZC5cIiB9KTsgfVxyXG4gICAgICAgIGxldCB1cGRhdGVTcWwgPSAnVVBEQVRFIFVzZXJzIFNFVCAnO1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZVBhcmFtcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGNsYXVzZXMgPSBbXTtcclxuICAgICAgICBsZXQgY2hhbmdlc01hZGUgPSBmYWxzZTtcclxuICAgICAgICBpZiAoZnVsbE5hbWUgIT09IHVuZGVmaW5lZCAmJiBmdWxsTmFtZSAhPT0gdXNlci5mdWxsX25hbWUpIHtcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdmdWxsX25hbWUgPSA/Jyk7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBhcmFtcy5wdXNoKGZ1bGxOYW1lKTtcclxuICAgICAgICAgICAgY2hhbmdlc01hZGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZW1haWwgIT09IHVuZGVmaW5lZCAmJiBlbWFpbCAhPT0gdXNlci5lbWFpbCkge1xyXG4gICAgICAgICAgICB0cnkgeyAvLyBBZGRlZCB0cnktY2F0Y2ggZm9yIGFzeW5jIGF3YWl0IGluIGRiLmdldFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRiLmdldChcIlNFTEVDVCB1c2VyX2lkIEZST00gVXNlcnMgV0hFUkUgZW1haWwgPSA/IEFORCB1c2VyX2lkICE9ID9cIiwgW2VtYWlsLCB1c2VySWRdLCAoZXJyLCByb3cpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocm93KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nVXNlcikgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oeyBlcnJvcjogJ0VtYWlsIGFscmVhZHkgaW4gdXNlIGJ5IGFub3RoZXIgYWNjb3VudC4nIH0pOyB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGRiRXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgY2hlY2tpbmcgZXhpc3RpbmcgZW1haWw6XCIsIGRiRXJyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcihcIlNlcnZlciBlcnJvciB2ZXJpZnlpbmcgZW1haWwgYXZhaWxhYmlsaXR5LlwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdlbWFpbCA9ID8nKTtcclxuICAgICAgICAgICAgdXBkYXRlUGFyYW1zLnB1c2goZW1haWwpO1xyXG4gICAgICAgICAgICBjaGFuZ2VzTWFkZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjdXJyZW50UGFzc3dvcmQgJiYgbmV3UGFzc3dvcmQpIHtcclxuICAgICAgICAgICAgY29uc3QgaXNNYXRjaCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKGN1cnJlbnRQYXNzd29yZCwgdXNlci5wYXNzd29yZF9oYXNoKTtcclxuICAgICAgICAgICAgaWYgKCFpc01hdGNoKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkN1cnJlbnQgcGFzc3dvcmQgaW5jb3JyZWN0LlwiIH0pOyB9XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1Bhc3N3b3JkSGFzaCA9IGF3YWl0IGJjcnlwdC5oYXNoKG5ld1Bhc3N3b3JkLCAxMCk7XHJcbiAgICAgICAgICAgIGNsYXVzZXMucHVzaCgncGFzc3dvcmRfaGFzaCA9ID8nKTtcclxuICAgICAgICAgICAgdXBkYXRlUGFyYW1zLnB1c2gobmV3UGFzc3dvcmRIYXNoKTtcclxuICAgICAgICAgICAgY2hhbmdlc01hZGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWNoYW5nZXNNYWRlKSB7IHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdObyBjaGFuZ2VzIGRldGVjdGVkLiBQcm9maWxlIHJlbWFpbnMgdGhlIHNhbWUuJyB9KTsgfVxyXG4gICAgICAgIHVwZGF0ZVNxbCArPSBjbGF1c2VzLmpvaW4oJywgJykgKyAnIFdIRVJFIHVzZXJfaWQgPSA/JztcclxuICAgICAgICB1cGRhdGVQYXJhbXMucHVzaCh1c2VySWQpO1xyXG4gICAgICAgIGRiLnJ1bih1cGRhdGVTcWwsIHVwZGF0ZVBhcmFtcywgZnVuY3Rpb24odXBkYXRlRXJyKSB7XHJcbiAgICAgICAgICAgIGlmICh1cGRhdGVFcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHVwZGF0aW5nIHByb2ZpbGU6XCIsIHVwZGF0ZUVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBwcm9maWxlLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBkYi5nZXQoXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/XCIsIFt1c2VySWRdLCAoZmV0Y2hFcnIsIHVwZGF0ZWRVc2VyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZldGNoRXJyIHx8ICF1cGRhdGVkVXNlcikgeyBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdXBkYXRlZCB1c2VyIGZvciBuZXcgdG9rZW46XCIsIGZldGNoRXJyKTsgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1Byb2ZpbGUgdXBkYXRlZCBzdWNjZXNzZnVsbHksIGJ1dCB0b2tlbiBjb3VsZCBub3QgYmUgcmVmcmVzaGVkLicgfSk7IH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXlsb2FkID0geyB1c2VySWQ6IHVwZGF0ZWRVc2VyLnVzZXJfaWQsIGVtYWlsOiB1cGRhdGVkVXNlci5lbWFpbCwgcm9sZTogdXBkYXRlZFVzZXIucm9sZSwgZnVsbE5hbWU6IHVwZGF0ZWRVc2VyLmZ1bGxfbmFtZSwgY29tcGFueUlkOiB1cGRhdGVkVXNlci5jb21wYW55X2lkLCBsb2NhdGlvbklkOiB1cGRhdGVkVXNlci5sb2NhdGlvbl9pZCwgc3Vic2NyaXB0aW9uU3RhdHVzOiB1cGRhdGVkVXNlci5zdWJzY3JpcHRpb25fc3RhdHVzLCBwbGFuSWQ6IHVzZXIucGxhbl9pZCB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Rva2VuID0gand0LnNpZ24obmV3UGF5bG9hZCwgSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46ICcxaCcgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnUHJvZmlsZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseSEnLCB0b2tlbjogbmV3VG9rZW4gfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHsgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnTm8gY2hhbmdlcyBhcHBsaWVkIGFzIGRhdGEgd2FzIGlkZW50aWNhbC4nIH0pOyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAuZ2V0KCcvYXBpL2xvY2F0aW9ucycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcbiAgICBsZXQgc3FsID0gJ1NFTEVDVCBsb2NhdGlvbl9pZCwgbG9jYXRpb25fbmFtZSwgbG9jYXRpb25fYWRkcmVzcyBGUk9NIExvY2F0aW9ucyBXSEVSRSBjb21wYW55X2lkID0gPyc7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbY29tcGFueUlkXTtcclxuXHJcbiAgICAvLyBBbGxvd2luZyBzdXBlcl9hZG1pbiwgbG9jYXRpb25fYWRtaW4sIGFuZCBlbXBsb3llZSB0byB2aWV3IGFsbCBsb2NhdGlvbnMgaW4gdGhlaXIgY29tcGFueSBmb3IgZHJvcGRvd25zL3NlbGVjdGlvblxyXG4gICAgaWYgKCFbJ3N1cGVyX2FkbWluJywgJ2xvY2F0aW9uX2FkbWluJywgJ2VtcGxveWVlJ10uaW5jbHVkZXMocm9sZSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IEluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byB2aWV3IGxvY2F0aW9ucy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLmFsbChzcWwsIHBhcmFtcywgKGVyciwgcm93cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGZldGNoaW5nIGxvY2F0aW9uczpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBsb2NhdGlvbnMuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuanNvbihyb3dzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5wb3N0KCcvYXBpL2xvY2F0aW9ucycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGxvY2F0aW9uX25hbWUsIGxvY2F0aW9uX2FkZHJlc3MgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIENyZWF0ZSBMb2NhdGlvblxyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IHN1cGVyIGFkbWlucyBjYW4gY3JlYXRlIGxvY2F0aW9ucy4nIH0pOyB9XHJcbiAgICBpZiAoIWxvY2F0aW9uX25hbWUgfHwgdHlwZW9mIGxvY2F0aW9uX25hbWUgIT09ICdzdHJpbmcnIHx8IGxvY2F0aW9uX25hbWUudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkxvY2F0aW9uIG5hbWUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFsb2NhdGlvbl9hZGRyZXNzIHx8IHR5cGVvZiBsb2NhdGlvbl9hZGRyZXNzICE9PSAnc3RyaW5nJyB8fCBsb2NhdGlvbl9hZGRyZXNzLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJMb2NhdGlvbiBhZGRyZXNzIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4oJ0lOU0VSVCBJTlRPIExvY2F0aW9ucyAoY29tcGFueV9pZCwgbG9jYXRpb25fbmFtZSwgbG9jYXRpb25fYWRkcmVzcykgVkFMVUVTICg/LCA/LCA/KScsIFtjb21wYW55SWQsIGxvY2F0aW9uX25hbWUsIGxvY2F0aW9uX2FkZHJlc3NdLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBjcmVhdGluZyBsb2NhdGlvbjpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGxvY2F0aW9uLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiAnTG9jYXRpb24gY3JlYXRlZCEnLCBsb2NhdGlvbklkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5kZWxldGUoJy9hcGkvbG9jYXRpb25zLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUgfSA9IHJlcS51c2VyO1xyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IHN1cGVyIGFkbWlucyBjYW4gZGVsZXRlIGxvY2F0aW9ucy4nIH0pOyB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgSUQgcGFyYW1ldGVyXHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgbG9jYXRpb24gSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4oJ0RFTEVURSBGUk9NIExvY2F0aW9ucyBXSEVSRSBsb2NhdGlvbl9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JywgW2lkLCBjb21wYW55SWRdLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBkZWxldGluZyBsb2NhdGlvbjpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIGxvY2F0aW9uLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0xvY2F0aW9uIG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byBkZWxldGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjA0KS5zZW5kKCk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAuZ2V0KCcvYXBpL3VzZXJzJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCB1c2VySWQ6IGN1cnJlbnRVc2VySWQsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcbiAgICBjb25zdCB7IGZpbHRlclJvbGUsIGZpbHRlckxvY2F0aW9uSWQgfSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICBsZXQgc3FsID0gYFNFTEVDVCBVc2Vycy51c2VyX2lkLCBVc2Vycy5mdWxsX25hbWUsIFVzZXJzLmVtYWlsLCBVc2Vycy5yb2xlLCBMb2NhdGlvbnMubG9jYXRpb25fbmFtZVxyXG4gICAgICAgICAgICAgICBGUk9NIFVzZXJzXHJcbiAgICAgICAgICAgICAgIExFRlQgSk9JTiBMb2NhdGlvbnMgT04gVXNlcnMubG9jYXRpb25faWQgPSBMb2NhdGlvbnMubG9jYXRpb25faWRcclxuICAgICAgICAgICAgICAgV0hFUkUgVXNlcnMuY29tcGFueV9pZCA9ID9gO1xyXG4gICAgY29uc3QgcGFyYW1zID0gW2NvbXBhbnlJZF07XHJcblxyXG4gICAgaWYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICAvLyBTdXBlciBhZG1pbiBjYW4gdmlldyBhbGwgdXNlcnMgaW4gdGhlaXIgY29tcGFueS5cclxuICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIC8vIExvY2F0aW9uIGFkbWluIGNhbiB2aWV3IGFsbCB1c2VycyB3aXRoaW4gdGhlaXIgYXNzaWduZWQgbG9jYXRpb24sIHBsdXMgdW5hc3NpZ25lZCB1c2VycyBmb3IgdGhlaXIgY29tcGFueS5cclxuICAgICAgICBpZiAoY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIHNxbCArPSBgIEFORCAoVXNlcnMubG9jYXRpb25faWQgPSA/IE9SIFVzZXJzLmxvY2F0aW9uX2lkIElTIE5VTEwpYDsgLy8gQWRtaW5zIG1pZ2h0IG5lZWQgdG8gc2VlIHVuYXNzaWduZWQgdXNlcnNcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIG5vdCBhc3NpZ25lZCB0byBhIGxvY2F0aW9uLicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChyb2xlID09PSAnZW1wbG95ZWUnKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIFVzZXJzLnVzZXJfaWQgPSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlcklkKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgdG8gdmlldyB1c2Vycy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElucHV0IHZhbGlkYXRpb24gZm9yIGZpbHRlclJvbGUgYW5kIGZpbHRlckxvY2F0aW9uSWRcclxuICAgIGNvbnN0IGFsbG93ZWRSb2xlcyA9IFsnc3VwZXJfYWRtaW4nLCAnbG9jYXRpb25fYWRtaW4nLCAnZW1wbG95ZWUnXTtcclxuICAgIGlmIChmaWx0ZXJSb2xlICYmICghYWxsb3dlZFJvbGVzLmluY2x1ZGVzKGZpbHRlclJvbGUpIHx8IChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIGZpbHRlclJvbGUgPT09ICdzdXBlcl9hZG1pbicpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBmaWx0ZXIgcm9sZSBwcm92aWRlZCBvciBpbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgdG8gZmlsdGVyIGJ5IHRoaXMgcm9sZS4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlckxvY2F0aW9uSWQgJiYgaXNOYU4ocGFyc2VJbnQoZmlsdGVyTG9jYXRpb25JZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGZpbHRlciBsb2NhdGlvbiBJRCBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZiAoZmlsdGVyUm9sZSkge1xyXG4gICAgICAgIGlmIChyb2xlID09PSAnc3VwZXJfYWRtaW4nIHx8IChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIChmaWx0ZXJSb2xlID09PSAnZW1wbG95ZWUnIHx8IGZpbHRlclJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpKSB8fCAocm9sZSA9PT0gJ2VtcGxveWVlJyAmJiBmaWx0ZXJSb2xlID09PSAnZW1wbG95ZWUnKSkge1xyXG4gICAgICAgICAgICBzcWwgKz0gYCBBTkQgVXNlcnMucm9sZSA9ID9gO1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChmaWx0ZXJSb2xlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGNhc2Ugc2hvdWxkIGlkZWFsbHkgYmUgY2F1Z2h0IGJ5IHRoZSBlYXJsaWVyIHZhbGlkYXRpb24gZm9yIGFsbG93ZWRSb2xlcywgYnV0IGZvciBkZWZlbnNlLWluLWRlcHRoOlxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IEluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byBmaWx0ZXIgYnkgcm9sZS4nIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChmaWx0ZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgLy8gRW5zdXJlIGxvY2F0aW9uX2FkbWluIGNhbiBvbmx5IGZpbHRlciBieSB0aGVpciBvd24gbG9jYXRpb25cclxuICAgICAgICBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJyB8fCAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJyAmJiBwYXJzZUludChmaWx0ZXJMb2NhdGlvbklkKSA9PT0gY3VycmVudFVzZXJMb2NhdGlvbklkKSkge1xyXG4gICAgICAgICAgICBzcWwgKz0gYCBBTkQgVXNlcnMubG9jYXRpb25faWQgPSA/YDtcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goZmlsdGVyTG9jYXRpb25JZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgdG8gZmlsdGVyIGJ5IGxvY2F0aW9uLicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRiLmFsbChzcWwsIHBhcmFtcywgKGVyciwgcm93cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGZldGNoaW5nIHVzZXJzOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIHVzZXJzLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgcmVzLmpzb24ocm93cyk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAuZGVsZXRlKCcvYXBpL3VzZXJzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIHVzZXJJZDogYXV0aGVudGljYXRlZFVzZXJJZCB9ID0gcmVxLnVzZXI7XHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgc3VwZXIgYWRtaW5zIGNhbiBkZWxldGUgdXNlcnMuJyB9KTsgfVxyXG4gICAgaWYgKHBhcnNlSW50KGlkKSA9PT0gYXV0aGVudGljYXRlZFVzZXJJZCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0Nhbm5vdCBkZWxldGUgeW91ciBvd24gc3VwZXIgYWRtaW4gYWNjb3VudCB2aWEgdGhpcyBpbnRlcmZhY2UuJyB9KTsgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIElEIHBhcmFtZXRlclxyXG4gICAgaWYgKCFpZCB8fCBpc05hTihwYXJzZUludChpZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHVzZXIgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4oJ0RFTEVURSBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyBBTkQgcm9sZSAhPSBcXCdzdXBlcl9hZG1pblxcJycsIFtpZCwgY29tcGFueUlkXSwgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZGVsZXRpbmcgdXNlcjpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIHVzZXIuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwNCkuc2VuZCgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoJy9hcGkvY3JlYXRlLWNoZWNrb3V0LXNlc3Npb24nLCBhdXRoZW50aWNhdGVUb2tlbiwgYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBwbGFuSWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyB1c2VySWQsIGVtYWlsLCBjb21wYW55SWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIHBsYW5JZFxyXG4gICAgY29uc3QgYWxsb3dlZFBsYW5JZHMgPSBbJ3BybycsICdlbnRlcnByaXNlJ107XHJcbiAgICBpZiAoIXBsYW5JZCB8fCAhYWxsb3dlZFBsYW5JZHMuaW5jbHVkZXMocGxhbklkKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBwbGFuIElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcHJpY2VJZE1hcCA9IHtcclxuICAgICAgICAncHJvJzogcHJvY2Vzcy5lbnYuU1RSSVBFX1BSSUNFX0lEX1BSTywgICAgICAgLy8gVXNlIGVudmlyb25tZW50IHZhcmlhYmxlXHJcbiAgICAgICAgJ2VudGVycHJpc2UnOiBwcm9jZXNzLmVudi5TVFJJUEVfUFJJQ0VfSURfRU5UIC8vIFVzZSBlbnZpcm9ubWVudCB2YXJpYWJsZVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHN0cmlwZVByaWNlSWQgPSBwcmljZUlkTWFwW3BsYW5JZF07XHJcbiAgICBpZiAoIXN0cmlwZVByaWNlSWQpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdTdHJpcGUgcHJpY2UgSUQgbm90IGNvbmZpZ3VyZWQgZm9yIHRoaXMgcGxhbi4nIH0pOyB9IC8vIENoYW5nZWQgZnJvbSA0MDAgdG8gNTAwIGFzIHRoaXMgaXMgYSBzZXJ2ZXItc2lkZSBjb25maWcgaXNzdWVcclxuICAgIHRyeSB7XHJcbiAgICAgICAgbGV0IGN1c3RvbWVySWQ7XHJcbiAgICAgICAgY29uc3QgdXNlclJlY29yZCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgZGIuZ2V0KCdTRUxFQ1Qgc3RyaXBlX2N1c3RvbWVyX2lkIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID8nLCBbdXNlcklkXSwgKGVyciwgcm93KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocm93KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHVzZXJSZWNvcmQgJiYgdXNlclJlY29yZC5zdHJpcGVfY3VzdG9tZXJfaWQpIHtcclxuICAgICAgICAgICAgY3VzdG9tZXJJZCA9IHVzZXJSZWNvcmQuc3RyaXBlX2N1c3RvbWVyX2lkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbWVyID0gYXdhaXQgc3RyaXBlSW5zdGFuY2UuY3VzdG9tZXJzLmNyZWF0ZSh7IGVtYWlsOiBlbWFpbCwgbWV0YWRhdGE6IHsgdXNlcklkOiB1c2VySWQsIGNvbXBhbnlJZDogY29tcGFueUlkLCB9LCB9KTtcclxuICAgICAgICAgICAgY3VzdG9tZXJJZCA9IGN1c3RvbWVyLmlkO1xyXG4gICAgICAgICAgICBkYi5ydW4oJ1VQREFURSBVc2VycyBTRVQgc3RyaXBlX2N1c3RvbWVyX2lkID0gPyBXSEVSRSB1c2VyX2lkID0gPycsIFtjdXN0b21lcklkLCB1c2VySWRdLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBTdHJpcGUgY3VzdG9tZXIgSUQgdG8gREI6JywgZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBzdHJpcGVJbnN0YW5jZS5jaGVja291dC5zZXNzaW9ucy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBjdXN0b21lcjogY3VzdG9tZXJJZCxcclxuICAgICAgICAgICAgbW9kZTogJ3N1YnNjcmlwdGlvbicsXHJcbiAgICAgICAgICAgIGxpbmVfaXRlbXM6IFt7IHByaWNlOiBzdHJpcGVQcmljZUlkLCBxdWFudGl0eTogMSwgfSwgXSxcclxuICAgICAgICAgICAgLy8gVXNlIGVudmlyb25tZW50IHZhcmlhYmxlcyBmb3Igc3VjY2Vzcy9jYW5jZWwgVVJMcywgb3IgcmVsYXRpdmUgcGF0aHMgaWYgaGFuZGxlZCBjbGllbnQtc2lkZVxyXG4gICAgICAgICAgICBzdWNjZXNzX3VybDogYCR7cHJvY2Vzcy5lbnYuRlJPTlRFTkRfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjgwMDAnfS9zdWl0ZS1odWIuaHRtbD9wYXltZW50PXN1Y2Nlc3Mmc2Vzc2lvbl9pZD17Q0hFQ0tPVVRfU0VTU0lPTl9JRH1gLFxyXG4gICAgICAgICAgICBjYW5jZWxfdXJsOiBgJHtwcm9jZXNzLmVudi5GUk9OVEVORF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCd9L3ByaWNpbmcuaHRtbD9wYXltZW50PWNhbmNlbGxlZGAsXHJcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7IHVzZXJJZDogdXNlcklkLCBwbGFuSWQ6IHBsYW5JZCwgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVybDogc2Vzc2lvbi51cmwgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikgeyBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBTdHJpcGUgQ2hlY2tvdXQgU2Vzc2lvbjonLCBlcnJvcik7IG5leHQoZXJyb3IpOyB9IC8vIFBhc3MgZXJyb3JcclxufSk7XHJcblxyXG5hcHAucG9zdCgnL2FwaS9zY2hlZHVsZXMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBlbXBsb3llZV9pZCwgbG9jYXRpb25faWQsIHN0YXJ0X3RpbWUsIGVuZF90aW1lLCBub3RlcyB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgdXNlcklkOiBjdXJyZW50VXNlcklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBDcmVhdGUgU2NoZWR1bGVcclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nICYmIHJvbGUgIT09ICdsb2NhdGlvbl9hZG1pbicpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gY3JlYXRlIHNjaGVkdWxlcy4nIH0pOyB9XHJcbiAgICBpZiAodHlwZW9mIGVtcGxveWVlX2lkICE9PSAnbnVtYmVyJyB8fCBlbXBsb3llZV9pZCA8PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdBIHZhbGlkIGVtcGxveWVlIElEIGlzIHJlcXVpcmVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGxvY2F0aW9uX2lkICE9PSAnbnVtYmVyJyB8fCBsb2NhdGlvbl9pZCA8PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdBIHZhbGlkIGxvY2F0aW9uIElEIGlzIHJlcXVpcmVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXN0YXJ0X3RpbWUgfHwgIWVuZF90aW1lIHx8IGlzTmFOKG5ldyBEYXRlKHN0YXJ0X3RpbWUpLmdldFRpbWUoKSkgfHwgaXNOYU4obmV3IERhdGUoZW5kX3RpbWUpLmdldFRpbWUoKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1ZhbGlkIHN0YXJ0IGFuZCBlbmQgdGltZXMgYXJlIHJlcXVpcmVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobmV3IERhdGUoc3RhcnRfdGltZSkgPj0gbmV3IERhdGUoZW5kX3RpbWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdTdGFydCB0aW1lIG11c3QgYmUgYmVmb3JlIGVuZCB0aW1lLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobm90ZXMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygbm90ZXMgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdOb3RlcyBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIuZ2V0KCdTRUxFQ1QgdXNlcl9pZCBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPycsIFtlbXBsb3llZV9pZCwgY29tcGFueUlkXSwgKGVyciwgZW1wbG95ZWUpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciB2ZXJpZnlpbmcgZW1wbG95ZWU6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZHVyaW5nIGVtcGxveWVlIHZlcmlmaWNhdGlvbi4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICghZW1wbG95ZWUpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdFbXBsb3llZSBub3QgZm91bmQgaW4geW91ciBjb21wYW55LicgfSk7IH1cclxuICAgICAgICBkYi5nZXQoJ1NFTEVDVCBsb2NhdGlvbl9pZCBGUk9NIExvY2F0aW9ucyBXSEVSRSBsb2NhdGlvbl9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JywgW2xvY2F0aW9uX2lkLCBjb21wYW55SWRdLCAoZXJyLCBsb2NhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciB2ZXJpZnlpbmcgbG9jYXRpb246XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZHVyaW5nIGxvY2F0aW9uIHZlcmlmaWNhdGlvbi4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgICAgICBpZiAoIWxvY2F0aW9uKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTG9jYXRpb24gbm90IGZvdW5kIGluIHlvdXIgY29tcGFueS4nIH0pOyB9XHJcbiAgICAgICAgICAgIGRiLnJ1bihcclxuICAgICAgICAgICAgICAgICdJTlNFUlQgSU5UTyBTY2hlZHVsZXMgKGVtcGxveWVlX2lkLCBsb2NhdGlvbl9pZCwgc3RhcnRfdGltZSwgZW5kX3RpbWUsIG5vdGVzKSBWQUxVRVMgKD8sID8sID8sID8sID8pJywgW2VtcGxveWVlX2lkLCBsb2NhdGlvbl9pZCwgc3RhcnRfdGltZSwgZW5kX3RpbWUsIG5vdGVzXSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnNlcnRFcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGNyZWF0aW5nIHNjaGVkdWxlOlwiLCBpbnNlcnRFcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgc2NoZWR1bGUuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdTY2hlZHVsZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseSEnLCBzY2hlZHVsZUlkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5nZXQoJy9hcGkvc2NoZWR1bGVzJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgZW1wbG95ZWVfaWQsIGxvY2F0aW9uX2lkLCBzdGFydF9kYXRlLCBlbmRfZGF0ZSB9ID0gcmVxLnF1ZXJ5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIHVzZXJJZDogY3VycmVudFVzZXJJZCwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICBsZXQgc3FsID0gYFNFTEVDVCBTY2hlZHVsZXMuKiwgVXNlcnMuZnVsbF9uYW1lIEFTIGVtcGxveWVlX25hbWUsIFVzZXJzLmVtYWlsIEFTIGVtcGxveWVlX2VtYWlsLCBMb2NhdGlvbnMubG9jYXRpb25fbmFtZVxyXG4gICAgICAgICAgICAgICBGUk9NIFNjaGVkdWxlc1xyXG4gICAgICAgICAgICAgICBKT0lOIFVzZXJzIE9OIFNjaGVkdWxlcy5lbXBsb3llZV9pZCA9IFVzZXJzLnVzZXJfaWRcclxuICAgICAgICAgICAgICAgSk9JTiBMb2NhdGlvbnMgT04gU2NoZWR1bGVzLmxvY2F0aW9uX2lkID0gTG9jYXRpb25zLmxvY2F0aW9uX2lkXHJcbiAgICAgICAgICAgICAgIFdIRVJFIFVzZXJzLmNvbXBhbnlfaWQgPSA/YDtcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtjb21wYW55SWRdO1xyXG5cclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRVc2VyTG9jYXRpb25JZCkge1xyXG4gICAgICAgICAgICBzcWwgKz0gYCBBTkQgU2NoZWR1bGVzLmxvY2F0aW9uX2lkID0gP2A7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VyTG9jYXRpb25JZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBMb2NhdGlvbiBhZG1pbiBub3QgYXNzaWduZWQgdG8gYSBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ2VtcGxveWVlJykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBVc2Vycy51c2VyX2lkID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5wdXQgdmFsaWRhdGlvbiBmb3IgcXVlcnkgcGFyYW1ldGVyc1xyXG4gICAgaWYgKGVtcGxveWVlX2lkICYmIGlzTmFOKHBhcnNlSW50KGVtcGxveWVlX2lkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgZW1wbG95ZWUgSUQgZmlsdGVyIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25faWQgJiYgaXNOYU4ocGFyc2VJbnQobG9jYXRpb25faWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBsb2NhdGlvbiBJRCBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChzdGFydF9kYXRlICYmIGlzTmFOKG5ldyBEYXRlKHN0YXJ0X2RhdGUpLmdldFRpbWUoKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgc3RhcnQgZGF0ZSBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChlbmRfZGF0ZSAmJiBpc05hTihuZXcgRGF0ZShlbmRfZGF0ZSkuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBlbmQgZGF0ZSBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaWYgKGVtcGxveWVlX2lkICYmIChyb2xlID09PSAnc3VwZXJfYWRtaW4nIHx8IChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIHBhcnNlSW50KGVtcGxveWVlX2lkKSA9PT0gY3VycmVudFVzZXJJZCkgfHwgKHJvbGUgPT09ICdlbXBsb3llZScgJiYgcGFyc2VJbnQoZW1wbG95ZWVfaWQpID09PSBjdXJyZW50VXNlcklkKSkpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgVXNlcnMucm9sZSA9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGZpbHRlclJvbGUpOyAvLyBUaGlzIHNob3VsZCBiZSBlbXBsb3llZV9pZCwgbm90IGZpbHRlclJvbGVcclxuICAgIH1cclxuICAgIGlmIChsb2NhdGlvbl9pZCAmJiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJyB8fCAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJyAmJiBwYXJzZUludChsb2NhdGlvbl9pZCkgPT09IGN1cnJlbnRVc2VyTG9jYXRpb25JZCkpKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIFNjaGVkdWxlcy5sb2NhdGlvbl9pZCA9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGxvY2F0aW9uX2lkKTtcclxuICAgIH1cclxuICAgIGlmIChzdGFydF9kYXRlKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIFNjaGVkdWxlcy5zdGFydF90aW1lID49ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKHN0YXJ0X2RhdGUpO1xyXG4gICAgfVxyXG4gICAgaWYgKGVuZF9kYXRlKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIFNjaGVkdWxlcy5lbmRfdGltZSA8PSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChlbmRfZGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIuYWxsKHNxbCwgcGFyYW1zLCAoZXJyLCByb3dzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgc2NoZWR1bGVzOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIHNjaGVkdWxlcy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIHJlcy5qc29uKHJvd3MpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLmRlbGV0ZSgnL2FwaS9zY2hlZHVsZXMvOmlkJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgdXNlcklkOiBjdXJyZW50VXNlcklkLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIElEIHBhcmFtZXRlclxyXG4gICAgaWYgKCFpZCB8fCBpc05hTihwYXJzZUludChpZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHNjaGVkdWxlIElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvbGUgPT09ICdlbXBsb3llZScpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IEVtcGxveWVlcyBjYW5ub3QgZGVsZXRlIHNjaGVkdWxlcy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzcWwgPSBgREVMRVRFIEZST00gU2NoZWR1bGVzIFdIRVJFIHNjaGVkdWxlX2lkID0gP2A7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbaWRdO1xyXG5cclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIGVtcGxveWVlX2lkIElOIChTRUxFQ1QgdXNlcl9pZCBGUk9NIFVzZXJzIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8pYDtcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQsIGNvbXBhbnlJZCk7XHJcbiAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgZW1wbG95ZWVfaWQgSU4gKFNFTEVDVCB1c2VyX2lkIEZST00gVXNlcnMgV0hFUkUgY29tcGFueV9pZCA9ID8pYDtcclxuICAgICAgICBwYXJhbXMucHVzaChjb21wYW55SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bihzcWwsIHBhcmFtcywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZGVsZXRpbmcgc2NoZWR1bGU6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBzY2hlZHVsZS4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdTY2hlZHVsZSBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwNCkuc2VuZCgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLy8gLS0tIEhpcmluZyBSb3V0ZXMgLS0tXHJcblxyXG4vKipcclxuICogUE9TVCAvYXBpL2pvYi1wb3N0aW5nc1xyXG4gKiBDcmVhdGVzIGEgbmV3IGpvYiBwb3N0aW5nLlxyXG4gKiBSZXF1aXJlcyBzdXBlcl9hZG1pbiBvciBsb2NhdGlvbl9hZG1pbiByb2xlLlxyXG4gKi9cclxuYXBwLnBvc3QoJy9hcGkvam9iLXBvc3RpbmdzJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgdGl0bGUsIGRlc2NyaXB0aW9uLCByZXF1aXJlbWVudHMsIGxvY2F0aW9uX2lkIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG4gICAgY29uc3QgY3JlYXRlZF9kYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOyAvLyBDdXJyZW50IGRhdGUvdGltZSBmb3IgY3JlYXRpb25cclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBDcmVhdGUgSm9iIFBvc3RpbmdcclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nICYmIHJvbGUgIT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgYWRtaW5zIGNhbiBjcmVhdGUgam9iIHBvc3RpbmdzLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRpdGxlIHx8IHR5cGVvZiB0aXRsZSAhPT0gJ3N0cmluZycgfHwgdGl0bGUudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkpvYiB0aXRsZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIGRlc2NyaXB0aW9uICE9PSAnc3RyaW5nJyB8fCBkZXNjcmlwdGlvbi50cmltKCkgPT09ICcnKSkgeyAvLyBMaW5lIDEwMDlcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0Rlc2NyaXB0aW9uIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHsgXHJcbiAgICAgICAgY2xhdXNlcy5wdXNoKCdkZXNjcmlwdGlvbiA9ID8nKTsgXHJcbiAgICAgICAgdXBkYXRlUGFyYW1zLnB1c2goZGVzY3JpcHRpb24pOyBcclxuICAgIH1cclxuICAgIGlmIChyZXF1aXJlbWVudHMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcmVxdWlyZW1lbnRzICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUmVxdWlyZW1lbnRzIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH0gZWxzZSBpZiAocmVxdWlyZW1lbnRzICE9PSB1bmRlZmluZWQpIHsgXHJcbiAgICAgICAgY2xhdXNlcy5wdXNoKCdyZXF1aXJlbWVudHMgPSA/Jyk7XHJcbiAgICAgICAgdXBkYXRlUGFyYW1zLnB1c2gocmVxdWlyZW1lbnRzKTtcclxuICAgIH1cclxuICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ3N0YXR1cyA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2goc3RhdHVzKTsgfVxyXG4gICAgXHJcbiAgICAvLyBzdXBlcl9hZG1pbiBjYW4gY2hhbmdlIGxvY2F0aW9uX2lkLiBsb2NhdGlvbl9hZG1pbiBjYW5ub3QgY2hhbmdlIGxvY2F0aW9uX2lkIG9yIGNoYW5nZSB0byBkaWZmZXJlbnQgbG9jYXRpb25cclxuICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgaWYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdsb2NhdGlvbl9pZCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgICAgICBpZiAobG9jYXRpb25faWQgIT09IGN1cnJlbnRVc2VyTG9jYXRpb25JZCAmJiBsb2NhdGlvbl9pZCAhPT0gbnVsbCkgeyAvLyBsb2NhdGlvbl9pZCBjYW4gYmUgbnVsbCAoY29tcGFueS13aWRlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBMb2NhdGlvbiBhZG1pbiBjYW5ub3QgY2hhbmdlIGpvYiBwb3N0aW5nIGxvY2F0aW9uIHRvIGFub3RoZXIgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiBsb2NhdGlvbiBhZG1pbiB1cGRhdGVzIGpvYiBwb3N0aW5nLCBhbmQgaXQncyB0aGVpciBsb2NhdGlvbiwgb3Igc2V0dGluZyB0byBudWxsLCBpdCdzIGFsbG93ZWRcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdsb2NhdGlvbl9pZCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgaWYgKGNsYXVzZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm8gZmllbGRzIHByb3ZpZGVkIGZvciB1cGRhdGUuJyB9KTsgfVxyXG5cclxuICAgIHVwZGF0ZVNxbCArPSBjbGF1c2VzLmpvaW4oJywgJykgKyAnIFdIRVJFIGpvYl9wb3N0aW5nX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nO1xyXG4gICAgdXBkYXRlUGFyYW1zLnB1c2goaWQsIGNvbXBhbnlJZCk7XHJcblxyXG4gICAgLy8gQWRkaXRpb25hbCBzZWN1cml0eSBmb3IgbG9jYXRpb25fYWRtaW46IGVuc3VyZSB0aGV5IG9ubHkgdXBkYXRlIHRoZWlyIG93biBsb2NhdGlvbidzIHBvc3RpbmdzXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHVwZGF0ZVNxbCArPSAnIEFORCAobG9jYXRpb25faWQgPSA/IE9SIGxvY2F0aW9uX2lkIElTIE5VTEwpJzsgLy8gQWxsb3cgdXBkYXRpbmcgdW5hc3NpZ25lZCBqb2JzIHRvb1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VyTG9jYXRpb25JZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIucnVuKHVwZGF0ZVNxbCwgdXBkYXRlUGFyYW1zLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciB1cGRhdGluZyBqb2IgcG9zdGluZzpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIGpvYiBwb3N0aW5nLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0pvYiBwb3N0aW5nIG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byB1cGRhdGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0pvYiBwb3N0aW5nIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IScgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vKipcclxuICogR0VUIC9hcGkvam9iLXBvc3RpbmdzXHJcbiAqIFJldHJpZXZlcyBqb2IgcG9zdGluZ3MuXHJcbiAqIENhbiBmaWx0ZXIgYnkgbG9jYXRpb25faWQgYW5kIHN0YXR1cy5cclxuICogUmVxdWlyZXMgc3VwZXJfYWRtaW4gb3IgbG9jYXRpb25fYWRtaW4uXHJcbiAqL1xyXG5hcHAuZ2V0KCcvYXBpL2pvYi1wb3N0aW5ncycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IHN0YXR1cywgbG9jYXRpb25faWQgfSA9IHJlcS5xdWVyeTtcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIGxldCBzcWwgPSAnU0VMRUNUICogRlJPTSBKb2JQb3N0aW5ncyBXSEVSRSBjb21wYW55X2lkID0gPyc7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbY29tcGFueUlkXTtcclxuXHJcbiAgICAvLyBBdXRob3JpemF0aW9uOiBzdXBlcl9hZG1pbiBzZWVzIGFsbCwgbG9jYXRpb25fYWRtaW4gc2VlcyB0aGVpciBsb2NhdGlvbidzIHBvc3RpbmdzXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIGlmIChjdXJyZW50VXNlckxvY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgc3FsICs9ICcgQU5EIChsb2NhdGlvbl9pZCA9ID8gT1IgbG9jYXRpb25faWQgSVMgTlVMTCknOyAvLyBMb2NhdGlvbiBhZG1pbiBzZWVzIHRoZWlyIGxvY2F0aW9uJ3MgcG9zdGluZ3Mgb3IgY29tcGFueS13aWRlXHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VyTG9jYXRpb25JZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBMb2NhdGlvbiBhZG1pbiBub3QgYXNzaWduZWQgdG8gYSBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ2VtcGxveWVlJykge1xyXG4gICAgICAgIC8vIEVtcGxveWVlcyBnZW5lcmFsbHkgc2hvdWxkbid0IHNlZSBqb2IgcG9zdGluZ3MgbGlzdCB2aWEgdGhpcyBhZG1pbiBBUElcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IEluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byB2aWV3IGpvYiBwb3N0aW5ncy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElucHV0IHZhbGlkYXRpb24gZm9yIHF1ZXJ5IHBhcmFtZXRlcnNcclxuICAgIGNvbnN0IGFsbG93ZWRTdGF0dXNlcyA9IFsnT3BlbicsICdDbG9zZWQnLCAnRmlsbGVkJ107IC8vIEFzc3VtaW5nIHRoZXNlIGFyZSB5b3VyIHZhbGlkIHN0YXR1c2VzXHJcbiAgICBpZiAoc3RhdHVzICYmICFhbGxvd2VkU3RhdHVzZXMuaW5jbHVkZXMoc3RhdHVzKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBqb2IgcG9zdGluZyBzdGF0dXMgZmlsdGVyIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25faWQgJiYgaXNOYU4ocGFyc2VJbnQobG9jYXRpb25faWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBsb2NhdGlvbiBJRCBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaWYgKHN0YXR1cykge1xyXG4gICAgICAgIHNxbCArPSAnIEFORCBzdGF0dXMgPSA/JztcclxuICAgICAgICBwYXJhbXMucHVzaChzdGF0dXMpO1xyXG4gICAgfVxyXG4gICAgLy8gT25seSBzdXBlciBhZG1pbiBjYW4gZmlsdGVyIGJ5IGFueSBsb2NhdGlvbl9pZCBiZXlvbmQgdGhlaXIgb3duIHNjb3BlXHJcbiAgICBpZiAobG9jYXRpb25faWQgJiYgcm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBsb2NhdGlvbl9pZCA9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGxvY2F0aW9uX2lkKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5hbGwoc3FsLCBwYXJhbXMsIChlcnIsIHJvd3MpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBqb2IgcG9zdGluZ3M6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgam9iIHBvc3RpbmdzLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgcmVzLmpzb24ocm93cyk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vKipcclxuICogUFVUIC9hcGkvam9iLXBvc3RpbmdzLzppZFxyXG4gKiBVcGRhdGVzIGEgam9iIHBvc3RpbmcuXHJcbiAqIFJlcXVpcmVzIHN1cGVyX2FkbWluIG9yIGxvY2F0aW9uX2FkbWluIChmb3IgdGhlaXIgbG9jYXRpb24ncyBwb3N0aW5ncykuXHJcbiAqL1xyXG5hcHAucHV0KCcvYXBpL2pvYi1wb3N0aW5ncy86aWQnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgdGl0bGUsIGRlc2NyaXB0aW9uLCByZXF1aXJlbWVudHMsIHN0YXR1cywgbG9jYXRpb25faWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgSm9iIFBvc3RpbmcgVXBkYXRlXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gdXBkYXRlIGpvYiBwb3N0aW5ncy4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFpZCB8fCBpc05hTihwYXJzZUludChpZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGpvYiBwb3N0aW5nIElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGl0bGUgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIHRpdGxlICE9PSAnc3RyaW5nJyB8fCB0aXRsZS50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSm9iIHRpdGxlIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIGRlc2NyaXB0aW9uICE9PSAnc3RyaW5nJyB8fCBkZXNjcmlwdGlvbi50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRGVzY3JpcHRpb24gbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChyZXF1aXJlbWVudHMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcmVxdWlyZW1lbnRzICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUmVxdWlyZW1lbnRzIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFsbG93ZWRTdGF0dXNlcyA9IFsnT3BlbicsICdDbG9zZWQnLCAnRmlsbGVkJ107XHJcbiAgICBpZiAoc3RhdHVzICE9PSB1bmRlZmluZWQgJiYgIWFsbG93ZWRTdGF0dXNlcy5pbmNsdWRlcyhzdGF0dXMpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHN0YXR1cyBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGxvY2F0aW9uX2lkICE9PSAnbnVtYmVyJyAmJiBsb2NhdGlvbl9pZCAhPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTG9jYXRpb24gSUQgbXVzdCBiZSBhIG51bWJlciBvciBudWxsIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGxldCB1cGRhdGVTcWwgPSAnVVBEQVRFIEpvYlBvc3RpbmdzIFNFVCAnO1xyXG4gICAgY29uc3QgdXBkYXRlUGFyYW1zID0gW107XHJcbiAgICBjb25zdCBjbGF1c2VzID0gW107XHJcblxyXG4gICAgaWYgKHRpdGxlICE9PSB1bmRlZmluZWQpIHsgY2xhdXNlcy5wdXNoKCd0aXRsZSA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2godGl0bGUpOyB9XHJcbiAgICAvLyBMaW5lIDEwMDkgZml4OiBFbnN1cmUgdGhpcyBsaW5lIGFuZCBzdXJyb3VuZGluZyBsb2dpYyBpcyBjb3JyZWN0LlxyXG4gICAgaWYgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBkZXNjcmlwdGlvbiAhPT0gJ3N0cmluZycgfHwgZGVzY3JpcHRpb24udHJpbSgpID09PSAnJykpIHsgLy8gTGluZSAxMDA5XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdEZXNjcmlwdGlvbiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfSBlbHNlIGlmIChkZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7IFxyXG4gICAgICAgIGNsYXVzZXMucHVzaCgnZGVzY3JpcHRpb24gPSA/Jyk7IFxyXG4gICAgICAgIHVwZGF0ZVBhcmFtcy5wdXNoKGRlc2NyaXB0aW9uKTsgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChyZXF1aXJlbWVudHMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcmVxdWlyZW1lbnRzICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUmVxdWlyZW1lbnRzIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH0gZWxzZSBpZiAocmVxdWlyZW1lbnRzICE9PSB1bmRlZmluZWQpIHsgXHJcbiAgICAgICAgY2xhdXNlcy5wdXNoKCdyZXF1aXJlbWVudHMgPSA/Jyk7XHJcbiAgICAgICAgdXBkYXRlUGFyYW1zLnB1c2gocmVxdWlyZW1lbnRzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgnc3RhdHVzID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChzdGF0dXMpOyB9XHJcbiAgICBcclxuICAgIC8vIHN1cGVyX2FkbWluIGNhbiBjaGFuZ2UgbG9jYXRpb25faWQuIGxvY2F0aW9uX2FkbWluIGNhbm5vdCBjaGFuZ2UgbG9jYXRpb25faWQgb3IgY2hhbmdlIHRvIGRpZmZlcmVudCBsb2NhdGlvblxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2xvY2F0aW9uX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gY3VycmVudFVzZXJMb2NhdGlvbklkICYmIGxvY2F0aW9uX2lkICE9PSBudWxsKSB7IC8vIGxvY2F0aW9uX2lkIGNhbiBiZSBudWxsIChjb21wYW55LXdpZGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIGNhbm5vdCBjaGFuZ2Ugam9iIHBvc3RpbmcgbG9jYXRpb24gdG8gYW5vdGhlciBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIElmIGxvY2F0aW9uIGFkbWluIHVwZGF0ZXMgam9iIHBvc3RpbmcsIGFuZCBpdCdzIHRoZWlyIGxvY2F0aW9uLCBvciBzZXR0aW5nIHRvIG51bGwsIGl0J3MgYWxsb3dlZFxyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2xvY2F0aW9uX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZiAoY2xhdXNlcy5sZW5ndGggPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdObyBmaWVsZHMgcHJvdmlkZWQgZm9yIHVwZGF0ZS4nIH0pOyB9XHJcblxyXG4gICAgdXBkYXRlU3FsICs9IGNsYXVzZXMuam9pbignLCAnKSArICcgV0hFUkUgam9iX3Bvc3RpbmdfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyc7XHJcbiAgICB1cGRhdGVQYXJhbXMucHVzaChpZCwgY29tcGFueUlkKTtcclxuXHJcbiAgICAvLyBBZGRpdGlvbmFsIHNlY3VyaXR5IGZvciBsb2NhdGlvbl9hZG1pbjogZW5zdXJlIHRoZXkgb25seSB1cGRhdGUgdGhlaXIgb3duIGxvY2F0aW9uJ3MgcG9zdGluZ3NcclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgdXBkYXRlU3FsICs9ICcgQU5EIChsb2NhdGlvbl9pZCA9ID8gT1IgbG9jYXRpb25faWQgSVMgTlVMTCknOyAvLyBBbGxvdyB1cGRhdGluZyB1bmFzc2lnbmVkIGpvYnMgdG9vXHJcbiAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4odXBkYXRlU3FsLCB1cGRhdGVQYXJhbXMsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHVwZGF0aW5nIGpvYiBwb3N0aW5nOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgam9iIHBvc3RpbmcuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnSm9iIHBvc3Rpbmcgbm90IGZvdW5kIG9yIG5vdCBhdXRob3JpemVkIHRvIHVwZGF0ZS4nIH0pOyB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnSm9iIHBvc3RpbmcgdXBkYXRlZCBzdWNjZXNzZnVsbHkhJyB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBERUxFVEUgL2FwaS9qb2ItcG9zdGluZ3MvOmlkXHJcbiAqIERlbGV0ZXMgYSBqb2IgcG9zdGluZy5cclxuICogUmVxdWlyZXMgc3VwZXJfYWRtaW4gb3IgbG9jYXRpb25fYWRtaW4gKGZvciB0aGVpciBsb2NhdGlvbidzIHBvc3RpbmdzKS5cclxuICovXHJcbmFwcC5kZWxldGUoJy9hcGkvam9iLXBvc3RpbmdzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgSUQgcGFyYW1ldGVyXHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgam9iIHBvc3RpbmcgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gZGVsZXRlIGpvYiBwb3N0aW5ncy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzcWwgPSAnREVMRVRFIEZST00gSm9iUG9zdGluZ3MgV0hFUkUgam9iX3Bvc3RpbmdfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyc7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbaWQsIGNvbXBhbnlJZF07XHJcblxyXG4gICAgLy8gQWRkaXRpb25hbCBzZWN1cml0eSBmb3IgbG9jYXRpb25fYWRtaW46IGVuc3VyZSB0aGV5IG9ubHkgZGVsZXRlIHRoZWlyIG93biBsb2NhdGlvbidzIHBvc3RpbmdzXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSAnIEFORCAobG9jYXRpb25faWQgPSA/IE9SIGxvY2F0aW9uX2lkIElTIE5VTEwpJztcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bihzcWwsIHBhcmFtcywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZGVsZXRpbmcgam9iIHBvc3Rpbmc6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBqb2IgcG9zdGluZy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdKb2IgcG9zdGluZyBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwNCkuc2VuZCgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuXHJcbi8vIFVwZGF0ZSBBcHBsaWNhbnQgQVBJIGVuZHBvaW50cyB0byB1c2Ugam9iX3Bvc3RpbmdfaWRcclxuYXBwLnBvc3QoJy9hcGkvYXBwbGljYW50cycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGpvYl9wb3N0aW5nX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBub3RlcywgbG9jYXRpb25faWQsIHBob25lX251bWJlciB9ID0gcmVxLmJvZHk7IC8vIEFkZGVkIHBob25lX251bWJlclxyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcbiAgICBjb25zdCBhcHBsaWNhdGlvbl9kYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOyAvLyBDdXJyZW50IGRhdGUvdGltZSBmb3IgYXBwbGljYXRpb25cclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBBZGRpbmcgQXBwbGljYW50XHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gYWRkIGFwcGxpY2FudHMuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygam9iX3Bvc3RpbmdfaWQgIT09ICdudW1iZXInIHx8IGpvYl9wb3N0aW5nX2lkIDw9IDApIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0EgdmFsaWQgam9iIHBvc3RpbmcgSUQgaXMgcmVxdWlyZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICghZnVsbF9uYW1lIHx8IHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZW1haWwgfHwgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBCYXNpYyBwaG9uZSBudW1iZXIgdmFsaWRhdGlvbiAoc2ltcGxlIGNoZWNrIGZvciBub24tZW1wdHkgc3RyaW5nLCBjb3VsZCBiZSBtb3JlIGNvbXBsZXggd2l0aCByZWdleClcclxuICAgIGlmICghcGhvbmVfbnVtYmVyIHx8IHR5cGVvZiBwaG9uZV9udW1iZXIgIT09ICdzdHJpbmcnIHx8IHBob25lX251bWJlci50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiUGhvbmUgbnVtYmVyIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKG5vdGVzICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG5vdGVzICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm90ZXMgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGxvY2F0aW9uX2lkICE9PSAnbnVtYmVyJyAmJiBsb2NhdGlvbl9pZCAhPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTG9jYXRpb24gSUQgbXVzdCBiZSBhIG51bWJlciBvciBudWxsIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIFZlcmlmeSBqb2JfcG9zdGluZ19pZCBiZWxvbmdzIHRvIHRoZSBjb21wYW55LCBhbmQgZm9yIGxvY2F0aW9uX2FkbWluLCB0byB0aGVpciBsb2NhdGlvblxyXG4gICAgZGIuZ2V0KCdTRUxFQ1Qgam9iX3Bvc3RpbmdfaWQsIGxvY2F0aW9uX2lkIEZST00gSm9iUG9zdGluZ3MgV0hFUkUgam9iX3Bvc3RpbmdfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPycsIFtqb2JfcG9zdGluZ19pZCwgY29tcGFueUlkXSwgKGVyciwgam9iUG9zdGluZykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHZlcmlmeWluZyBqb2IgcG9zdGluZzpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciB3aGVuIHZlcmlmeWluZyBqb2IgcG9zdGluZy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICgham9iUG9zdGluZykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0pvYiBQb3N0aW5nIG5vdCBmb3VuZCBvciBkb2VzIG5vdCBiZWxvbmcgdG8geW91ciBjb21wYW55LicgfSk7IH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBMb2NhdGlvbiBhZG1pbiBjYW4gb25seSBhZGQgYXBwbGljYW50cyB0byBqb2JzIGluIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uIG9yIHVuYXNzaWduZWQgam9ic1xyXG4gICAgICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIGpvYlBvc3RpbmcubG9jYXRpb25faWQgIT09IGN1cnJlbnRVc2VyTG9jYXRpb25JZCAmJiBqb2JQb3N0aW5nLmxvY2F0aW9uX2lkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gY2Fubm90IGFkZCBhcHBsaWNhbnRzIHRvIGpvYnMgb3V0c2lkZSB0aGVpciBhc3NpZ25lZCBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAnSU5TRVJUIElOVE8gQXBwbGljYW50cyAoY29tcGFueV9pZCwgbG9jYXRpb25faWQsIGpvYl9wb3N0aW5nX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBwaG9uZV9udW1iZXIsIG5vdGVzLCBhcHBsaWNhdGlvbl9kYXRlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8pJyxcclxuICAgICAgICAgICAgW2NvbXBhbnlJZCwgbG9jYXRpb25faWQgfHwgam9iUG9zdGluZy5sb2NhdGlvbl9pZCwgam9iX3Bvc3RpbmdfaWQsIGZ1bGxfbmFtZSwgZW1haWwsIHBob25lX251bWJlciwgbm90ZXMsIGFwcGxpY2F0aW9uX2RhdGVdLCAvLyBVc2UgbG9jYXRpb25faWQgZnJvbSBwYXlsb2FkIG9yIGpvYiBwb3N0aW5nXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKGluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluc2VydEVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgY3JlYXRpbmcgYXBwbGljYW50OlwiLCBpbnNlcnRFcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgYXBwbGljYW50LicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdBcHBsaWNhbnQgYWRkZWQgc3VjY2Vzc2Z1bGx5IScsIGFwcGxpY2FudElkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAuZ2V0KCcvYXBpL2FwcGxpY2FudHMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBqb2JfcG9zdGluZ19pZCwgc3RhdHVzLCBsb2NhdGlvbl9pZCB9ID0gcmVxLnF1ZXJ5OyAvLyBBZGRlZCBqb2JfcG9zdGluZ19pZCwgc3RhdHVzLCBsb2NhdGlvbl9pZCBmaWx0ZXJzXHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgdXNlcklkOiBjdXJyZW50VXNlcklkLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIGxldCBzcWwgPSBgU0VMRUNUIEFwcGxpY2FudHMuKiwgSm9iUG9zdGluZ3MudGl0bGUgQVMgam9iX3RpdGxlX25hbWVcclxuICAgICAgICAgICAgICAgRlJPTSBBcHBsaWNhbnRzXHJcbiAgICAgICAgICAgICAgIExFRlQgSk9JTiBKb2JQb3N0aW5ncyBPTiBBcHBsaWNhbnRzLmpvYl9wb3N0aW5nX2lkID0gSm9iUG9zdGluZ3Muam9iX3Bvc3RpbmdfaWRcclxuICAgICAgICAgICAgICAgV0hFUkUgQXBwbGljYW50cy5jb21wYW55X2lkID0gP2A7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbY29tcGFueUlkXTtcclxuXHJcbiAgICAvLyBJbnB1dCB2YWxpZGF0aW9uIGZvciBxdWVyeSBwYXJhbWV0ZXJzXHJcbiAgICBjb25zdCBhbGxvd2VkU3RhdHVzZXMgPSBbJ0FwcGxpZWQnLCAnSW50ZXJ2aWV3aW5nJywgJ1JlamVjdGVkJywgJ0hpcmVkJ107IC8vIERlZmluZSB2YWxpZCBzdGF0dXNlc1xyXG4gICAgaWYgKHN0YXR1cyAmJiAhYWxsb3dlZFN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgYXBwbGljYW50IHN0YXR1cyBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChqb2JfcG9zdGluZ19pZCAmJiBpc05hTihwYXJzZUludChqb2JfcG9zdGluZ19pZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGpvYiBwb3N0aW5nIElEIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICYmIGlzTmFOKHBhcnNlSW50KGxvY2F0aW9uX2lkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgbG9jYXRpb24gSUQgZmlsdGVyIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHN0YXR1cykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBBcHBsaWNhbnRzLnN0YXR1cyA9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKHN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICBpZiAoY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIHNxbCArPSBgIEFORCAoQXBwbGljYW50cy5sb2NhdGlvbl9pZCA9ID8gT1IgQXBwbGljYW50cy5sb2NhdGlvbl9pZCBJUyBOVUxMKWA7IC8vIExvY2F0aW9uIGFkbWluIHNlZXMgYXBwbGljYW50cyBmb3IgdGhlaXIgbG9jYXRpb24gb3IgdW5hc3NpZ25lZFxyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gbm90IGFzc2lnbmVkIHRvIGEgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdlbXBsb3llZScpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgQXBwbGljYW50cy51c2VyX2lkID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJJZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zIHRvIHZpZXcgYXBwbGljYW50cy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFwcGx5IGpvYl9wb3N0aW5nX2lkIGZpbHRlciBpZiBwcm92aWRlZFxyXG4gICAgaWYgKGpvYl9wb3N0aW5nX2lkKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIEFwcGxpY2FudHMuam9iX3Bvc3RpbmdfaWQgPSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChqb2JfcG9zdGluZ19pZCk7XHJcbiAgICB9XHJcbiAgICAvLyBBcHBseSBsb2NhdGlvbiBmaWx0ZXIgZnJvbSBxdWVyeSBwYXJhbXMgZm9yIHN1cGVyX2FkbWluXHJcbiAgICBpZiAobG9jYXRpb25faWQgJiYgcm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBBcHBsaWNhbnRzLmxvY2F0aW9uX2lkID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkYi5hbGwoc3FsLCBwYXJhbXMsIChlcnIsIHJvd3MpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBhcHBsaWNhbnRzOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIGFwcGxpY2FudHMuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuanNvbihyb3dzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBQVVQgL2FwaS9hcHBsaWNhbnRzLzppZFxyXG4gKiBVcGRhdGVzIGFuIGFwcGxpY2FudCdzIGRldGFpbHMgKGUuZy4sIHN0YXR1cywgbm90ZXMpLlxyXG4gKi9cclxuYXBwLnB1dCgnL2FwaS9hcHBsaWNhbnRzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBmdWxsX25hbWUsIGVtYWlsLCBzdGF0dXMsIHJlc3VtZV91cmwsIG5vdGVzLCBsb2NhdGlvbl9pZCwgam9iX3Bvc3RpbmdfaWQsIHBob25lX251bWJlciB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBBcHBsaWNhbnQgVXBkYXRlXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gdXBkYXRlIGFwcGxpY2FudCByZWNvcmRzLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgYXBwbGljYW50IElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZnVsbF9uYW1lICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkZ1bGwgbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmIChlbWFpbCAhPT0gdW5kZWZpbmVkICYmICFpc1ZhbGlkRW1haWwoZW1haWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBlbWFpbCBhZGRyZXNzIG11c3QgYmUgcHJvdmlkZWQgaWYgY2hhbmdpbmcgZW1haWwuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocGhvbmVfbnVtYmVyICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBwaG9uZV9udW1iZXIgIT09ICdzdHJpbmcnIHx8IHBob25lX251bWJlci50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlBob25lIG51bWJlciBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFsbG93ZWRTdGF0dXNlcyA9IFsnQXBwbGllZCcsICdJbnRlcnZpZXdpbmcnLCAnUmVqZWN0ZWQnLCAnSGlyZWQnXTtcclxuICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCAmJiAhYWxsb3dlZFN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgc3RhdHVzIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocmVzdW1lX3VybCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXN1bWVfdXJsICE9PSAnc3RyaW5nJykgeyAvLyBBc3N1bWluZyByZXN1bWVfdXJsIGlzIGEgc3RyaW5nIFVSTFxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUmVzdW1lIFVSTCBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobm90ZXMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygbm90ZXMgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdOb3RlcyBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25faWQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbG9jYXRpb25faWQgIT09ICdudW1iZXInICYmIGxvY2F0aW9uX2lkICE9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdMb2NhdGlvbiBJRCBtdXN0IGJlIGEgbnVtYmVyIG9yIG51bGwgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChqb2JfcG9zdGluZ19pZCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBqb2JfcG9zdGluZ19pZCAhPT0gJ251bWJlcicgJiYgam9iX3Bvc3RpbmdfaWQgIT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0pvYiBwb3N0aW5nIElEIG11c3QgYmUgYSBudW1iZXIgb3IgbnVsbCBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBsZXQgdXBkYXRlU3FsID0gJ1VQREFURSBBcHBsaWNhbnRzIFNFVCAnO1xyXG4gICAgY29uc3QgdXBkYXRlUGFyYW1zID0gW107XHJcbiAgICBjb25zdCBjbGF1c2VzID0gW107XHJcblxyXG4gICAgaWYgKGZ1bGxfbmFtZSAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgnZnVsbF9uYW1lID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChmdWxsX25hbWUpOyB9XHJcbiAgICBpZiAoZW1haWwgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ2VtYWlsID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChlbWFpbCk7IH1cclxuICAgIGlmIChwaG9uZV9udW1iZXIgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ3Bob25lX251bWJlciA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2gocGhvbmVfbnVtYmVyKTsgfVxyXG4gICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgnc3RhdHVzID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChzdGF0dXMpOyB9XHJcbiAgICBpZiAocmVzdW1lX3VybCAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgncmVzdW1lX3VybCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2gocmVzdW1lX3VybCk7IH1cclxuICAgIGlmIChub3RlcyAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgnbm90ZXMgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKG5vdGVzKTsgfVxyXG4gICAgXHJcbiAgICAvLyBBZG1pbnMgY2FuIHVwZGF0ZSBsb2NhdGlvbl9pZCBvciBqb2JfcG9zdGluZ19pZCwgd2l0aCByZXN0cmljdGlvbnMgZm9yIGxvY2F0aW9uX2FkbWluXHJcbiAgICBpZiAobG9jYXRpb25faWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGlmIChyb2xlID09PSAnc3VwZXJfYWRtaW4nKSB7XHJcbiAgICAgICAgICAgIGNsYXVzZXMucHVzaCgnbG9jYXRpb25faWQgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKGxvY2F0aW9uX2lkKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICAgICAgaWYgKGxvY2F0aW9uX2lkICE9PSBjdXJyZW50VXNlckxvY2F0aW9uSWQgJiYgbG9jYXRpb25faWQgIT09IG51bGwpIHsgLy8gbG9jYXRpb25faWQgY2FuIGJlIG51bGwgKGNvbXBhbnktd2lkZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gY2Fubm90IGFzc2lnbiBhcHBsaWNhbnRzIHRvIGFub3RoZXIgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiBsb2NhdGlvbiBhZG1pbiB1cGRhdGVzIGFwcGxpY2FudCBsb2NhdGlvbiwgYW5kIGl0J3MgdGhlaXIgbG9jYXRpb24sIG9yIHNldHRpbmcgdG8gbnVsbCwgaXQncyBhbGxvd2VkXHJcbiAgICAgICAgICAgIGNsYXVzZXMucHVzaCgnbG9jYXRpb25faWQgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKGxvY2F0aW9uX2lkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoam9iX3Bvc3RpbmdfaWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2pvYl9wb3N0aW5nX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChqb2JfcG9zdGluZ19pZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgICAgIC8vIFZlcmlmeSBuZXcgam9iX3Bvc3RpbmdfaWQgYmVsb25ncyB0byB0aGUgbG9jYXRpb24gYWRtaW4ncyBhc3NpZ25lZCBsb2NhdGlvbiBvciBpcyBjb21wYW55LXdpZGVcclxuICAgICAgICAgICAgZGIuZ2V0KCdTRUxFQ1Qgam9iX3Bvc3RpbmdfaWQsIGxvY2F0aW9uX2lkIEZST00gSm9iUG9zdGluZ3MgV0hFUkUgam9iX3Bvc3RpbmdfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPycsIFtqb2JfcG9zdGluZ19pZCwgY29tcGFueUlkXSwgKGVyciwgam9iKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEQiBlcnJvciB2ZXJpZnlpbmcgam9iIHBvc3RpbmcgZm9yIHVwZGF0ZTpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciB2ZXJpZnlpbmcgam9iIHBvc3RpbmcuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgICAgIGlmICgham9iKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSm9iIFBvc3Rpbmcgbm90IGZvdW5kIG9yIGRvZXMgbm90IGJlbG9uZyB0byB5b3VyIGNvbXBhbnkuJyB9KTsgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGpvYi5sb2NhdGlvbl9pZCAhPT0gbnVsbCAmJiBqb2IubG9jYXRpb25faWQgIT09IGN1cnJlbnRVc2VyTG9jYXRpb25JZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gY2Fubm90IGFzc2lnbiBhcHBsaWNhbnRzIHRvIGpvYnMgb3V0c2lkZSB0aGVpciBhc3NpZ25lZCBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdqb2JfcG9zdGluZ19pZCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2goam9iX3Bvc3RpbmdfaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgaWYgKGNsYXVzZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm8gZmllbGRzIHByb3ZpZGVkIGZvciB1cGRhdGUuJyB9KTsgfVxyXG5cclxuICAgIHVwZGF0ZVNxbCArPSBjbGF1c2VzLmpvaW4oJywgJykgKyAnIFdIRVJFIGFwcGxpY2FudF9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JztcclxuICAgIHVwZGF0ZVBhcmFtcy5wdXNoKGlkLCBjb21wYW55SWQpO1xyXG5cclxuICAgIC8vIEZvciBsb2NhdGlvbl9hZG1pbiwgZW5zdXJlIHRoZXkgY2FuIG9ubHkgdXBkYXRlIGFwcGxpY2FudHMgd2l0aGluIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHVwZGF0ZVNxbCArPSAnIEFORCAobG9jYXRpb25faWQgPSA/IE9SIGxvY2F0aW9uX2lkIElTIE5VTEwpJzsgLy8gQWxsb3cgdXBkYXRpbmcgdW5hc3NpZ25lZCBhcHBsaWNhbnRzIHRvb1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VyTG9jYXRpb25JZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIucnVuKHVwZGF0ZVNxbCwgdXBkYXRlUGFyYW1zLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciB1cGRhdGluZyBhcHBsaWNhbnQ6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBhcHBsaWNhbnQuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnQXBwbGljYW50IG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byB1cGRhdGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0FwcGxpY2FudCB1cGRhdGVkIHN1Y2Nlc3NmdWxseSEnIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBERUxFVEUgL2FwaS9hcHBsaWNhbnRzLzppZFxyXG4gKiBEZWxldGVzIGFuIGFwcGxpY2FudC5cclxuICogUmVxdWlyZXMgc3VwZXJfYWRtaW4gb3IgbG9jYXRpb25fYWRtaW4gKGZvciB0aGVpciBsb2NhdGlvbidzIGFwcGxpY2FudHMpLlxyXG4gKi9cclxuYXBwLmRlbGV0ZSgnL2FwaS9hcHBsaWNhbnRzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgSUQgcGFyYW1ldGVyXHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgYXBwbGljYW50IElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicgJiYgcm9sZSAhPT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogT25seSBhZG1pbnMgY2FuIGRlbGV0ZSBhcHBsaWNhbnRzLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNxbCA9ICdERUxFVEUgRlJPTSBBcHBsaWNhbnRzIFdIRVJFIGFwcGxpY2FudF9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JztcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtpZCwgY29tcGFueUlkXTtcclxuXHJcbiAgICAvLyBBZGRpdGlvbmFsIHNlY3VyaXR5IGZvciBsb2NhdGlvbl9hZG1pbjogZW5zdXJlIHRoZXkgb25seSBkZWxldGUgYXBwbGljYW50cyBpbiB0aGVpciBvd24gbG9jYXRpb25cclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgc3FsICs9ICcgQU5EIChsb2NhdGlvbl9pZCA9ID8gT1IgbG9jYXRpb25faWQgSVMgTlVMTCknO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VyTG9jYXRpb25JZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIucnVuKHNxbCwgcGFyYW1zLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBkZWxldGluZyBhcHBsaWNhbnQ6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBhcHBsaWNhbnQuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnQXBwbGljYW50IG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byBkZWxldGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjA0KS5zZW5kKCk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyAtLS0gRG9jdW1lbnQgTWFuYWdlbWVudCBSb3V0ZXMgLS0tXHJcblxyXG4vKipcclxuICogUE9TVCAvYXBpL2RvY3VtZW50c1xyXG4gKiBVcGxvYWRzIChzYXZlcyBtZXRhZGF0YSBmb3IpIGEgbmV3IGRvY3VtZW50LlxyXG4gKiBSZXF1aXJlcyBhdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIE5vdGU6IEFjdHVhbCBmaWxlIHN0b3JhZ2UgaXMgYXNzdW1lZCB0byBiZSBoYW5kbGVkIGJ5IGEgc2VwYXJhdGUgc2VydmljZSAoZS5nLiwgUzMpLlxyXG4gKiBUaGlzIGVuZHBvaW50IG9ubHkgc3RvcmVzIHRoZSBtZXRhZGF0YSBhbmQgYSBVUkwuXHJcbiAqL1xyXG5hcHAucG9zdCgnL2FwaS9kb2N1bWVudHMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyB0aXRsZSwgZmlsZV9uYW1lLCBmaWxlX3R5cGUsIGZpbGVfdXJsLCBkZXNjcmlwdGlvbiB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgdXNlcklkIH0gPSByZXEudXNlcjtcclxuICAgIGNvbnN0IHVwbG9hZF9kYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIERvY3VtZW50IFVwbG9hZFxyXG4gICAgaWYgKCF0aXRsZSB8fCB0eXBlb2YgdGl0bGUgIT09ICdzdHJpbmcnIHx8IHRpdGxlLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0RvY3VtZW50IHRpdGxlIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFmaWxlX25hbWUgfHwgdHlwZW9mIGZpbGVfbmFtZSAhPT0gJ3N0cmluZycgfHwgZmlsZV9uYW1lLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ZpbGUgbmFtZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICghZmlsZV90eXBlIHx8IHR5cGVvZiBmaWxlX3R5cGUgIT09ICdzdHJpbmcnIHx8IGZpbGVfdHlwZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdGaWxlIHR5cGUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLicgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBCYXNpYyBVUkwgdmFsaWRhdGlvbjogY2hlY2tzIGZvciBodHRwKHMpIHByb3RvY29sIGFuZCBzb21lIGNvbnRlbnQuIENhbiBiZSBtb3JlIHJvYnVzdC5cclxuICAgIGNvbnN0IHVybFJlZ2V4ID0gL15odHRwcz86XFwvXFwvW15cXHMkLj8jXS5bXlxcc10qJC9pO1xyXG4gICAgaWYgKCFmaWxlX3VybCB8fCB0eXBlb2YgZmlsZV91cmwgIT09ICdzdHJpbmcnIHx8ICF1cmxSZWdleC50ZXN0KGZpbGVfdXJsKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnQSB2YWxpZCBmaWxlIFVSTCAoc3RhcnRpbmcgd2l0aCBodHRwIG9yIGh0dHBzKSBpcyByZXF1aXJlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGRlc2NyaXB0aW9uICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm90ZXMgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bihcclxuICAgICAgICAnSU5TRVJUIElOVE8gRG9jdW1lbnRzIChjb21wYW55X2lkLCB1c2VyX2lkLCB0aXRsZSwgZmlsZV9uYW1lLCBmaWxlX3R5cGUsIGZpbGVfdXJsLCBkZXNjcmlwdGlvbiwgdXBsb2FkX2RhdGUpIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPyknLFxyXG4gICAgICAgIFtjb21wYW55SWQsIHVzZXJJZCwgdGl0bGUsIGZpbGVfbmFtZSwgZmlsZV90eXBlLCBmaWxlX3VybCwgZGVzY3JpcHRpb24sIHVwbG9hZF9kYXRlXSxcclxuICAgICAgICBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHVwbG9hZGluZyBkb2N1bWVudDpcIiwgZXJyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIHVwbG9hZCBkb2N1bWVudCBtZXRhZGF0YS4nKSk7IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdEb2N1bWVudCBtZXRhZGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkhJywgZG9jdW1lbnRJZDogdGhpcy5sYXN0SUQgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxufSk7XHJcblxyXG4vKipcclxuICogR0VUIC9hcGkvZG9jdW1lbnRzXHJcbiAqIFJldHJpZXZlcyBhIGxpc3Qgb2YgZG9jdW1lbnRzIGZvciB0aGUgY29tcGFueS5cclxuICogRmlsdGVycyBjYW4gYmUgYWRkZWQgKGUuZy4sIGJ5IHVwbG9hZGVyLCBieSB0eXBlKS5cclxuICogUmVxdWlyZXMgYXV0aGVudGljYXRlZCB1c2VyLiBTdXBlciBhZG1pbnMgY2FuIHNlZSBhbGwsIG90aGVycyBjYW4gc2VlIG93biBkb2N1bWVudHMuXHJcbiAqL1xyXG5hcHAuZ2V0KCcvYXBpL2RvY3VtZW50cycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgdXNlcklkLCByb2xlIH0gPSByZXEudXNlcjtcclxuICAgIFxyXG4gICAgbGV0IHNxbCA9ICdTRUxFQ1QgKiBGUk9NIERvY3VtZW50cyBXSEVSRSBjb21wYW55X2lkID0gPyc7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbY29tcGFueUlkXTtcclxuXHJcbiAgICAvLyBOb24tc3VwZXItYWRtaW5zIG9ubHkgc2VlIHRoZWlyIG93biBkb2N1bWVudHNcclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nKSB7XHJcbiAgICAgICAgc3FsICs9ICcgQU5EIHVzZXJfaWQgPSA/JztcclxuICAgICAgICBwYXJhbXMucHVzaCh1c2VySWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLmFsbChzcWwsIHBhcmFtcywgKGVyciwgcm93cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGZldGNoaW5nIGRvY3VtZW50czpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBkb2N1bWVudHMuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuanNvbihyb3dzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBERUxFVEUgL2FwaS9kb2N1bWVudHMvOmlkXHJcbiAqIERlbGV0ZXMgYSBkb2N1bWVudCByZWNvcmQuXHJcbiAqIFJlcXVpcmVzIHN1cGVyX2FkbWluIG9yIHRoZSB1c2VyIHdobyB1cGxvYWRlZCBpdC5cclxuICovXHJcbmFwcC5kZWxldGUoJy9hcGkvZG9jdW1lbnRzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHVzZXJJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgSUQgcGFyYW1ldGVyXHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgZG9jdW1lbnQgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc3FsID0gJ0RFTEVURSBGUk9NIERvY3VtZW50cyBXSEVSRSBkb2N1bWVudF9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JztcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtpZCwgY29tcGFueUlkXTtcclxuXHJcbiAgICAvLyBPbmx5IHN1cGVyX2FkbWluIG9yIHRoZSBvcmlnaW5hbCB1cGxvYWRlciBjYW4gZGVsZXRlXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSAnIEFORCB1c2VyX2lkID0gPyc7XHJcbiAgICAgICAgcGFyYW1zLnB1c2godXNlcklkKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4oc3FsLCBwYXJhbXMsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGRlbGV0aW5nIGRvY3VtZW50OlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgZG9jdW1lbnQuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnRG9jdW1lbnQgbm90IGZvdW5kIG9yIG5vdCBhdXRob3JpemVkIHRvIGRlbGV0ZS4nIH0pOyB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDQpLnNlbmQoKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vIEZhbGxiYWNrIGZvciBhbnkgb3RoZXIgR0VUIHJlcXVlc3Qgbm90IGhhbmRsZWQgYnkgYW4gQVBJIHJvdXRlIChzZXJ2ZXMgaW5kZXguaHRtbCBmb3IgU1BBIGJlaGF2aW9yKVxyXG4vLyBUaGlzIHNob3VsZCBhbHdheXMgYmUgdGhlIExBU1Qgcm91dGUgaW4geW91ciBFeHByZXNzIGFwcFxyXG5hcHAuZ2V0KC8nKicvLCAocmVxLCByZXMpID0+IHtcclxuICAgIC8vIENvcnJlY3RseSBzZXJ2ZSB0aGUgaW5kZXguaHRtbCBmcm9tIHRoZSBwYXJlbnQgZGlyZWN0b3J5XHJcbiAgICByZXMuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJywgJ2luZGV4Lmh0bWwnKSk7XHJcbn0pO1xyXG5cclxuLy8gLS0tIEdsb2JhbCBFcnJvciBIYW5kbGluZyBNaWRkbGV3YXJlIC0tLVxyXG4vLyBUaGlzIHNob3VsZCBiZSB0aGUgdmVyeSBsYXN0IG1pZGRsZXdhcmUgaW4geW91ciBFeHByZXNzIGFwcFxyXG5hcHAudXNlKChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBVbmhhbmRsZWQgRXJyb3I6ICR7ZXJyLnN0YWNrfWApOyAvLyBMb2cgdGhlIGZ1bGwgc3RhY2sgdHJhY2UgZm9yIGRlYnVnZ2luZ1xyXG4gICAgLy8gUmVzcG9uZCB3aXRoIGEgZ2VuZXJpYyBlcnJvciBtZXNzYWdlIGZvciB0aGUgY2xpZW50XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdBbiB1bmV4cGVjdGVkIHNlcnZlciBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxyXG4gICAgICAgIC8vIEluIGRldmVsb3BtZW50LCB5b3UgbWlnaHQgc2VuZCBtb3JlIGRldGFpbHM6XHJcbiAgICAgICAgLy8gbWVzc2FnZTogZXJyLm1lc3NhZ2UsXHJcbiAgICAgICAgLy8gc3RhY2s6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyLnN0YWNrIDogdW5kZWZpbmVkXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyAtLS0gU2VydmVyIFN0YXJ0IC0tLVxyXG4vLyBUaGlzIGNvbmRpdGlvbmFsIGV4cG9ydCBhbGxvd3MgdGhlIGFwcCB0byBiZSBpbXBvcnRlZCBmb3IgdGVzdGluZ1xyXG4vLyB3aXRob3V0IHN0YXJ0aW5nIHRoZSBzZXJ2ZXIgbGlzdGVuZXIgd2hlbiB0aGUgdGVzdCBydW5uZXIgcmVxdWlyZXMgaXQuXHJcbmlmIChyZXF1aXJlLm1haW4gPT09IG1vZHVsZSkge1xyXG4gICAgLy8gT25seSBsaXN0ZW4gaWYgdGhpcyBmaWxlIGlzIHJ1biBkaXJlY3RseSAobm90IHJlcXVpcmVkIGFzIGEgbW9kdWxlKVxyXG4gICAgYXBwLmxpc3RlbihQT1JULCAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFNlcnZlciBpcyBydW5uaW5nIHN1Y2Nlc3NmdWxseSBvbiBodHRwOi8vbG9jYWxob3N0OiR7UE9SVH1gKTtcclxuICAgIH0pO1xyXG59IGVsc2Uge1xyXG4gICAgLy8gRXhwb3J0IHRoZSBhcHAgZm9yIHRlc3RpbmcgcHVycG9zZXNcclxuICAgIG1vZHVsZS5leHBvcnRzID0gYXBwO1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7MEJBQ0EsdUtBQUFBLENBQUEsRUFBQUMsQ0FBQSxFQUFBQyxDQUFBLHdCQUFBQyxNQUFBLEdBQUFBLE1BQUEsT0FBQUMsQ0FBQSxHQUFBRixDQUFBLENBQUFHLFFBQUEsa0JBQUFDLENBQUEsR0FBQUosQ0FBQSxDQUFBSyxXQUFBLDhCQUFBQyxFQUFBTixDQUFBLEVBQUFFLENBQUEsRUFBQUUsQ0FBQSxFQUFBRSxDQUFBLFFBQUFDLENBQUEsR0FBQUwsQ0FBQSxJQUFBQSxDQUFBLENBQUFNLFNBQUEsWUFBQUMsU0FBQSxHQUFBUCxDQUFBLEdBQUFPLFNBQUEsRUFBQUMsQ0FBQSxHQUFBQyxNQUFBLENBQUFDLE1BQUEsQ0FBQUwsQ0FBQSxDQUFBQyxTQUFBLFVBQUFLLG1CQUFBLENBQUFILENBQUEsdUJBQUFWLENBQUEsRUFBQUUsQ0FBQSxFQUFBRSxDQUFBLFFBQUFFLENBQUEsRUFBQUMsQ0FBQSxFQUFBRyxDQUFBLEVBQUFJLENBQUEsTUFBQUMsQ0FBQSxHQUFBWCxDQUFBLFFBQUFZLENBQUEsT0FBQUMsQ0FBQSxLQUFBRixDQUFBLEtBQUFiLENBQUEsS0FBQWdCLENBQUEsRUFBQXBCLENBQUEsRUFBQXFCLENBQUEsRUFBQUMsQ0FBQSxFQUFBTixDQUFBLEVBQUFNLENBQUEsQ0FBQUMsSUFBQSxDQUFBdkIsQ0FBQSxNQUFBc0IsQ0FBQSxXQUFBQSxFQUFBckIsQ0FBQSxFQUFBQyxDQUFBLFdBQUFNLENBQUEsR0FBQVAsQ0FBQSxFQUFBUSxDQUFBLE1BQUFHLENBQUEsR0FBQVosQ0FBQSxFQUFBbUIsQ0FBQSxDQUFBZixDQUFBLEdBQUFGLENBQUEsRUFBQW1CLENBQUEsZ0JBQUFDLEVBQUFwQixDQUFBLEVBQUFFLENBQUEsU0FBQUssQ0FBQSxHQUFBUCxDQUFBLEVBQUFVLENBQUEsR0FBQVIsQ0FBQSxFQUFBSCxDQUFBLE9BQUFpQixDQUFBLElBQUFG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RyxFQUFFO01BQUVmLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLG1DQUFtQyxFQUFFYyxHQUFHLENBQUM7TUFBRSxPQUFPZ0IsSUFBSSxDQUFDLElBQUlwRSxLQUFLLENBQUMsNEJBQTRCLENBQUMsQ0FBQztJQUFFLENBQUMsQ0FBQztJQUM1SCxJQUFJLElBQUksQ0FBQ2lLLE9BQU8sS0FBSyxDQUFDLEVBQUU7TUFBRSxPQUFPN0ksR0FBRyxDQUFDb0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDYyxJQUFJLENBQUM7UUFBRWhCLEtBQUssRUFBRTtNQUFrRCxDQUFDLENBQUM7SUFBRTtJQUNySGxCLEdBQUcsQ0FBQ29CLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUM7RUFDMUIsQ0FBQyxDQUFDO0FBQ04sQ0FBQyxDQUFDOztBQUVGO0FBQ0E7QUFDQW5ELEdBQUcsQ0FBQzJFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsVUFBQzlDLEdBQUcsRUFBRUMsR0FBRyxFQUFLO0VBQ3pCO0VBQ0FBLEdBQUcsQ0FBQzBQLFFBQVEsQ0FBQ3RTLElBQUksQ0FBQ21GLElBQUksQ0FBQ0MsU0FBUyxFQUFFLElBQUksRUFBRSxZQUFZLENBQUMsQ0FBQztBQUMxRCxDQUFDLENBQUM7O0FBRUY7QUFDQTtBQUNBdEUsR0FBRyxDQUFDZSxHQUFHLENBQUMsVUFBQytDLEdBQUcsRUFBRWpDLEdBQUcsRUFBRUMsR0FBRyxFQUFFZ0QsSUFBSSxFQUFLO0VBQzdCL0IsT0FBTyxDQUFDQyxLQUFLLHFCQUFBQyxNQUFBLENBQXFCYSxHQUFHLENBQUMyTixLQUFLLENBQUUsQ0FBQyxDQUFDLENBQUM7RUFDaEQ7RUFDQTNQLEdBQUcsQ0FBQ29CLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ2MsSUFBSSxDQUFDO0lBQ2pCaEIsS0FBSyxFQUFFO0lBQ1A7SUFDQTtJQUNBO0VBQ0osQ0FBQyxDQUFDO0FBQ04sQ0FBQyxDQUFDOztBQUVGO0FBQ0E7QUFDQTtBQUNBLElBQUlwRSxPQUFPLENBQUNlLElBQUksS0FBS0MsTUFBTSxFQUFFO0VBQ3pCO0VBQ0FJLEdBQUcsQ0FBQzBSLE1BQU0sQ0FBQzFRLElBQUksRUFBRSxZQUFNO0lBQ25CK0IsT0FBTyxDQUFDTyxHQUFHLHVEQUFBTCxNQUFBLENBQXVEakMsSUFBSSxDQUFFLENBQUM7RUFDN0UsQ0FBQyxDQUFDO0FBQ04sQ0FBQyxNQUFNO0VBQ0g7RUFDQXBCLE1BQU0sQ0FBQytSLE9BQU8sR0FBRzNSLEdBQUc7QUFDeEIiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","express","require","sqlite3","verbose","bcrypt","jwt","cors","path","csv","_require","Readable","rateLimit","morgan","process","env","NODE_ENV","main","module","config","stripeInstance","STRIPE_SECRET_KEY","app","allowedOrigins","CORS_ORIGIN","split","push","corsOptions","origin","callback","includes","msg","Error","indexOf","methods","credentials","optionsSuccessStatus","use","PORT","STRIPE_WEBHOOK_SECRET","authLimiter","windowMs","max","message","standardHeaders","legacyHeaders","post","raw","type","_ref","_callee","req","res","sig","event","session","userId","planId","subscriptionUpdated","subscriptionDeleted","invoiceSucceeded","invoiceFailed","_t","_t2","_context","headers","webhooks","constructEvent","body","console","error","concat","status","send","data","object","log","id","metadata","payment_status","db","run","customer","subscription","err","plan","json","received","_x","_x2","JWT_SECRET","join","__dirname","maxAge","immutable","Database","exit","get","serialize","authenticateToken","next","authHeader","token","verify","user","isValidEmail","email","test","_ref2","_callee2","_req$body","company_name","full_name","password","password_hash","_t3","_context2","trim","hash","newCompanyId","lastID","userInsertErr","_x3","_x4","_x5","_req$body2","_ref3","_callee3","isMatch","payload","_context3","compare","user_id","role","fullName","companyId","company_id","locationId","location_id","subscriptionStatus","subscription_status","plan_id","sign","expiresIn","_x6","_x7","_ref4","_callee4","_req$body3","_req$user","_t4","_context4","location","_x8","_x9","_x0","_ref5","_callee5","_req$body4","position","employee_id","_req$user2","currentUserLocationId","isLocationIdValid","locationVerification","_t5","_context5","isNaN","undefined","reject","_x1","_x10","_x11","_req$user3","put","_ref6","_callee7","_req$body5","currentPassword","newPassword","_context7","_ref7","_callee6","updateSql","updateParams","clauses","changesMade","existingUser","newPasswordHash","_t6","_context6","row","updateErr","changes","fetchErr","updatedUser","newPayload","newToken","_x15","_x16","_x12","_x13","_x14","_req$user4","sql","params","all","rows","_req$body6","location_name","location_address","_req$user5","_req$user6","parseInt","_req$user7","currentUserId","_req$query","query","filterRole","filterLocationId","allowedRoles","_req$user8","authenticatedUserId","_ref8","_callee8","_req$user9","allowedPlanIds","priceIdMap","stripePriceId","customerId","userRecord","_t7","_context8","STRIPE_PRICE_ID_PRO","STRIPE_PRICE_ID_ENT","stripe_customer_id","customers","checkout","sessions","mode","line_items","price","quantity","success_url","FRONTEND_URL","cancel_url","url","_x17","_x18","_x19","_req$body7","start_time","end_time","notes","_req$user0","Date","getTime","employee","insertErr","scheduleId","_req$query2","start_date","end_date","_req$user1","_req$user10","_req$body8","title","description","requirements","_req$user11","created_date","toISOString","_req$query3","_req$user12","allowedStatuses","_req$body9","_req$user13","_req$user14","_req$body0","job_posting_id","phone_number","_req$user15","application_date","jobPosting","applicantId","_req$query4","_req$user16","_req$body1","resume_url","_req$user17","job","_req$user18","_req$body10","file_name","file_type","file_url","_req$user19","upload_date","urlRegex","documentId","_req$user20","_req$user21","sendFile","stack","listen","exports"],"sourceRoot":"C:\\Users\\xarcy\\OneDrive\\Desktop\\onboardflow\\backend\\test\\","sources":["server.test.cjs"],"sourcesContent":["// --- Imports ---\r\nconst express = require('express');\r\nconst sqlite3 = require('sqlite3').verbose();\r\nconst bcrypt = require('bcryptjs');\r\nconst jwt = require('jsonwebtoken');\r\nconst cors = require('cors'); // Import cors\r\nconst path = require('path');\r\nconst csv = require('csv-parser'); // For CSV parsing\r\nconst { Readable } = require('stream'); // For creating a readable stream from a string\r\nconst rateLimit = require('express-rate-limit'); // Import rate-limiting middleware\r\nconst morgan = require('morgan'); // Import morgan for request logging\r\n\r\n// Load environment variables from .env file in development\r\n// IMPORTANT: Only load .env if server.js is run directly, NOT when required by tests.\r\nif (process.env.NODE_ENV !== 'production' && require.main === module) {\r\n    require('dotenv').config();\r\n}\r\n\r\n// Import the Stripe library and initialize it with your secret key\r\n// Use process.env.STRIPE_SECRET_KEY for production\r\nconst stripeInstance = require('stripe')(process.env.STRIPE_SECRET_KEY || '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');\r\n\r\n// --- App Initialization ---\r\nconst app = express();\r\n\r\n// Configure CORS for production environment\r\nconst allowedOrigins = process.env.CORS_ORIGIN ? process.env.CORS_ORIGIN.split(',') : ['http://localhost:8000']; // Default to localhost for development\r\n\r\n// Add 'null' to allowed origins if not in production and not explicitly set for local file access\r\nif (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\r\n    allowedOrigins.push('null');\r\n}\r\n\r\nconst corsOptions = {\r\n    origin: function (origin, callback) {\r\n        // Allow requests with no origin (like mobile apps, curl, or local file access if 'null' is in allowedOrigins)\r\n        if (!origin) {\r\n            // Check if 'null' is explicitly allowed or if we're in dev and no CORS_ORIGIN is set\r\n            if (allowedOrigins.includes('null') || (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN)) {\r\n                return callback(null, true);\r\n            }\r\n            const msg = 'The CORS policy for this site does not allow access from the specified Origin.';\r\n            return callback(new Error(msg), false);\r\n        }\r\n\r\n        if (allowedOrigins.indexOf(origin) === -1) {\r\n            const msg = 'The CORS policy for this site does not allow access from the specified Origin.';\r\n            return callback(new Error(msg), false);\r\n        }\r\n        return callback(null, true);\r\n    },\r\n    methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\r\n    credentials: true, // Allow cookies to be sent\r\n    optionsSuccessStatus: 204 // Some legacy browsers (IE11, various SmartTVs) choke on 204\r\n};\r\napp.use(cors(corsOptions));\r\n\r\n\r\n// Use process.env.PORT for production, fallback to 3000 for local development\r\nconst PORT = process.env.PORT || 3000;\r\n\r\n// Define a webhook secret for Stripe. This should also be an environment variable.\r\nconst STRIPE_WEBHOOK_SECRET = process.env.STRIPE_WEBHOOK_SECRET || 'whsec_YOUR_WEBHOOK_SECRET';\r\n\r\n// --- Rate Limiting Configuration ---\r\nconst authLimiter = rateLimit({\r\n    windowMs: 15 * 60 * 1000, // 15 minutes\r\n    max: 10, // Max 10 requests per 15 minutes per IP\r\n    message: 'Too many login/registration attempts from this IP, please try again after 15 minutes',\r\n    standardHeaders: true, // Return rate limit info in the `RateLimit-*` headers\r\n    legacyHeaders: false, // Disable the `X-RateLimit-*` headers\r\n});\r\n\r\n// --- Middleware for Stripe Webhook (MUST be before express.json() for other routes) --\r\n// This route needs the raw body for signature verification.\r\napp.post('/api/stripe-webhook', express.raw({type: 'application/json'}), async (req, res) => {\r\n    const sig = req.headers['stripe-signature'];\r\n\r\n    let event;\r\n\r\n    try {\r\n        event = stripeInstance.webhooks.constructEvent(req.body, sig, STRIPE_WEBHOOK_SECRET);\r\n    } catch (err) {\r\n        console.error(`Webhook Error: ${err.message}`);\r\n        return res.status(400).send(`Webhook Error: ${err.message}`);\r\n    }\r\n\r\n    // Handle the event\r\n    switch (event.type) {\r\n        case 'checkout.session.completed':\r\n            const session = event.data.object;\r\n            console.log('Checkout Session Completed:', session.id);\r\n            const userId = session.metadata.userId;\r\n            const planId = session.metadata.planId;\r\n            if (session.payment_status === 'paid' && userId && planId) {\r\n                db.run(\r\n                    'UPDATE Users SET stripe_customer_id = ?, stripe_subscription_id = ?, subscription_status = ?, plan_id = ? WHERE user_id = ?',\r\n                    [session.customer, session.subscription, 'active', planId, userId],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for checkout.session.completed:', err.message);\r\n                        else console.log(`User ${userId} subscription updated to ${planId} (active).`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'customer.subscription.updated':\r\n            const subscriptionUpdated = event.data.object;\r\n            console.log('Subscription Updated:', subscriptionUpdated.id);\r\n            if (subscriptionUpdated.customer && subscriptionUpdated.status && subscriptionUpdated.plan && subscriptionUpdated.plan.id) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ?, plan_id = ? WHERE stripe_customer_id = ?',\r\n                    [subscriptionUpdated.status, subscriptionUpdated.plan.id, subscriptionUpdated.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for customer.subscription.updated:', err.message);\r\n                        else console.log(`Subscription for customer ${subscriptionUpdated.customer} status updated to ${subscriptionUpdated.status} and plan to ${subscriptionUpdated.plan.id}.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'customer.subscription.deleted':\r\n            const subscriptionDeleted = event.data.object;\r\n            console.log('Subscription Deleted:', subscriptionDeleted.id);\r\n            if (subscriptionDeleted.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ?, plan_id = ?, stripe_subscription_id = NULL WHERE stripe_customer_id = ?',\r\n                    ['cancelled', 'free', subscriptionDeleted.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for customer.subscription.deleted:', err.message);\r\n                        else console.log(`Subscription for customer ${subscriptionDeleted.customer} marked as cancelled and reverted to free.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'invoice.payment_succeeded':\r\n            const invoiceSucceeded = event.data.object;\r\n            console.log('Invoice Payment Succeeded:', invoiceSucceeded.id);\r\n            if (invoiceSucceeded.subscription && invoiceSucceeded.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?',\r\n                    ['active', invoiceSucceeded.subscription, invoiceSucceeded.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for invoice.payment_succeeded:', err.message);\r\n                        else console.log(`Subscription ${invoiceSucceeded.subscription} status set to active.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'invoice.payment_failed':\r\n            const invoiceFailed = event.data.object;\r\n            console.log('Invoice Payment Failed:', invoiceFailed.id);\r\n            if (invoiceFailed.subscription && invoiceFailed.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?',\r\n                    ['past_due', invoiceFailed.subscription, invoiceFailed.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for invoice.payment_failed:', err.message);\r\n                        else console.log(`Subscription ${invoiceFailed.subscription} status set to past_due.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        default:\r\n            console.log(`Unhandled event type ${event.type}`);\r\n    }\r\n    res.status(200).json({ received: true });\r\n});\r\n\r\n// IMPORTANT: express.json() for parsing JSON request bodies MUST come AFTER the webhook route\r\napp.use(express.json());\r\n\r\n// --- JWT Secret ---\r\n// CRUCIAL FOR TESTING: Directly access process.env.JWT_SECRET without fallback.\r\n// This ensures tests control the secret used by the app instance.\r\nconst JWT_SECRET = process.env.JWT_SECRET; // Ensure it *must* come from process.env\r\n\r\n// --- Request Logging (using Morgan) ---\r\n// 'dev' format is good for development, 'combined' or 'tiny' for production logs\r\napp.use(morgan('dev'));\r\n\r\n// --- Serve Static Files (Frontend) with Caching ---\r\n// This middleware serves static files from the 'onboardflow' root directory\r\n// and sets Cache-Control headers for browser caching.\r\napp.use(express.static(path.join(__dirname, '..'), {\r\n    maxAge: '7d', // Cache static assets for 7 days (e.g., CSS, JS, images, favicon)\r\n    immutable: false // Set to true if asset filenames include content hashes (e.g., app.min.js?v=hash)\r\n}));\r\n\r\n// --- Database Setup ---\r\nconst db = new sqlite3.Database('./onboardflow.db', (err) => {\r\n    if (err) {\r\n        // Log database connection error and exit\r\n        console.error(\"Error opening database:\", err.message);\r\n        process.exit(1); // Exit process if database connection fails\r\n    } else {\r\n        console.log(\"Successfully connected to the database.\");\r\n        db.get(\"PRAGMA foreign_keys = ON\");\r\n        db.serialize(() => {\r\n            db.run(`CREATE TABLE IF NOT EXISTS Companies (company_id INTEGER PRIMARY KEY AUTOINCREMENT, company_name TEXT NOT NULL UNIQUE)`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Locations (location_id INTEGER PRIMARY KEY AUTOINCREMENT, company_id INTEGER, location_name TEXT NOT NULL, location_address TEXT NOT NULL, FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE)`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Users (\r\n                user_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER,\r\n                location_id INTEGER,\r\n                full_name TEXT NOT NULL,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                position TEXT,\r\n                employee_id TEXT,\r\n                role TEXT NOT NULL,\r\n                stripe_customer_id TEXT,\r\n                stripe_subscription_id TEXT,\r\n                subscription_status TEXT,\r\n                plan_id TEXT,\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Schedules (\r\n                schedule_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                employee_id INTEGER NOT NULL,\r\n                location_id INTEGER NOT NULL,\r\n                start_time TEXT NOT NULL,\r\n                end_time TEXT NOT NULL,\r\n                notes TEXT,\r\n                FOREIGN KEY (employee_id) REFERENCES Users(user_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            // NEW: Create JobPostings table\r\n            db.run(`CREATE TABLE IF NOT EXISTS JobPostings (\r\n                job_posting_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                location_id INTEGER, -- Optional: link job posting to a specific location\r\n                title TEXT NOT NULL,\r\n                description TEXT NOT NULL,\r\n                requirements TEXT, -- Optional: job requirements\r\n                status TEXT NOT NULL DEFAULT 'Open', -- e.g., 'Open', 'Closed', 'Filled'\r\n                created_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            // Update Applicants table schema to link to JobPostings and add phone_number\r\n            db.run(`CREATE TABLE IF NOT EXISTS Applicants (\r\n                applicant_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                location_id INTEGER, -- Optional: applicant's preferred location or location applied for\r\n                job_posting_id INTEGER, -- NEW: Link to JobPostings table\r\n                full_name TEXT NOT NULL,\r\n                email TEXT NOT NULL,\r\n                phone_number TEXT, -- NEW: Phone number field\r\n                status TEXT NOT NULL DEFAULT 'Applied', -- e.g., 'Applied', 'Interviewing', 'Rejected', 'Hired'\r\n                resume_url TEXT, -- Optional: URL to a resume document (e.g., hosted on cloud storage)\r\n                notes TEXT,\r\n                application_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (job_posting_id) REFERENCES JobPostings(job_posting_id) ON DELETE SET NULL -- If job posting is deleted, set this to NULL\r\n            )`);\r\n            // NEW: Create Documents table for file/video uploads\r\n            db.run(`CREATE TABLE IF NOT EXISTS Documents (\r\n                document_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL, -- User who uploaded the document\r\n                title TEXT NOT NULL,\r\n                file_name TEXT NOT NULL,\r\n                file_type TEXT NOT NULL,\r\n                file_url TEXT NOT NULL, -- URL to the stored file (e.g., S3, GCS)\r\n                description TEXT,\r\n                upload_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES Users(user_id) ON DELETE CASCADE\r\n            )`);\r\n        });\r\n    }\r\n});\r\n\r\n// --- Authentication Middleware ---\r\nfunction authenticateToken(req, res, next) {\r\n    const authHeader = req.headers['authorization'];\r\n    const token = authHeader && authHeader.split(' ')[1];\r\n    if (token == null) {\r\n        return res.status(401).json({ error: 'Unauthorized: No token provided.' });\r\n    }\r\n    jwt.verify(token, JWT_SECRET, (err, user) => {\r\n        if (err) {\r\n            // Log the specific JWT error for debugging\r\n            console.error(\"JWT Verification Error:\", err.message);\r\n            return res.status(403).json({ error: 'Forbidden: Invalid or expired token.' });\r\n        }\r\n        req.user = user;\r\n        next();\r\n    });\r\n}\r\n\r\n// --- Helper for Input Validation ---\r\nconst isValidEmail = (email) => {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\r\n};\r\n\r\n// --- API Routes (ALL API ROUTES SHOULD BE DEFINED HERE, BEFORE STATIC FILE SERVING) ---\r\n\r\n// Apply rate limiting to authentication routes\r\napp.post('/api/register', authLimiter, async (req, res, next) => { // Added 'next'\r\n    const { company_name, full_name, email, password } = req.body;\r\n\r\n    // Input Validation for Registration\r\n    if (!company_name || typeof company_name !== 'string' || company_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Company name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Password is required and must be at least 6 characters long.\" });\r\n    }\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n        db.serialize(() => {\r\n            db.run('BEGIN TRANSACTION');\r\n            db.run('INSERT INTO Companies (company_name) VALUES (?)', [company_name], function(err) {\r\n                if (err) { \r\n                    db.run('ROLLBACK'); \r\n                    console.error(\"Database error creating company:\", err);\r\n                    return next(new Error(\"Could not create company.\")); // Pass error to error handling middleware\r\n                }\r\n                const newCompanyId = this.lastID;\r\n                db.run(`INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'super_admin', 'active', 'free')`, [newCompanyId, null, full_name, email, password_hash], function(userInsertErr) {\r\n                    if (userInsertErr) { \r\n                        db.run('ROLLBACK'); \r\n                        console.error(\"Database error creating user:\", userInsertErr);\r\n                        if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { \r\n                            return res.status(409).json({ error: 'Email already registered.' }); \r\n                        }\r\n                        return next(new Error(\"Could not create user.\")); // Pass error\r\n                    }\r\n                    db.run('COMMIT');\r\n                    res.status(201).json({ message: \"Company and user registered successfully!\", userId: this.lastID });\r\n                });\r\n            });\r\n        });\r\n    } catch (error) { \r\n        console.error(\"Registration error:\", error);\r\n        next(error); // Pass error to error handling middleware\r\n    }\r\n});\r\n\r\napp.post('/api/login', authLimiter, (req, res, next) => { // Added 'next'\r\n    const { email, password } = req.body;\r\n\r\n    // Input Validation for Login\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length === 0) {\r\n        return res.status(400).json({ error: \"Password is required.\" });\r\n    }\r\n\r\n    db.get(\"SELECT * FROM Users WHERE email = ?\", [email], async (err, user) => {\r\n        if (err) {\r\n            console.error(\"Database error during login:\", err);\r\n            return next(new Error(\"A server error occurred during login.\")); // Pass error\r\n        }\r\n        if (!user) { \r\n            return res.status(401).json({ error: \"Invalid credentials.\" }); \r\n        }\r\n        const isMatch = await bcrypt.compare(password, user.password_hash);\r\n        if (!isMatch) { \r\n            return res.status(401).json({ error: \"Invalid credentials.\" }); \r\n        }\r\n        const payload = { userId: user.user_id, email: user.email, role: user.role, fullName: user.full_name, companyId: user.company_id, locationId: user.location_id, subscriptionStatus: user.subscription_status, planId: user.plan_id };\r\n        const token = jwt.sign(payload, JWT_SECRET, { expiresIn: '1h' });\r\n        res.status(200).json({ message: \"Login successful!\", token, role: user.role });\r\n    });\r\n});\r\n\r\napp.post('/api/invite-admin', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { full_name, email, password, location_id } = req.body;\r\n    const { companyId, role } = req.user;\r\n\r\n    // Input Validation for Invite Admin\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can invite other admins.' }); }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Temporary password is required and must be at least 6 characters long.\" });\r\n    }\r\n    if (typeof location_id !== 'number' || location_id <= 0) { // Assuming location_id is an integer ID\r\n        return res.status(400).json({ error: \"A valid location ID is required.\" });\r\n    }\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n        db.get('SELECT * FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n            if (err) { console.error(\"Database error checking location:\", err); return next(new Error('Database error when verifying location.')); } // Pass error\r\n            if (!location) { return res.status(400).json({ error: 'Selected location does not exist or does not belong to your company.' }); }\r\n            db.run(`INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'location_admin', 'active', 'free')`, [companyId, location_id, full_name, email, password_hash], function(userInsertErr) {\r\n                if (userInsertErr) {\r\n                    console.error(\"Database error inviting admin:\", userInsertErr);\r\n                    if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { return res.status(409).json({ error: 'Email already registered.' }); }\r\n                    return next(new Error('Failed to invite admin.')); // Pass error\r\n                }\r\n                res.status(201).json({ message: \"Location admin invited successfully!\", userId: this.lastID });\r\n            });\r\n        });\r\n    } catch (error) { console.error(\"Invite admin error:\", error); next(error); } // Pass error\r\n});\r\n\r\n// NEW: API endpoint for inviting employees\r\napp.post('/api/invite-employee', authenticateToken, async (req, res, next) => {\r\n    const { full_name, email, password, position, employee_id, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Authorization: Super admin can invite anyone, Location admin can only invite to their location or unassigned\r\n    if (!['super_admin', 'location_admin'].includes(role)) {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can invite employees.' });\r\n    }\r\n\r\n    // Input Validation for Invite Employee\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Temporary password is required and must be at least 6 characters long.\" });\r\n    }\r\n    \r\n    // Corrected location_id validation: Must be a number > 0.\r\n    // If location_id is null, it indicates an unassigned location, which is valid for a super admin.\r\n    // For location_admin, it must match their current location.\r\n    // This revised logic correctly checks for null OR a valid positive integer.\r\n    const isLocationIdValid = location_id === null || (typeof location_id === 'number' && !isNaN(location_id) && location_id > 0);\r\n    if (!isLocationIdValid) {\r\n        return res.status(400).json({ error: \"A valid location ID (positive number) is required for employee, or null for unassigned.\" });\r\n    }\r\n    \r\n    if (position !== undefined && typeof position !== 'string') {\r\n        return res.status(400).json({ error: 'Position must be a string if provided.' });\r\n    }\r\n    if (employee_id !== undefined && typeof employee_id !== 'string') {\r\n        return res.status(400).json({ error: 'Employee ID must be a string if provided.' });\r\n    }\r\n\r\n    // Location Admin specific check: ensure they are inviting to their assigned location or null\r\n    // If location_admin tries to set a location that is NOT their own, block it.\r\n    // Allow location_admin to set to null if their current location is null.\r\n    if (role === 'location_admin') {\r\n        // A location admin can ONLY assign an employee to their own location or to null (unassigned)\r\n        if (location_id !== currentUserLocationId) {\r\n            // If the target location_id is not the current user's location, check if both are null\r\n            if (!(location_id === null && currentUserLocationId === null)) {\r\n                return res.status(403).json({ error: 'Access Denied: Location admin can only invite employees to their assigned location.' });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n\r\n        // Verify the location_id belongs to the company and, if location_admin, matches their assigned location\r\n        // This check is crucial if location_id is NOT null\r\n        if (location_id !== null) {\r\n            const locationVerification = await new Promise((resolve, reject) => {\r\n                db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n                    if (err) reject(err);\r\n                    resolve(location);\r\n                });\r\n            });\r\n            if (!locationVerification) {\r\n                return res.status(400).json({ error: 'Selected location does not exist or does not belong to your company.' });\r\n            }\r\n        }\r\n\r\n        db.run(\r\n            `INSERT INTO Users (company_id, location_id, full_name, email, password_hash, position, employee_id, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, ?, ?, 'employee', 'active', 'free')`,\r\n            [companyId, location_id, full_name, email, password_hash, position, employee_id,], // Default new employees to 'employee' role\r\n            function(userInsertErr) {\r\n                if (userInsertErr) {\r\n                    console.error(\"Database error inviting employee:\", userInsertErr);\r\n                    if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { return res.status(409).json({ error: 'Email already registered.' }); }\r\n                    return next(new Error('Failed to invite employee.'));\r\n                }\r\n                res.status(201).json({ message: \"Employee invited successfully!\", userId: this.lastID });\r\n            }\r\n        );\r\n    } catch (error) {\r\n        console.error(\"Invite employee error:\", error);\r\n        next(error);\r\n    }\r\n});\r\n\r\n\r\napp.get('/api/profile', authenticateToken, (req, res) => {\r\n    const { userId, fullName, email, role, companyId, locationId, subscriptionStatus, planId } = req.user;\r\n    res.status(200).json({ userId, fullName, email, role, companyId, locationId, subscriptionStatus, planId });\r\n});\r\n\r\napp.put('/api/profile', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { fullName, email, currentPassword, newPassword } = req.body;\r\n    const { userId } = req.user;\r\n\r\n    // Input Validation for Profile Update\r\n    if (fullName === undefined && email === undefined && (!currentPassword || !newPassword)) {\r\n        return res.status(400).json({ error: 'No data provided for update.' });\r\n    }\r\n    if (fullName !== undefined && (typeof fullName !== 'string' || fullName.trim() === '')) {\r\n        return res.status(400).json({ error: \"Full name must be a non-empty string if provided.\" });\r\n    }\r\n    if (email !== undefined && !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address must be provided if changing email.\" });\r\n    }\r\n    if (newPassword !== undefined && (typeof newPassword !== 'string' || newPassword.length < 6)) {\r\n        return res.status(400).json({ error: \"New password must be at least 6 characters long if changing password.\" });\r\n    }\r\n    if ((currentPassword && !newPassword) || (!currentPassword && newPassword)) {\r\n        return res.status(400).json({ error: 'Both current password and new password are required to change password.' });\r\n    }\r\n\r\n\r\n    db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], async (err, user) => {\r\n        if (err) { console.error(\"Database error fetching user for profile update:\", err); return next(new Error(\"Server error during profile update.\")); } // Pass error\r\n        if (!user) { return res.status(404).json({ error: \"User not found.\" }); }\r\n        let updateSql = 'UPDATE Users SET ';\r\n        const updateParams = [];\r\n        const clauses = [];\r\n        let changesMade = false;\r\n        if (fullName !== undefined && fullName !== user.full_name) {\r\n            clauses.push('full_name = ?');\r\n            updateParams.push(fullName);\r\n            changesMade = true;\r\n        }\r\n        if (email !== undefined && email !== user.email) {\r\n            try { // Added try-catch for async await in db.get\r\n                const existingUser = await new Promise((resolve, reject) => {\r\n                    db.get(\"SELECT user_id FROM Users WHERE email = ? AND user_id != ?\", [email, userId], (err, row) => {\r\n                        if (err) reject(err);\r\n                        resolve(row);\r\n                    });\r\n                });\r\n                if (existingUser) { return res.status(409).json({ error: 'Email already in use by another account.' }); }\r\n            } catch (dbErr) {\r\n                console.error(\"Database error checking existing email:\", dbErr);\r\n                return next(new Error(\"Server error verifying email availability.\"));\r\n            }\r\n            clauses.push('email = ?');\r\n            updateParams.push(email);\r\n            changesMade = true;\r\n        }\r\n        if (currentPassword && newPassword) {\r\n            const isMatch = await bcrypt.compare(currentPassword, user.password_hash);\r\n            if (!isMatch) { return res.status(401).json({ error: \"Current password incorrect.\" }); }\r\n            const newPasswordHash = await bcrypt.hash(newPassword, 10);\r\n            clauses.push('password_hash = ?');\r\n            updateParams.push(newPasswordHash);\r\n            changesMade = true;\r\n        }\r\n        if (!changesMade) { return res.status(200).json({ message: 'No changes detected. Profile remains the same.' }); }\r\n        updateSql += clauses.join(', ') + ' WHERE user_id = ?';\r\n        updateParams.push(userId);\r\n        db.run(updateSql, updateParams, function(updateErr) {\r\n            if (updateErr) { console.error(\"Database error updating profile:\", updateErr); return next(new Error('Failed to update profile.')); } // Pass error\r\n            if (this.changes > 0) {\r\n                db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], (fetchErr, updatedUser) => {\r\n                    if (fetchErr || !updatedUser) { console.error(\"Error fetching updated user for new token:\", fetchErr); return res.status(200).json({ message: 'Profile updated successfully, but token could not be refreshed.' }); }\r\n                    const newPayload = { userId: updatedUser.user_id, email: updatedUser.email, role: updatedUser.role, fullName: updatedUser.full_name, companyId: updatedUser.company_id, locationId: updatedUser.location_id, subscriptionStatus: updatedUser.subscription_status, planId: user.plan_id };\r\n                    const newToken = jwt.sign(newPayload, JWT_SECRET, { expiresIn: '1h' });\r\n                    res.status(200).json({ message: 'Profile updated successfully!', token: newToken });\r\n                });\r\n            } else { res.status(200).json({ message: 'No changes applied as data was identical.' }); }\r\n        });\r\n    });\r\n});\r\n\r\napp.get('/api/locations', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, role } = req.user;\r\n    let sql = 'SELECT location_id, location_name, location_address FROM Locations WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Allowing super_admin, location_admin, and employee to view all locations in their company for dropdowns/selection\r\n    if (!['super_admin', 'location_admin', 'employee'].includes(role)) {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view locations.' });\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching locations:\", err); return next(new Error('Database error fetching locations.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.post('/api/locations', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { location_name, location_address } = req.body;\r\n    const { companyId, role } = req.user;\r\n\r\n    // Input Validation for Create Location\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can create locations.' }); }\r\n    if (!location_name || typeof location_name !== 'string' || location_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Location name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!location_address || typeof location_address !== 'string' || location_address.trim() === '') {\r\n        return res.status(400).json({ error: \"Location address is required and must be a non-empty string.\" });\r\n    }\r\n\r\n    db.run('INSERT INTO Locations (company_id, location_name, location_address) VALUES (?, ?, ?)', [companyId, location_name, location_address], function(err) {\r\n        if (err) { console.error(\"Database error creating location:\", err); return next(new Error('Failed to create location.')); } // Pass error\r\n        res.status(201).json({ message: 'Location created!', locationId: this.lastID });\r\n    });\r\n});\r\n\r\napp.delete('/api/locations/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role } = req.user;\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can delete locations.' }); }\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID provided.' });\r\n    }\r\n\r\n    db.run('DELETE FROM Locations WHERE location_id = ? AND company_id = ?', [id, companyId], function(err) {\r\n        if (err) { console.error(\"Database error deleting location:\", err); return next(new Error('Failed to delete location.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Location not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\napp.get('/api/users', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n    const { filterRole, filterLocationId } = req.query;\r\n\r\n    let sql = `SELECT Users.user_id, Users.full_name, Users.email, Users.role, Locations.location_name\r\n               FROM Users\r\n               LEFT JOIN Locations ON Users.location_id = Locations.location_id\r\n               WHERE Users.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    if (role === 'super_admin') {\r\n        // Super admin can view all users in their company.\r\n    } else if (role === 'location_admin') {\r\n        // Location admin can view all users within their assigned location, plus unassigned users for their company.\r\n        if (currentUserLocationId) {\r\n            sql += ` AND (Users.location_id = ? OR Users.location_id IS NULL)`; // Admins might need to see unassigned users\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Users.user_id = ?`;\r\n        params.push(currentUserId);\r\n    } else {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view users.' });\r\n    }\r\n\r\n    // Input validation for filterRole and filterLocationId\r\n    const allowedRoles = ['super_admin', 'location_admin', 'employee'];\r\n    if (filterRole && (!allowedRoles.includes(filterRole) || (role === 'location_admin' && filterRole === 'super_admin'))) {\r\n        return res.status(400).json({ error: 'Invalid filter role provided or insufficient permissions to filter by this role.' });\r\n    }\r\n    if (filterLocationId && isNaN(parseInt(filterLocationId))) {\r\n        return res.status(400).json({ error: 'Invalid filter location ID provided.' });\r\n    }\r\n\r\n\r\n    if (filterRole) {\r\n        if (role === 'super_admin' || (role === 'location_admin' && (filterRole === 'employee' || filterRole === 'location_admin')) || (role === 'employee' && filterRole === 'employee')) {\r\n            sql += ` AND Users.role = ?`;\r\n            params.push(filterRole);\r\n        } else {\r\n            // This case should ideally be caught by the earlier validation for allowedRoles, but for defense-in-depth:\r\n            return res.status(403).json({ error: 'Access Denied: Insufficient permissions to filter by role.' });\r\n        }\r\n    }\r\n    if (filterLocationId) {\r\n        // Ensure location_admin can only filter by their own location\r\n        if (role === 'super_admin' || (role === 'location_admin' && parseInt(filterLocationId) === currentUserLocationId)) {\r\n            sql += ` AND Users.location_id = ?`;\r\n            params.push(filterLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Insufficient permissions to filter by location.' });\r\n        }\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching users:\", err); return next(new Error('Database error fetching users.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.delete('/api/users/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, userId: authenticatedUserId } = req.user;\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can delete users.' }); }\r\n    if (parseInt(id) === authenticatedUserId) { return res.status(403).json({ error: 'Cannot delete your own super admin account via this interface.' }); }\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid user ID provided.' });\r\n    }\r\n\r\n    db.run('DELETE FROM Users WHERE user_id = ? AND company_id = ? AND role != \\'super_admin\\'', [id, companyId], function(err) {\r\n        if (err) { console.error(\"Database error deleting user:\", err); return next(new Error('Failed to delete user.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'User not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\napp.post('/api/create-checkout-session', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { planId } = req.body;\r\n    const { userId, email, companyId } = req.user;\r\n\r\n    // Input Validation for planId\r\n    const allowedPlanIds = ['pro', 'enterprise'];\r\n    if (!planId || !allowedPlanIds.includes(planId)) {\r\n        return res.status(400).json({ error: 'Invalid plan ID provided.' });\r\n    }\r\n\r\n    const priceIdMap = {\r\n        'pro': process.env.STRIPE_PRICE_ID_PRO,       // Use environment variable\r\n        'enterprise': process.env.STRIPE_PRICE_ID_ENT // Use environment variable\r\n    };\r\n    const stripePriceId = priceIdMap[planId];\r\n    if (!stripePriceId) { return res.status(500).json({ error: 'Stripe price ID not configured for this plan.' }); } // Changed from 400 to 500 as this is a server-side config issue\r\n    try {\r\n        let customerId;\r\n        const userRecord = await new Promise((resolve, reject) => {\r\n            db.get('SELECT stripe_customer_id FROM Users WHERE user_id = ?', [userId], (err, row) => {\r\n                if (err) reject(err);\r\n                resolve(row);\r\n            });\r\n        });\r\n        if (userRecord && userRecord.stripe_customer_id) {\r\n            customerId = userRecord.stripe_customer_id;\r\n        } else {\r\n            const customer = await stripeInstance.customers.create({ email: email, metadata: { userId: userId, companyId: companyId, }, });\r\n            customerId = customer.id;\r\n            db.run('UPDATE Users SET stripe_customer_id = ? WHERE user_id = ?', [customerId, userId], (err) => {\r\n                if (err) console.error('Failed to save Stripe customer ID to DB:', err);\r\n            });\r\n        }\r\n        const session = await stripeInstance.checkout.sessions.create({\r\n            customer: customerId,\r\n            mode: 'subscription',\r\n            line_items: [{ price: stripePriceId, quantity: 1, }, ],\r\n            // Use environment variables for success/cancel URLs, or relative paths if handled client-side\r\n            success_url: `${process.env.FRONTEND_URL || 'http://localhost:8000'}/suite-hub.html?payment=success&session_id={CHECKOUT_SESSION_ID}`,\r\n            cancel_url: `${process.env.FRONTEND_URL || 'http://localhost:8000'}/pricing.html?payment=cancelled`,\r\n            metadata: { userId: userId, planId: planId, },\r\n        });\r\n        res.status(200).json({ url: session.url });\r\n    } catch (error) { console.error('Error creating Stripe Checkout Session:', error); next(error); } // Pass error\r\n});\r\n\r\napp.post('/api/schedules', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { employee_id, location_id, start_time, end_time, notes } = req.body;\r\n    const { companyId, role, userId: currentUserId } = req.user;\r\n\r\n    // Input Validation for Create Schedule\r\n    if (role !== 'super_admin' && role !== 'location_admin') { return res.status(403).json({ error: 'Access Denied: Only admins can create schedules.' }); }\r\n    if (typeof employee_id !== 'number' || employee_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid employee ID is required.' });\r\n    }\r\n    if (typeof location_id !== 'number' || location_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid location ID is required.' });\r\n    }\r\n    if (!start_time || !end_time || isNaN(new Date(start_time).getTime()) || isNaN(new Date(end_time).getTime())) {\r\n        return res.status(400).json({ error: 'Valid start and end times are required.' });\r\n    }\r\n    if (new Date(start_time) >= new Date(end_time)) {\r\n        return res.status(400).json({ error: 'Start time must be before end time.' });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n\r\n    db.get('SELECT user_id FROM Users WHERE user_id = ? AND company_id = ?', [employee_id, companyId], (err, employee) => {\r\n        if (err) { console.error(\"Database error verifying employee:\", err); return next(new Error('Database error during employee verification.')); } // Pass error\r\n        if (!employee) { return res.status(400).json({ error: 'Employee not found in your company.' }); }\r\n        db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n            if (err) { console.error(\"Database error verifying location:\", err); return next(new Error('Database error during location verification.')); } // Pass error\r\n            if (!location) { return res.status(400).json({ error: 'Location not found in your company.' }); }\r\n            db.run(\r\n                'INSERT INTO Schedules (employee_id, location_id, start_time, end_time, notes) VALUES (?, ?, ?, ?, ?)', [employee_id, location_id, start_time, end_time, notes],\r\n                function(insertErr) {\r\n                    if (insertErr) { console.error(\"Database error creating schedule:\", insertErr); return next(new Error('Failed to create schedule.')); } // Pass error\r\n                    res.status(201).json({ message: 'Schedule created successfully!', scheduleId: this.lastID });\r\n                }\r\n            );\r\n        });\r\n    });\r\n});\r\n\r\napp.get('/api/schedules', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { employee_id, location_id, start_date, end_date } = req.query;\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = `SELECT Schedules.*, Users.full_name AS employee_name, Users.email AS employee_email, Locations.location_name\r\n               FROM Schedules\r\n               JOIN Users ON Schedules.employee_id = Users.user_id\r\n               JOIN Locations ON Schedules.location_id = Locations.location_id\r\n               WHERE Users.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    if (role === 'location_admin') {\r\n        if (currentUserLocationId) {\r\n            sql += ` AND Schedules.location_id = ?`;\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Users.user_id = ?`;\r\n        params.push(currentUserId);\r\n    }\r\n\r\n    // Input validation for query parameters\r\n    if (employee_id && isNaN(parseInt(employee_id))) {\r\n        return res.status(400).json({ error: 'Invalid employee ID filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n    if (start_date && isNaN(new Date(start_date).getTime())) {\r\n        return res.status(400).json({ error: 'Invalid start date filter provided.' });\r\n    }\r\n    if (end_date && isNaN(new Date(end_date).getTime())) {\r\n        return res.status(400).json({ error: 'Invalid end date filter provided.' });\r\n    }\r\n\r\n\r\n    if (employee_id && (role === 'super_admin' || (role === 'location_admin' && parseInt(employee_id) === currentUserId) || (role === 'employee' && parseInt(employee_id) === currentUserId))) {\r\n        sql += ` AND Users.role = ?`;\r\n        params.push(filterRole); // This should be employee_id, not filterRole\r\n    }\r\n    if (location_id && (role === 'super_admin' || (role === 'location_admin' && parseInt(location_id) === currentUserLocationId))) {\r\n        sql += ` AND Schedules.location_id = ?`;\r\n        params.push(location_id);\r\n    }\r\n    if (start_date) {\r\n        sql += ` AND Schedules.start_time >= ?`;\r\n        params.push(start_date);\r\n    }\r\n    if (end_date) {\r\n        sql += ` AND Schedules.end_time <= ?`;\r\n        params.push(end_date);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching schedules:\", err); return next(new Error('Database error fetching schedules.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.delete('/api/schedules/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid schedule ID provided.' });\r\n    }\r\n\r\n    if (role === 'employee') {\r\n        return res.status(403).json({ error: 'Access Denied: Employees cannot delete schedules.' });\r\n    }\r\n\r\n    let sql = `DELETE FROM Schedules WHERE schedule_id = ?`;\r\n    const params = [id];\r\n\r\n    if (role === 'location_admin') {\r\n        sql += ` AND employee_id IN (SELECT user_id FROM Users WHERE location_id = ? AND company_id = ?)`;\r\n        params.push(currentUserLocationId, companyId);\r\n    } else if (role === 'super_admin') {\r\n        sql += ` AND employee_id IN (SELECT user_id FROM Users WHERE company_id = ?)`;\r\n        params.push(companyId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting schedule:\", err); return next(new Error('Failed to delete schedule.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Schedule not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// --- Hiring Routes ---\r\n\r\n/**\r\n * POST /api/job-postings\r\n * Creates a new job posting.\r\n * Requires super_admin or location_admin role.\r\n */\r\napp.post('/api/job-postings', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { title, description, requirements, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n    const created_date = new Date().toISOString(); // Current date/time for creation\r\n\r\n    // Input Validation for Create Job Posting\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can create job postings.' });\r\n    }\r\n    if (!title || typeof title !== 'string' || title.trim() === '') {\r\n        return res.status(400).json({ error: \"Job title is required and must be a non-empty string.\" });\r\n    }\r\n    if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) { // Line 1009\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    } else if (description !== undefined) { \r\n        clauses.push('description = ?'); \r\n        updateParams.push(description); \r\n    }\r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    } else if (requirements !== undefined) { \r\n        clauses.push('requirements = ?');\r\n        updateParams.push(requirements);\r\n    }\r\n    if (status !== undefined) { clauses.push('status = ?'); updateParams.push(status); }\r\n    \r\n    // super_admin can change location_id. location_admin cannot change location_id or change to different location\r\n    if (location_id !== undefined) {\r\n        if (role === 'super_admin') {\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        } else if (role === 'location_admin') {\r\n            if (location_id !== currentUserLocationId && location_id !== null) { // location_id can be null (company-wide)\r\n                return res.status(403).json({ error: 'Access Denied: Location admin cannot change job posting location to another location.' });\r\n            }\r\n            // If location admin updates job posting, and it's their location, or setting to null, it's allowed\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        }\r\n    }\r\n\r\n\r\n    if (clauses.length === 0) { return res.status(400).json({ error: 'No fields provided for update.' }); }\r\n\r\n    updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\r\n    updateParams.push(id, companyId);\r\n\r\n    // Additional security for location_admin: ensure they only update their own location's postings\r\n    if (role === 'location_admin') {\r\n        updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(updateSql, updateParams, function(err) {\r\n        if (err) { console.error(\"Database error updating job posting:\", err); return next(new Error('Failed to update job posting.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Job posting not found or not authorized to update.' }); }\r\n        res.status(200).json({ message: 'Job posting updated successfully!' });\r\n    });\r\n});\r\n\r\n/**\r\n * GET /api/job-postings\r\n * Retrieves job postings.\r\n * Can filter by location_id and status.\r\n * Requires super_admin or location_admin.\r\n */\r\napp.get('/api/job-postings', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { status, location_id } = req.query;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = 'SELECT * FROM JobPostings WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Authorization: super_admin sees all, location_admin sees their location's postings\r\n    if (role === 'location_admin') {\r\n        if (currentUserLocationId) {\r\n            sql += ' AND (location_id = ? OR location_id IS NULL)'; // Location admin sees their location's postings or company-wide\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        // Employees generally shouldn't see job postings list via this admin API\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view job postings.' });\r\n    }\r\n\r\n    // Input validation for query parameters\r\n    const allowedStatuses = ['Open', 'Closed', 'Filled']; // Assuming these are your valid statuses\r\n    if (status && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid job posting status filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n\r\n\r\n    if (status) {\r\n        sql += ' AND status = ?';\r\n        params.push(status);\r\n    }\r\n    // Only super admin can filter by any location_id beyond their own scope\r\n    if (location_id && role === 'super_admin') {\r\n        sql += ` AND location_id = ?`;\r\n        params.push(location_id);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching job postings:\", err); return next(new Error('Database error fetching job postings.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * PUT /api/job-postings/:id\r\n * Updates a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\r\napp.put('/api/job-postings/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { title, description, requirements, status, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Input Validation for Job Posting Update\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can update job postings.' });\r\n    }\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID provided.' });\r\n    }\r\n    if (title !== undefined && (typeof title !== 'string' || title.trim() === '')) {\r\n        return res.status(400).json({ error: 'Job title must be a non-empty string if provided.' });\r\n    }\r\n    if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    }\r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    }\r\n    const allowedStatuses = ['Open', 'Closed', 'Filled'];\r\n    if (status !== undefined && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid status provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    let updateSql = 'UPDATE JobPostings SET ';\r\n    const updateParams = [];\r\n    const clauses = [];\r\n\r\n    if (title !== undefined) { clauses.push('title = ?'); updateParams.push(title); }\r\n    // Line 1009 fix: Ensure this line and surrounding logic is correct.\r\n    if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) { // Line 1009\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    } else if (description !== undefined) { \r\n        clauses.push('description = ?'); \r\n        updateParams.push(description); \r\n    }\r\n    \r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    } else if (requirements !== undefined) { \r\n        clauses.push('requirements = ?');\r\n        updateParams.push(requirements);\r\n    }\r\n    \r\n    if (status !== undefined) { clauses.push('status = ?'); updateParams.push(status); }\r\n    \r\n    // super_admin can change location_id. location_admin cannot change location_id or change to different location\r\n    if (location_id !== undefined) {\r\n        if (role === 'super_admin') {\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        } else if (role === 'location_admin') {\r\n            if (location_id !== currentUserLocationId && location_id !== null) { // location_id can be null (company-wide)\r\n                return res.status(403).json({ error: 'Access Denied: Location admin cannot change job posting location to another location.' });\r\n            }\r\n            // If location admin updates job posting, and it's their location, or setting to null, it's allowed\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        }\r\n    }\r\n\r\n\r\n    if (clauses.length === 0) { return res.status(400).json({ error: 'No fields provided for update.' }); }\r\n\r\n    updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\r\n    updateParams.push(id, companyId);\r\n\r\n    // Additional security for location_admin: ensure they only update their own location's postings\r\n    if (role === 'location_admin') {\r\n        updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(updateSql, updateParams, function(err) {\r\n        if (err) { console.error(\"Database error updating job posting:\", err); return next(new Error('Failed to update job posting.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Job posting not found or not authorized to update.' }); }\r\n        res.status(200).json({ message: 'Job posting updated successfully!' });\r\n    });\r\n});\r\n\r\n/**\r\n * DELETE /api/job-postings/:id\r\n * Deletes a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\r\napp.delete('/api/job-postings/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID provided.' });\r\n    }\r\n\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can delete job postings.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM JobPostings WHERE job_posting_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Additional security for location_admin: ensure they only delete their own location's postings\r\n    if (role === 'location_admin') {\r\n        sql += ' AND (location_id = ? OR location_id IS NULL)';\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting job posting:\", err); return next(new Error('Failed to delete job posting.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Job posting not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n\r\n// Update Applicant API endpoints to use job_posting_id\r\napp.post('/api/applicants', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { job_posting_id, full_name, email, notes, location_id, phone_number } = req.body; // Added phone_number\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n    const application_date = new Date().toISOString(); // Current date/time for application\r\n\r\n    // Input Validation for Adding Applicant\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can add applicants.' });\r\n    }\r\n    if (typeof job_posting_id !== 'number' || job_posting_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid job posting ID is required.' });\r\n    }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    // Basic phone number validation (simple check for non-empty string, could be more complex with regex)\r\n    if (!phone_number || typeof phone_number !== 'string' || phone_number.trim() === '') {\r\n        return res.status(400).json({ error: \"Phone number is required.\" });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    // Verify job_posting_id belongs to the company, and for location_admin, to their location\r\n    db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], (err, jobPosting) => {\r\n        if (err) { console.error(\"Database error verifying job posting:\", err); return next(new Error('Database error when verifying job posting.')); } // Pass error\r\n        if (!jobPosting) { return res.status(400).json({ error: 'Job Posting not found or does not belong to your company.' }); }\r\n        \r\n        // Location admin can only add applicants to jobs in their assigned location or unassigned jobs\r\n        if (role === 'location_admin' && jobPosting.location_id !== currentUserLocationId && jobPosting.location_id !== null) {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin cannot add applicants to jobs outside their assigned location.' });\r\n        }\r\n\r\n        db.run(\r\n            'INSERT INTO Applicants (company_id, location_id, job_posting_id, full_name, email, phone_number, notes, application_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)',\r\n            [companyId, location_id || jobPosting.location_id, job_posting_id, full_name, email, phone_number, notes, application_date], // Use location_id from payload or job posting\r\n            function(insertErr) {\r\n                if (insertErr) { console.error(\"Database error creating applicant:\", insertErr); return next(new Error('Failed to create applicant.')); } // Pass error\r\n                res.status(201).json({ message: 'Applicant added successfully!', applicantId: this.lastID });\r\n            }\r\n        );\r\n    });\r\n});\r\n\r\napp.get('/api/applicants', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { job_posting_id, status, location_id } = req.query; // Added job_posting_id, status, location_id filters\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = `SELECT Applicants.*, JobPostings.title AS job_title_name\r\n               FROM Applicants\r\n               LEFT JOIN JobPostings ON Applicants.job_posting_id = JobPostings.job_posting_id\r\n               WHERE Applicants.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    // Input validation for query parameters\r\n    const allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired']; // Define valid statuses\r\n    if (status && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid applicant status filter provided.' });\r\n    }\r\n    if (job_posting_id && isNaN(parseInt(job_posting_id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n\r\n    if (status) {\r\n        sql += ` AND Applicants.status = ?`;\r\n        params.push(status);\r\n    }\r\n\r\n    if (role === 'location_admin') {\r\n        if (currentUserLocationId) {\r\n            sql += ` AND (Applicants.location_id = ? OR Applicants.location_id IS NULL)`; // Location admin sees applicants for their location or unassigned\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Applicants.user_id = ?`;\r\n        params.push(currentUserId);\r\n    } else {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view applicants.' });\r\n    }\r\n\r\n    // Apply job_posting_id filter if provided\r\n    if (job_posting_id) {\r\n        sql += ` AND Applicants.job_posting_id = ?`;\r\n        params.push(job_posting_id);\r\n    }\r\n    // Apply location filter from query params for super_admin\r\n    if (location_id && role === 'super_admin') {\r\n        sql += ` AND Applicants.location_id = ?`;\r\n        params.push(location_id);\r\n    }\r\n\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching applicants:\", err); return next(new Error('Database error fetching applicants.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * PUT /api/applicants/:id\r\n * Updates an applicant's details (e.g., status, notes).\r\n */\r\napp.put('/api/applicants/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { full_name, email, status, resume_url, notes, location_id, job_posting_id, phone_number } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Input Validation for Applicant Update\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can update applicant records.' });\r\n    }\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid applicant ID provided.' });\r\n    }\r\n    if (full_name !== undefined && (typeof full_name !== 'string' || full_name.trim() === '')) {\r\n        return res.status(400).json({ error: \"Full name must be a non-empty string if provided.\" });\r\n    }\r\n    if (email !== undefined && !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address must be provided if changing email.\" });\r\n    }\r\n    if (phone_number !== undefined && (typeof phone_number !== 'string' || phone_number.trim() === '')) {\r\n        return res.status(400).json({ error: \"Phone number must be a non-empty string if provided.\" });\r\n    }\r\n    const allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired'];\r\n    if (status !== undefined && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid status provided.' });\r\n    }\r\n    if (resume_url !== undefined && typeof resume_url !== 'string') { // Assuming resume_url is a string URL\r\n        return res.status(400).json({ error: 'Resume URL must be a string if provided.' });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n    if (job_posting_id !== undefined && typeof job_posting_id !== 'number' && job_posting_id !== null) {\r\n        return res.status(400).json({ error: 'Job posting ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    let updateSql = 'UPDATE Applicants SET ';\r\n    const updateParams = [];\r\n    const clauses = [];\r\n\r\n    if (full_name !== undefined) { clauses.push('full_name = ?'); updateParams.push(full_name); }\r\n    if (email !== undefined) { clauses.push('email = ?'); updateParams.push(email); }\r\n    if (phone_number !== undefined) { clauses.push('phone_number = ?'); updateParams.push(phone_number); }\r\n    if (status !== undefined) { clauses.push('status = ?'); updateParams.push(status); }\r\n    if (resume_url !== undefined) { clauses.push('resume_url = ?'); updateParams.push(resume_url); }\r\n    if (notes !== undefined) { clauses.push('notes = ?'); updateParams.push(notes); }\r\n    \r\n    // Admins can update location_id or job_posting_id, with restrictions for location_admin\r\n    if (location_id !== undefined) {\r\n        if (role === 'super_admin') {\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        } else if (role === 'location_admin') {\r\n            if (location_id !== currentUserLocationId && location_id !== null) { // location_id can be null (company-wide)\r\n                return res.status(403).json({ error: 'Access Denied: Location admin cannot assign applicants to another location.' });\r\n            }\r\n            // If location admin updates applicant location, and it's their location, or setting to null, it's allowed\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        }\r\n    }\r\n    if (job_posting_id !== undefined) {\r\n         if (role === 'super_admin') {\r\n            clauses.push('job_posting_id = ?'); updateParams.push(job_posting_id);\r\n        } else if (role === 'location_admin') {\r\n            // Verify new job_posting_id belongs to the location admin's assigned location or is company-wide\r\n            db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], (err, job) => {\r\n                if (err) { console.error(\"DB error verifying job posting for update:\", err); return next(new Error('Database error verifying job posting.')); } // Pass error\r\n                if (!job) { return res.status(400).json({ error: 'Job Posting not found or does not belong to your company.' }); }\r\n                if (job.location_id !== null && job.location_id !== currentUserLocationId) {\r\n                    return res.status(403).json({ error: 'Access Denied: Location admin cannot assign applicants to jobs outside their assigned location.' });\r\n                }\r\n            });\r\n            clauses.push('job_posting_id = ?'); updateParams.push(job_posting_id);\r\n        }\r\n    }\r\n\r\n\r\n    if (clauses.length === 0) { return res.status(400).json({ error: 'No fields provided for update.' }); }\r\n\r\n    updateSql += clauses.join(', ') + ' WHERE applicant_id = ? AND company_id = ?';\r\n    updateParams.push(id, companyId);\r\n\r\n    // For location_admin, ensure they can only update applicants within their assigned location\r\n    if (role === 'location_admin') {\r\n        updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned applicants too\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(updateSql, updateParams, function(err) {\r\n        if (err) { console.error(\"Database error updating applicant:\", err); return next(new Error('Failed to update applicant.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Applicant not found or not authorized to update.' }); }\r\n        res.status(200).json({ message: 'Applicant updated successfully!' });\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * DELETE /api/applicants/:id\r\n * Deletes an applicant.\r\n * Requires super_admin or location_admin (for their location's applicants).\r\n */\r\napp.delete('/api/applicants/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid applicant ID provided.' });\r\n    }\r\n\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can delete applicants.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM Applicants WHERE applicant_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Additional security for location_admin: ensure they only delete applicants in their own location\r\n    if (role === 'location_admin') {\r\n        sql += ' AND (location_id = ? OR location_id IS NULL)';\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting applicant:\", err); return next(new Error('Failed to delete applicant.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Applicant not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// --- Document Management Routes ---\r\n\r\n/**\r\n * POST /api/documents\r\n * Uploads (saves metadata for) a new document.\r\n * Requires authenticated user.\r\n * Note: Actual file storage is assumed to be handled by a separate service (e.g., S3).\r\n * This endpoint only stores the metadata and a URL.\r\n */\r\napp.post('/api/documents', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { title, file_name, file_type, file_url, description } = req.body;\r\n    const { companyId, userId } = req.user;\r\n    const upload_date = new Date().toISOString();\r\n\r\n    // Input Validation for Document Upload\r\n    if (!title || typeof title !== 'string' || title.trim() === '') {\r\n        return res.status(400).json({ error: 'Document title is required and must be a non-empty string.' });\r\n    }\r\n    if (!file_name || typeof file_name !== 'string' || file_name.trim() === '') {\r\n        return res.status(400).json({ error: 'File name is required and must be a non-empty string.' });\r\n    }\r\n    if (!file_type || typeof file_type !== 'string' || file_type.trim() === '') {\r\n        return res.status(400).json({ error: 'File type is required and must be a non-empty string.' });\r\n    }\r\n    // Basic URL validation: checks for http(s) protocol and some content. Can be more robust.\r\n    const urlRegex = /^https?:\\/\\/[^\\s$.?#].[^\\s]*$/i;\r\n    if (!file_url || typeof file_url !== 'string' || !urlRegex.test(file_url)) {\r\n        return res.status(400).json({ error: 'A valid file URL (starting with http or https) is required.' });\r\n    }\r\n    if (description !== undefined && typeof description !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n\r\n    db.run(\r\n        'INSERT INTO Documents (company_id, user_id, title, file_name, file_type, file_url, description, upload_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)',\r\n        [companyId, userId, title, file_name, file_type, file_url, description, upload_date],\r\n        function(err) {\r\n            if (err) {\r\n                console.error(\"Database error uploading document:\", err);\r\n                return next(new Error('Failed to upload document metadata.')); // Pass error\r\n            }\r\n            res.status(201).json({ message: 'Document metadata saved successfully!', documentId: this.lastID });\r\n        }\r\n    );\r\n});\r\n\r\n/**\r\n * GET /api/documents\r\n * Retrieves a list of documents for the company.\r\n * Filters can be added (e.g., by uploader, by type).\r\n * Requires authenticated user. Super admins can see all, others can see own documents.\r\n */\r\napp.get('/api/documents', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, userId, role } = req.user;\r\n    \r\n    let sql = 'SELECT * FROM Documents WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Non-super-admins only see their own documents\r\n    if (role !== 'super_admin') {\r\n        sql += ' AND user_id = ?';\r\n        params.push(userId);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching documents:\", err); return next(new Error('Database error fetching documents.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * DELETE /api/documents/:id\r\n * Deletes a document record.\r\n * Requires super_admin or the user who uploaded it.\r\n */\r\napp.delete('/api/documents/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, userId, role } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid document ID provided.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM Documents WHERE document_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Only super_admin or the original uploader can delete\r\n    if (role !== 'super_admin') {\r\n        sql += ' AND user_id = ?';\r\n        params.push(userId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting document:\", err); return next(new Error('Failed to delete document.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Document not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// Fallback for any other GET request not handled by an API route (serves index.html for SPA behavior)\r\n// This should always be the LAST route in your Express app\r\napp.get(/'*'/, (req, res) => {\r\n    // Correctly serve the index.html from the parent directory\r\n    res.sendFile(path.join(__dirname, '..', 'index.html'));\r\n});\r\n\r\n// --- Global Error Handling Middleware ---\r\n// This should be the very last middleware in your Express app\r\napp.use((err, req, res, next) => {\r\n    console.error(`Unhandled Error: ${err.stack}`); // Log the full stack trace for debugging\r\n    // Respond with a generic error message for the client\r\n    res.status(500).json({\r\n        error: 'An unexpected server error occurred. Please try again later.',\r\n        // In development, you might send more details:\r\n        // message: err.message,\r\n        // stack: process.env.NODE_ENV === 'development' ? err.stack : undefined\r\n    });\r\n});\r\n\r\n// --- Server Start ---\r\n// This conditional export allows the app to be imported for testing\r\n// without starting the server listener when the test runner requires it.\r\nif (require.main === module) {\r\n    // Only listen if this file is run directly (not required as a module)\r\n    app.listen(PORT, () => {\r\n        console.log(`Server is running successfully on http://localhost:${PORT}`);\r\n    });\r\n} else {\r\n    // Export the app for testing purposes\r\n    module.exports = app;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1750333852455},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\test\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\",\"filename\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\test\\\\integration.test.cjs\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$47\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.27.4:development":{"value":{"code":"\"use strict\";\n\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2); } }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n// --- Imports ---\nvar express = require('express');\nvar sqlite3 = require('sqlite3').verbose();\nvar bcrypt = require('bcryptjs');\nvar jwt = require('jsonwebtoken');\nvar cors = require('cors'); // Import cors\nvar path = require('path');\nvar csv = require('csv-parser'); // For CSV parsing\nvar _require = require('stream'),\n  Readable = _require.Readable; // For creating a readable stream from a string\nvar rateLimit = require('express-rate-limit'); // Import rate-limiting middleware\nvar morgan = require('morgan'); // Import morgan for request logging\n\n// Load environment variables from .env file in development\n// IMPORTANT: Only load .env if server.js is run directly, NOT when required by tests.\nif (process.env.NODE_ENV !== 'production' && require.main === module) {\n  require('dotenv').config();\n}\n\n// Import the Stripe library and initialize it with your secret key\n// CRUCIAL FOR TESTING: Remove the hardcoded fallback live key.\n// Ensure process.env.STRIPE_SECRET_KEY is set to a TEST key for development and testing.\nvar stripeInstance = require('stripe')(process.env.STRIPE_SECRET_KEY);\n\n// --- App Initialization ---\nvar app = express();\n\n// Configure CORS for production environment\nvar allowedOrigins = process.env.CORS_ORIGIN ? process.env.CORS_ORIGIN.split(',') : ['http://localhost:8000']; // Default to localhost for development\n\n// Add 'null' to allowed origins if not in production and not explicitly set for local file access\nif (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\n  allowedOrigins.push('null');\n}\nvar corsOptions = {\n  origin: function origin(_origin, callback) {\n    // Allow requests with no origin (like mobile apps, curl, or local file access if 'null' is in allowedOrigins)\n    if (!_origin) {\n      // Check if 'null' is explicitly allowed or if we're in dev and no CORS_ORIGIN is set\n      if (allowedOrigins.includes('null') || process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\n        return callback(null, true);\n      }\n      var msg = 'The CORS policy for this site does not allow access from the specified Origin.';\n      return callback(new Error(msg), false);\n    }\n    if (allowedOrigins.indexOf(_origin) === -1) {\n      var _msg = 'The CORS policy for this site does not allow access from the specified Origin.';\n      return callback(new Error(_msg), false);\n    }\n    return callback(null, true);\n  },\n  methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\n  credentials: true,\n  // Allow cookies to be sent\n  optionsSuccessStatus: 204 // Some legacy browsers (IE11, various SmartTVs) choke on 204\n};\napp.use(cors(corsOptions));\n\n// Use process.env.PORT for production, fallback to 3000 for local development\nvar PORT = process.env.PORT || 3000;\n\n// Define a webhook secret for Stripe. This should also be an environment variable.\nvar STRIPE_WEBHOOK_SECRET = process.env.STRIPE_WEBHOOK_SECRET || 'whsec_YOUR_WEBHOOK_SECRET';\n\n// --- Rate Limiting Configuration ---\nvar authLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000,\n  // 15 minutes\n  max: 10,\n  // Max 10 requests per 15 minutes per IP\n  message: 'Too many login/registration attempts from this IP, please try again after 15 minutes',\n  standardHeaders: true,\n  // Return rate limit info in the `RateLimit-*` headers\n  legacyHeaders: false // Disable the `X-RateLimit-*` headers\n});\n\n// --- Middleware for Stripe Webhook (MUST be before express.json() for other routes) --\n// This route needs the raw body for signature verification.\napp.post('/api/stripe-webhook', express.raw({\n  type: 'application/json'\n}), /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(req, res) {\n    var sig, event, session, userId, planId, subscriptionUpdated, subscriptionDeleted, invoiceSucceeded, invoiceFailed, _t, _t2;\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          sig = req.headers['stripe-signature'];\n          _context.p = 1;\n          event = stripeInstance.webhooks.constructEvent(req.body, sig, STRIPE_WEBHOOK_SECRET);\n          _context.n = 3;\n          break;\n        case 2:\n          _context.p = 2;\n          _t = _context.v;\n          console.error(\"Webhook Error: \".concat(_t.message));\n          return _context.a(2, res.status(400).send(\"Webhook Error: \".concat(_t.message)));\n        case 3:\n          _t2 = event.type;\n          _context.n = _t2 === 'checkout.session.completed' ? 4 : _t2 === 'customer.subscription.updated' ? 5 : _t2 === 'customer.subscription.deleted' ? 6 : _t2 === 'invoice.payment_succeeded' ? 7 : _t2 === 'invoice.payment_failed' ? 8 : 9;\n          break;\n        case 4:\n          session = event.data.object;\n          console.log('Checkout Session Completed:', session.id);\n          userId = session.metadata.userId;\n          planId = session.metadata.planId;\n          if (session.payment_status === 'paid' && userId && planId) {\n            db.run('UPDATE Users SET stripe_customer_id = ?, stripe_subscription_id = ?, subscription_status = ?, plan_id = ? WHERE user_id = ?', [session.customer, session.subscription, 'active', planId, userId], function (err) {\n              if (err) console.error('Database update error for checkout.session.completed:', err.message);else console.log(\"User \".concat(userId, \" subscription updated to \").concat(planId, \" (active).\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 5:\n          subscriptionUpdated = event.data.object;\n          console.log('Subscription Updated:', subscriptionUpdated.id);\n          if (subscriptionUpdated.customer && subscriptionUpdated.status && subscriptionUpdated.plan && subscriptionUpdated.plan.id) {\n            db.run('UPDATE Users SET subscription_status = ?, plan_id = ? WHERE stripe_customer_id = ?', [subscriptionUpdated.status, subscriptionUpdated.plan.id, subscriptionUpdated.customer], function (err) {\n              if (err) console.error('Database update error for customer.subscription.updated:', err.message);else console.log(\"Subscription for customer \".concat(subscriptionUpdated.customer, \" status updated to \").concat(subscriptionUpdated.status, \" and plan to \").concat(subscriptionUpdated.plan.id, \".\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 6:\n          subscriptionDeleted = event.data.object;\n          console.log('Subscription Deleted:', subscriptionDeleted.id);\n          if (subscriptionDeleted.customer) {\n            db.run('UPDATE Users SET subscription_status = ?, plan_id = ?, stripe_subscription_id = NULL WHERE stripe_customer_id = ?', ['cancelled', 'free', subscriptionDeleted.customer], function (err) {\n              if (err) console.error('Database update error for customer.subscription.deleted:', err.message);else console.log(\"Subscription for customer \".concat(subscriptionDeleted.customer, \" marked as cancelled and reverted to free.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 7:\n          invoiceSucceeded = event.data.object;\n          console.log('Invoice Payment Succeeded:', invoiceSucceeded.id);\n          if (invoiceSucceeded.subscription && invoiceSucceeded.customer) {\n            db.run('UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?', ['active', invoiceSucceeded.subscription, invoiceSucceeded.customer], function (err) {\n              if (err) console.error('Database update error for invoice.payment_succeeded:', err.message);else console.log(\"Subscription \".concat(invoiceSucceeded.subscription, \" status set to active.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 8:\n          invoiceFailed = event.data.object;\n          console.log('Invoice Payment Failed:', invoiceFailed.id);\n          if (invoiceFailed.subscription && invoiceFailed.customer) {\n            db.run('UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?', ['past_due', invoiceFailed.subscription, invoiceFailed.customer], function (err) {\n              if (err) console.error('Database update error for invoice.payment_failed:', err.message);else console.log(\"Subscription \".concat(invoiceFailed.subscription, \" status set to past_due.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 9:\n          console.log(\"Unhandled event type \".concat(event.type));\n        case 10:\n          res.status(200).json({\n            received: true\n          });\n        case 11:\n          return _context.a(2);\n      }\n    }, _callee, null, [[1, 2]]);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\n\n// IMPORTANT: express.json() for parsing JSON request bodies MUST come AFTER the webhook route\napp.use(express.json());\n\n// --- JWT Secret ---\n// CRUCIAL FOR TESTING: Remove the fallback value so it MUST come from process.env for tests.\nvar JWT_SECRET = process.env.JWT_SECRET;\n\n// --- Request Logging (using Morgan) ---\n// 'dev' format is good for development, 'combined' or 'tiny' for production logs\napp.use(morgan('dev'));\n\n// --- Serve Static Files (Frontend) with Caching ---\n// This middleware serves static files from the 'onboardflow' root directory\n// and sets Cache-Control headers for browser caching.\napp.use(express[\"static\"](path.join(__dirname, '..'), {\n  maxAge: '7d',\n  // Cache static assets for 7 days (e.g., CSS, JS, images, favicon)\n  immutable: false // Set to true if asset filenames include content hashes (e.g., app.min.js?v=hash)\n}));\n\n// --- Database Setup ---\nvar db = new sqlite3.Database('./onboardflow.db', function (err) {\n  if (err) {\n    // Log database connection error and exit\n    console.error(\"Error opening database:\", err.message);\n    process.exit(1); // Exit process if database connection fails\n  } else {\n    console.log(\"Successfully connected to the database.\");\n    db.get(\"PRAGMA foreign_keys = ON\");\n    db.serialize(function () {\n      db.run(\"CREATE TABLE IF NOT EXISTS Companies (company_id INTEGER PRIMARY KEY AUTOINCREMENT, company_name TEXT NOT NULL UNIQUE)\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Locations (location_id INTEGER PRIMARY KEY AUTOINCREMENT, company_id INTEGER, location_name TEXT NOT NULL, location_address TEXT NOT NULL, FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE)\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Users (\\n                user_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER,\\n                location_id INTEGER,\\n                full_name TEXT NOT NULL,\\n                email TEXT NOT NULL UNIQUE,\\n                password_hash TEXT NOT NULL,\\n                position TEXT,\\n                employee_id TEXT,\\n                role TEXT NOT NULL,\\n                stripe_customer_id TEXT,\\n                stripe_subscription_id TEXT,\\n                subscription_status TEXT,\\n                plan_id TEXT,\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Schedules (\\n                schedule_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                employee_id INTEGER NOT NULL,\\n                location_id INTEGER NOT NULL,\\n                start_time TEXT NOT NULL,\\n                end_time TEXT NOT NULL,\\n                notes TEXT,\\n                FOREIGN KEY (employee_id) REFERENCES Users(user_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      // NEW: Create JobPostings table\n      db.run(\"CREATE TABLE IF NOT EXISTS JobPostings (\\n                job_posting_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                location_id INTEGER, -- Optional: link job posting to a specific location\\n                title TEXT NOT NULL,\\n                description TEXT NOT NULL,\\n                requirements TEXT, -- Optional: job requirements\\n                status TEXT NOT NULL DEFAULT 'Open', -- e.g., 'Open', 'Closed', 'Filled'\\n                created_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      // Update Applicants table schema to link to JobPostings and add phone_number\n      db.run(\"CREATE TABLE IF NOT EXISTS Applicants (\\n                applicant_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                location_id INTEGER, -- Optional: applicant's preferred location or location applied for\\n                job_posting_id INTEGER, -- NEW: Link to JobPostings table\\n                full_name TEXT NOT NULL,\\n                email TEXT NOT NULL,\\n                phone_number TEXT, -- NEW: Phone number field\\n                status TEXT NOT NULL DEFAULT 'Applied', -- e.g., 'Applied', 'Interviewing', 'Rejected', 'Hired'\\n                resume_url TEXT, -- Optional: URL to a resume document (e.g., hosted on cloud storage)\\n                notes TEXT,\\n                application_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE,\\n                FOREIGN KEY (job_posting_id) REFERENCES JobPostings(job_posting_id) ON DELETE SET NULL -- If job posting is deleted, set this to NULL\\n            )\");\n      // NEW: Create Documents table for file/video uploads\n      db.run(\"CREATE TABLE IF NOT EXISTS Documents (\\n                document_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                user_id INTEGER NOT NULL, -- User who uploaded the document\\n                title TEXT NOT NULL,\\n                file_name TEXT NOT NULL,\\n                file_type TEXT NOT NULL,\\n                file_url TEXT NOT NULL, -- URL to the stored file (e.g., S3, GCS)\\n                description TEXT,\\n                upload_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (user_id) REFERENCES Users(user_id) ON DELETE CASCADE\\n            )\");\n    });\n  }\n});\n\n// --- Authentication Middleware ---\nfunction authenticateToken(req, res, next) {\n  var authHeader = req.headers['authorization'];\n  var token = authHeader && authHeader.split(' ')[1];\n  if (token == null) {\n    return res.status(401).json({\n      error: 'Unauthorized: No token provided.'\n    });\n  }\n  jwt.verify(token, JWT_SECRET, function (err, user) {\n    if (err) {\n      // Log the specific JWT error for debugging\n      console.error(\"JWT Verification Error:\", err.message);\n      return res.status(403).json({\n        error: 'Forbidden: Invalid or expired token.'\n      });\n    }\n    req.user = user;\n    next();\n  });\n}\n\n// --- Helper for Input Validation ---\nvar isValidEmail = function isValidEmail(email) {\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n};\n\n// --- API Routes (ALL API ROUTES SHOULD BE DEFINED HERE, BEFORE STATIC FILE SERVING) ---\n\n// Apply rate limiting to authentication routes\napp.post('/api/register', authLimiter, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(req, res, next) {\n    var _req$body, company_name, full_name, email, password, password_hash, _t3;\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          // Added 'next'\n          _req$body = req.body, company_name = _req$body.company_name, full_name = _req$body.full_name, email = _req$body.email, password = _req$body.password; // Input Validation for Registration\n          if (!(!company_name || typeof company_name !== 'string' || company_name.trim() === '')) {\n            _context2.n = 1;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Company name is required and must be a non-empty string.\"\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context2.n = 2;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context2.n = 3;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context2.n = 4;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          _context2.p = 4;\n          _context2.n = 5;\n          return bcrypt.hash(password, 10);\n        case 5:\n          password_hash = _context2.v;\n          db.serialize(function () {\n            db.run('BEGIN TRANSACTION');\n            db.run('INSERT INTO Companies (company_name) VALUES (?)', [company_name], function (err) {\n              if (err) {\n                db.run('ROLLBACK');\n                console.error(\"Database error creating company:\", err);\n                return next(new Error(\"Could not create company.\")); // Pass error to error handling middleware\n              }\n              var newCompanyId = this.lastID;\n              db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'super_admin', 'active', 'free')\", [newCompanyId, null, full_name, email, password_hash], function (userInsertErr) {\n                if (userInsertErr) {\n                  db.run('ROLLBACK');\n                  console.error(\"Database error creating user:\", userInsertErr);\n                  if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                    return res.status(409).json({\n                      error: 'Email already registered.'\n                    });\n                  }\n                  return next(new Error(\"Could not create user.\")); // Pass error\n                }\n                db.run('COMMIT');\n                res.status(201).json({\n                  message: \"Company and user registered successfully!\",\n                  userId: this.lastID\n                });\n              });\n            });\n          });\n          _context2.n = 7;\n          break;\n        case 6:\n          _context2.p = 6;\n          _t3 = _context2.v;\n          console.error(\"Registration error:\", _t3);\n          next(_t3); // Pass error to error handling middleware\n        case 7:\n          return _context2.a(2);\n      }\n    }, _callee2, null, [[4, 6]]);\n  }));\n  return function (_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}());\napp.post('/api/login', authLimiter, function (req, res, next) {\n  // Added 'next'\n  var _req$body2 = req.body,\n    email = _req$body2.email,\n    password = _req$body2.password;\n\n  // Input Validation for Login\n  if (!email || !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address is required.\"\n    });\n  }\n  if (!password || typeof password !== 'string' || password.length === 0) {\n    return res.status(400).json({\n      error: \"Password is required.\"\n    });\n  }\n  db.get(\"SELECT * FROM Users WHERE email = ?\", [email], /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(err, user) {\n      var isMatch, payload, token;\n      return _regenerator().w(function (_context3) {\n        while (1) switch (_context3.n) {\n          case 0:\n            if (!err) {\n              _context3.n = 1;\n              break;\n            }\n            console.error(\"Database error during login:\", err);\n            return _context3.a(2, next(new Error(\"A server error occurred during login.\")));\n          case 1:\n            if (user) {\n              _context3.n = 2;\n              break;\n            }\n            return _context3.a(2, res.status(401).json({\n              error: \"Invalid credentials.\"\n            }));\n          case 2:\n            _context3.n = 3;\n            return bcrypt.compare(password, user.password_hash);\n          case 3:\n            isMatch = _context3.v;\n            if (isMatch) {\n              _context3.n = 4;\n              break;\n            }\n            return _context3.a(2, res.status(401).json({\n              error: \"Invalid credentials.\"\n            }));\n          case 4:\n            payload = {\n              userId: user.user_id,\n              email: user.email,\n              role: user.role,\n              fullName: user.full_name,\n              companyId: user.company_id,\n              locationId: user.location_id,\n              subscriptionStatus: user.subscription_status,\n              planId: user.plan_id\n            };\n            token = jwt.sign(payload, JWT_SECRET, {\n              expiresIn: '1h'\n            });\n            res.status(200).json({\n              message: \"Login successful!\",\n              token: token,\n              role: user.role\n            });\n          case 5:\n            return _context3.a(2);\n        }\n      }, _callee3);\n    }));\n    return function (_x6, _x7) {\n      return _ref3.apply(this, arguments);\n    };\n  }());\n});\napp.post('/api/invite-admin', authenticateToken, /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(req, res, next) {\n    var _req$body3, full_name, email, password, location_id, _req$user, companyId, role, password_hash, _t4;\n    return _regenerator().w(function (_context4) {\n      while (1) switch (_context4.n) {\n        case 0:\n          // Added 'next'\n          _req$body3 = req.body, full_name = _req$body3.full_name, email = _req$body3.email, password = _req$body3.password, location_id = _req$body3.location_id;\n          _req$user = req.user, companyId = _req$user.companyId, role = _req$user.role; // Input Validation for Invite Admin\n          if (!(role !== 'super_admin')) {\n            _context4.n = 1;\n            break;\n          }\n          return _context4.a(2, res.status(403).json({\n            error: 'Access Denied: Only super admins can invite other admins.'\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context4.n = 2;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context4.n = 3;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context4.n = 4;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"Temporary password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          if (!(typeof location_id !== 'number' || location_id <= 0)) {\n            _context4.n = 5;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"A valid location ID is required.\"\n          }));\n        case 5:\n          _context4.p = 5;\n          _context4.n = 6;\n          return bcrypt.hash(password, 10);\n        case 6:\n          password_hash = _context4.v;\n          db.get('SELECT * FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n            if (err) {\n              console.error(\"Database error checking location:\", err);\n              return next(new Error('Database error when verifying location.'));\n            } // Pass error\n            if (!location) {\n              return res.status(400).json({\n                error: 'Selected location does not exist or does not belong to your company.'\n              });\n            }\n            db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'location_admin', 'active', 'free')\", [companyId, location_id, full_name, email, password_hash], function (userInsertErr) {\n              if (userInsertErr) {\n                console.error(\"Database error inviting admin:\", userInsertErr);\n                if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                  return res.status(409).json({\n                    error: 'Email already registered.'\n                  });\n                }\n                return next(new Error('Failed to invite admin.')); // Pass error\n              }\n              res.status(201).json({\n                message: \"Location admin invited successfully!\",\n                userId: this.lastID\n              });\n            });\n          });\n          _context4.n = 8;\n          break;\n        case 7:\n          _context4.p = 7;\n          _t4 = _context4.v;\n          console.error(\"Invite admin error:\", _t4);\n          next(_t4);\n        case 8:\n          return _context4.a(2);\n      }\n    }, _callee4, null, [[5, 7]]);\n  }));\n  return function (_x8, _x9, _x0) {\n    return _ref4.apply(this, arguments);\n  };\n}());\n\n// NEW: API endpoint for inviting employees\napp.post('/api/invite-employee', authenticateToken, /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(req, res, next) {\n    var _req$body4, full_name, email, password, position, employee_id, location_id, _req$user2, companyId, role, currentUserLocationId, isLocationIdValid, password_hash, locationVerification, _t5;\n    return _regenerator().w(function (_context5) {\n      while (1) switch (_context5.n) {\n        case 0:\n          _req$body4 = req.body, full_name = _req$body4.full_name, email = _req$body4.email, password = _req$body4.password, position = _req$body4.position, employee_id = _req$body4.employee_id, location_id = _req$body4.location_id;\n          _req$user2 = req.user, companyId = _req$user2.companyId, role = _req$user2.role, currentUserLocationId = _req$user2.locationId; // Authorization: Super admin can invite anyone, Location admin can only invite to their location or unassigned\n          if (['super_admin', 'location_admin'].includes(role)) {\n            _context5.n = 1;\n            break;\n          }\n          return _context5.a(2, res.status(403).json({\n            error: 'Access Denied: Only admins can invite employees.'\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context5.n = 2;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context5.n = 3;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context5.n = 4;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"Temporary password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          // Corrected location_id validation: Must be a number > 0.\n          // If location_id is null, it indicates an unassigned location, which is valid for a super admin.\n          // For location_admin, it must match their current location.\n          // This revised logic correctly checks for null OR a valid positive integer.\n          isLocationIdValid = location_id === null || typeof location_id === 'number' && !isNaN(location_id) && location_id > 0;\n          if (isLocationIdValid) {\n            _context5.n = 5;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"A valid location ID (positive number) is required for employee, or null for unassigned.\"\n          }));\n        case 5:\n          if (!(position !== undefined && typeof position !== 'string')) {\n            _context5.n = 6;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Position must be a string if provided.'\n          }));\n        case 6:\n          if (!(employee_id !== undefined && typeof employee_id !== 'string')) {\n            _context5.n = 7;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Employee ID must be a string if provided.'\n          }));\n        case 7:\n          if (!(role === 'location_admin')) {\n            _context5.n = 8;\n            break;\n          }\n          if (!(location_id !== currentUserLocationId)) {\n            _context5.n = 8;\n            break;\n          }\n          if (location_id === null && currentUserLocationId === null) {\n            _context5.n = 8;\n            break;\n          }\n          return _context5.a(2, res.status(403).json({\n            error: 'Access Denied: Location admin can only invite employees to their assigned location.'\n          }));\n        case 8:\n          _context5.p = 8;\n          _context5.n = 9;\n          return bcrypt.hash(password, 10);\n        case 9:\n          password_hash = _context5.v;\n          if (!(location_id !== null)) {\n            _context5.n = 11;\n            break;\n          }\n          _context5.n = 10;\n          return new Promise(function (resolve, reject) {\n            db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n              if (err) reject(err);\n              resolve(location);\n            });\n          });\n        case 10:\n          locationVerification = _context5.v;\n          if (locationVerification) {\n            _context5.n = 11;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Selected location does not exist or does not belong to your company.'\n          }));\n        case 11:\n          db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, position, employee_id, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, ?, ?, 'employee', 'active', 'free')\", [companyId, location_id, full_name, email, password_hash, position, employee_id],\n          // Default new employees to 'employee' role\n          function (userInsertErr) {\n            if (userInsertErr) {\n              console.error(\"Database error inviting employee:\", userInsertErr);\n              if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                return res.status(409).json({\n                  error: 'Email already registered.'\n                });\n              }\n              return next(new Error('Failed to invite employee.'));\n            }\n            res.status(201).json({\n              message: \"Employee invited successfully!\",\n              userId: this.lastID\n            });\n          });\n          _context5.n = 13;\n          break;\n        case 12:\n          _context5.p = 12;\n          _t5 = _context5.v;\n          console.error(\"Invite employee error:\", _t5);\n          next(_t5);\n        case 13:\n          return _context5.a(2);\n      }\n    }, _callee5, null, [[8, 12]]);\n  }));\n  return function (_x1, _x10, _x11) {\n    return _ref5.apply(this, arguments);\n  };\n}());\napp.get('/api/profile', authenticateToken, function (req, res) {\n  var _req$user3 = req.user,\n    userId = _req$user3.userId,\n    fullName = _req$user3.fullName,\n    email = _req$user3.email,\n    role = _req$user3.role,\n    companyId = _req$user3.companyId,\n    locationId = _req$user3.locationId,\n    subscriptionStatus = _req$user3.subscriptionStatus,\n    planId = _req$user3.planId;\n  res.status(200).json({\n    userId: userId,\n    fullName: fullName,\n    email: email,\n    role: role,\n    companyId: companyId,\n    locationId: locationId,\n    subscriptionStatus: subscriptionStatus,\n    planId: planId\n  });\n});\napp.put('/api/profile', authenticateToken, /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7(req, res, next) {\n    var _req$body5, fullName, email, currentPassword, newPassword, userId;\n    return _regenerator().w(function (_context7) {\n      while (1) switch (_context7.n) {\n        case 0:\n          // Added 'next'\n          _req$body5 = req.body, fullName = _req$body5.fullName, email = _req$body5.email, currentPassword = _req$body5.currentPassword, newPassword = _req$body5.newPassword;\n          userId = req.user.userId; // Input Validation for Profile Update\n          if (!(fullName === undefined && email === undefined && (!currentPassword || !newPassword))) {\n            _context7.n = 1;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: 'No data provided for update.'\n          }));\n        case 1:\n          if (!(fullName !== undefined && (typeof fullName !== 'string' || fullName.trim() === ''))) {\n            _context7.n = 2;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"Full name must be a non-empty string if provided.\"\n          }));\n        case 2:\n          if (!(email !== undefined && !isValidEmail(email))) {\n            _context7.n = 3;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"A valid email address must be provided if changing email.\"\n          }));\n        case 3:\n          if (!(newPassword !== undefined && (typeof newPassword !== 'string' || newPassword.length < 6))) {\n            _context7.n = 4;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"New password must be at least 6 characters long if changing password.\"\n          }));\n        case 4:\n          if (!(currentPassword && !newPassword || !currentPassword && newPassword)) {\n            _context7.n = 5;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: 'Both current password and new password are required to change password.'\n          }));\n        case 5:\n          db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], /*#__PURE__*/function () {\n            var _ref7 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6(err, user) {\n              var updateSql, updateParams, clauses, changesMade, existingUser, isMatch, newPasswordHash, _t6;\n              return _regenerator().w(function (_context6) {\n                while (1) switch (_context6.n) {\n                  case 0:\n                    if (!err) {\n                      _context6.n = 1;\n                      break;\n                    }\n                    console.error(\"Database error fetching user for profile update:\", err);\n                    return _context6.a(2, next(new Error(\"Server error during profile update.\")));\n                  case 1:\n                    if (user) {\n                      _context6.n = 2;\n                      break;\n                    }\n                    return _context6.a(2, res.status(404).json({\n                      error: \"User not found.\"\n                    }));\n                  case 2:\n                    updateSql = 'UPDATE Users SET ';\n                    updateParams = [];\n                    clauses = [];\n                    changesMade = false;\n                    if (fullName !== undefined && fullName !== user.full_name) {\n                      clauses.push('full_name = ?');\n                      updateParams.push(fullName);\n                      changesMade = true;\n                    }\n                    if (!(email !== undefined && email !== user.email)) {\n                      _context6.n = 8;\n                      break;\n                    }\n                    _context6.p = 3;\n                    _context6.n = 4;\n                    return new Promise(function (resolve, reject) {\n                      db.get(\"SELECT user_id FROM Users WHERE email = ? AND user_id != ?\", [email, userId], function (err, row) {\n                        if (err) reject(err);\n                        resolve(row);\n                      });\n                    });\n                  case 4:\n                    existingUser = _context6.v;\n                    if (!existingUser) {\n                      _context6.n = 5;\n                      break;\n                    }\n                    return _context6.a(2, res.status(409).json({\n                      error: 'Email already in use by another account.'\n                    }));\n                  case 5:\n                    _context6.n = 7;\n                    break;\n                  case 6:\n                    _context6.p = 6;\n                    _t6 = _context6.v;\n                    console.error(\"Database error checking existing email:\", _t6);\n                    return _context6.a(2, next(new Error(\"Server error verifying email availability.\")));\n                  case 7:\n                    clauses.push('email = ?');\n                    updateParams.push(email);\n                    changesMade = true;\n                  case 8:\n                    if (!(currentPassword && newPassword)) {\n                      _context6.n = 12;\n                      break;\n                    }\n                    _context6.n = 9;\n                    return bcrypt.compare(currentPassword, user.password_hash);\n                  case 9:\n                    isMatch = _context6.v;\n                    if (isMatch) {\n                      _context6.n = 10;\n                      break;\n                    }\n                    return _context6.a(2, res.status(401).json({\n                      error: \"Current password incorrect.\"\n                    }));\n                  case 10:\n                    _context6.n = 11;\n                    return bcrypt.hash(newPassword, 10);\n                  case 11:\n                    newPasswordHash = _context6.v;\n                    clauses.push('password_hash = ?');\n                    updateParams.push(newPasswordHash);\n                    changesMade = true;\n                  case 12:\n                    if (changesMade) {\n                      _context6.n = 13;\n                      break;\n                    }\n                    return _context6.a(2, res.status(200).json({\n                      message: 'No changes detected. Profile remains the same.'\n                    }));\n                  case 13:\n                    updateSql += clauses.join(', ') + ' WHERE user_id = ?';\n                    updateParams.push(userId);\n                    db.run(updateSql, updateParams, function (updateErr) {\n                      if (updateErr) {\n                        console.error(\"Database error updating profile:\", updateErr);\n                        return next(new Error('Failed to update profile.'));\n                      } // Pass error\n                      if (this.changes > 0) {\n                        db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], function (fetchErr, updatedUser) {\n                          if (fetchErr || !updatedUser) {\n                            console.error(\"Error fetching updated user for new token:\", fetchErr);\n                            return res.status(200).json({\n                              message: 'Profile updated successfully, but token could not be refreshed.'\n                            });\n                          }\n                          var newPayload = {\n                            userId: updatedUser.user_id,\n                            email: updatedUser.email,\n                            role: updatedUser.role,\n                            fullName: updatedUser.full_name,\n                            companyId: updatedUser.company_id,\n                            locationId: updatedUser.location_id,\n                            subscriptionStatus: updatedUser.subscription_status,\n                            planId: user.plan_id\n                          };\n                          var newToken = jwt.sign(newPayload, JWT_SECRET, {\n                            expiresIn: '1h'\n                          });\n                          res.status(200).json({\n                            message: 'Profile updated successfully!',\n                            token: newToken\n                          });\n                        });\n                      } else {\n                        res.status(200).json({\n                          message: 'No changes applied as data was identical.'\n                        });\n                      }\n                    });\n                  case 14:\n                    return _context6.a(2);\n                }\n              }, _callee6, null, [[3, 6]]);\n            }));\n            return function (_x15, _x16) {\n              return _ref7.apply(this, arguments);\n            };\n          }());\n        case 6:\n          return _context7.a(2);\n      }\n    }, _callee7);\n  }));\n  return function (_x12, _x13, _x14) {\n    return _ref6.apply(this, arguments);\n  };\n}());\napp.get('/api/locations', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user4 = req.user,\n    companyId = _req$user4.companyId,\n    role = _req$user4.role;\n  var sql = 'SELECT location_id, location_name, location_address FROM Locations WHERE company_id = ?';\n  var params = [companyId];\n\n  // Allowing super_admin, location_admin, and employee to view all locations in their company for dropdowns/selection\n  if (!['super_admin', 'location_admin', 'employee'].includes(role)) {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view locations.'\n    });\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching locations:\", err);\n      return next(new Error('Database error fetching locations.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp.post('/api/locations', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body6 = req.body,\n    location_name = _req$body6.location_name,\n    location_address = _req$body6.location_address;\n  var _req$user5 = req.user,\n    companyId = _req$user5.companyId,\n    role = _req$user5.role;\n\n  // Input Validation for Create Location\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can create locations.'\n    });\n  }\n  if (!location_name || typeof location_name !== 'string' || location_name.trim() === '') {\n    return res.status(400).json({\n      error: \"Location name is required and must be a non-empty string.\"\n    });\n  }\n  if (!location_address || typeof location_address !== 'string' || location_address.trim() === '') {\n    return res.status(400).json({\n      error: \"Location address is required and must be a non-empty string.\"\n    });\n  }\n  db.run('INSERT INTO Locations (company_id, location_name, location_address) VALUES (?, ?, ?)', [companyId, location_name, location_address], function (err) {\n    if (err) {\n      console.error(\"Database error creating location:\", err);\n      return next(new Error('Failed to create location.'));\n    } // Pass error\n    res.status(201).json({\n      message: 'Location created!',\n      locationId: this.lastID\n    });\n  });\n});\napp[\"delete\"]('/api/locations/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user6 = req.user,\n    companyId = _req$user6.companyId,\n    role = _req$user6.role;\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can delete locations.'\n    });\n  }\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID provided.'\n    });\n  }\n  db.run('DELETE FROM Locations WHERE location_id = ? AND company_id = ?', [id, companyId], function (err) {\n    if (err) {\n      console.error(\"Database error deleting location:\", err);\n      return next(new Error('Failed to delete location.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Location not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\napp.get('/api/users', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user7 = req.user,\n    companyId = _req$user7.companyId,\n    role = _req$user7.role,\n    currentUserId = _req$user7.userId,\n    currentUserLocationId = _req$user7.locationId;\n  var _req$query = req.query,\n    filterRole = _req$query.filterRole,\n    filterLocationId = _req$query.filterLocationId;\n  var sql = \"SELECT Users.user_id, Users.full_name, Users.email, Users.role, Locations.location_name\\n               FROM Users\\n               LEFT JOIN Locations ON Users.location_id = Locations.location_id\\n               WHERE Users.company_id = ?\";\n  var params = [companyId];\n  if (role === 'super_admin') {\n    // Super admin can view all users in their company.\n  } else if (role === 'location_admin') {\n    // Location admin can view all users within their assigned location, plus unassigned users for their company.\n    if (currentUserLocationId) {\n      sql += \" AND (Users.location_id = ? OR Users.location_id IS NULL)\"; // Admins might need to see unassigned users\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Users.user_id = ?\";\n    params.push(currentUserId);\n  } else {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view users.'\n    });\n  }\n\n  // Input validation for filterRole and filterLocationId\n  var allowedRoles = ['super_admin', 'location_admin', 'employee'];\n  if (filterRole && (!allowedRoles.includes(filterRole) || role === 'location_admin' && filterRole === 'super_admin')) {\n    return res.status(400).json({\n      error: 'Invalid filter role provided or insufficient permissions to filter by this role.'\n    });\n  }\n  if (filterLocationId && isNaN(parseInt(filterLocationId))) {\n    return res.status(400).json({\n      error: 'Invalid filter location ID provided.'\n    });\n  }\n  if (filterRole) {\n    sql += \" AND Users.role = ?\";\n    params.push(filterRole);\n  }\n  if (filterLocationId) {\n    // Ensure location_admin can only filter by their own location\n    if (role === 'super_admin' || role === 'location_admin' && parseInt(filterLocationId) === currentUserLocationId) {\n      sql += \" AND Users.location_id = ?\";\n      params.push(filterLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Insufficient permissions to filter by location.'\n      });\n    }\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching users:\", err);\n      return next(new Error('Database error fetching users.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp[\"delete\"]('/api/users/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user8 = req.user,\n    companyId = _req$user8.companyId,\n    role = _req$user8.role,\n    authenticatedUserId = _req$user8.userId;\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can delete users.'\n    });\n  }\n  if (parseInt(id) === authenticatedUserId) {\n    return res.status(403).json({\n      error: 'Cannot delete your own super admin account via this interface.'\n    });\n  }\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid user ID provided.'\n    });\n  }\n  db.run('DELETE FROM Users WHERE user_id = ? AND company_id = ? AND role != \\'super_admin\\'', [id, companyId], function (err) {\n    if (err) {\n      console.error(\"Database error deleting user:\", err);\n      return next(new Error('Failed to delete user.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'User not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\napp.post('/api/create-checkout-session', authenticateToken, /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee8(req, res, next) {\n    var planId, _req$user9, userId, email, companyId, allowedPlanIds, priceIdMap, stripePriceId, customerId, userRecord, customer, session, _t7;\n    return _regenerator().w(function (_context8) {\n      while (1) switch (_context8.n) {\n        case 0:\n          // Added 'next'\n          planId = req.body.planId;\n          _req$user9 = req.user, userId = _req$user9.userId, email = _req$user9.email, companyId = _req$user9.companyId; // Input Validation for planId\n          allowedPlanIds = ['pro', 'enterprise'];\n          if (!(!planId || !allowedPlanIds.includes(planId))) {\n            _context8.n = 1;\n            break;\n          }\n          return _context8.a(2, res.status(400).json({\n            error: 'Invalid plan ID provided.'\n          }));\n        case 1:\n          priceIdMap = {\n            'pro': process.env.STRIPE_PRICE_ID_PRO,\n            // Use environment variable\n            'enterprise': process.env.STRIPE_PRICE_ID_ENT // Use environment variable\n          };\n          stripePriceId = priceIdMap[planId];\n          if (stripePriceId) {\n            _context8.n = 2;\n            break;\n          }\n          return _context8.a(2, res.status(500).json({\n            error: 'Stripe price ID not configured for this plan.'\n          }));\n        case 2:\n          _context8.p = 2;\n          _context8.n = 3;\n          return new Promise(function (resolve, reject) {\n            db.get('SELECT stripe_customer_id FROM Users WHERE user_id = ?', [userId], function (err, row) {\n              if (err) reject(err);\n              resolve(row);\n            });\n          });\n        case 3:\n          userRecord = _context8.v;\n          if (!(userRecord && userRecord.stripe_customer_id)) {\n            _context8.n = 4;\n            break;\n          }\n          customerId = userRecord.stripe_customer_id;\n          _context8.n = 6;\n          break;\n        case 4:\n          _context8.n = 5;\n          return stripeInstance.customers.create({\n            email: email,\n            metadata: {\n              userId: userId,\n              companyId: companyId\n            }\n          });\n        case 5:\n          customer = _context8.v;\n          customerId = customer.id;\n          db.run('UPDATE Users SET stripe_customer_id = ? WHERE user_id = ?', [customerId, userId], function (err) {\n            if (err) console.error('Failed to save Stripe customer ID to DB:', err);\n          });\n        case 6:\n          _context8.n = 7;\n          return stripeInstance.checkout.sessions.create({\n            customer: customerId,\n            mode: 'subscription',\n            line_items: [{\n              price: stripePriceId,\n              quantity: 1\n            }],\n            // Use environment variables for success/cancel URLs, or relative paths if handled client-side\n            success_url: \"\".concat(process.env.FRONTEND_URL || 'http://localhost:8000', \"/suite-hub.html?payment=success&session_id={CHECKOUT_SESSION_ID}\"),\n            cancel_url: \"\".concat(process.env.FRONTEND_URL || 'http://localhost:8000', \"/pricing.html?payment=cancelled\"),\n            metadata: {\n              userId: userId,\n              planId: planId\n            }\n          });\n        case 7:\n          session = _context8.v;\n          res.status(200).json({\n            url: session.url\n          });\n          _context8.n = 9;\n          break;\n        case 8:\n          _context8.p = 8;\n          _t7 = _context8.v;\n          console.error('Error creating Stripe Checkout Session:', _t7);\n          next(_t7);\n        case 9:\n          return _context8.a(2);\n      }\n    }, _callee8, null, [[2, 8]]);\n  }));\n  return function (_x17, _x18, _x19) {\n    return _ref8.apply(this, arguments);\n  };\n}());\napp.post('/api/schedules', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body7 = req.body,\n    employee_id = _req$body7.employee_id,\n    location_id = _req$body7.location_id,\n    start_time = _req$body7.start_time,\n    end_time = _req$body7.end_time,\n    notes = _req$body7.notes;\n  var _req$user0 = req.user,\n    companyId = _req$user0.companyId,\n    role = _req$user0.role,\n    currentUserId = _req$user0.userId;\n\n  // Input Validation for Create Schedule\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can create schedules.'\n    });\n  }\n  if (typeof employee_id !== 'number' || employee_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid employee ID is required.'\n    });\n  }\n  if (typeof location_id !== 'number' || location_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid location ID is required.'\n    });\n  }\n  if (!start_time || !end_time || isNaN(new Date(start_time).getTime()) || isNaN(new Date(end_time).getTime())) {\n    return res.status(400).json({\n      error: 'Valid start and end times are required.'\n    });\n  }\n  if (new Date(start_time) >= new Date(end_time)) {\n    return res.status(400).json({\n      error: 'Start time must be before end time.'\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  db.get('SELECT user_id FROM Users WHERE user_id = ? AND company_id = ?', [employee_id, companyId], function (err, employee) {\n    if (err) {\n      console.error(\"Database error verifying employee:\", err);\n      return next(new Error('Database error during employee verification.'));\n    } // Pass error\n    if (!employee) {\n      return res.status(400).json({\n        error: 'Employee not found in your company.'\n      });\n    }\n    db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n      if (err) {\n        console.error(\"Database error verifying location:\", err);\n        return next(new Error('Database error during location verification.'));\n      } // Pass error\n      if (!location) {\n        return res.status(400).json({\n          error: 'Location not found in your company.'\n        });\n      }\n      db.run('INSERT INTO Schedules (employee_id, location_id, start_time, end_time, notes) VALUES (?, ?, ?, ?, ?)', [employee_id, location_id, start_time, end_time, notes], function (insertErr) {\n        if (insertErr) {\n          console.error(\"Database error creating schedule:\", insertErr);\n          return next(new Error('Failed to create schedule.'));\n        } // Pass error\n        res.status(201).json({\n          message: 'Schedule created successfully!',\n          scheduleId: this.lastID\n        });\n      });\n    });\n  });\n});\napp.get('/api/schedules', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query2 = req.query,\n    employee_id = _req$query2.employee_id,\n    location_id = _req$query2.location_id,\n    start_date = _req$query2.start_date,\n    end_date = _req$query2.end_date;\n  var _req$user1 = req.user,\n    companyId = _req$user1.companyId,\n    role = _req$user1.role,\n    currentUserId = _req$user1.userId,\n    currentUserLocationId = _req$user1.locationId;\n  var sql = \"SELECT Users.user_id, Users.full_name, Users.email, Users.role, Locations.location_name\\n               FROM Users\\n               LEFT JOIN Locations ON Users.location_id = Locations.location_id\\n               WHERE Users.company_id = ?\";\n  var params = [companyId];\n  if (role === 'super_admin') {\n    // Super admin can view all users in their company.\n  } else if (role === 'location_admin') {\n    // Location admin can view all users within their assigned location, plus unassigned users for their company.\n    if (currentUserLocationId) {\n      sql += \" AND (Users.location_id = ? OR Users.location_id IS NULL)\"; // Admins might need to see unassigned users\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Users.user_id = ?\";\n    params.push(currentUserId);\n  }\n\n  // Input validation for query parameters\n  if (employee_id && isNaN(parseInt(employee_id))) {\n    return res.status(400).json({\n      error: 'Invalid employee ID filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (start_date && isNaN(new Date(start_date).getTime())) {\n    return res.status(400).json({\n      error: 'Invalid start date filter provided.'\n    });\n  }\n  if (end_date && isNaN(new Date(end_date).getTime())) {\n    return res.status(400).json({\n      error: 'Invalid end date filter provided.'\n    });\n  }\n  if (employee_id && (role === 'super_admin' || role === 'location_admin' && parseInt(employee_id) === currentUserId || role === 'employee' && parseInt(employee_id) === currentUserId)) {\n    sql += \" AND Users.role = ?\";\n    params.push(filterRole); // This should be employee_id, not filterRole\n  }\n  if (location_id && (role === 'super_admin' || role === 'location_admin' && parseInt(location_id) === currentUserLocationId)) {\n    sql += \" AND Users.location_id = ?\";\n    params.push(location_id);\n  }\n  if (start_date) {\n    sql += \" AND Schedules.start_time >= ?\";\n    params.push(start_date);\n  }\n  if (end_date) {\n    sql += \" AND Schedules.end_time <= ?\";\n    params.push(end_date);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching schedules:\", err);\n      return next(new Error('Database error fetching schedules.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp[\"delete\"]('/api/schedules/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user10 = req.user,\n    companyId = _req$user10.companyId,\n    role = _req$user10.role,\n    currentUserId = _req$user10.userId,\n    currentUserLocationId = _req$user10.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid schedule ID provided.'\n    });\n  }\n  if (role === 'employee') {\n    return res.status(403).json({\n      error: 'Access Denied: Employees cannot delete schedules.'\n    });\n  }\n  var sql = \"DELETE FROM Schedules WHERE schedule_id = ?\";\n  var params = [id];\n  if (role === 'location_admin') {\n    sql += \" AND employee_id IN (SELECT user_id FROM Users WHERE location_id = ? AND company_id = ?)\";\n    params.push(currentUserLocationId, companyId);\n  } else if (role === 'super_admin') {\n    sql += \" AND employee_id IN (SELECT user_id FROM Users WHERE company_id = ?)\";\n    params.push(companyId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting schedule:\", err);\n      return next(new Error('Failed to delete schedule.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Schedule not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// --- Hiring Routes ---\n\n/**\r\n * POST /api/job-postings\r\n * Creates a new job posting.\r\n * Requires super_admin or location_admin role.\r\n */\napp.post('/api/job-postings', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body8 = req.body,\n    title = _req$body8.title,\n    description = _req$body8.description,\n    requirements = _req$body8.requirements,\n    location_id = _req$body8.location_id;\n  var _req$user11 = req.user,\n    companyId = _req$user11.companyId,\n    role = _req$user11.role,\n    currentUserLocationId = _req$user11.locationId;\n  var created_date = new Date().toISOString(); // Current date/time for creation\n\n  // Input Validation for Create Job Posting\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can create job postings.'\n    });\n  }\n  if (!title || typeof title !== 'string' || title.trim() === '') {\n    return res.status(400).json({\n      error: \"Job title is required and must be a non-empty string.\"\n    });\n  }\n  if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\n    // Line 1009\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  } else if (description !== undefined) {\n    clauses.push('description = ?');\n    updateParams.push(description);\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  } else if (requirements !== undefined) {\n    clauses.push('requirements = ?');\n    updateParams.push(requirements);\n  }\n  if (status !== undefined) {\n    clauses.push('status = ?');\n    updateParams.push(status);\n  }\n\n  // super_admin can change location_id. location_admin cannot change location_id or change to different location\n  if (location_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    } else if (role === 'location_admin') {\n      if (location_id !== currentUserLocationId && location_id !== null) {\n        // location_id can be null (company-wide)\n        return res.status(403).json({\n          error: 'Access Denied: Location admin cannot change job posting location to another location.'\n        });\n      }\n      // If location admin updates job posting, and it's their location, or setting to null, it's allowed\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    }\n  }\n  if (clauses.length === 0) {\n    return res.status(400).json({\n      error: 'No fields provided for update.'\n    });\n  }\n  updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\n  updateParams.push(id, companyId);\n\n  // Additional security for location_admin: ensure they only update their own location's postings\n  if (role === 'location_admin') {\n    updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\n    params.push(currentUserLocationId);\n  }\n  db.run(updateSql, updateParams, function (err) {\n    if (err) {\n      console.error(\"Database error updating job posting:\", err);\n      return next(new Error('Failed to update job posting.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Job posting not found or not authorized to update.'\n      });\n    }\n    res.status(200).json({\n      message: 'Job posting updated successfully!'\n    });\n  });\n});\n\n/**\r\n * GET /api/job-postings\r\n * Retrieves job postings.\r\n * Can filter by location_id and status.\r\n * Requires super_admin or location_admin.\r\n */\napp.get('/api/job-postings', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query3 = req.query,\n    status = _req$query3.status,\n    location_id = _req$query3.location_id;\n  var _req$user12 = req.user,\n    companyId = _req$user12.companyId,\n    role = _req$user12.role,\n    currentUserLocationId = _req$user12.locationId;\n  var sql = 'SELECT * FROM JobPostings WHERE company_id = ?';\n  var params = [companyId];\n\n  // Authorization: super_admin sees all, location_admin sees their location's postings\n  if (role === 'location_admin') {\n    if (currentUserLocationId) {\n      sql += ' AND (location_id = ? OR location_id IS NULL)'; // Location admin sees their location's postings or company-wide\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    // Employees generally shouldn't see job postings list via this admin API\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view job postings.'\n    });\n  }\n\n  // Input validation for query parameters\n  var allowedStatuses = ['Open', 'Closed', 'Filled']; // Assuming these are your valid statuses\n  if (status && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid job posting status filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (status) {\n    sql += ' AND status = ?';\n    params.push(status);\n  }\n  // Only super admin can filter by any location_id beyond their own scope\n  if (location_id && role === 'super_admin') {\n    sql += \" AND location_id = ?\";\n    params.push(location_id);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching job postings:\", err);\n      return next(new Error('Database error fetching job postings.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * PUT /api/job-postings/:id\r\n * Updates a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\napp.put('/api/job-postings/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$body9 = req.body,\n    title = _req$body9.title,\n    description = _req$body9.description,\n    requirements = _req$body9.requirements,\n    status = _req$body9.status,\n    location_id = _req$body9.location_id;\n  var _req$user13 = req.user,\n    companyId = _req$user13.companyId,\n    role = _req$user13.role,\n    currentUserLocationId = _req$user13.locationId;\n\n  // Input Validation for Job Posting Update\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can update job postings.'\n    });\n  }\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID provided.'\n    });\n  }\n  if (title !== undefined && (typeof title !== 'string' || title.trim() === '')) {\n    return res.status(400).json({\n      error: 'Job title must be a non-empty string if provided.'\n    });\n  }\n  if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  }\n  var allowedStatuses = ['Open', 'Closed', 'Filled'];\n  if (status !== undefined && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid status provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n  var updateSql = 'UPDATE JobPostings SET ';\n  var updateParams = [];\n  var clauses = [];\n  if (title !== undefined) {\n    clauses.push('title = ?');\n    updateParams.push(title);\n  }\n  // Line 1009 fix: Ensure this line and surrounding logic is correct.\n  if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\n    // Line 1009\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  } else if (description !== undefined) {\n    clauses.push('description = ?');\n    updateParams.push(description);\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  } else if (requirements !== undefined) {\n    clauses.push('requirements = ?');\n    updateParams.push(requirements);\n  }\n  if (status !== undefined) {\n    clauses.push('status = ?');\n    updateParams.push(status);\n  }\n\n  // super_admin can change location_id. location_admin cannot change location_id or change to different location\n  if (location_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    } else if (role === 'location_admin') {\n      if (location_id !== currentUserLocationId && location_id !== null) {\n        // location_id can be null (company-wide)\n        return res.status(403).json({\n          error: 'Access Denied: Location admin cannot change job posting location to another location.'\n        });\n      }\n      // If location admin updates job posting, and it's their location, or setting to null, it's allowed\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    }\n  }\n  if (clauses.length === 0) {\n    return res.status(400).json({\n      error: 'No fields provided for update.'\n    });\n  }\n  updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\n  updateParams.push(id, companyId);\n\n  // Additional security for location_admin: ensure they only update their own location's postings\n  if (role === 'location_admin') {\n    updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\n    params.push(currentUserLocationId);\n  }\n  db.run(updateSql, updateParams, function (err) {\n    if (err) {\n      console.error(\"Database error updating job posting:\", err);\n      return next(new Error('Failed to update job posting.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Job posting not found or not authorized to update.'\n      });\n    }\n    res.status(200).json({\n      message: 'Job posting updated successfully!'\n    });\n  });\n});\n\n/**\r\n * DELETE /api/job-postings/:id\r\n * Deletes a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\napp[\"delete\"]('/api/job-postings/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user14 = req.user,\n    companyId = _req$user14.companyId,\n    role = _req$user14.role,\n    currentUserLocationId = _req$user14.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID provided.'\n    });\n  }\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can delete job postings.'\n    });\n  }\n  var sql = 'DELETE FROM JobPostings WHERE job_posting_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Additional security for location_admin: ensure they only delete their own location's postings\n  if (role === 'location_admin') {\n    sql += ' AND (location_id = ? OR location_id IS NULL)';\n    params.push(currentUserLocationId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting job posting:\", err);\n      return next(new Error('Failed to delete job posting.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Job posting not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// Update Applicant API endpoints to use job_posting_id\napp.post('/api/applicants', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body0 = req.body,\n    job_posting_id = _req$body0.job_posting_id,\n    full_name = _req$body0.full_name,\n    email = _req$body0.email,\n    notes = _req$body0.notes,\n    location_id = _req$body0.location_id,\n    phone_number = _req$body0.phone_number; // Added phone_number\n  var _req$user15 = req.user,\n    companyId = _req$user15.companyId,\n    role = _req$user15.role,\n    currentUserLocationId = _req$user15.locationId;\n  var application_date = new Date().toISOString(); // Current date/time for application\n\n  // Input Validation for Adding Applicant\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can add applicants.'\n    });\n  }\n  if (typeof job_posting_id !== 'number' || job_posting_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid job posting ID is required.'\n    });\n  }\n  if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\n    return res.status(400).json({\n      error: \"Full name is required and must be a non-empty string.\"\n    });\n  }\n  if (!email || !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address is required.\"\n    });\n  }\n  // Basic phone number validation (simple check for non-empty string, could be more complex with regex)\n  if (!phone_number || typeof phone_number !== 'string' || phone_number.trim() === '') {\n    return res.status(400).json({\n      error: \"Phone number is required.\"\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n\n  // Verify job_posting_id belongs to the company, and for location_admin, to their location\n  db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], function (err, jobPosting) {\n    if (err) {\n      console.error(\"Database error verifying job posting:\", err);\n      return next(new Error('Database error when verifying job posting.'));\n    } // Pass error\n    if (!jobPosting) {\n      return res.status(400).json({\n        error: 'Job Posting not found or does not belong to your company.'\n      });\n    }\n\n    // Location admin can only add applicants to jobs in their assigned location or unassigned jobs\n    if (role === 'location_admin' && jobPosting.location_id !== currentUserLocationId && jobPosting.location_id !== null) {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin cannot add applicants to jobs outside their assigned location.'\n      });\n    }\n    db.run('INSERT INTO Applicants (company_id, location_id, job_posting_id, full_name, email, phone_number, notes, application_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)', [companyId, location_id || jobPosting.location_id, job_posting_id, full_name, email, phone_number, notes, application_date],\n    // Use location_id from payload or job posting\n    function (insertErr) {\n      if (insertErr) {\n        console.error(\"Database error creating applicant:\", insertErr);\n        return next(new Error('Failed to create applicant.'));\n      } // Pass error\n      res.status(201).json({\n        message: 'Applicant added successfully!',\n        applicantId: this.lastID\n      });\n    });\n  });\n});\napp.get('/api/applicants', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query4 = req.query,\n    job_posting_id = _req$query4.job_posting_id,\n    status = _req$query4.status,\n    location_id = _req$query4.location_id; // Added job_posting_id, status, location_id filters\n  var _req$user16 = req.user,\n    companyId = _req$user16.companyId,\n    role = _req$user16.role,\n    currentUserLocationId = _req$user16.locationId;\n  var sql = \"SELECT Applicants.*, JobPostings.title AS job_title_name\\n               FROM Applicants\\n               LEFT JOIN JobPostings ON Applicants.job_posting_id = JobPostings.job_posting_id\\n               WHERE Applicants.company_id = ?\";\n  var params = [companyId];\n\n  // Input validation for query parameters\n  var allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired']; // Define valid statuses\n  if (status && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid applicant status filter provided.'\n    });\n  }\n  if (job_posting_id && isNaN(parseInt(job_posting_id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (status) {\n    sql += \" AND Applicants.status = ?\";\n    params.push(status);\n  }\n  if (role === 'location_admin') {\n    if (currentUserLocationId) {\n      sql += \" AND (Applicants.location_id = ? OR Applicants.location_id IS NULL)\"; // Location admin sees applicants for their location or unassigned\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Applicants.user_id = ?\";\n    params.push(currentUserId);\n  } else {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view applicants.'\n    });\n  }\n\n  // Apply job_posting_id filter if provided\n  if (job_posting_id) {\n    sql += \" AND Applicants.job_posting_id = ?\";\n    params.push(job_posting_id);\n  }\n  // Apply location filter from query params for super_admin\n  if (location_id && role === 'super_admin') {\n    sql += \" AND Applicants.location_id = ?\";\n    params.push(location_id);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching applicants:\", err);\n      return next(new Error('Database error fetching applicants.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * PUT /api/applicants/:id\r\n * Updates an applicant's details (e.g., status, notes).\r\n */\napp.put('/api/applicants/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$body1 = req.body,\n    full_name = _req$body1.full_name,\n    email = _req$body1.email,\n    status = _req$body1.status,\n    resume_url = _req$body1.resume_url,\n    notes = _req$body1.notes,\n    location_id = _req$body1.location_id,\n    job_posting_id = _req$body1.job_posting_id,\n    phone_number = _req$body1.phone_number;\n  var _req$user17 = req.user,\n    companyId = _req$user17.companyId,\n    role = _req$user17.role,\n    currentUserLocationId = _req$user17.locationId;\n\n  // Input Validation for Applicant Update\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can update applicant records.'\n    });\n  }\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid applicant ID provided.'\n    });\n  }\n  if (full_name !== undefined && (typeof full_name !== 'string' || full_name.trim() === '')) {\n    return res.status(400).json({\n      error: \"Full name must be a non-empty string if provided.\"\n    });\n  }\n  if (email !== undefined && !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address must be provided if changing email.\"\n    });\n  }\n  if (phone_number !== undefined && (typeof phone_number !== 'string' || phone_number.trim() === '')) {\n    return res.status(400).json({\n      error: \"Phone number must be a non-empty string if provided.\"\n    });\n  }\n  var allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired'];\n  if (status !== undefined && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid status provided.'\n    });\n  }\n  if (resume_url !== undefined && typeof resume_url !== 'string') {\n    // Assuming resume_url is a string URL\n    return res.status(400).json({\n      error: 'Resume URL must be a string if provided.'\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n  if (job_posting_id !== undefined && typeof job_posting_id !== 'number' && job_posting_id !== null) {\n    return res.status(400).json({\n      error: 'Job posting ID must be a number or null if provided.'\n    });\n  }\n  var updateSql = 'UPDATE Applicants SET ';\n  var updateParams = [];\n  var clauses = [];\n  if (full_name !== undefined) {\n    clauses.push('full_name = ?');\n    updateParams.push(full_name);\n  }\n  if (email !== undefined) {\n    clauses.push('email = ?');\n    updateParams.push(email);\n  }\n  if (phone_number !== undefined) {\n    clauses.push('phone_number = ?');\n    updateParams.push(phone_number);\n  }\n  if (status !== undefined) {\n    clauses.push('status = ?');\n    updateParams.push(status);\n  }\n  if (resume_url !== undefined) {\n    clauses.push('resume_url = ?');\n    updateParams.push(resume_url);\n  }\n  if (notes !== undefined) {\n    clauses.push('notes = ?');\n    updateParams.push(notes);\n  }\n\n  // Admins can update location_id or job_posting_id, with restrictions for location_admin\n  if (location_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    } else if (role === 'location_admin') {\n      if (location_id !== currentUserLocationId && location_id !== null) {\n        // location_id can be null (company-wide)\n        return res.status(403).json({\n          error: 'Access Denied: Location admin cannot assign applicants to another location.'\n        });\n      }\n      // If location admin updates applicant location, and it's their location, or setting to null, it's allowed\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    }\n  }\n  if (job_posting_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('job_posting_id = ?');\n      updateParams.push(job_posting_id);\n    } else if (role === 'location_admin') {\n      // Verify new job_posting_id belongs to the location admin's assigned location or is company-wide\n      db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], function (err, job) {\n        if (err) {\n          console.error(\"DB error verifying job posting for update:\", err);\n          return next(new Error('Database error verifying job posting.'));\n        } // Pass error\n        if (!job) {\n          return res.status(400).json({\n            error: 'Job Posting not found or does not belong to your company.'\n          });\n        }\n        if (job.location_id !== null && job.location_id !== currentUserLocationId) {\n          return res.status(403).json({\n            error: 'Access Denied: Location admin cannot assign applicants to jobs outside their assigned location.'\n          });\n        }\n      });\n      clauses.push('job_posting_id = ?');\n      updateParams.push(job_posting_id);\n    }\n  }\n  if (clauses.length === 0) {\n    return res.status(400).json({\n      error: 'No fields provided for update.'\n    });\n  }\n  updateSql += clauses.join(', ') + ' WHERE applicant_id = ? AND company_id = ?';\n  updateParams.push(id, companyId);\n\n  // For location_admin, ensure they can only update applicants within their assigned location\n  if (role === 'location_admin') {\n    updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned applicants too\n    params.push(currentUserLocationId);\n  }\n  db.run(updateSql, updateParams, function (err) {\n    if (err) {\n      console.error(\"Database error updating applicant:\", err);\n      return next(new Error('Failed to update applicant.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Applicant not found or not authorized to update.'\n      });\n    }\n    res.status(200).json({\n      message: 'Applicant updated successfully!'\n    });\n  });\n});\n\n/**\r\n * DELETE /api/applicants/:id\r\n * Deletes an applicant.\r\n * Requires super_admin or location_admin (for their location's applicants).\r\n */\napp[\"delete\"]('/api/applicants/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user18 = req.user,\n    companyId = _req$user18.companyId,\n    role = _req$user18.role,\n    currentUserLocationId = _req$user18.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid applicant ID provided.'\n    });\n  }\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can delete applicants.'\n    });\n  }\n  var sql = 'DELETE FROM Applicants WHERE applicant_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Additional security for location_admin: ensure they only delete applicants in their own location\n  if (role === 'location_admin') {\n    sql += ' AND (location_id = ? OR location_id IS NULL)';\n    params.push(currentUserLocationId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting applicant:\", err);\n      return next(new Error('Failed to delete applicant.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Applicant not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// --- Document Management Routes ---\n\n/**\r\n * POST /api/documents\r\n * Uploads (saves metadata for) a new document.\r\n * Requires authenticated user.\r\n * Note: Actual file storage is assumed to be handled by a separate service (e.g., S3).\r\n * This endpoint only stores the metadata and a URL.\r\n */\napp.post('/api/documents', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body10 = req.body,\n    title = _req$body10.title,\n    file_name = _req$body10.file_name,\n    file_type = _req$body10.file_type,\n    file_url = _req$body10.file_url,\n    description = _req$body10.description;\n  var _req$user19 = req.user,\n    companyId = _req$user19.companyId,\n    userId = _req$user19.userId;\n  var upload_date = new Date().toISOString();\n\n  // Input Validation for Document Upload\n  if (!title || typeof title !== 'string' || title.trim() === '') {\n    return res.status(400).json({\n      error: 'Document title is required and must be a non-empty string.'\n    });\n  }\n  if (!file_name || typeof file_name !== 'string' || file_name.trim() === '') {\n    return res.status(400).json({\n      error: 'File name is required and must be a non-empty string.'\n    });\n  }\n  if (!file_type || typeof file_type !== 'string' || file_type.trim() === '') {\n    return res.status(400).json({\n      error: 'File type is required and must be a non-empty string.'\n    });\n  }\n  // Basic URL validation: checks for http(s) protocol and some content. Can be more robust.\n  var urlRegex = /^https?:\\/\\/[^\\s$.?#].[^\\s]*$/i;\n  if (!file_url || typeof file_url !== 'string' || !urlRegex.test(file_url)) {\n    return res.status(400).json({\n      error: 'A valid file URL (starting with http or https) is required.'\n    });\n  }\n  if (description !== undefined && typeof description !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  db.run('INSERT INTO Documents (company_id, user_id, title, file_name, file_type, file_url, description, upload_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)', [companyId, userId, title, file_name, file_type, file_url, description, upload_date], function (err) {\n    if (err) {\n      console.error(\"Database error uploading document:\", err);\n      return next(new Error('Failed to upload document metadata.')); // Pass error\n    }\n    res.status(201).json({\n      message: 'Document metadata saved successfully!',\n      documentId: this.lastID\n    });\n  });\n});\n\n/**\r\n * GET /api/documents\r\n * Retrieves a list of documents for the company.\r\n * Filters can be added (e.g., by uploader, by type).\r\n * Requires authenticated user. Super admins can see all, others can see own documents.\r\n */\napp.get('/api/documents', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user20 = req.user,\n    companyId = _req$user20.companyId,\n    userId = _req$user20.userId,\n    role = _req$user20.role;\n  var sql = 'SELECT * FROM Documents WHERE company_id = ?';\n  var params = [companyId];\n\n  // Non-super-admins only see their own documents\n  if (role !== 'super_admin') {\n    sql += ' AND user_id = ?';\n    params.push(userId);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching documents:\", err);\n      return next(new Error('Database error fetching documents.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * DELETE /api/documents/:id\r\n * Deletes a document record.\r\n * Requires super_admin or the user who uploaded it.\r\n */\napp[\"delete\"]('/api/documents/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user21 = req.user,\n    companyId = _req$user21.companyId,\n    userId = _req$user21.userId,\n    role = _req$user21.role;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid document ID provided.'\n    });\n  }\n  var sql = 'DELETE FROM Documents WHERE document_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Only super_admin or the original uploader can delete\n  if (role !== 'super_admin') {\n    sql += ' AND user_id = ?';\n    params.push(userId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting document:\", err);\n      return next(new Error('Failed to delete document.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Document not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// Fallback for any other GET request not handled by an API route (serves index.html for SPA behavior)\n// This should always be the LAST route in your Express app\napp.get(/'*'/, function (req, res) {\n  // Correctly serve the index.html from the parent directory\n  res.sendFile(path.join(__dirname, '..', 'index.html'));\n});\n\n// --- Global Error Handling Middleware ---\n// This should be the very last middleware in your Express app\napp.use(function (err, req, res, next) {\n  console.error(\"Unhandled Error: \".concat(err.stack)); // Log the full stack trace for debugging\n  // Respond with a generic error message for the client\n  res.status(500).json({\n    error: 'An unexpected server error occurred. Please try again later.'\n    // In development, you might send more details:\n    // message: err.message,\n    // stack: process.env.NODE_ENV === 'development' ? err.stack : undefined\n  });\n});\n\n// --- Server Start ---\n// This conditional export allows the app to be imported for testing\n// without starting the server listener when the test runner requires it.\nif (require.main === module) {\n  // Only listen if this file is run directly (not required as a module)\n  app.listen(PORT, function () {\n    console.log(\"Server is running successfully on http://localhost:\".concat(PORT));\n  });\n} else {\n  // Export the app for testing purposes\n  module.exports = app;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiX2ludm9rZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsImV4cHJlc3MiLCJyZXF1aXJlIiwic3FsaXRlMyIsInZlcmJvc2UiLCJiY3J5cHQiLCJqd3QiLCJjb3JzIiwicGF0aCIsImNzdiIsIl9yZXF1aXJlIiwiUmVhZGFibGUiLCJyYXRlTGltaXQiLCJtb3JnYW4iLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJtYWluIiwibW9kdWxlIiwiY29uZmlnIiwic3RyaXBlSW5zdGFuY2UiLCJTVFJJUEVfU0VDUkVUX0tFWSIsImFwcCIsImFsbG93ZWRPcmlnaW5zIiwiQ09SU19PUklHSU4iLCJzcGxpdCIsInB1c2giLCJjb3JzT3B0aW9ucyIsIm9yaWdpbiIsImNhbGxiYWNrIiwiaW5jbHVkZXMiLCJtc2ciLCJFcnJvciIsImluZGV4T2YiLCJtZXRob2RzIiwiY3JlZGVudGlhbHMiLCJvcHRpb25zU3VjY2Vzc1N0YXR1cyIsInVzZSIsIlBPUlQiLCJTVFJJUEVfV0VCSE9PS19TRUNSRVQiLCJhdXRoTGltaXRlciIsIndpbmRvd01zIiwibWF4IiwibWVzc2FnZSIsInN0YW5kYXJkSGVhZGVycyIsImxlZ2FjeUhlYWRlcnMiLCJwb3N0IiwicmF3IiwidHlwZSIsIl9yZWYiLCJfY2FsbGVlIiwicmVxIiwicmVzIiwic2lnIiwiZXZlbnQiLCJzZXNzaW9uIiwidXNlcklkIiwicGxhbklkIiwic3Vic2NyaXB0aW9uVXBkYXRlZCIsInN1YnNjcmlwdGlvbkRlbGV0ZWQiLCJpbnZvaWNlU3VjY2VlZGVkIiwiaW52b2ljZUZhaWxlZCIsIl90IiwiX3QyIiwiX2NvbnRleHQiLCJoZWFkZXJzIiwid2ViaG9va3MiLCJjb25zdHJ1Y3RFdmVudCIsImJvZHkiLCJjb25zb2xlIiwiZXJyb3IiLCJjb25jYXQiLCJzdGF0dXMiLCJzZW5kIiwiZGF0YSIsIm9iamVjdCIsImxvZyIsImlkIiwibWV0YWRhdGEiLCJwYXltZW50X3N0YXR1cyIsImRiIiwicnVuIiwiY3VzdG9tZXIiLCJzdWJzY3JpcHRpb24iLCJlcnIiLCJwbGFuIiwianNvbiIsInJlY2VpdmVkIiwiX3giLCJfeDIiLCJKV1RfU0VDUkVUIiwiam9pbiIsIl9fZGlybmFtZSIsIm1heEFnZSIsImltbXV0YWJsZSIsIkRhdGFiYXNlIiwiZXhpdCIsImdldCIsInNlcmlhbGl6ZSIsImF1dGhlbnRpY2F0ZVRva2VuIiwibmV4dCIsImF1dGhIZWFkZXIiLCJ0b2tlbiIsInZlcmlmeSIsInVzZXIiLCJpc1ZhbGlkRW1haWwiLCJlbWFpbCIsInRlc3QiLCJfcmVmMiIsIl9jYWxsZWUyIiwiX3JlcSRib2R5IiwiY29tcGFueV9uYW1lIiwiZnVsbF9uYW1lIiwicGFzc3dvcmQiLCJwYXNzd29yZF9oYXNoIiwiX3QzIiwiX2NvbnRleHQyIiwidHJpbSIsImhhc2giLCJuZXdDb21wYW55SWQiLCJsYXN0SUQiLCJ1c2VySW5zZXJ0RXJyIiwiX3gzIiwiX3g0IiwiX3g1IiwiX3JlcSRib2R5MiIsIl9yZWYzIiwiX2NhbGxlZTMiLCJpc01hdGNoIiwicGF5bG9hZCIsIl9jb250ZXh0MyIsImNvbXBhcmUiLCJ1c2VyX2lkIiwicm9sZSIsImZ1bGxOYW1lIiwiY29tcGFueUlkIiwiY29tcGFueV9pZCIsImxvY2F0aW9uSWQiLCJsb2NhdGlvbl9pZCIsInN1YnNjcmlwdGlvblN0YXR1cyIsInN1YnNjcmlwdGlvbl9zdGF0dXMiLCJwbGFuX2lkIiwic2lnbiIsImV4cGlyZXNJbiIsIl94NiIsIl94NyIsIl9yZWY0IiwiX2NhbGxlZTQiLCJfcmVxJGJvZHkzIiwiX3JlcSR1c2VyIiwiX3Q0IiwiX2NvbnRleHQ0IiwibG9jYXRpb24iLCJfeDgiLCJfeDkiLCJfeDAiLCJfcmVmNSIsIl9jYWxsZWU1IiwiX3JlcSRib2R5NCIsInBvc2l0aW9uIiwiZW1wbG95ZWVfaWQiLCJfcmVxJHVzZXIyIiwiY3VycmVudFVzZXJMb2NhdGlvbklkIiwiaXNMb2NhdGlvbklkVmFsaWQiLCJsb2NhdGlvblZlcmlmaWNhdGlvbiIsIl90NSIsIl9jb250ZXh0NSIsImlzTmFOIiwidW5kZWZpbmVkIiwicmVqZWN0IiwiX3gxIiwiX3gxMCIsIl94MTEiLCJfcmVxJHVzZXIzIiwicHV0IiwiX3JlZjYiLCJfY2FsbGVlNyIsIl9yZXEkYm9keTUiLCJjdXJyZW50UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsIl9jb250ZXh0NyIsIl9yZWY3IiwiX2NhbGxlZTYiLCJ1cGRhdGVTcWwiLCJ1cGRhdGVQYXJhbXMiLCJjbGF1c2VzIiwiY2hhbmdlc01hZGUiLCJleGlzdGluZ1VzZXIiLCJuZXdQYXNzd29yZEhhc2giLCJfdDYiLCJfY29udGV4dDYiLCJyb3ciLCJ1cGRhdGVFcnIiLCJjaGFuZ2VzIiwiZmV0Y2hFcnIiLCJ1cGRhdGVkVXNlciIsIm5ld1BheWxvYWQiLCJuZXdUb2tlbiIsIl94MTUiLCJfeDE2IiwiX3gxMiIsIl94MTMiLCJfeDE0IiwiX3JlcSR1c2VyNCIsInNxbCIsInBhcmFtcyIsImFsbCIsInJvd3MiLCJfcmVxJGJvZHk2IiwibG9jYXRpb25fbmFtZSIsImxvY2F0aW9uX2FkZHJlc3MiLCJfcmVxJHVzZXI1IiwiX3JlcSR1c2VyNiIsInBhcnNlSW50IiwiX3JlcSR1c2VyNyIsImN1cnJlbnRVc2VySWQiLCJfcmVxJHF1ZXJ5IiwicXVlcnkiLCJmaWx0ZXJSb2xlIiwiZmlsdGVyTG9jYXRpb25JZCIsImFsbG93ZWRSb2xlcyIsIl9yZXEkdXNlcjgiLCJhdXRoZW50aWNhdGVkVXNlcklkIiwiX3JlZjgiLCJfY2FsbGVlOCIsIl9yZXEkdXNlcjkiLCJhbGxvd2VkUGxhbklkcyIsInByaWNlSWRNYXAiLCJzdHJpcGVQcmljZUlkIiwiY3VzdG9tZXJJZCIsInVzZXJSZWNvcmQiLCJfdDciLCJfY29udGV4dDgiLCJTVFJJUEVfUFJJQ0VfSURfUFJPIiwiU1RSSVBFX1BSSUNFX0lEX0VOVCIsInN0cmlwZV9jdXN0b21lcl9pZCIsImN1c3RvbWVycyIsImNoZWNrb3V0Iiwic2Vzc2lvbnMiLCJtb2RlIiwibGluZV9pdGVtcyIsInByaWNlIiwicXVhbnRpdHkiLCJzdWNjZXNzX3VybCIsIkZST05URU5EX1VSTCIsImNhbmNlbF91cmwiLCJ1cmwiLCJfeDE3IiwiX3gxOCIsIl94MTkiLCJfcmVxJGJvZHk3Iiwic3RhcnRfdGltZSIsImVuZF90aW1lIiwibm90ZXMiLCJfcmVxJHVzZXIwIiwiRGF0ZSIsImdldFRpbWUiLCJlbXBsb3llZSIsImluc2VydEVyciIsInNjaGVkdWxlSWQiLCJfcmVxJHF1ZXJ5MiIsInN0YXJ0X2RhdGUiLCJlbmRfZGF0ZSIsIl9yZXEkdXNlcjEiLCJfcmVxJHVzZXIxMCIsIl9yZXEkYm9keTgiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicmVxdWlyZW1lbnRzIiwiX3JlcSR1c2VyMTEiLCJjcmVhdGVkX2RhdGUiLCJ0b0lTT1N0cmluZyIsIl9yZXEkcXVlcnkzIiwiX3JlcSR1c2VyMTIiLCJhbGxvd2VkU3RhdHVzZXMiLCJfcmVxJGJvZHk5IiwiX3JlcSR1c2VyMTMiLCJfcmVxJHVzZXIxNCIsIl9yZXEkYm9keTAiLCJqb2JfcG9zdGluZ19pZCIsInBob25lX251bWJlciIsIl9yZXEkdXNlcjE1IiwiYXBwbGljYXRpb25fZGF0ZSIsImpvYlBvc3RpbmciLCJhcHBsaWNhbnRJZCIsIl9yZXEkcXVlcnk0IiwiX3JlcSR1c2VyMTYiLCJfcmVxJGJvZHkxIiwicmVzdW1lX3VybCIsIl9yZXEkdXNlcjE3Iiwiam9iIiwiX3JlcSR1c2VyMTgiLCJfcmVxJGJvZHkxMCIsImZpbGVfbmFtZSIsImZpbGVfdHlwZSIsImZpbGVfdXJsIiwiX3JlcSR1c2VyMTkiLCJ1cGxvYWRfZGF0ZSIsInVybFJlZ2V4IiwiZG9jdW1lbnRJZCIsIl9yZXEkdXNlcjIwIiwiX3JlcSR1c2VyMjEiLCJzZW5kRmlsZSIsInN0YWNrIiwibGlzdGVuIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFx4YXJjeVxcT25lRHJpdmVcXERlc2t0b3BcXG9uYm9hcmRmbG93XFxiYWNrZW5kXFx0ZXN0XFwiLCJzb3VyY2VzIjpbImludGVncmF0aW9uLnRlc3QuY2pzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIC0tLSBJbXBvcnRzIC0tLVxyXG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCBzcWxpdGUzID0gcmVxdWlyZSgnc3FsaXRlMycpLnZlcmJvc2UoKTtcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKTtcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7IC8vIEltcG9ydCBjb3JzXHJcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XHJcbmNvbnN0IGNzdiA9IHJlcXVpcmUoJ2Nzdi1wYXJzZXInKTsgLy8gRm9yIENTViBwYXJzaW5nXHJcbmNvbnN0IHsgUmVhZGFibGUgfSA9IHJlcXVpcmUoJ3N0cmVhbScpOyAvLyBGb3IgY3JlYXRpbmcgYSByZWFkYWJsZSBzdHJlYW0gZnJvbSBhIHN0cmluZ1xyXG5jb25zdCByYXRlTGltaXQgPSByZXF1aXJlKCdleHByZXNzLXJhdGUtbGltaXQnKTsgLy8gSW1wb3J0IHJhdGUtbGltaXRpbmcgbWlkZGxld2FyZVxyXG5jb25zdCBtb3JnYW4gPSByZXF1aXJlKCdtb3JnYW4nKTsgLy8gSW1wb3J0IG1vcmdhbiBmb3IgcmVxdWVzdCBsb2dnaW5nXHJcblxyXG4vLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlcyBmcm9tIC5lbnYgZmlsZSBpbiBkZXZlbG9wbWVudFxyXG4vLyBJTVBPUlRBTlQ6IE9ubHkgbG9hZCAuZW52IGlmIHNlcnZlci5qcyBpcyBydW4gZGlyZWN0bHksIE5PVCB3aGVuIHJlcXVpcmVkIGJ5IHRlc3RzLlxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiByZXF1aXJlLm1haW4gPT09IG1vZHVsZSkge1xyXG4gICAgcmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XHJcbn1cclxuXHJcbi8vIEltcG9ydCB0aGUgU3RyaXBlIGxpYnJhcnkgYW5kIGluaXRpYWxpemUgaXQgd2l0aCB5b3VyIHNlY3JldCBrZXlcclxuLy8gQ1JVQ0lBTCBGT1IgVEVTVElORzogUmVtb3ZlIHRoZSBoYXJkY29kZWQgZmFsbGJhY2sgbGl2ZSBrZXkuXHJcbi8vIEVuc3VyZSBwcm9jZXNzLmVudi5TVFJJUEVfU0VDUkVUX0tFWSBpcyBzZXQgdG8gYSBURVNUIGtleSBmb3IgZGV2ZWxvcG1lbnQgYW5kIHRlc3RpbmcuXHJcbmNvbnN0IHN0cmlwZUluc3RhbmNlID0gcmVxdWlyZSgnc3RyaXBlJykocHJvY2Vzcy5lbnYuU1RSSVBFX1NFQ1JFVF9LRVkpOyBcclxuXHJcbi8vIC0tLSBBcHAgSW5pdGlhbGl6YXRpb24gLS0tXHJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcclxuXHJcbi8vIENvbmZpZ3VyZSBDT1JTIGZvciBwcm9kdWN0aW9uIGVudmlyb25tZW50XHJcbmNvbnN0IGFsbG93ZWRPcmlnaW5zID0gcHJvY2Vzcy5lbnYuQ09SU19PUklHSU4gPyBwcm9jZXNzLmVudi5DT1JTX09SSUdJTi5zcGxpdCgnLCcpIDogWydodHRwOi8vbG9jYWxob3N0OjgwMDAnXTsgLy8gRGVmYXVsdCB0byBsb2NhbGhvc3QgZm9yIGRldmVsb3BtZW50XHJcblxyXG4vLyBBZGQgJ251bGwnIHRvIGFsbG93ZWQgb3JpZ2lucyBpZiBub3QgaW4gcHJvZHVjdGlvbiBhbmQgbm90IGV4cGxpY2l0bHkgc2V0IGZvciBsb2NhbCBmaWxlIGFjY2Vzc1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhcHJvY2Vzcy5lbnYuQ09SU19PUklHSU4pIHtcclxuICAgIGFsbG93ZWRPcmlnaW5zLnB1c2goJ251bGwnKTtcclxufVxyXG5cclxuY29uc3QgY29yc09wdGlvbnMgPSB7XHJcbiAgICBvcmlnaW46IGZ1bmN0aW9uIChvcmlnaW4sIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgLy8gQWxsb3cgcmVxdWVzdHMgd2l0aCBubyBvcmlnaW4gKGxpa2UgbW9iaWxlIGFwcHMsIGN1cmwsIG9yIGxvY2FsIGZpbGUgYWNjZXNzIGlmICdudWxsJyBpcyBpbiBhbGxvd2VkT3JpZ2lucylcclxuICAgICAgICBpZiAoIW9yaWdpbikge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiAnbnVsbCcgaXMgZXhwbGljaXRseSBhbGxvd2VkIG9yIGlmIHdlJ3JlIGluIGRldiBhbmQgbm8gQ09SU19PUklHSU4gaXMgc2V0XHJcbiAgICAgICAgICAgIGlmIChhbGxvd2VkT3JpZ2lucy5pbmNsdWRlcygnbnVsbCcpIHx8IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFwcm9jZXNzLmVudi5DT1JTX09SSUdJTikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBtc2cgPSAnVGhlIENPUlMgcG9saWN5IGZvciB0aGlzIHNpdGUgZG9lcyBub3QgYWxsb3cgYWNjZXNzIGZyb20gdGhlIHNwZWNpZmllZCBPcmlnaW4uJztcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcihtc2cpLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYWxsb3dlZE9yaWdpbnMuaW5kZXhPZihvcmlnaW4pID09PSAtMSkge1xyXG4gICAgICAgICAgICBjb25zdCBtc2cgPSAnVGhlIENPUlMgcG9saWN5IGZvciB0aGlzIHNpdGUgZG9lcyBub3QgYWxsb3cgYWNjZXNzIGZyb20gdGhlIHNwZWNpZmllZCBPcmlnaW4uJztcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcihtc2cpLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCB0cnVlKTtcclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiAnR0VULEhFQUQsUFVULFBBVENILFBPU1QsREVMRVRFJyxcclxuICAgIGNyZWRlbnRpYWxzOiB0cnVlLCAvLyBBbGxvdyBjb29raWVzIHRvIGJlIHNlbnRcclxuICAgIG9wdGlvbnNTdWNjZXNzU3RhdHVzOiAyMDQgLy8gU29tZSBsZWdhY3kgYnJvd3NlcnMgKElFMTEsIHZhcmlvdXMgU21hcnRUVnMpIGNob2tlIG9uIDIwNFxyXG59O1xyXG5hcHAudXNlKGNvcnMoY29yc09wdGlvbnMpKTtcclxuXHJcblxyXG4vLyBVc2UgcHJvY2Vzcy5lbnYuUE9SVCBmb3IgcHJvZHVjdGlvbiwgZmFsbGJhY2sgdG8gMzAwMCBmb3IgbG9jYWwgZGV2ZWxvcG1lbnRcclxuY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMDtcclxuXHJcbi8vIERlZmluZSBhIHdlYmhvb2sgc2VjcmV0IGZvciBTdHJpcGUuIFRoaXMgc2hvdWxkIGFsc28gYmUgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUuXHJcbmNvbnN0IFNUUklQRV9XRUJIT09LX1NFQ1JFVCA9IHByb2Nlc3MuZW52LlNUUklQRV9XRUJIT09LX1NFQ1JFVCB8fCAnd2hzZWNfWU9VUl9XRUJIT09LX1NFQ1JFVCc7XHJcblxyXG4vLyAtLS0gUmF0ZSBMaW1pdGluZyBDb25maWd1cmF0aW9uIC0tLVxyXG5jb25zdCBhdXRoTGltaXRlciA9IHJhdGVMaW1pdCh7XHJcbiAgICB3aW5kb3dNczogMTUgKiA2MCAqIDEwMDAsIC8vIDE1IG1pbnV0ZXNcclxuICAgIG1heDogMTAsIC8vIE1heCAxMCByZXF1ZXN0cyBwZXIgMTUgbWludXRlcyBwZXIgSVBcclxuICAgIG1lc3NhZ2U6ICdUb28gbWFueSBsb2dpbi9yZWdpc3RyYXRpb24gYXR0ZW1wdHMgZnJvbSB0aGlzIElQLCBwbGVhc2UgdHJ5IGFnYWluIGFmdGVyIDE1IG1pbnV0ZXMnLFxyXG4gICAgc3RhbmRhcmRIZWFkZXJzOiB0cnVlLCAvLyBSZXR1cm4gcmF0ZSBsaW1pdCBpbmZvIGluIHRoZSBgUmF0ZUxpbWl0LSpgIGhlYWRlcnNcclxuICAgIGxlZ2FjeUhlYWRlcnM6IGZhbHNlLCAvLyBEaXNhYmxlIHRoZSBgWC1SYXRlTGltaXQtKmAgaGVhZGVyc1xyXG59KTtcclxuXHJcbi8vIC0tLSBNaWRkbGV3YXJlIGZvciBTdHJpcGUgV2ViaG9vayAoTVVTVCBiZSBiZWZvcmUgZXhwcmVzcy5qc29uKCkgZm9yIG90aGVyIHJvdXRlcykgLS1cclxuLy8gVGhpcyByb3V0ZSBuZWVkcyB0aGUgcmF3IGJvZHkgZm9yIHNpZ25hdHVyZSB2ZXJpZmljYXRpb24uXHJcbmFwcC5wb3N0KCcvYXBpL3N0cmlwZS13ZWJob29rJywgZXhwcmVzcy5yYXcoe3R5cGU6ICdhcHBsaWNhdGlvbi9qc29uJ30pLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHNpZyA9IHJlcS5oZWFkZXJzWydzdHJpcGUtc2lnbmF0dXJlJ107XHJcblxyXG4gICAgbGV0IGV2ZW50O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgZXZlbnQgPSBzdHJpcGVJbnN0YW5jZS53ZWJob29rcy5jb25zdHJ1Y3RFdmVudChyZXEuYm9keSwgc2lnLCBTVFJJUEVfV0VCSE9PS19TRUNSRVQpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgV2ViaG9vayBFcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoYFdlYmhvb2sgRXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGFuZGxlIHRoZSBldmVudFxyXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XHJcbiAgICAgICAgY2FzZSAnY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQnOlxyXG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gZXZlbnQuZGF0YS5vYmplY3Q7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDaGVja291dCBTZXNzaW9uIENvbXBsZXRlZDonLCBzZXNzaW9uLmlkKTtcclxuICAgICAgICAgICAgY29uc3QgdXNlcklkID0gc2Vzc2lvbi5tZXRhZGF0YS51c2VySWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYW5JZCA9IHNlc3Npb24ubWV0YWRhdGEucGxhbklkO1xyXG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5wYXltZW50X3N0YXR1cyA9PT0gJ3BhaWQnICYmIHVzZXJJZCAmJiBwbGFuSWQpIHtcclxuICAgICAgICAgICAgICAgIGRiLnJ1bihcclxuICAgICAgICAgICAgICAgICAgICAnVVBEQVRFIFVzZXJzIFNFVCBzdHJpcGVfY3VzdG9tZXJfaWQgPSA/LCBzdHJpcGVfc3Vic2NyaXB0aW9uX2lkID0gPywgc3Vic2NyaXB0aW9uX3N0YXR1cyA9ID8sIHBsYW5faWQgPSA/IFdIRVJFIHVzZXJfaWQgPSA/JyxcclxuICAgICAgICAgICAgICAgICAgICBbc2Vzc2lvbi5jdXN0b21lciwgc2Vzc2lvbi5zdWJzY3JpcHRpb24sICdhY3RpdmUnLCBwbGFuSWQsIHVzZXJJZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIHVwZGF0ZSBlcnJvciBmb3IgY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQ6JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGNvbnNvbGUubG9nKGBVc2VyICR7dXNlcklkfSBzdWJzY3JpcHRpb24gdXBkYXRlZCB0byAke3BsYW5JZH0gKGFjdGl2ZSkuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdjdXN0b21lci5zdWJzY3JpcHRpb24udXBkYXRlZCc6XHJcbiAgICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvblVwZGF0ZWQgPSBldmVudC5kYXRhLm9iamVjdDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1YnNjcmlwdGlvbiBVcGRhdGVkOicsIHN1YnNjcmlwdGlvblVwZGF0ZWQuaWQpO1xyXG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uVXBkYXRlZC5jdXN0b21lciAmJiBzdWJzY3JpcHRpb25VcGRhdGVkLnN0YXR1cyAmJiBzdWJzY3JpcHRpb25VcGRhdGVkLnBsYW4gJiYgc3Vic2NyaXB0aW9uVXBkYXRlZC5wbGFuLmlkKSB7XHJcbiAgICAgICAgICAgICAgICBkYi5ydW4oXHJcbiAgICAgICAgICAgICAgICAgICAgJ1VQREFURSBVc2VycyBTRVQgc3Vic2NyaXB0aW9uX3N0YXR1cyA9ID8sIHBsYW5faWQgPSA/IFdIRVJFIHN0cmlwZV9jdXN0b21lcl9pZCA9ID8nLFxyXG4gICAgICAgICAgICAgICAgICAgIFtzdWJzY3JpcHRpb25VcGRhdGVkLnN0YXR1cywgc3Vic2NyaXB0aW9uVXBkYXRlZC5wbGFuLmlkLCBzdWJzY3JpcHRpb25VcGRhdGVkLmN1c3RvbWVyXSxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgY29uc29sZS5lcnJvcignRGF0YWJhc2UgdXBkYXRlIGVycm9yIGZvciBjdXN0b21lci5zdWJzY3JpcHRpb24udXBkYXRlZDonLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgY29uc29sZS5sb2coYFN1YnNjcmlwdGlvbiBmb3IgY3VzdG9tZXIgJHtzdWJzY3JpcHRpb25VcGRhdGVkLmN1c3RvbWVyfSBzdGF0dXMgdXBkYXRlZCB0byAke3N1YnNjcmlwdGlvblVwZGF0ZWQuc3RhdHVzfSBhbmQgcGxhbiB0byAke3N1YnNjcmlwdGlvblVwZGF0ZWQucGxhbi5pZH0uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdjdXN0b21lci5zdWJzY3JpcHRpb24uZGVsZXRlZCc6XHJcbiAgICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbkRlbGV0ZWQgPSBldmVudC5kYXRhLm9iamVjdDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1YnNjcmlwdGlvbiBEZWxldGVkOicsIHN1YnNjcmlwdGlvbkRlbGV0ZWQuaWQpO1xyXG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uRGVsZXRlZC5jdXN0b21lcikge1xyXG4gICAgICAgICAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAgICAgICAgICdVUERBVEUgVXNlcnMgU0VUIHN1YnNjcmlwdGlvbl9zdGF0dXMgPSA/LCBwbGFuX2lkID0gPywgc3RyaXBlX3N1YnNjcmlwdGlvbl9pZCA9IE5VTEwgV0hFUkUgc3RyaXBlX2N1c3RvbWVyX2lkID0gPycsXHJcbiAgICAgICAgICAgICAgICAgICAgWydjYW5jZWxsZWQnLCAnZnJlZScsIHN1YnNjcmlwdGlvbkRlbGV0ZWQuY3VzdG9tZXJdLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSB1cGRhdGUgZXJyb3IgZm9yIGN1c3RvbWVyLnN1YnNjcmlwdGlvbi5kZWxldGVkOicsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBjb25zb2xlLmxvZyhgU3Vic2NyaXB0aW9uIGZvciBjdXN0b21lciAke3N1YnNjcmlwdGlvbkRlbGV0ZWQuY3VzdG9tZXJ9IG1hcmtlZCBhcyBjYW5jZWxsZWQgYW5kIHJldmVydGVkIHRvIGZyZWUuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkJzpcclxuICAgICAgICAgICAgY29uc3QgaW52b2ljZVN1Y2NlZWRlZCA9IGV2ZW50LmRhdGEub2JqZWN0O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSW52b2ljZSBQYXltZW50IFN1Y2NlZWRlZDonLCBpbnZvaWNlU3VjY2VlZGVkLmlkKTtcclxuICAgICAgICAgICAgaWYgKGludm9pY2VTdWNjZWVkZWQuc3Vic2NyaXB0aW9uICYmIGludm9pY2VTdWNjZWVkZWQuY3VzdG9tZXIpIHtcclxuICAgICAgICAgICAgICAgIGRiLnJ1bihcclxuICAgICAgICAgICAgICAgICAgICAnVVBEQVRFIFVzZXJzIFNFVCBzdWJzY3JpcHRpb25fc3RhdHVzID0gPyBXSEVSRSBzdHJpcGVfc3Vic2NyaXB0aW9uX2lkID0gPyBBTkQgc3RyaXBlX2N1c3RvbWVyX2lkID0gPycsXHJcbiAgICAgICAgICAgICAgICAgICAgWydhY3RpdmUnLCBpbnZvaWNlU3VjY2VlZGVkLnN1YnNjcmlwdGlvbiwgaW52b2ljZVN1Y2NlZWRlZC5jdXN0b21lcl0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIHVwZGF0ZSBlcnJvciBmb3IgaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZDonLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgY29uc29sZS5sb2coYFN1YnNjcmlwdGlvbiAke2ludm9pY2VTdWNjZWVkZWQuc3Vic2NyaXB0aW9ufSBzdGF0dXMgc2V0IHRvIGFjdGl2ZS5gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2ludm9pY2UucGF5bWVudF9mYWlsZWQnOlxyXG4gICAgICAgICAgICBjb25zdCBpbnZvaWNlRmFpbGVkID0gZXZlbnQuZGF0YS5vYmplY3Q7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbnZvaWNlIFBheW1lbnQgRmFpbGVkOicsIGludm9pY2VGYWlsZWQuaWQpO1xyXG4gICAgICAgICAgICBpZiAoaW52b2ljZUZhaWxlZC5zdWJzY3JpcHRpb24gJiYgaW52b2ljZUZhaWxlZC5jdXN0b21lcikge1xyXG4gICAgICAgICAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAgICAgICAgICdVUERBVEUgVXNlcnMgU0VUIHN1YnNjcmlwdGlvbl9zdGF0dXMgPSA/IFdIRVJFIHN0cmlwZV9zdWJzY3JpcHRpb25faWQgPSA/IEFORCBzdHJpcGVfY3VzdG9tZXJfaWQgPSA/JyxcclxuICAgICAgICAgICAgICAgICAgICBbJ3Bhc3RfZHVlJywgaW52b2ljZUZhaWxlZC5zdWJzY3JpcHRpb24sIGludm9pY2VGYWlsZWQuY3VzdG9tZXJdLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSB1cGRhdGUgZXJyb3IgZm9yIGludm9pY2UucGF5bWVudF9mYWlsZWQ6JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGNvbnNvbGUubG9nKGBTdWJzY3JpcHRpb24gJHtpbnZvaWNlRmFpbGVkLnN1YnNjcmlwdGlvbn0gc3RhdHVzIHNldCB0byBwYXN0X2R1ZS5gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBVbmhhbmRsZWQgZXZlbnQgdHlwZSAke2V2ZW50LnR5cGV9YCk7XHJcbiAgICB9XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHJlY2VpdmVkOiB0cnVlIH0pO1xyXG59KTtcclxuXHJcbi8vIElNUE9SVEFOVDogZXhwcmVzcy5qc29uKCkgZm9yIHBhcnNpbmcgSlNPTiByZXF1ZXN0IGJvZGllcyBNVVNUIGNvbWUgQUZURVIgdGhlIHdlYmhvb2sgcm91dGVcclxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XHJcblxyXG4vLyAtLS0gSldUIFNlY3JldCAtLS1cclxuLy8gQ1JVQ0lBTCBGT1IgVEVTVElORzogUmVtb3ZlIHRoZSBmYWxsYmFjayB2YWx1ZSBzbyBpdCBNVVNUIGNvbWUgZnJvbSBwcm9jZXNzLmVudiBmb3IgdGVzdHMuXHJcbmNvbnN0IEpXVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUOyBcclxuXHJcbi8vIC0tLSBSZXF1ZXN0IExvZ2dpbmcgKHVzaW5nIE1vcmdhbikgLS0tXHJcbi8vICdkZXYnIGZvcm1hdCBpcyBnb29kIGZvciBkZXZlbG9wbWVudCwgJ2NvbWJpbmVkJyBvciAndGlueScgZm9yIHByb2R1Y3Rpb24gbG9nc1xyXG5hcHAudXNlKG1vcmdhbignZGV2JykpO1xyXG5cclxuLy8gLS0tIFNlcnZlIFN0YXRpYyBGaWxlcyAoRnJvbnRlbmQpIHdpdGggQ2FjaGluZyAtLS1cclxuLy8gVGhpcyBtaWRkbGV3YXJlIHNlcnZlcyBzdGF0aWMgZmlsZXMgZnJvbSB0aGUgJ29uYm9hcmRmbG93JyByb290IGRpcmVjdG9yeVxyXG4vLyBhbmQgc2V0cyBDYWNoZS1Db250cm9sIGhlYWRlcnMgZm9yIGJyb3dzZXIgY2FjaGluZy5cclxuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4nKSwge1xyXG4gICAgbWF4QWdlOiAnN2QnLCAvLyBDYWNoZSBzdGF0aWMgYXNzZXRzIGZvciA3IGRheXMgKGUuZy4sIENTUywgSlMsIGltYWdlcywgZmF2aWNvbilcclxuICAgIGltbXV0YWJsZTogZmFsc2UgLy8gU2V0IHRvIHRydWUgaWYgYXNzZXQgZmlsZW5hbWVzIGluY2x1ZGUgY29udGVudCBoYXNoZXMgKGUuZy4sIGFwcC5taW4uanM/dj1oYXNoKVxyXG59KSk7XHJcblxyXG4vLyAtLS0gRGF0YWJhc2UgU2V0dXAgLS0tXHJcbmNvbnN0IGRiID0gbmV3IHNxbGl0ZTMuRGF0YWJhc2UoJy4vb25ib2FyZGZsb3cuZGInLCAoZXJyKSA9PiB7XHJcbiAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgLy8gTG9nIGRhdGFiYXNlIGNvbm5lY3Rpb24gZXJyb3IgYW5kIGV4aXRcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igb3BlbmluZyBkYXRhYmFzZTpcIiwgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTsgLy8gRXhpdCBwcm9jZXNzIGlmIGRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbHNcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIHRoZSBkYXRhYmFzZS5cIik7XHJcbiAgICAgICAgZGIuZ2V0KFwiUFJBR01BIGZvcmVpZ25fa2V5cyA9IE9OXCIpO1xyXG4gICAgICAgIGRiLnNlcmlhbGl6ZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGRiLnJ1bihgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgQ29tcGFuaWVzIChjb21wYW55X2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCwgY29tcGFueV9uYW1lIFRFWFQgTk9UIE5VTEwgVU5JUVVFKWApO1xyXG4gICAgICAgICAgICBkYi5ydW4oYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIExvY2F0aW9ucyAobG9jYXRpb25faWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULCBjb21wYW55X2lkIElOVEVHRVIsIGxvY2F0aW9uX25hbWUgVEVYVCBOT1QgTlVMTCwgbG9jYXRpb25fYWRkcmVzcyBURVhUIE5PVCBOVUxMLCBGT1JFSUdOIEtFWSAoY29tcGFueV9pZCkgUkVGRVJFTkNFUyBDb21wYW5pZXMoY29tcGFueV9pZCkgT04gREVMRVRFIENBU0NBREUpYCk7XHJcbiAgICAgICAgICAgIGRiLnJ1bihgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgVXNlcnMgKFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXHJcbiAgICAgICAgICAgICAgICBjb21wYW55X2lkIElOVEVHRVIsXHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbl9pZCBJTlRFR0VSLFxyXG4gICAgICAgICAgICAgICAgZnVsbF9uYW1lIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBlbWFpbCBURVhUIE5PVCBOVUxMIFVOSVFVRSxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkX2hhc2ggVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBlbXBsb3llZV9pZCBURVhULFxyXG4gICAgICAgICAgICAgICAgcm9sZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgc3RyaXBlX2N1c3RvbWVyX2lkIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBzdHJpcGVfc3Vic2NyaXB0aW9uX2lkIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25fc3RhdHVzIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBwbGFuX2lkIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAoY29tcGFueV9pZCkgUkVGRVJFTkNFUyBDb21wYW5pZXMoY29tcGFueV9pZCkgT04gREVMRVRFIENBU0NBREUsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAobG9jYXRpb25faWQpIFJFRkVSRU5DRVMgTG9jYXRpb25zKGxvY2F0aW9uX2lkKSBPTiBERUxFVEUgQ0FTQ0FERVxyXG4gICAgICAgICAgICApYCk7XHJcbiAgICAgICAgICAgIGRiLnJ1bihgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgU2NoZWR1bGVzIChcclxuICAgICAgICAgICAgICAgIHNjaGVkdWxlX2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcclxuICAgICAgICAgICAgICAgIGVtcGxveWVlX2lkIElOVEVHRVIgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbl9pZCBJTlRFR0VSIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRfdGltZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgZW5kX3RpbWUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIG5vdGVzIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAoZW1wbG95ZWVfaWQpIFJFRkVSRU5DRVMgVXNlcnModXNlcl9pZCkgT04gREVMRVRFIENBU0NBREUsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAobG9jYXRpb25faWQpIFJFRkVSRU5DRVMgTG9jYXRpb25zKGxvY2F0aW9uX2lkKSBPTiBERUxFVEUgQ0FTQ0FERVxyXG4gICAgICAgICAgICApYCk7XHJcbiAgICAgICAgICAgIC8vIE5FVzogQ3JlYXRlIEpvYlBvc3RpbmdzIHRhYmxlXHJcbiAgICAgICAgICAgIGRiLnJ1bihgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgSm9iUG9zdGluZ3MgKFxyXG4gICAgICAgICAgICAgICAgam9iX3Bvc3RpbmdfaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxyXG4gICAgICAgICAgICAgICAgY29tcGFueV9pZCBJTlRFR0VSIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25faWQgSU5URUdFUiwgLS0gT3B0aW9uYWw6IGxpbmsgam9iIHBvc3RpbmcgdG8gYSBzcGVjaWZpYyBsb2NhdGlvblxyXG4gICAgICAgICAgICAgICAgdGl0bGUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICByZXF1aXJlbWVudHMgVEVYVCwgLS0gT3B0aW9uYWw6IGpvYiByZXF1aXJlbWVudHNcclxuICAgICAgICAgICAgICAgIHN0YXR1cyBURVhUIE5PVCBOVUxMIERFRkFVTFQgJ09wZW4nLCAtLSBlLmcuLCAnT3BlbicsICdDbG9zZWQnLCAnRmlsbGVkJ1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9kYXRlIFRFWFQgTk9UIE5VTEwsIC0tIElTTyA4NjAxIGZvcm1hdFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGNvbXBhbnlfaWQpIFJFRkVSRU5DRVMgQ29tcGFuaWVzKGNvbXBhbnlfaWQpIE9OIERFTEVURSBDQVNDQURFLFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGxvY2F0aW9uX2lkKSBSRUZFUkVOQ0VTIExvY2F0aW9ucyhsb2NhdGlvbl9pZCkgT04gREVMRVRFIENBU0NBREVcclxuICAgICAgICAgICAgKWApO1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgQXBwbGljYW50cyB0YWJsZSBzY2hlbWEgdG8gbGluayB0byBKb2JQb3N0aW5ncyBhbmQgYWRkIHBob25lX251bWJlclxyXG4gICAgICAgICAgICBkYi5ydW4oYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIEFwcGxpY2FudHMgKFxyXG4gICAgICAgICAgICAgICAgYXBwbGljYW50X2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcclxuICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQgSU5URUdFUiBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkIElOVEVHRVIsIC0tIE9wdGlvbmFsOiBhcHBsaWNhbnQncyBwcmVmZXJyZWQgbG9jYXRpb24gb3IgbG9jYXRpb24gYXBwbGllZCBmb3JcclxuICAgICAgICAgICAgICAgIGpvYl9wb3N0aW5nX2lkIElOVEVHRVIsIC0tIE5FVzogTGluayB0byBKb2JQb3N0aW5ncyB0YWJsZVxyXG4gICAgICAgICAgICAgICAgZnVsbF9uYW1lIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBlbWFpbCBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgcGhvbmVfbnVtYmVyIFRFWFQsIC0tIE5FVzogUGhvbmUgbnVtYmVyIGZpZWxkXHJcbiAgICAgICAgICAgICAgICBzdGF0dXMgVEVYVCBOT1QgTlVMTCBERUZBVUxUICdBcHBsaWVkJywgLS0gZS5nLiwgJ0FwcGxpZWQnLCAnSW50ZXJ2aWV3aW5nJywgJ1JlamVjdGVkJywgJ0hpcmVkJ1xyXG4gICAgICAgICAgICAgICAgcmVzdW1lX3VybCBURVhULCAtLSBPcHRpb25hbDogVVJMIHRvIGEgcmVzdW1lIGRvY3VtZW50IChlLmcuLCBob3N0ZWQgb24gY2xvdWQgc3RvcmFnZSlcclxuICAgICAgICAgICAgICAgIG5vdGVzIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbl9kYXRlIFRFWFQgTk9UIE5VTEwsIC0tIElTTyA4NjAxIGZvcm1hdFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGNvbXBhbnlfaWQpIFJFRkVSRU5DRVMgQ29tcGFuaWVzKGNvbXBhbnlfaWQpIE9OIERFTEVURSBDQVNDQURFLFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGxvY2F0aW9uX2lkKSBSRUZFUkVOQ0VTIExvY2F0aW9ucyhsb2NhdGlvbl9pZCkgT04gREVMRVRFIENBU0NBREUsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAoam9iX3Bvc3RpbmdfaWQpIFJFRkVSRU5DRVMgSm9iUG9zdGluZ3Moam9iX3Bvc3RpbmdfaWQpIE9OIERFTEVURSBTRVQgTlVMTCAtLSBJZiBqb2IgcG9zdGluZyBpcyBkZWxldGVkLCBzZXQgdGhpcyB0byBOVUxMXHJcbiAgICAgICAgICAgIClgKTtcclxuICAgICAgICAgICAgLy8gTkVXOiBDcmVhdGUgRG9jdW1lbnRzIHRhYmxlIGZvciBmaWxlL3ZpZGVvIHVwbG9hZHNcclxuICAgICAgICAgICAgZGIucnVuKGBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBEb2N1bWVudHMgKFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRfaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxyXG4gICAgICAgICAgICAgICAgY29tcGFueV9pZCBJTlRFR0VSIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZCBJTlRFR0VSIE5PVCBOVUxMLCAtLSBVc2VyIHdobyB1cGxvYWRlZCB0aGUgZG9jdW1lbnRcclxuICAgICAgICAgICAgICAgIHRpdGxlIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBmaWxlX25hbWUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGZpbGVfdHlwZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgZmlsZV91cmwgVEVYVCBOT1QgTlVMTCwgLS0gVVJMIHRvIHRoZSBzdG9yZWQgZmlsZSAoZS5nLiwgUzMsIEdDUylcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uIFRFWFQsXHJcbiAgICAgICAgICAgICAgICB1cGxvYWRfZGF0ZSBURVhUIE5PVCBOVUxMLCAtLSBJU08gODYwMSBmb3JtYXRcclxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZIChjb21wYW55X2lkKSBSRUZFUkVOQ0VTIENvbXBhbmllcyhjb21wYW55X2lkKSBPTiBERUxFVEUgQ0FTQ0FERSxcclxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZICh1c2VyX2lkKSBSRUZFUkVOQ0VTIFVzZXJzKHVzZXJfaWQpIE9OIERFTEVURSBDQVNDQURFXHJcbiAgICAgICAgICAgIClgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG4vLyAtLS0gQXV0aGVudGljYXRpb24gTWlkZGxld2FyZSAtLS1cclxuZnVuY3Rpb24gYXV0aGVudGljYXRlVG9rZW4ocmVxLCByZXMsIG5leHQpIHtcclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddO1xyXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyICYmIGF1dGhIZWFkZXIuc3BsaXQoJyAnKVsxXTtcclxuICAgIGlmICh0b2tlbiA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQ6IE5vIHRva2VuIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVULCAoZXJyLCB1c2VyKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAvLyBMb2cgdGhlIHNwZWNpZmljIEpXVCBlcnJvciBmb3IgZGVidWdnaW5nXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJKV1QgVmVyaWZpY2F0aW9uIEVycm9yOlwiLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnRm9yYmlkZGVuOiBJbnZhbGlkIG9yIGV4cGlyZWQgdG9rZW4uJyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVxLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIG5leHQoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyAtLS0gSGVscGVyIGZvciBJbnB1dCBWYWxpZGF0aW9uIC0tLVxyXG5jb25zdCBpc1ZhbGlkRW1haWwgPSAoZW1haWwpID0+IHtcclxuICAgIHJldHVybiAvXlteXFxzQF0rQFteXFxzQF0rXFwuW15cXHNAXSskLy50ZXN0KGVtYWlsKTtcclxufTtcclxuXHJcbi8vIC0tLSBBUEkgUm91dGVzIChBTEwgQVBJIFJPVVRFUyBTSE9VTEQgQkUgREVGSU5FRCBIRVJFLCBCRUZPUkUgU1RBVElDIEZJTEUgU0VSVklORykgLS0tXHJcblxyXG4vLyBBcHBseSByYXRlIGxpbWl0aW5nIHRvIGF1dGhlbnRpY2F0aW9uIHJvdXRlc1xyXG5hcHAucG9zdCgnL2FwaS9yZWdpc3RlcicsIGF1dGhMaW1pdGVyLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGNvbXBhbnlfbmFtZSwgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIFJlZ2lzdHJhdGlvblxyXG4gICAgaWYgKCFjb21wYW55X25hbWUgfHwgdHlwZW9mIGNvbXBhbnlfbmFtZSAhPT0gJ3N0cmluZycgfHwgY29tcGFueV9uYW1lLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJDb21wYW55IG5hbWUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFmdWxsX25hbWUgfHwgdHlwZW9mIGZ1bGxfbmFtZSAhPT0gJ3N0cmluZycgfHwgZnVsbF9uYW1lLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJGdWxsIG5hbWUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFlbWFpbCB8fCAhaXNWYWxpZEVtYWlsKGVtYWlsKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkEgdmFsaWQgZW1haWwgYWRkcmVzcyBpcyByZXF1aXJlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghcGFzc3dvcmQgfHwgdHlwZW9mIHBhc3N3b3JkICE9PSAnc3RyaW5nJyB8fCBwYXNzd29yZC5sZW5ndGggPCA2KSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiUGFzc3dvcmQgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzIGxvbmcuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXNzd29yZF9oYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKTtcclxuICAgICAgICBkYi5zZXJpYWxpemUoKCkgPT4ge1xyXG4gICAgICAgICAgICBkYi5ydW4oJ0JFR0lOIFRSQU5TQUNUSU9OJyk7XHJcbiAgICAgICAgICAgIGRiLnJ1bignSU5TRVJUIElOVE8gQ29tcGFuaWVzIChjb21wYW55X25hbWUpIFZBTFVFUyAoPyknLCBbY29tcGFueV9uYW1lXSwgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGRiLnJ1bignUk9MTEJBQ0snKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGNyZWF0aW5nIGNvbXBhbnk6XCIsIGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKFwiQ291bGQgbm90IGNyZWF0ZSBjb21wYW55LlwiKSk7IC8vIFBhc3MgZXJyb3IgdG8gZXJyb3IgaGFuZGxpbmcgbWlkZGxld2FyZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q29tcGFueUlkID0gdGhpcy5sYXN0SUQ7XHJcbiAgICAgICAgICAgICAgICBkYi5ydW4oYElOU0VSVCBJTlRPIFVzZXJzIChjb21wYW55X2lkLCBsb2NhdGlvbl9pZCwgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmRfaGFzaCwgcm9sZSwgc3Vic2NyaXB0aW9uX3N0YXR1cywgcGxhbl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCAnc3VwZXJfYWRtaW4nLCAnYWN0aXZlJywgJ2ZyZWUnKWAsIFtuZXdDb21wYW55SWQsIG51bGwsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkX2hhc2hdLCBmdW5jdGlvbih1c2VySW5zZXJ0RXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJJbnNlcnRFcnIpIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLnJ1bignUk9MTEJBQ0snKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBjcmVhdGluZyB1c2VyOlwiLCB1c2VySW5zZXJ0RXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJJbnNlcnRFcnIubWVzc2FnZS5pbmNsdWRlcygnVU5JUVVFIGNvbnN0cmFpbnQgZmFpbGVkOiBVc2Vycy5lbWFpbCcpKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHsgZXJyb3I6ICdFbWFpbCBhbHJlYWR5IHJlZ2lzdGVyZWQuJyB9KTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKFwiQ291bGQgbm90IGNyZWF0ZSB1c2VyLlwiKSk7IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGIucnVuKCdDT01NSVQnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6IFwiQ29tcGFueSBhbmQgdXNlciByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseSFcIiwgdXNlcklkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7IFxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWdpc3RyYXRpb24gZXJyb3I6XCIsIGVycm9yKTtcclxuICAgICAgICBuZXh0KGVycm9yKTsgLy8gUGFzcyBlcnJvciB0byBlcnJvciBoYW5kbGluZyBtaWRkbGV3YXJlXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoJy9hcGkvbG9naW4nLCBhdXRoTGltaXRlciwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIExvZ2luXHJcbiAgICBpZiAoIWVtYWlsIHx8ICFpc1ZhbGlkRW1haWwoZW1haWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBlbWFpbCBhZGRyZXNzIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwYXNzd29yZCB8fCB0eXBlb2YgcGFzc3dvcmQgIT09ICdzdHJpbmcnIHx8IHBhc3N3b3JkLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlBhc3N3b3JkIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLmdldChcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgZW1haWwgPSA/XCIsIFtlbWFpbF0sIGFzeW5jIChlcnIsIHVzZXIpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBkdXJpbmcgbG9naW46XCIsIGVycik7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcihcIkEgc2VydmVyIGVycm9yIG9jY3VycmVkIGR1cmluZyBsb2dpbi5cIikpOyAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdXNlcikgeyBcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBjcmVkZW50aWFscy5cIiB9KTsgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGlzTWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZF9oYXNoKTtcclxuICAgICAgICBpZiAoIWlzTWF0Y2gpIHsgXHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkludmFsaWQgY3JlZGVudGlhbHMuXCIgfSk7IFxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwYXlsb2FkID0geyB1c2VySWQ6IHVzZXIudXNlcl9pZCwgZW1haWw6IHVzZXIuZW1haWwsIHJvbGU6IHVzZXIucm9sZSwgZnVsbE5hbWU6IHVzZXIuZnVsbF9uYW1lLCBjb21wYW55SWQ6IHVzZXIuY29tcGFueV9pZCwgbG9jYXRpb25JZDogdXNlci5sb2NhdGlvbl9pZCwgc3Vic2NyaXB0aW9uU3RhdHVzOiB1c2VyLnN1YnNjcmlwdGlvbl9zdGF0dXMsIHBsYW5JZDogdXNlci5wbGFuX2lkIH07XHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihwYXlsb2FkLCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogJzFoJyB9KTtcclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiTG9naW4gc3VjY2Vzc2Z1bCFcIiwgdG9rZW4sIHJvbGU6IHVzZXIucm9sZSB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5wb3N0KCcvYXBpL2ludml0ZS1hZG1pbicsIGF1dGhlbnRpY2F0ZVRva2VuLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBsb2NhdGlvbl9pZCB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgSW52aXRlIEFkbWluXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgc3VwZXIgYWRtaW5zIGNhbiBpbnZpdGUgb3RoZXIgYWRtaW5zLicgfSk7IH1cclxuICAgIGlmICghZnVsbF9uYW1lIHx8IHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZW1haWwgfHwgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXBhc3N3b3JkIHx8IHR5cGVvZiBwYXNzd29yZCAhPT0gJ3N0cmluZycgfHwgcGFzc3dvcmQubGVuZ3RoIDwgNikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlRlbXBvcmFyeSBwYXNzd29yZCBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhdCBsZWFzdCA2IGNoYXJhY3RlcnMgbG9uZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbG9jYXRpb25faWQgIT09ICdudW1iZXInIHx8IGxvY2F0aW9uX2lkIDw9IDApIHsgLy8gQXNzdW1pbmcgbG9jYXRpb25faWQgaXMgYW4gaW50ZWdlciBJRFxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkEgdmFsaWQgbG9jYXRpb24gSUQgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXNzd29yZF9oYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKTtcclxuICAgICAgICBkYi5nZXQoJ1NFTEVDVCAqIEZST00gTG9jYXRpb25zIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nLCBbbG9jYXRpb25faWQsIGNvbXBhbnlJZF0sIChlcnIsIGxvY2F0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGNoZWNraW5nIGxvY2F0aW9uOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIHdoZW4gdmVyaWZ5aW5nIGxvY2F0aW9uLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgIGlmICghbG9jYXRpb24pIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdTZWxlY3RlZCBsb2NhdGlvbiBkb2VzIG5vdCBleGlzdCBvciBkb2VzIG5vdCBiZWxvbmcgdG8geW91ciBjb21wYW55LicgfSk7IH1cclxuICAgICAgICAgICAgZGIucnVuKGBJTlNFUlQgSU5UTyBVc2VycyAoY29tcGFueV9pZCwgbG9jYXRpb25faWQsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkX2hhc2gsIHJvbGUsIHN1YnNjcmlwdGlvbl9zdGF0dXMsIHBsYW5faWQpIFZBTFVFUyAoPywgPywgPywgPywgPywgJ2xvY2F0aW9uX2FkbWluJywgJ2FjdGl2ZScsICdmcmVlJylgLCBbY29tcGFueUlkLCBsb2NhdGlvbl9pZCwgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmRfaGFzaF0sIGZ1bmN0aW9uKHVzZXJJbnNlcnRFcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VySW5zZXJ0RXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGludml0aW5nIGFkbWluOlwiLCB1c2VySW5zZXJ0RXJyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlckluc2VydEVyci5tZXNzYWdlLmluY2x1ZGVzKCdVTklRVUUgY29uc3RyYWludCBmYWlsZWQ6IFVzZXJzLmVtYWlsJykpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHsgZXJyb3I6ICdFbWFpbCBhbHJlYWR5IHJlZ2lzdGVyZWQuJyB9KTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIGludml0ZSBhZG1pbi4nKSk7IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogXCJMb2NhdGlvbiBhZG1pbiBpbnZpdGVkIHN1Y2Nlc3NmdWxseSFcIiwgdXNlcklkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikgeyBjb25zb2xlLmVycm9yKFwiSW52aXRlIGFkbWluIGVycm9yOlwiLCBlcnJvcik7IG5leHQoZXJyb3IpOyB9IC8vIFBhc3MgZXJyb3JcclxufSk7XHJcblxyXG4vLyBORVc6IEFQSSBlbmRwb2ludCBmb3IgaW52aXRpbmcgZW1wbG95ZWVzXHJcbmFwcC5wb3N0KCcvYXBpL2ludml0ZS1lbXBsb3llZScsIGF1dGhlbnRpY2F0ZVRva2VuLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICAgIGNvbnN0IHsgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHBvc2l0aW9uLCBlbXBsb3llZV9pZCwgbG9jYXRpb25faWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gQXV0aG9yaXphdGlvbjogU3VwZXIgYWRtaW4gY2FuIGludml0ZSBhbnlvbmUsIExvY2F0aW9uIGFkbWluIGNhbiBvbmx5IGludml0ZSB0byB0aGVpciBsb2NhdGlvbiBvciB1bmFzc2lnbmVkXHJcbiAgICBpZiAoIVsnc3VwZXJfYWRtaW4nLCAnbG9jYXRpb25fYWRtaW4nXS5pbmNsdWRlcyhyb2xlKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogT25seSBhZG1pbnMgY2FuIGludml0ZSBlbXBsb3llZXMuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBJbnZpdGUgRW1wbG95ZWVcclxuICAgIGlmICghZnVsbF9uYW1lIHx8IHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZW1haWwgfHwgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXBhc3N3b3JkIHx8IHR5cGVvZiBwYXNzd29yZCAhPT0gJ3N0cmluZycgfHwgcGFzc3dvcmQubGVuZ3RoIDwgNikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlRlbXBvcmFyeSBwYXNzd29yZCBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhdCBsZWFzdCA2IGNoYXJhY3RlcnMgbG9uZy5cIiB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ29ycmVjdGVkIGxvY2F0aW9uX2lkIHZhbGlkYXRpb246IE11c3QgYmUgYSBudW1iZXIgPiAwLlxyXG4gICAgLy8gSWYgbG9jYXRpb25faWQgaXMgbnVsbCwgaXQgaW5kaWNhdGVzIGFuIHVuYXNzaWduZWQgbG9jYXRpb24sIHdoaWNoIGlzIHZhbGlkIGZvciBhIHN1cGVyIGFkbWluLlxyXG4gICAgLy8gRm9yIGxvY2F0aW9uX2FkbWluLCBpdCBtdXN0IG1hdGNoIHRoZWlyIGN1cnJlbnQgbG9jYXRpb24uXHJcbiAgICAvLyBUaGlzIHJldmlzZWQgbG9naWMgY29ycmVjdGx5IGNoZWNrcyBmb3IgbnVsbCBPUiBhIHZhbGlkIHBvc2l0aXZlIGludGVnZXIuXHJcbiAgICBjb25zdCBpc0xvY2F0aW9uSWRWYWxpZCA9IGxvY2F0aW9uX2lkID09PSBudWxsIHx8ICh0eXBlb2YgbG9jYXRpb25faWQgPT09ICdudW1iZXInICYmICFpc05hTihsb2NhdGlvbl9pZCkgJiYgbG9jYXRpb25faWQgPiAwKTtcclxuICAgIGlmICghaXNMb2NhdGlvbklkVmFsaWQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGxvY2F0aW9uIElEIChwb3NpdGl2ZSBudW1iZXIpIGlzIHJlcXVpcmVkIGZvciBlbXBsb3llZSwgb3IgbnVsbCBmb3IgdW5hc3NpZ25lZC5cIiB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHBvc2l0aW9uICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHBvc2l0aW9uICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUG9zaXRpb24gbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGVtcGxveWVlX2lkICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVtcGxveWVlX2lkICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRW1wbG95ZWUgSUQgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvY2F0aW9uIEFkbWluIHNwZWNpZmljIGNoZWNrOiBlbnN1cmUgdGhleSBhcmUgaW52aXRpbmcgdG8gdGhlaXIgYXNzaWduZWQgbG9jYXRpb24gb3IgbnVsbFxyXG4gICAgLy8gSWYgbG9jYXRpb25fYWRtaW4gdHJpZXMgdG8gc2V0IGEgbG9jYXRpb24gdGhhdCBpcyBOT1QgdGhlaXIgb3duLCBibG9jayBpdC5cclxuICAgIC8vIEFsbG93IGxvY2F0aW9uX2FkbWluIHRvIHNldCB0byBudWxsIGlmIHRoZWlyIGN1cnJlbnQgbG9jYXRpb24gaXMgbnVsbC5cclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgLy8gQSBsb2NhdGlvbiBhZG1pbiBjYW4gT05MWSBhc3NpZ24gYW4gZW1wbG95ZWUgdG8gdGhlaXIgb3duIGxvY2F0aW9uIG9yIHRvIG51bGwgKHVuYXNzaWduZWQpXHJcbiAgICAgICAgaWYgKGxvY2F0aW9uX2lkICE9PSBjdXJyZW50VXNlckxvY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHRhcmdldCBsb2NhdGlvbl9pZCBpcyBub3QgdGhlIGN1cnJlbnQgdXNlcidzIGxvY2F0aW9uLCBjaGVjayBpZiBib3RoIGFyZSBudWxsXHJcbiAgICAgICAgICAgIGlmICghKGxvY2F0aW9uX2lkID09PSBudWxsICYmIGN1cnJlbnRVc2VyTG9jYXRpb25JZCA9PT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gY2FuIG9ubHkgaW52aXRlIGVtcGxveWVlcyB0byB0aGVpciBhc3NpZ25lZCBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBhc3N3b3JkX2hhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApO1xyXG5cclxuICAgICAgICAvLyBWZXJpZnkgdGhlIGxvY2F0aW9uX2lkIGJlbG9uZ3MgdG8gdGhlIGNvbXBhbnkgYW5kLCBpZiBsb2NhdGlvbl9hZG1pbiwgbWF0Y2hlcyB0aGVpciBhc3NpZ25lZCBsb2NhdGlvblxyXG4gICAgICAgIC8vIFRoaXMgY2hlY2sgaXMgY3J1Y2lhbCBpZiBsb2NhdGlvbl9pZCBpcyBOT1QgbnVsbFxyXG4gICAgICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvblZlcmlmaWNhdGlvbiA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGRiLmdldCgnU0VMRUNUIGxvY2F0aW9uX2lkIEZST00gTG9jYXRpb25zIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nLCBbbG9jYXRpb25faWQsIGNvbXBhbnlJZF0sIChlcnIsIGxvY2F0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShsb2NhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICghbG9jYXRpb25WZXJpZmljYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnU2VsZWN0ZWQgbG9jYXRpb24gZG9lcyBub3QgZXhpc3Qgb3IgZG9lcyBub3QgYmVsb25nIHRvIHlvdXIgY29tcGFueS4nIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYi5ydW4oXHJcbiAgICAgICAgICAgIGBJTlNFUlQgSU5UTyBVc2VycyAoY29tcGFueV9pZCwgbG9jYXRpb25faWQsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkX2hhc2gsIHBvc2l0aW9uLCBlbXBsb3llZV9pZCwgcm9sZSwgc3Vic2NyaXB0aW9uX3N0YXR1cywgcGxhbl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCAnZW1wbG95ZWUnLCAnYWN0aXZlJywgJ2ZyZWUnKWAsXHJcbiAgICAgICAgICAgIFtjb21wYW55SWQsIGxvY2F0aW9uX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBwYXNzd29yZF9oYXNoLCBwb3NpdGlvbiwgZW1wbG95ZWVfaWQsXSwgLy8gRGVmYXVsdCBuZXcgZW1wbG95ZWVzIHRvICdlbXBsb3llZScgcm9sZVxyXG4gICAgICAgICAgICBmdW5jdGlvbih1c2VySW5zZXJ0RXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlckluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBpbnZpdGluZyBlbXBsb3llZTpcIiwgdXNlckluc2VydEVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJJbnNlcnRFcnIubWVzc2FnZS5pbmNsdWRlcygnVU5JUVVFIGNvbnN0cmFpbnQgZmFpbGVkOiBVc2Vycy5lbWFpbCcpKSB7IHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IGVycm9yOiAnRW1haWwgYWxyZWFkeSByZWdpc3RlcmVkLicgfSk7IH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBpbnZpdGUgZW1wbG95ZWUuJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIkVtcGxveWVlIGludml0ZWQgc3VjY2Vzc2Z1bGx5IVwiLCB1c2VySWQ6IHRoaXMubGFzdElEIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkludml0ZSBlbXBsb3llZSBlcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgICAgIG5leHQoZXJyb3IpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcblxyXG5hcHAuZ2V0KCcvYXBpL3Byb2ZpbGUnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHVzZXJJZCwgZnVsbE5hbWUsIGVtYWlsLCByb2xlLCBjb21wYW55SWQsIGxvY2F0aW9uSWQsIHN1YnNjcmlwdGlvblN0YXR1cywgcGxhbklkIH0gPSByZXEudXNlcjtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXNlcklkLCBmdWxsTmFtZSwgZW1haWwsIHJvbGUsIGNvbXBhbnlJZCwgbG9jYXRpb25JZCwgc3Vic2NyaXB0aW9uU3RhdHVzLCBwbGFuSWQgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnB1dCgnL2FwaS9wcm9maWxlJywgYXV0aGVudGljYXRlVG9rZW4sIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgZnVsbE5hbWUsIGVtYWlsLCBjdXJyZW50UGFzc3dvcmQsIG5ld1Bhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBQcm9maWxlIFVwZGF0ZVxyXG4gICAgaWYgKGZ1bGxOYW1lID09PSB1bmRlZmluZWQgJiYgZW1haWwgPT09IHVuZGVmaW5lZCAmJiAoIWN1cnJlbnRQYXNzd29yZCB8fCAhbmV3UGFzc3dvcmQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdObyBkYXRhIHByb3ZpZGVkIGZvciB1cGRhdGUuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChmdWxsTmFtZSAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgZnVsbE5hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxOYW1lLnRyaW0oKSA9PT0gJycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nIGlmIHByb3ZpZGVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGVtYWlsICE9PSB1bmRlZmluZWQgJiYgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgbXVzdCBiZSBwcm92aWRlZCBpZiBjaGFuZ2luZyBlbWFpbC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmIChuZXdQYXNzd29yZCAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgbmV3UGFzc3dvcmQgIT09ICdzdHJpbmcnIHx8IG5ld1Bhc3N3b3JkLmxlbmd0aCA8IDYpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiTmV3IHBhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzIGxvbmcgaWYgY2hhbmdpbmcgcGFzc3dvcmQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoKGN1cnJlbnRQYXNzd29yZCAmJiAhbmV3UGFzc3dvcmQpIHx8ICghY3VycmVudFBhc3N3b3JkICYmIG5ld1Bhc3N3b3JkKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnQm90aCBjdXJyZW50IHBhc3N3b3JkIGFuZCBuZXcgcGFzc3dvcmQgYXJlIHJlcXVpcmVkIHRvIGNoYW5nZSBwYXNzd29yZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkYi5nZXQoXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/XCIsIFt1c2VySWRdLCBhc3luYyAoZXJyLCB1c2VyKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgdXNlciBmb3IgcHJvZmlsZSB1cGRhdGU6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcihcIlNlcnZlciBlcnJvciBkdXJpbmcgcHJvZmlsZSB1cGRhdGUuXCIpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKCF1c2VyKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIlVzZXIgbm90IGZvdW5kLlwiIH0pOyB9XHJcbiAgICAgICAgbGV0IHVwZGF0ZVNxbCA9ICdVUERBVEUgVXNlcnMgU0VUICc7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlUGFyYW1zID0gW107XHJcbiAgICAgICAgY29uc3QgY2xhdXNlcyA9IFtdO1xyXG4gICAgICAgIGxldCBjaGFuZ2VzTWFkZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChmdWxsTmFtZSAhPT0gdW5kZWZpbmVkICYmIGZ1bGxOYW1lICE9PSB1c2VyLmZ1bGxfbmFtZSkge1xyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2Z1bGxfbmFtZSA9ID8nKTtcclxuICAgICAgICAgICAgdXBkYXRlUGFyYW1zLnB1c2goZnVsbE5hbWUpO1xyXG4gICAgICAgICAgICBjaGFuZ2VzTWFkZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbWFpbCAhPT0gdW5kZWZpbmVkICYmIGVtYWlsICE9PSB1c2VyLmVtYWlsKSB7XHJcbiAgICAgICAgICAgIHRyeSB7IC8vIEFkZGVkIHRyeS1jYXRjaCBmb3IgYXN5bmMgYXdhaXQgaW4gZGIuZ2V0XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGIuZ2V0KFwiU0VMRUNUIHVzZXJfaWQgRlJPTSBVc2VycyBXSEVSRSBlbWFpbCA9ID8gQU5EIHVzZXJfaWQgIT0gP1wiLCBbZW1haWwsIHVzZXJJZF0sIChlcnIsIHJvdykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdVc2VyKSB7IHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IGVycm9yOiAnRW1haWwgYWxyZWFkeSBpbiB1c2UgYnkgYW5vdGhlciBhY2NvdW50LicgfSk7IH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZGJFcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBjaGVja2luZyBleGlzdGluZyBlbWFpbDpcIiwgZGJFcnIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKFwiU2VydmVyIGVycm9yIHZlcmlmeWluZyBlbWFpbCBhdmFpbGFiaWxpdHkuXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2VtYWlsID0gPycpO1xyXG4gICAgICAgICAgICB1cGRhdGVQYXJhbXMucHVzaChlbWFpbCk7XHJcbiAgICAgICAgICAgIGNoYW5nZXNNYWRlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGN1cnJlbnRQYXNzd29yZCAmJiBuZXdQYXNzd29yZCkge1xyXG4gICAgICAgICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUoY3VycmVudFBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkX2hhc2gpO1xyXG4gICAgICAgICAgICBpZiAoIWlzTWF0Y2gpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwiQ3VycmVudCBwYXNzd29yZCBpbmNvcnJlY3QuXCIgfSk7IH1cclxuICAgICAgICAgICAgY29uc3QgbmV3UGFzc3dvcmRIYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gobmV3UGFzc3dvcmQsIDEwKTtcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdwYXNzd29yZF9oYXNoID0gPycpO1xyXG4gICAgICAgICAgICB1cGRhdGVQYXJhbXMucHVzaChuZXdQYXNzd29yZEhhc2gpO1xyXG4gICAgICAgICAgICBjaGFuZ2VzTWFkZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghY2hhbmdlc01hZGUpIHsgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ05vIGNoYW5nZXMgZGV0ZWN0ZWQuIFByb2ZpbGUgcmVtYWlucyB0aGUgc2FtZS4nIH0pOyB9XHJcbiAgICAgICAgdXBkYXRlU3FsICs9IGNsYXVzZXMuam9pbignLCAnKSArICcgV0hFUkUgdXNlcl9pZCA9ID8nO1xyXG4gICAgICAgIHVwZGF0ZVBhcmFtcy5wdXNoKHVzZXJJZCk7XHJcbiAgICAgICAgZGIucnVuKHVwZGF0ZVNxbCwgdXBkYXRlUGFyYW1zLCBmdW5jdGlvbih1cGRhdGVFcnIpIHtcclxuICAgICAgICAgICAgaWYgKHVwZGF0ZUVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgdXBkYXRpbmcgcHJvZmlsZTpcIiwgdXBkYXRlRXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHByb2ZpbGUuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA+IDApIHtcclxuICAgICAgICAgICAgICAgIGRiLmdldChcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID9cIiwgW3VzZXJJZF0sIChmZXRjaEVyciwgdXBkYXRlZFVzZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmV0Y2hFcnIgfHwgIXVwZGF0ZWRVc2VyKSB7IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyB1cGRhdGVkIHVzZXIgZm9yIG5ldyB0b2tlbjpcIiwgZmV0Y2hFcnIpOyByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnUHJvZmlsZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseSwgYnV0IHRva2VuIGNvdWxkIG5vdCBiZSByZWZyZXNoZWQuJyB9KTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BheWxvYWQgPSB7IHVzZXJJZDogdXBkYXRlZFVzZXIudXNlcl9pZCwgZW1haWw6IHVwZGF0ZWRVc2VyLmVtYWlsLCByb2xlOiB1cGRhdGVkVXNlci5yb2xlLCBmdWxsTmFtZTogdXBkYXRlZFVzZXIuZnVsbF9uYW1lLCBjb21wYW55SWQ6IHVwZGF0ZWRVc2VyLmNvbXBhbnlfaWQsIGxvY2F0aW9uSWQ6IHVwZGF0ZWRVc2VyLmxvY2F0aW9uX2lkLCBzdWJzY3JpcHRpb25TdGF0dXM6IHVwZGF0ZWRVc2VyLnN1YnNjcmlwdGlvbl9zdGF0dXMsIHBsYW5JZDogdXNlci5wbGFuX2lkIH07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VG9rZW4gPSBqd3Quc2lnbihuZXdQYXlsb2FkLCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogJzFoJyB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdQcm9maWxlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IScsIHRva2VuOiBuZXdUb2tlbiB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgeyByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdObyBjaGFuZ2VzIGFwcGxpZWQgYXMgZGF0YSB3YXMgaWRlbnRpY2FsLicgfSk7IH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5nZXQoJy9hcGkvbG9jYXRpb25zJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlIH0gPSByZXEudXNlcjtcclxuICAgIGxldCBzcWwgPSAnU0VMRUNUIGxvY2F0aW9uX2lkLCBsb2NhdGlvbl9uYW1lLCBsb2NhdGlvbl9hZGRyZXNzIEZST00gTG9jYXRpb25zIFdIRVJFIGNvbXBhbnlfaWQgPSA/JztcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtjb21wYW55SWRdO1xyXG5cclxuICAgIC8vIEFsbG93aW5nIHN1cGVyX2FkbWluLCBsb2NhdGlvbl9hZG1pbiwgYW5kIGVtcGxveWVlIHRvIHZpZXcgYWxsIGxvY2F0aW9ucyBpbiB0aGVpciBjb21wYW55IGZvciBkcm9wZG93bnMvc2VsZWN0aW9uXHJcbiAgICBpZiAoIVsnc3VwZXJfYWRtaW4nLCAnbG9jYXRpb25fYWRtaW4nLCAnZW1wbG95ZWUnXS5pbmNsdWRlcyhyb2xlKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zIHRvIHZpZXcgbG9jYXRpb25zLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIuYWxsKHNxbCwgcGFyYW1zLCAoZXJyLCByb3dzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgbG9jYXRpb25zOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIGxvY2F0aW9ucy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIHJlcy5qc29uKHJvd3MpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoJy9hcGkvbG9jYXRpb25zJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgbG9jYXRpb25fbmFtZSwgbG9jYXRpb25fYWRkcmVzcyB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgQ3JlYXRlIExvY2F0aW9uXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgc3VwZXIgYWRtaW5zIGNhbiBjcmVhdGUgbG9jYXRpb25zLicgfSk7IH1cclxuICAgIGlmICghbG9jYXRpb25fbmFtZSB8fCB0eXBlb2YgbG9jYXRpb25fbmFtZSAhPT0gJ3N0cmluZycgfHwgbG9jYXRpb25fbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiTG9jYXRpb24gbmFtZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWxvY2F0aW9uX2FkZHJlc3MgfHwgdHlwZW9mIGxvY2F0aW9uX2FkZHJlc3MgIT09ICdzdHJpbmcnIHx8IGxvY2F0aW9uX2FkZHJlc3MudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkxvY2F0aW9uIGFkZHJlc3MgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bignSU5TRVJUIElOVE8gTG9jYXRpb25zIChjb21wYW55X2lkLCBsb2NhdGlvbl9uYW1lLCBsb2NhdGlvbl9hZGRyZXNzKSBWQUxVRVMgKD8sID8sID8pJywgW2NvbXBhbnlJZCwgbG9jYXRpb25fbmFtZSwgbG9jYXRpb25fYWRkcmVzc10sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGNyZWF0aW5nIGxvY2F0aW9uOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgbG9jYXRpb24uJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdMb2NhdGlvbiBjcmVhdGVkIScsIGxvY2F0aW9uSWQ6IHRoaXMubGFzdElEIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLmRlbGV0ZSgnL2FwaS9sb2NhdGlvbnMvOmlkJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgc3VwZXIgYWRtaW5zIGNhbiBkZWxldGUgbG9jYXRpb25zLicgfSk7IH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBJRCBwYXJhbWV0ZXJcclxuICAgIGlmICghaWQgfHwgaXNOYU4ocGFyc2VJbnQoaWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBsb2NhdGlvbiBJRCBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bignREVMRVRFIEZST00gTG9jYXRpb25zIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nLCBbaWQsIGNvbXBhbnlJZF0sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGRlbGV0aW5nIGxvY2F0aW9uOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgbG9jYXRpb24uJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnTG9jYXRpb24gbm90IGZvdW5kIG9yIG5vdCBhdXRob3JpemVkIHRvIGRlbGV0ZS4nIH0pOyB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDQpLnNlbmQoKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5nZXQoJy9hcGkvdXNlcnMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIHVzZXJJZDogY3VycmVudFVzZXJJZCwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuICAgIGNvbnN0IHsgZmlsdGVyUm9sZSwgZmlsdGVyTG9jYXRpb25JZCB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICAgIGxldCBzcWwgPSBgU0VMRUNUIFVzZXJzLnVzZXJfaWQsIFVzZXJzLmZ1bGxfbmFtZSwgVXNlcnMuZW1haWwsIFVzZXJzLnJvbGUsIExvY2F0aW9ucy5sb2NhdGlvbl9uYW1lXHJcbiAgICAgICAgICAgICAgIEZST00gVXNlcnNcclxuICAgICAgICAgICAgICAgTEVGVCBKT0lOIExvY2F0aW9ucyBPTiBVc2Vycy5sb2NhdGlvbl9pZCA9IExvY2F0aW9ucy5sb2NhdGlvbl9pZFxyXG4gICAgICAgICAgICAgICBXSEVSRSBVc2Vycy5jb21wYW55X2lkID0gP2A7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbY29tcGFueUlkXTtcclxuXHJcbiAgICBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIC8vIFN1cGVyIGFkbWluIGNhbiB2aWV3IGFsbCB1c2VycyBpbiB0aGVpciBjb21wYW55LlxyXG4gICAgfSBlbHNlIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgLy8gTG9jYXRpb24gYWRtaW4gY2FuIHZpZXcgYWxsIHVzZXJzIHdpdGhpbiB0aGVpciBhc3NpZ25lZCBsb2NhdGlvbiwgcGx1cyB1bmFzc2lnbmVkIHVzZXJzIGZvciB0aGVpciBjb21wYW55LlxyXG4gICAgICAgIGlmIChjdXJyZW50VXNlckxvY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgc3FsICs9IGAgQU5EIChVc2Vycy5sb2NhdGlvbl9pZCA9ID8gT1IgVXNlcnMubG9jYXRpb25faWQgSVMgTlVMTClgOyAvLyBBZG1pbnMgbWlnaHQgbmVlZCB0byBzZWUgdW5hc3NpZ25lZCB1c2Vyc1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gbm90IGFzc2lnbmVkIHRvIGEgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdlbXBsb3llZScpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgVXNlcnMudXNlcl9pZCA9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VySWQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IEluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byB2aWV3IHVzZXJzLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5wdXQgdmFsaWRhdGlvbiBmb3IgZmlsdGVyUm9sZSBhbmQgZmlsdGVyTG9jYXRpb25JZFxyXG4gICAgY29uc3QgYWxsb3dlZFJvbGVzID0gWydzdXBlcl9hZG1pbicsICdsb2NhdGlvbl9hZG1pbicsICdlbXBsb3llZSddO1xyXG4gICAgaWYgKGZpbHRlclJvbGUgJiYgKCFhbGxvd2VkUm9sZXMuaW5jbHVkZXMoZmlsdGVyUm9sZSkgfHwgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicgJiYgZmlsdGVyUm9sZSA9PT0gJ3N1cGVyX2FkbWluJykpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGZpbHRlciByb2xlIHByb3ZpZGVkIG9yIGluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byBmaWx0ZXIgYnkgdGhpcyByb2xlLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZmlsdGVyTG9jYXRpb25JZCAmJiBpc05hTihwYXJzZUludChmaWx0ZXJMb2NhdGlvbklkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgZmlsdGVyIGxvY2F0aW9uIElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlmIChmaWx0ZXJSb2xlKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIFVzZXJzLnJvbGUgPSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChmaWx0ZXJSb2xlKTtcclxuICAgIH1cclxuICAgIGlmIChmaWx0ZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgLy8gRW5zdXJlIGxvY2F0aW9uX2FkbWluIGNhbiBvbmx5IGZpbHRlciBieSB0aGVpciBvd24gbG9jYXRpb25cclxuICAgICAgICBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJyB8fCAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJyAmJiBwYXJzZUludChmaWx0ZXJMb2NhdGlvbklkKSA9PT0gY3VycmVudFVzZXJMb2NhdGlvbklkKSkge1xyXG4gICAgICAgICAgICBzcWwgKz0gYCBBTkQgVXNlcnMubG9jYXRpb25faWQgPSA/YDtcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goZmlsdGVyTG9jYXRpb25JZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgdG8gZmlsdGVyIGJ5IGxvY2F0aW9uLicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRiLmFsbChzcWwsIHBhcmFtcywgKGVyciwgcm93cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGZldGNoaW5nIHVzZXJzOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIHVzZXJzLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgcmVzLmpzb24ocm93cyk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAuZGVsZXRlKCcvYXBpL3VzZXJzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIHVzZXJJZDogYXV0aGVudGljYXRlZFVzZXJJZCB9ID0gcmVxLnVzZXI7XHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgc3VwZXIgYWRtaW5zIGNhbiBkZWxldGUgdXNlcnMuJyB9KTsgfVxyXG4gICAgaWYgKHBhcnNlSW50KGlkKSA9PT0gYXV0aGVudGljYXRlZFVzZXJJZCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0Nhbm5vdCBkZWxldGUgeW91ciBvd24gc3VwZXIgYWRtaW4gYWNjb3VudCB2aWEgdGhpcyBpbnRlcmZhY2UuJyB9KTsgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIElEIHBhcmFtZXRlclxyXG4gICAgaWYgKCFpZCB8fCBpc05hTihwYXJzZUludChpZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHVzZXIgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4oJ0RFTEVURSBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyBBTkQgcm9sZSAhPSBcXCdzdXBlcl9hZG1pblxcJycsIFtpZCwgY29tcGFueUlkXSwgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZGVsZXRpbmcgdXNlcjpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIHVzZXIuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwNCkuc2VuZCgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoJy9hcGkvY3JlYXRlLWNoZWNrb3V0LXNlc3Npb24nLCBhdXRoZW50aWNhdGVUb2tlbiwgYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBwbGFuSWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyB1c2VySWQsIGVtYWlsLCBjb21wYW55SWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIHBsYW5JZFxyXG4gICAgY29uc3QgYWxsb3dlZFBsYW5JZHMgPSBbJ3BybycsICdlbnRlcnByaXNlJ107XHJcbiAgICBpZiAoIXBsYW5JZCB8fCAhYWxsb3dlZFBsYW5JZHMuaW5jbHVkZXMocGxhbklkKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBwbGFuIElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcHJpY2VJZE1hcCA9IHtcclxuICAgICAgICAncHJvJzogcHJvY2Vzcy5lbnYuU1RSSVBFX1BSSUNFX0lEX1BSTywgICAgICAgLy8gVXNlIGVudmlyb25tZW50IHZhcmlhYmxlXHJcbiAgICAgICAgJ2VudGVycHJpc2UnOiBwcm9jZXNzLmVudi5TVFJJUEVfUFJJQ0VfSURfRU5UIC8vIFVzZSBlbnZpcm9ubWVudCB2YXJpYWJsZVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHN0cmlwZVByaWNlSWQgPSBwcmljZUlkTWFwW3BsYW5JZF07XHJcbiAgICBpZiAoIXN0cmlwZVByaWNlSWQpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdTdHJpcGUgcHJpY2UgSUQgbm90IGNvbmZpZ3VyZWQgZm9yIHRoaXMgcGxhbi4nIH0pOyB9IC8vIENoYW5nZWQgZnJvbSA0MDAgdG8gNTAwIGFzIHRoaXMgaXMgYSBzZXJ2ZXItc2lkZSBjb25maWcgaXNzdWVcclxuICAgIHRyeSB7XHJcbiAgICAgICAgbGV0IGN1c3RvbWVySWQ7XHJcbiAgICAgICAgY29uc3QgdXNlclJlY29yZCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgZGIuZ2V0KCdTRUxFQ1Qgc3RyaXBlX2N1c3RvbWVyX2lkIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID8nLCBbdXNlcklkXSwgKGVyciwgcm93KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocm93KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHVzZXJSZWNvcmQgJiYgdXNlclJlY29yZC5zdHJpcGVfY3VzdG9tZXJfaWQpIHtcclxuICAgICAgICAgICAgY3VzdG9tZXJJZCA9IHVzZXJSZWNvcmQuc3RyaXBlX2N1c3RvbWVyX2lkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbWVyID0gYXdhaXQgc3RyaXBlSW5zdGFuY2UuY3VzdG9tZXJzLmNyZWF0ZSh7IGVtYWlsOiBlbWFpbCwgbWV0YWRhdGE6IHsgdXNlcklkOiB1c2VySWQsIGNvbXBhbnlJZDogY29tcGFueUlkLCB9LCB9KTtcclxuICAgICAgICAgICAgY3VzdG9tZXJJZCA9IGN1c3RvbWVyLmlkO1xyXG4gICAgICAgICAgICBkYi5ydW4oJ1VQREFURSBVc2VycyBTRVQgc3RyaXBlX2N1c3RvbWVyX2lkID0gPyBXSEVSRSB1c2VyX2lkID0gPycsIFtjdXN0b21lcklkLCB1c2VySWRdLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBTdHJpcGUgY3VzdG9tZXIgSUQgdG8gREI6JywgZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBzdHJpcGVJbnN0YW5jZS5jaGVja291dC5zZXNzaW9ucy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBjdXN0b21lcjogY3VzdG9tZXJJZCxcclxuICAgICAgICAgICAgbW9kZTogJ3N1YnNjcmlwdGlvbicsXHJcbiAgICAgICAgICAgIGxpbmVfaXRlbXM6IFt7IHByaWNlOiBzdHJpcGVQcmljZUlkLCBxdWFudGl0eTogMSwgfSwgXSxcclxuICAgICAgICAgICAgLy8gVXNlIGVudmlyb25tZW50IHZhcmlhYmxlcyBmb3Igc3VjY2Vzcy9jYW5jZWwgVVJMcywgb3IgcmVsYXRpdmUgcGF0aHMgaWYgaGFuZGxlZCBjbGllbnQtc2lkZVxyXG4gICAgICAgICAgICBzdWNjZXNzX3VybDogYCR7cHJvY2Vzcy5lbnYuRlJPTlRFTkRfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjgwMDAnfS9zdWl0ZS1odWIuaHRtbD9wYXltZW50PXN1Y2Nlc3Mmc2Vzc2lvbl9pZD17Q0hFQ0tPVVRfU0VTU0lPTl9JRH1gLFxyXG4gICAgICAgICAgICBjYW5jZWxfdXJsOiBgJHtwcm9jZXNzLmVudi5GUk9OVEVORF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCd9L3ByaWNpbmcuaHRtbD9wYXltZW50PWNhbmNlbGxlZGAsXHJcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7IHVzZXJJZDogdXNlcklkLCBwbGFuSWQ6IHBsYW5JZCwgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVybDogc2Vzc2lvbi51cmwgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikgeyBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBTdHJpcGUgQ2hlY2tvdXQgU2Vzc2lvbjonLCBlcnJvcik7IG5leHQoZXJyb3IpOyB9IC8vIFBhc3MgZXJyb3JcclxufSk7XHJcblxyXG5hcHAucG9zdCgnL2FwaS9zY2hlZHVsZXMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBlbXBsb3llZV9pZCwgbG9jYXRpb25faWQsIHN0YXJ0X3RpbWUsIGVuZF90aW1lLCBub3RlcyB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgdXNlcklkOiBjdXJyZW50VXNlcklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBDcmVhdGUgU2NoZWR1bGVcclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nICYmIHJvbGUgIT09ICdsb2NhdGlvbl9hZG1pbicpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gY3JlYXRlIHNjaGVkdWxlcy4nIH0pOyB9XHJcbiAgICBpZiAodHlwZW9mIGVtcGxveWVlX2lkICE9PSAnbnVtYmVyJyB8fCBlbXBsb3llZV9pZCA8PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdBIHZhbGlkIGVtcGxveWVlIElEIGlzIHJlcXVpcmVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGxvY2F0aW9uX2lkICE9PSAnbnVtYmVyJyB8fCBsb2NhdGlvbl9pZCA8PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdBIHZhbGlkIGxvY2F0aW9uIElEIGlzIHJlcXVpcmVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXN0YXJ0X3RpbWUgfHwgIWVuZF90aW1lIHx8IGlzTmFOKG5ldyBEYXRlKHN0YXJ0X3RpbWUpLmdldFRpbWUoKSkgfHwgaXNOYU4obmV3IERhdGUoZW5kX3RpbWUpLmdldFRpbWUoKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1ZhbGlkIHN0YXJ0IGFuZCBlbmQgdGltZXMgYXJlIHJlcXVpcmVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobmV3IERhdGUoc3RhcnRfdGltZSkgPj0gbmV3IERhdGUoZW5kX3RpbWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdTdGFydCB0aW1lIG11c3QgYmUgYmVmb3JlIGVuZCB0aW1lLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobm90ZXMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygbm90ZXMgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdOb3RlcyBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIuZ2V0KCdTRUxFQ1QgdXNlcl9pZCBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPycsIFtlbXBsb3llZV9pZCwgY29tcGFueUlkXSwgKGVyciwgZW1wbG95ZWUpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciB2ZXJpZnlpbmcgZW1wbG95ZWU6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZHVyaW5nIGVtcGxveWVlIHZlcmlmaWNhdGlvbi4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICghZW1wbG95ZWUpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdFbXBsb3llZSBub3QgZm91bmQgaW4geW91ciBjb21wYW55LicgfSk7IH1cclxuICAgICAgICBkYi5nZXQoJ1NFTEVDVCBsb2NhdGlvbl9pZCBGUk9NIExvY2F0aW9ucyBXSEVSRSBsb2NhdGlvbl9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JywgW2xvY2F0aW9uX2lkLCBjb21wYW55SWRdLCAoZXJyLCBsb2NhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciB2ZXJpZnlpbmcgbG9jYXRpb246XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZHVyaW5nIGxvY2F0aW9uIHZlcmlmaWNhdGlvbi4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgICAgICBpZiAoIWxvY2F0aW9uKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTG9jYXRpb24gbm90IGZvdW5kIGluIHlvdXIgY29tcGFueS4nIH0pOyB9XHJcbiAgICAgICAgICAgIGRiLnJ1bihcclxuICAgICAgICAgICAgICAgICdJTlNFUlQgSU5UTyBTY2hlZHVsZXMgKGVtcGxveWVlX2lkLCBsb2NhdGlvbl9pZCwgc3RhcnRfdGltZSwgZW5kX3RpbWUsIG5vdGVzKSBWQUxVRVMgKD8sID8sID8sID8sID8pJywgW2VtcGxveWVlX2lkLCBsb2NhdGlvbl9pZCwgc3RhcnRfdGltZSwgZW5kX3RpbWUsIG5vdGVzXSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnNlcnRFcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGNyZWF0aW5nIHNjaGVkdWxlOlwiLCBpbnNlcnRFcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgc2NoZWR1bGUuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdTY2hlZHVsZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseSEnLCBzY2hlZHVsZUlkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5nZXQoJy9hcGkvc2NoZWR1bGVzJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgZW1wbG95ZWVfaWQsIGxvY2F0aW9uX2lkLCBzdGFydF9kYXRlLCBlbmRfZGF0ZSB9ID0gcmVxLnF1ZXJ5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIHVzZXJJZDogY3VycmVudFVzZXJJZCwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICBsZXQgc3FsID0gYFNFTEVDVCBVc2Vycy51c2VyX2lkLCBVc2Vycy5mdWxsX25hbWUsIFVzZXJzLmVtYWlsLCBVc2Vycy5yb2xlLCBMb2NhdGlvbnMubG9jYXRpb25fbmFtZVxyXG4gICAgICAgICAgICAgICBGUk9NIFVzZXJzXHJcbiAgICAgICAgICAgICAgIExFRlQgSk9JTiBMb2NhdGlvbnMgT04gVXNlcnMubG9jYXRpb25faWQgPSBMb2NhdGlvbnMubG9jYXRpb25faWRcclxuICAgICAgICAgICAgICAgV0hFUkUgVXNlcnMuY29tcGFueV9pZCA9ID9gO1xyXG4gICAgY29uc3QgcGFyYW1zID0gW2NvbXBhbnlJZF07XHJcblxyXG4gICAgaWYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICAvLyBTdXBlciBhZG1pbiBjYW4gdmlldyBhbGwgdXNlcnMgaW4gdGhlaXIgY29tcGFueS5cclxuICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIC8vIExvY2F0aW9uIGFkbWluIGNhbiB2aWV3IGFsbCB1c2VycyB3aXRoaW4gdGhlaXIgYXNzaWduZWQgbG9jYXRpb24sIHBsdXMgdW5hc3NpZ25lZCB1c2VycyBmb3IgdGhlaXIgY29tcGFueS5cclxuICAgICAgICBpZiAoY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIHNxbCArPSBgIEFORCAoVXNlcnMubG9jYXRpb25faWQgPSA/IE9SIFVzZXJzLmxvY2F0aW9uX2lkIElTIE5VTEwpYDsgLy8gQWRtaW5zIG1pZ2h0IG5lZWQgdG8gc2VlIHVuYXNzaWduZWQgdXNlcnNcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIG5vdCBhc3NpZ25lZCB0byBhIGxvY2F0aW9uLicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChyb2xlID09PSAnZW1wbG95ZWUnKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIFVzZXJzLnVzZXJfaWQgPSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlcklkKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbnB1dCB2YWxpZGF0aW9uIGZvciBxdWVyeSBwYXJhbWV0ZXJzXHJcbiAgICBpZiAoZW1wbG95ZWVfaWQgJiYgaXNOYU4ocGFyc2VJbnQoZW1wbG95ZWVfaWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBlbXBsb3llZSBJRCBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChsb2NhdGlvbl9pZCAmJiBpc05hTihwYXJzZUludChsb2NhdGlvbl9pZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGxvY2F0aW9uIElEIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHN0YXJ0X2RhdGUgJiYgaXNOYU4obmV3IERhdGUoc3RhcnRfZGF0ZSkuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBzdGFydCBkYXRlIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGVuZF9kYXRlICYmIGlzTmFOKG5ldyBEYXRlKGVuZF9kYXRlKS5nZXRUaW1lKCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGVuZCBkYXRlIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZiAoZW1wbG95ZWVfaWQgJiYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicgfHwgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicgJiYgcGFyc2VJbnQoZW1wbG95ZWVfaWQpID09PSBjdXJyZW50VXNlcklkKSB8fCAocm9sZSA9PT0gJ2VtcGxveWVlJyAmJiBwYXJzZUludChlbXBsb3llZV9pZCkgPT09IGN1cnJlbnRVc2VySWQpKSkge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBVc2Vycy5yb2xlID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goZmlsdGVyUm9sZSk7IC8vIFRoaXMgc2hvdWxkIGJlIGVtcGxveWVlX2lkLCBub3QgZmlsdGVyUm9sZVxyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICYmIChyb2xlID09PSAnc3VwZXJfYWRtaW4nIHx8IChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIHBhcnNlSW50KGxvY2F0aW9uX2lkKSA9PT0gY3VycmVudFVzZXJMb2NhdGlvbklkKSkpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgVXNlcnMubG9jYXRpb25faWQgPSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICB9XHJcbiAgICBpZiAoc3RhcnRfZGF0ZSkge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBTY2hlZHVsZXMuc3RhcnRfdGltZSA+PSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChzdGFydF9kYXRlKTtcclxuICAgIH1cclxuICAgIGlmIChlbmRfZGF0ZSkge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBTY2hlZHVsZXMuZW5kX3RpbWUgPD0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goZW5kX2RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLmFsbChzcWwsIHBhcmFtcywgKGVyciwgcm93cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGZldGNoaW5nIHNjaGVkdWxlczpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBzY2hlZHVsZXMuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuanNvbihyb3dzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5kZWxldGUoJy9hcGkvc2NoZWR1bGVzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIHVzZXJJZDogY3VycmVudFVzZXJJZCwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBJRCBwYXJhbWV0ZXJcclxuICAgIGlmICghaWQgfHwgaXNOYU4ocGFyc2VJbnQoaWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBzY2hlZHVsZSBJRCBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyb2xlID09PSAnZW1wbG95ZWUnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBFbXBsb3llZXMgY2Fubm90IGRlbGV0ZSBzY2hlZHVsZXMuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc3FsID0gYERFTEVURSBGUk9NIFNjaGVkdWxlcyBXSEVSRSBzY2hlZHVsZV9pZCA9ID9gO1xyXG4gICAgY29uc3QgcGFyYW1zID0gW2lkXTtcclxuXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBlbXBsb3llZV9pZCBJTiAoU0VMRUNUIHVzZXJfaWQgRlJPTSBVc2VycyBXSEVSRSBsb2NhdGlvbl9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/KWA7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkLCBjb21wYW55SWQpO1xyXG4gICAgfSBlbHNlIGlmIChyb2xlID09PSAnc3VwZXJfYWRtaW4nKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIGVtcGxveWVlX2lkIElOIChTRUxFQ1QgdXNlcl9pZCBGUk9NIFVzZXJzIFdIRVJFIGNvbXBhbnlfaWQgPSA/KWA7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goY29tcGFueUlkKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4oc3FsLCBwYXJhbXMsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGRlbGV0aW5nIHNjaGVkdWxlOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgc2NoZWR1bGUuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnU2NoZWR1bGUgbm90IGZvdW5kIG9yIG5vdCBhdXRob3JpemVkIHRvIGRlbGV0ZS4nIH0pOyB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDQpLnNlbmQoKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vIC0tLSBIaXJpbmcgUm91dGVzIC0tLVxyXG5cclxuLyoqXHJcbiAqIFBPU1QgL2FwaS9qb2ItcG9zdGluZ3NcclxuICogQ3JlYXRlcyBhIG5ldyBqb2IgcG9zdGluZy5cclxuICogUmVxdWlyZXMgc3VwZXJfYWRtaW4gb3IgbG9jYXRpb25fYWRtaW4gcm9sZS5cclxuICovXHJcbmFwcC5wb3N0KCcvYXBpL2pvYi1wb3N0aW5ncycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IHRpdGxlLCBkZXNjcmlwdGlvbiwgcmVxdWlyZW1lbnRzLCBsb2NhdGlvbl9pZCB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuICAgIGNvbnN0IGNyZWF0ZWRfZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsgLy8gQ3VycmVudCBkYXRlL3RpbWUgZm9yIGNyZWF0aW9uXHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgQ3JlYXRlIEpvYiBQb3N0aW5nXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gY3JlYXRlIGpvYiBwb3N0aW5ncy4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aXRsZSB8fCB0eXBlb2YgdGl0bGUgIT09ICdzdHJpbmcnIHx8IHRpdGxlLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJKb2IgdGl0bGUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBkZXNjcmlwdGlvbiAhPT0gJ3N0cmluZycgfHwgZGVzY3JpcHRpb24udHJpbSgpID09PSAnJykpIHsgLy8gTGluZSAxMDA5XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdEZXNjcmlwdGlvbiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfSBlbHNlIGlmIChkZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7IFxyXG4gICAgICAgIGNsYXVzZXMucHVzaCgnZGVzY3JpcHRpb24gPSA/Jyk7IFxyXG4gICAgICAgIHVwZGF0ZVBhcmFtcy5wdXNoKGRlc2NyaXB0aW9uKTsgXHJcbiAgICB9XHJcbiAgICBpZiAocmVxdWlyZW1lbnRzICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmVtZW50cyAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1JlcXVpcmVtZW50cyBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHJlcXVpcmVtZW50cyAhPT0gdW5kZWZpbmVkKSB7IFxyXG4gICAgICAgIGNsYXVzZXMucHVzaCgncmVxdWlyZW1lbnRzID0gPycpO1xyXG4gICAgICAgIHVwZGF0ZVBhcmFtcy5wdXNoKHJlcXVpcmVtZW50cyk7XHJcbiAgICB9XHJcbiAgICBpZiAoc3RhdHVzICE9PSB1bmRlZmluZWQpIHsgY2xhdXNlcy5wdXNoKCdzdGF0dXMgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKHN0YXR1cyk7IH1cclxuICAgIFxyXG4gICAgLy8gc3VwZXJfYWRtaW4gY2FuIGNoYW5nZSBsb2NhdGlvbl9pZC4gbG9jYXRpb25fYWRtaW4gY2Fubm90IGNoYW5nZSBsb2NhdGlvbl9pZCBvciBjaGFuZ2UgdG8gZGlmZmVyZW50IGxvY2F0aW9uXHJcbiAgICBpZiAobG9jYXRpb25faWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGlmIChyb2xlID09PSAnc3VwZXJfYWRtaW4nKSB7XHJcbiAgICAgICAgICAgIGNsYXVzZXMucHVzaCgnbG9jYXRpb25faWQgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKGxvY2F0aW9uX2lkKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICAgICAgaWYgKGxvY2F0aW9uX2lkICE9PSBjdXJyZW50VXNlckxvY2F0aW9uSWQgJiYgbG9jYXRpb25faWQgIT09IG51bGwpIHsgLy8gbG9jYXRpb25faWQgY2FuIGJlIG51bGwgKGNvbXBhbnktd2lkZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gY2Fubm90IGNoYW5nZSBqb2IgcG9zdGluZyBsb2NhdGlvbiB0byBhbm90aGVyIGxvY2F0aW9uLicgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWYgbG9jYXRpb24gYWRtaW4gdXBkYXRlcyBqb2IgcG9zdGluZywgYW5kIGl0J3MgdGhlaXIgbG9jYXRpb24sIG9yIHNldHRpbmcgdG8gbnVsbCwgaXQncyBhbGxvd2VkXHJcbiAgICAgICAgICAgIGNsYXVzZXMucHVzaCgnbG9jYXRpb25faWQgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKGxvY2F0aW9uX2lkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlmIChjbGF1c2VzLmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ05vIGZpZWxkcyBwcm92aWRlZCBmb3IgdXBkYXRlLicgfSk7IH1cclxuXHJcbiAgICB1cGRhdGVTcWwgKz0gY2xhdXNlcy5qb2luKCcsICcpICsgJyBXSEVSRSBqb2JfcG9zdGluZ19pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JztcclxuICAgIHVwZGF0ZVBhcmFtcy5wdXNoKGlkLCBjb21wYW55SWQpO1xyXG5cclxuICAgIC8vIEFkZGl0aW9uYWwgc2VjdXJpdHkgZm9yIGxvY2F0aW9uX2FkbWluOiBlbnN1cmUgdGhleSBvbmx5IHVwZGF0ZSB0aGVpciBvd24gbG9jYXRpb24ncyBwb3N0aW5nc1xyXG4gICAgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICB1cGRhdGVTcWwgKz0gJyBBTkQgKGxvY2F0aW9uX2lkID0gPyBPUiBsb2NhdGlvbl9pZCBJUyBOVUxMKSc7IC8vIEFsbG93IHVwZGF0aW5nIHVuYXNzaWduZWQgam9icyB0b29cclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bih1cGRhdGVTcWwsIHVwZGF0ZVBhcmFtcywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgdXBkYXRpbmcgam9iIHBvc3Rpbmc6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBqb2IgcG9zdGluZy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdKb2IgcG9zdGluZyBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gdXBkYXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdKb2IgcG9zdGluZyB1cGRhdGVkIHN1Y2Nlc3NmdWxseSEnIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEdFVCAvYXBpL2pvYi1wb3N0aW5nc1xyXG4gKiBSZXRyaWV2ZXMgam9iIHBvc3RpbmdzLlxyXG4gKiBDYW4gZmlsdGVyIGJ5IGxvY2F0aW9uX2lkIGFuZCBzdGF0dXMuXHJcbiAqIFJlcXVpcmVzIHN1cGVyX2FkbWluIG9yIGxvY2F0aW9uX2FkbWluLlxyXG4gKi9cclxuYXBwLmdldCgnL2FwaS9qb2ItcG9zdGluZ3MnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBzdGF0dXMsIGxvY2F0aW9uX2lkIH0gPSByZXEucXVlcnk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICBsZXQgc3FsID0gJ1NFTEVDVCAqIEZST00gSm9iUG9zdGluZ3MgV0hFUkUgY29tcGFueV9pZCA9ID8nO1xyXG4gICAgY29uc3QgcGFyYW1zID0gW2NvbXBhbnlJZF07XHJcblxyXG4gICAgLy8gQXV0aG9yaXphdGlvbjogc3VwZXJfYWRtaW4gc2VlcyBhbGwsIGxvY2F0aW9uX2FkbWluIHNlZXMgdGhlaXIgbG9jYXRpb24ncyBwb3N0aW5nc1xyXG4gICAgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICBpZiAoY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIHNxbCArPSAnIEFORCAobG9jYXRpb25faWQgPSA/IE9SIGxvY2F0aW9uX2lkIElTIE5VTEwpJzsgLy8gTG9jYXRpb24gYWRtaW4gc2VlcyB0aGVpciBsb2NhdGlvbidzIHBvc3RpbmdzIG9yIGNvbXBhbnktd2lkZVxyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gbm90IGFzc2lnbmVkIHRvIGEgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdlbXBsb3llZScpIHtcclxuICAgICAgICAvLyBFbXBsb3llZXMgZ2VuZXJhbGx5IHNob3VsZG4ndCBzZWUgam9iIHBvc3RpbmdzIGxpc3QgdmlhIHRoaXMgYWRtaW4gQVBJXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgdG8gdmlldyBqb2IgcG9zdGluZ3MuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbnB1dCB2YWxpZGF0aW9uIGZvciBxdWVyeSBwYXJhbWV0ZXJzXHJcbiAgICBjb25zdCBhbGxvd2VkU3RhdHVzZXMgPSBbJ09wZW4nLCAnQ2xvc2VkJywgJ0ZpbGxlZCddOyAvLyBBc3N1bWluZyB0aGVzZSBhcmUgeW91ciB2YWxpZCBzdGF0dXNlc1xyXG4gICAgaWYgKHN0YXR1cyAmJiAhYWxsb3dlZFN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgam9iIHBvc3Rpbmcgc3RhdHVzIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICYmIGlzTmFOKHBhcnNlSW50KGxvY2F0aW9uX2lkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgbG9jYXRpb24gSUQgZmlsdGVyIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlmIChzdGF0dXMpIHtcclxuICAgICAgICBzcWwgKz0gJyBBTkQgc3RhdHVzID0gPyc7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goc3RhdHVzKTtcclxuICAgIH1cclxuICAgIC8vIE9ubHkgc3VwZXIgYWRtaW4gY2FuIGZpbHRlciBieSBhbnkgbG9jYXRpb25faWQgYmV5b25kIHRoZWlyIG93biBzY29wZVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICYmIHJvbGUgPT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgbG9jYXRpb25faWQgPSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIuYWxsKHNxbCwgcGFyYW1zLCAoZXJyLCByb3dzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgam9iIHBvc3RpbmdzOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIGpvYiBwb3N0aW5ncy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIHJlcy5qc29uKHJvd3MpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFBVVCAvYXBpL2pvYi1wb3N0aW5ncy86aWRcclxuICogVXBkYXRlcyBhIGpvYiBwb3N0aW5nLlxyXG4gKiBSZXF1aXJlcyBzdXBlcl9hZG1pbiBvciBsb2NhdGlvbl9hZG1pbiAoZm9yIHRoZWlyIGxvY2F0aW9uJ3MgcG9zdGluZ3MpLlxyXG4gKi9cclxuYXBwLnB1dCgnL2FwaS9qb2ItcG9zdGluZ3MvOmlkJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IHRpdGxlLCBkZXNjcmlwdGlvbiwgcmVxdWlyZW1lbnRzLCBzdGF0dXMsIGxvY2F0aW9uX2lkIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIEpvYiBQb3N0aW5nIFVwZGF0ZVxyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicgJiYgcm9sZSAhPT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogT25seSBhZG1pbnMgY2FuIHVwZGF0ZSBqb2IgcG9zdGluZ3MuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICghaWQgfHwgaXNOYU4ocGFyc2VJbnQoaWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBqb2IgcG9zdGluZyBJRCBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRpdGxlICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiB0aXRsZSAhPT0gJ3N0cmluZycgfHwgdGl0bGUudHJpbSgpID09PSAnJykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0pvYiB0aXRsZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBkZXNjcmlwdGlvbiAhPT0gJ3N0cmluZycgfHwgZGVzY3JpcHRpb24udHJpbSgpID09PSAnJykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0Rlc2NyaXB0aW9uIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocmVxdWlyZW1lbnRzICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmVtZW50cyAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1JlcXVpcmVtZW50cyBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhbGxvd2VkU3RhdHVzZXMgPSBbJ09wZW4nLCAnQ2xvc2VkJywgJ0ZpbGxlZCddO1xyXG4gICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkICYmICFhbGxvd2VkU3RhdHVzZXMuaW5jbHVkZXMoc3RhdHVzKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBzdGF0dXMgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBsb2NhdGlvbl9pZCAhPT0gJ251bWJlcicgJiYgbG9jYXRpb25faWQgIT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0xvY2F0aW9uIElEIG11c3QgYmUgYSBudW1iZXIgb3IgbnVsbCBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBsZXQgdXBkYXRlU3FsID0gJ1VQREFURSBKb2JQb3N0aW5ncyBTRVQgJztcclxuICAgIGNvbnN0IHVwZGF0ZVBhcmFtcyA9IFtdO1xyXG4gICAgY29uc3QgY2xhdXNlcyA9IFtdO1xyXG5cclxuICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgndGl0bGUgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKHRpdGxlKTsgfVxyXG4gICAgLy8gTGluZSAxMDA5IGZpeDogRW5zdXJlIHRoaXMgbGluZSBhbmQgc3Vycm91bmRpbmcgbG9naWMgaXMgY29ycmVjdC5cclxuICAgIGlmIChkZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgZGVzY3JpcHRpb24gIT09ICdzdHJpbmcnIHx8IGRlc2NyaXB0aW9uLnRyaW0oKSA9PT0gJycpKSB7IC8vIExpbmUgMTAwOVxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRGVzY3JpcHRpb24gbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH0gZWxzZSBpZiAoZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkgeyBcclxuICAgICAgICBjbGF1c2VzLnB1c2goJ2Rlc2NyaXB0aW9uID0gPycpOyBcclxuICAgICAgICB1cGRhdGVQYXJhbXMucHVzaChkZXNjcmlwdGlvbik7IFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAocmVxdWlyZW1lbnRzICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmVtZW50cyAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1JlcXVpcmVtZW50cyBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHJlcXVpcmVtZW50cyAhPT0gdW5kZWZpbmVkKSB7IFxyXG4gICAgICAgIGNsYXVzZXMucHVzaCgncmVxdWlyZW1lbnRzID0gPycpO1xyXG4gICAgICAgIHVwZGF0ZVBhcmFtcy5wdXNoKHJlcXVpcmVtZW50cyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ3N0YXR1cyA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2goc3RhdHVzKTsgfVxyXG4gICAgXHJcbiAgICAvLyBzdXBlcl9hZG1pbiBjYW4gY2hhbmdlIGxvY2F0aW9uX2lkLiBsb2NhdGlvbl9hZG1pbiBjYW5ub3QgY2hhbmdlIGxvY2F0aW9uX2lkIG9yIGNoYW5nZSB0byBkaWZmZXJlbnQgbG9jYXRpb25cclxuICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgaWYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdsb2NhdGlvbl9pZCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgICAgICBpZiAobG9jYXRpb25faWQgIT09IGN1cnJlbnRVc2VyTG9jYXRpb25JZCAmJiBsb2NhdGlvbl9pZCAhPT0gbnVsbCkgeyAvLyBsb2NhdGlvbl9pZCBjYW4gYmUgbnVsbCAoY29tcGFueS13aWRlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBMb2NhdGlvbiBhZG1pbiBjYW5ub3QgY2hhbmdlIGpvYiBwb3N0aW5nIGxvY2F0aW9uIHRvIGFub3RoZXIgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiBsb2NhdGlvbiBhZG1pbiB1cGRhdGVzIGpvYiBwb3N0aW5nLCBhbmQgaXQncyB0aGVpciBsb2NhdGlvbiwgb3Igc2V0dGluZyB0byBudWxsLCBpdCdzIGFsbG93ZWRcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdsb2NhdGlvbl9pZCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgaWYgKGNsYXVzZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm8gZmllbGRzIHByb3ZpZGVkIGZvciB1cGRhdGUuJyB9KTsgfVxyXG5cclxuICAgIHVwZGF0ZVNxbCArPSBjbGF1c2VzLmpvaW4oJywgJykgKyAnIFdIRVJFIGpvYl9wb3N0aW5nX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nO1xyXG4gICAgdXBkYXRlUGFyYW1zLnB1c2goaWQsIGNvbXBhbnlJZCk7XHJcblxyXG4gICAgLy8gQWRkaXRpb25hbCBzZWN1cml0eSBmb3IgbG9jYXRpb25fYWRtaW46IGVuc3VyZSB0aGV5IG9ubHkgdXBkYXRlIHRoZWlyIG93biBsb2NhdGlvbidzIHBvc3RpbmdzXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHVwZGF0ZVNxbCArPSAnIEFORCAobG9jYXRpb25faWQgPSA/IE9SIGxvY2F0aW9uX2lkIElTIE5VTEwpJzsgLy8gQWxsb3cgdXBkYXRpbmcgdW5hc3NpZ25lZCBqb2JzIHRvb1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VyTG9jYXRpb25JZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIucnVuKHVwZGF0ZVNxbCwgdXBkYXRlUGFyYW1zLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciB1cGRhdGluZyBqb2IgcG9zdGluZzpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIGpvYiBwb3N0aW5nLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0pvYiBwb3N0aW5nIG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byB1cGRhdGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0pvYiBwb3N0aW5nIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IScgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vKipcclxuICogREVMRVRFIC9hcGkvam9iLXBvc3RpbmdzLzppZFxyXG4gKiBEZWxldGVzIGEgam9iIHBvc3RpbmcuXHJcbiAqIFJlcXVpcmVzIHN1cGVyX2FkbWluIG9yIGxvY2F0aW9uX2FkbWluIChmb3IgdGhlaXIgbG9jYXRpb24ncyBwb3N0aW5ncykuXHJcbiAqL1xyXG5hcHAuZGVsZXRlKCcvYXBpL2pvYi1wb3N0aW5ncy86aWQnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIElEIHBhcmFtZXRlclxyXG4gICAgaWYgKCFpZCB8fCBpc05hTihwYXJzZUludChpZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGpvYiBwb3N0aW5nIElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicgJiYgcm9sZSAhPT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogT25seSBhZG1pbnMgY2FuIGRlbGV0ZSBqb2IgcG9zdGluZ3MuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc3FsID0gJ0RFTEVURSBGUk9NIEpvYlBvc3RpbmdzIFdIRVJFIGpvYl9wb3N0aW5nX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nO1xyXG4gICAgY29uc3QgcGFyYW1zID0gW2lkLCBjb21wYW55SWRdO1xyXG5cclxuICAgIC8vIEFkZGl0aW9uYWwgc2VjdXJpdHkgZm9yIGxvY2F0aW9uX2FkbWluOiBlbnN1cmUgdGhleSBvbmx5IGRlbGV0ZSB0aGVpciBvd24gbG9jYXRpb24ncyBwb3N0aW5nc1xyXG4gICAgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICBzcWwgKz0gJyBBTkQgKGxvY2F0aW9uX2lkID0gPyBPUiBsb2NhdGlvbl9pZCBJUyBOVUxMKSc7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4oc3FsLCBwYXJhbXMsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGRlbGV0aW5nIGpvYiBwb3N0aW5nOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgam9iIHBvc3RpbmcuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnSm9iIHBvc3Rpbmcgbm90IGZvdW5kIG9yIG5vdCBhdXRob3JpemVkIHRvIGRlbGV0ZS4nIH0pOyB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDQpLnNlbmQoKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcblxyXG4vLyBVcGRhdGUgQXBwbGljYW50IEFQSSBlbmRwb2ludHMgdG8gdXNlIGpvYl9wb3N0aW5nX2lkXHJcbmFwcC5wb3N0KCcvYXBpL2FwcGxpY2FudHMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBqb2JfcG9zdGluZ19pZCwgZnVsbF9uYW1lLCBlbWFpbCwgbm90ZXMsIGxvY2F0aW9uX2lkLCBwaG9uZV9udW1iZXIgfSA9IHJlcS5ib2R5OyAvLyBBZGRlZCBwaG9uZV9udW1iZXJcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG4gICAgY29uc3QgYXBwbGljYXRpb25fZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsgLy8gQ3VycmVudCBkYXRlL3RpbWUgZm9yIGFwcGxpY2F0aW9uXHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgQWRkaW5nIEFwcGxpY2FudFxyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicgJiYgcm9sZSAhPT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogT25seSBhZG1pbnMgY2FuIGFkZCBhcHBsaWNhbnRzLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGpvYl9wb3N0aW5nX2lkICE9PSAnbnVtYmVyJyB8fCBqb2JfcG9zdGluZ19pZCA8PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdBIHZhbGlkIGpvYiBwb3N0aW5nIElEIGlzIHJlcXVpcmVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWZ1bGxfbmFtZSB8fCB0eXBlb2YgZnVsbF9uYW1lICE9PSAnc3RyaW5nJyB8fCBmdWxsX25hbWUudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkZ1bGwgbmFtZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWVtYWlsIHx8ICFpc1ZhbGlkRW1haWwoZW1haWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBlbWFpbCBhZGRyZXNzIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gQmFzaWMgcGhvbmUgbnVtYmVyIHZhbGlkYXRpb24gKHNpbXBsZSBjaGVjayBmb3Igbm9uLWVtcHR5IHN0cmluZywgY291bGQgYmUgbW9yZSBjb21wbGV4IHdpdGggcmVnZXgpXHJcbiAgICBpZiAoIXBob25lX251bWJlciB8fCB0eXBlb2YgcGhvbmVfbnVtYmVyICE9PSAnc3RyaW5nJyB8fCBwaG9uZV9udW1iZXIudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlBob25lIG51bWJlciBpcyByZXF1aXJlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmIChub3RlcyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBub3RlcyAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ05vdGVzIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBsb2NhdGlvbl9pZCAhPT0gJ251bWJlcicgJiYgbG9jYXRpb25faWQgIT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0xvY2F0aW9uIElEIG11c3QgYmUgYSBudW1iZXIgb3IgbnVsbCBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBWZXJpZnkgam9iX3Bvc3RpbmdfaWQgYmVsb25ncyB0byB0aGUgY29tcGFueSwgYW5kIGZvciBsb2NhdGlvbl9hZG1pbiwgdG8gdGhlaXIgbG9jYXRpb25cclxuICAgIGRiLmdldCgnU0VMRUNUIGpvYl9wb3N0aW5nX2lkLCBsb2NhdGlvbl9pZCBGUk9NIEpvYlBvc3RpbmdzIFdIRVJFIGpvYl9wb3N0aW5nX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nLCBbam9iX3Bvc3RpbmdfaWQsIGNvbXBhbnlJZF0sIChlcnIsIGpvYlBvc3RpbmcpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciB2ZXJpZnlpbmcgam9iIHBvc3Rpbmc6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3Igd2hlbiB2ZXJpZnlpbmcgam9iIHBvc3RpbmcuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAoIWpvYlBvc3RpbmcpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdKb2IgUG9zdGluZyBub3QgZm91bmQgb3IgZG9lcyBub3QgYmVsb25nIHRvIHlvdXIgY29tcGFueS4nIH0pOyB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTG9jYXRpb24gYWRtaW4gY2FuIG9ubHkgYWRkIGFwcGxpY2FudHMgdG8gam9icyBpbiB0aGVpciBhc3NpZ25lZCBsb2NhdGlvbiBvciB1bmFzc2lnbmVkIGpvYnNcclxuICAgICAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJyAmJiBqb2JQb3N0aW5nLmxvY2F0aW9uX2lkICE9PSBjdXJyZW50VXNlckxvY2F0aW9uSWQgJiYgam9iUG9zdGluZy5sb2NhdGlvbl9pZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIGNhbm5vdCBhZGQgYXBwbGljYW50cyB0byBqb2JzIG91dHNpZGUgdGhlaXIgYXNzaWduZWQgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRiLnJ1bihcclxuICAgICAgICAgICAgJ0lOU0VSVCBJTlRPIEFwcGxpY2FudHMgKGNvbXBhbnlfaWQsIGxvY2F0aW9uX2lkLCBqb2JfcG9zdGluZ19pZCwgZnVsbF9uYW1lLCBlbWFpbCwgcGhvbmVfbnVtYmVyLCBub3RlcywgYXBwbGljYXRpb25fZGF0ZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KScsXHJcbiAgICAgICAgICAgIFtjb21wYW55SWQsIGxvY2F0aW9uX2lkIHx8IGpvYlBvc3RpbmcubG9jYXRpb25faWQsIGpvYl9wb3N0aW5nX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBwaG9uZV9udW1iZXIsIG5vdGVzLCBhcHBsaWNhdGlvbl9kYXRlXSwgLy8gVXNlIGxvY2F0aW9uX2lkIGZyb20gcGF5bG9hZCBvciBqb2IgcG9zdGluZ1xyXG4gICAgICAgICAgICBmdW5jdGlvbihpbnNlcnRFcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbnNlcnRFcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGNyZWF0aW5nIGFwcGxpY2FudDpcIiwgaW5zZXJ0RXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGFwcGxpY2FudC4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiAnQXBwbGljYW50IGFkZGVkIHN1Y2Nlc3NmdWxseSEnLCBhcHBsaWNhbnRJZDogdGhpcy5sYXN0SUQgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLmdldCgnL2FwaS9hcHBsaWNhbnRzJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgam9iX3Bvc3RpbmdfaWQsIHN0YXR1cywgbG9jYXRpb25faWQgfSA9IHJlcS5xdWVyeTsgLy8gQWRkZWQgam9iX3Bvc3RpbmdfaWQsIHN0YXR1cywgbG9jYXRpb25faWQgZmlsdGVyc1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgbGV0IHNxbCA9IGBTRUxFQ1QgQXBwbGljYW50cy4qLCBKb2JQb3N0aW5ncy50aXRsZSBBUyBqb2JfdGl0bGVfbmFtZVxyXG4gICAgICAgICAgICAgICBGUk9NIEFwcGxpY2FudHNcclxuICAgICAgICAgICAgICAgTEVGVCBKT0lOIEpvYlBvc3RpbmdzIE9OIEFwcGxpY2FudHMuam9iX3Bvc3RpbmdfaWQgPSBKb2JQb3N0aW5ncy5qb2JfcG9zdGluZ19pZFxyXG4gICAgICAgICAgICAgICBXSEVSRSBBcHBsaWNhbnRzLmNvbXBhbnlfaWQgPSA/YDtcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtjb21wYW55SWRdO1xyXG5cclxuICAgIC8vIElucHV0IHZhbGlkYXRpb24gZm9yIHF1ZXJ5IHBhcmFtZXRlcnNcclxuICAgIGNvbnN0IGFsbG93ZWRTdGF0dXNlcyA9IFsnQXBwbGllZCcsICdJbnRlcnZpZXdpbmcnLCAnUmVqZWN0ZWQnLCAnSGlyZWQnXTsgLy8gRGVmaW5lIHZhbGlkIHN0YXR1c2VzXHJcbiAgICBpZiAoc3RhdHVzICYmICFhbGxvd2VkU3RhdHVzZXMuaW5jbHVkZXMoc3RhdHVzKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBhcHBsaWNhbnQgc3RhdHVzIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGpvYl9wb3N0aW5nX2lkICYmIGlzTmFOKHBhcnNlSW50KGpvYl9wb3N0aW5nX2lkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgam9iIHBvc3RpbmcgSUQgZmlsdGVyIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25faWQgJiYgaXNOYU4ocGFyc2VJbnQobG9jYXRpb25faWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBsb2NhdGlvbiBJRCBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc3RhdHVzKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIEFwcGxpY2FudHMuc3RhdHVzID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goc3RhdHVzKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIGlmIChjdXJyZW50VXNlckxvY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgc3FsICs9IGAgQU5EIChBcHBsaWNhbnRzLmxvY2F0aW9uX2lkID0gPyBPUiBBcHBsaWNhbnRzLmxvY2F0aW9uX2lkIElTIE5VTEwpYDsgLy8gTG9jYXRpb24gYWRtaW4gc2VlcyBhcHBsaWNhbnRzIGZvciB0aGVpciBsb2NhdGlvbiBvciB1bmFzc2lnbmVkXHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VyTG9jYXRpb25JZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBMb2NhdGlvbiBhZG1pbiBub3QgYXNzaWduZWQgdG8gYSBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ2VtcGxveWVlJykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBBcHBsaWNhbnRzLnVzZXJfaWQgPSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlcklkKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgdG8gdmlldyBhcHBsaWNhbnRzLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQXBwbHkgam9iX3Bvc3RpbmdfaWQgZmlsdGVyIGlmIHByb3ZpZGVkXHJcbiAgICBpZiAoam9iX3Bvc3RpbmdfaWQpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgQXBwbGljYW50cy5qb2JfcG9zdGluZ19pZCA9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGpvYl9wb3N0aW5nX2lkKTtcclxuICAgIH1cclxuICAgIC8vIEFwcGx5IGxvY2F0aW9uIGZpbHRlciBmcm9tIHF1ZXJ5IHBhcmFtcyBmb3Igc3VwZXJfYWRtaW5cclxuICAgIGlmIChsb2NhdGlvbl9pZCAmJiByb2xlID09PSAnc3VwZXJfYWRtaW4nKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIEFwcGxpY2FudHMubG9jYXRpb25faWQgPSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGRiLmFsbChzcWwsIHBhcmFtcywgKGVyciwgcm93cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGZldGNoaW5nIGFwcGxpY2FudHM6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgYXBwbGljYW50cy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIHJlcy5qc29uKHJvd3MpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFBVVCAvYXBpL2FwcGxpY2FudHMvOmlkXHJcbiAqIFVwZGF0ZXMgYW4gYXBwbGljYW50J3MgZGV0YWlscyAoZS5nLiwgc3RhdHVzLCBub3RlcykuXHJcbiAqL1xyXG5hcHAucHV0KCcvYXBpL2FwcGxpY2FudHMvOmlkJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IGZ1bGxfbmFtZSwgZW1haWwsIHN0YXR1cywgcmVzdW1lX3VybCwgbm90ZXMsIGxvY2F0aW9uX2lkLCBqb2JfcG9zdGluZ19pZCwgcGhvbmVfbnVtYmVyIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIEFwcGxpY2FudCBVcGRhdGVcclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nICYmIHJvbGUgIT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgYWRtaW5zIGNhbiB1cGRhdGUgYXBwbGljYW50IHJlY29yZHMuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICghaWQgfHwgaXNOYU4ocGFyc2VJbnQoaWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBhcHBsaWNhbnQgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChmdWxsX25hbWUgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIGZ1bGxfbmFtZSAhPT0gJ3N0cmluZycgfHwgZnVsbF9uYW1lLnRyaW0oKSA9PT0gJycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nIGlmIHByb3ZpZGVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGVtYWlsICE9PSB1bmRlZmluZWQgJiYgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgbXVzdCBiZSBwcm92aWRlZCBpZiBjaGFuZ2luZyBlbWFpbC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmIChwaG9uZV9udW1iZXIgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIHBob25lX251bWJlciAhPT0gJ3N0cmluZycgfHwgcGhvbmVfbnVtYmVyLnRyaW0oKSA9PT0gJycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiUGhvbmUgbnVtYmVyIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nIGlmIHByb3ZpZGVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYWxsb3dlZFN0YXR1c2VzID0gWydBcHBsaWVkJywgJ0ludGVydmlld2luZycsICdSZWplY3RlZCcsICdIaXJlZCddO1xyXG4gICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkICYmICFhbGxvd2VkU3RhdHVzZXMuaW5jbHVkZXMoc3RhdHVzKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBzdGF0dXMgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChyZXN1bWVfdXJsICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlc3VtZV91cmwgIT09ICdzdHJpbmcnKSB7IC8vIEFzc3VtaW5nIHJlc3VtZV91cmwgaXMgYSBzdHJpbmcgVVJMXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdSZXN1bWUgVVJMIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChub3RlcyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBub3RlcyAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ05vdGVzIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBsb2NhdGlvbl9pZCAhPT0gJ251bWJlcicgJiYgbG9jYXRpb25faWQgIT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0xvY2F0aW9uIElEIG11c3QgYmUgYSBudW1iZXIgb3IgbnVsbCBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGpvYl9wb3N0aW5nX2lkICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGpvYl9wb3N0aW5nX2lkICE9PSAnbnVtYmVyJyAmJiBqb2JfcG9zdGluZ19pZCAhPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSm9iIHBvc3RpbmcgSUQgbXVzdCBiZSBhIG51bWJlciBvciBudWxsIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGxldCB1cGRhdGVTcWwgPSAnVVBEQVRFIEFwcGxpY2FudHMgU0VUICc7XHJcbiAgICBjb25zdCB1cGRhdGVQYXJhbXMgPSBbXTtcclxuICAgIGNvbnN0IGNsYXVzZXMgPSBbXTtcclxuXHJcbiAgICBpZiAoZnVsbF9uYW1lICE9PSB1bmRlZmluZWQpIHsgY2xhdXNlcy5wdXNoKCdmdWxsX25hbWUgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKGZ1bGxfbmFtZSk7IH1cclxuICAgIGlmIChlbWFpbCAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgnZW1haWwgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKGVtYWlsKTsgfVxyXG4gICAgaWYgKHBob25lX251bWJlciAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgncGhvbmVfbnVtYmVyID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChwaG9uZV9udW1iZXIpOyB9XHJcbiAgICBpZiAoc3RhdHVzICE9PSB1bmRlZmluZWQpIHsgY2xhdXNlcy5wdXNoKCdzdGF0dXMgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKHN0YXR1cyk7IH1cclxuICAgIGlmIChyZXN1bWVfdXJsICE9PSB1bmRlZmluZWQpIHsgY2xhdXNlcy5wdXNoKCdyZXN1bWVfdXJsID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChyZXN1bWVfdXJsKTsgfVxyXG4gICAgaWYgKG5vdGVzICE9PSB1bmRlZmluZWQpIHsgY2xhdXNlcy5wdXNoKCdub3RlcyA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2gobm90ZXMpOyB9XHJcbiAgICBcclxuICAgIC8vIEFkbWlucyBjYW4gdXBkYXRlIGxvY2F0aW9uX2lkIG9yIGpvYl9wb3N0aW5nX2lkLCB3aXRoIHJlc3RyaWN0aW9ucyBmb3IgbG9jYXRpb25fYWRtaW5cclxuICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgaWYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdsb2NhdGlvbl9pZCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgICAgICBpZiAobG9jYXRpb25faWQgIT09IGN1cnJlbnRVc2VyTG9jYXRpb25JZCAmJiBsb2NhdGlvbl9pZCAhPT0gbnVsbCkgeyAvLyBsb2NhdGlvbl9pZCBjYW4gYmUgbnVsbCAoY29tcGFueS13aWRlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBMb2NhdGlvbiBhZG1pbiBjYW5ub3QgYXNzaWduIGFwcGxpY2FudHMgdG8gYW5vdGhlciBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIElmIGxvY2F0aW9uIGFkbWluIHVwZGF0ZXMgYXBwbGljYW50IGxvY2F0aW9uLCBhbmQgaXQncyB0aGVpciBsb2NhdGlvbiwgb3Igc2V0dGluZyB0byBudWxsLCBpdCdzIGFsbG93ZWRcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdsb2NhdGlvbl9pZCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChqb2JfcG9zdGluZ19pZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgIGlmIChyb2xlID09PSAnc3VwZXJfYWRtaW4nKSB7XHJcbiAgICAgICAgICAgIGNsYXVzZXMucHVzaCgnam9iX3Bvc3RpbmdfaWQgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKGpvYl9wb3N0aW5nX2lkKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICAgICAgLy8gVmVyaWZ5IG5ldyBqb2JfcG9zdGluZ19pZCBiZWxvbmdzIHRvIHRoZSBsb2NhdGlvbiBhZG1pbidzIGFzc2lnbmVkIGxvY2F0aW9uIG9yIGlzIGNvbXBhbnktd2lkZVxyXG4gICAgICAgICAgICBkYi5nZXQoJ1NFTEVDVCBqb2JfcG9zdGluZ19pZCwgbG9jYXRpb25faWQgRlJPTSBKb2JQb3N0aW5ncyBXSEVSRSBqb2JfcG9zdGluZ19pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JywgW2pvYl9wb3N0aW5nX2lkLCBjb21wYW55SWRdLCAoZXJyLCBqb2IpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRCIGVycm9yIHZlcmlmeWluZyBqb2IgcG9zdGluZyBmb3IgdXBkYXRlOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIHZlcmlmeWluZyBqb2IgcG9zdGluZy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgICAgICAgICAgaWYgKCFqb2IpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdKb2IgUG9zdGluZyBub3QgZm91bmQgb3IgZG9lcyBub3QgYmVsb25nIHRvIHlvdXIgY29tcGFueS4nIH0pOyB9XHJcbiAgICAgICAgICAgICAgICBpZiAoam9iLmxvY2F0aW9uX2lkICE9PSBudWxsICYmIGpvYi5sb2NhdGlvbl9pZCAhPT0gY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBMb2NhdGlvbiBhZG1pbiBjYW5ub3QgYXNzaWduIGFwcGxpY2FudHMgdG8gam9icyBvdXRzaWRlIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uLicgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2pvYl9wb3N0aW5nX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChqb2JfcG9zdGluZ19pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZiAoY2xhdXNlcy5sZW5ndGggPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdObyBmaWVsZHMgcHJvdmlkZWQgZm9yIHVwZGF0ZS4nIH0pOyB9XHJcblxyXG4gICAgdXBkYXRlU3FsICs9IGNsYXVzZXMuam9pbignLCAnKSArICcgV0hFUkUgYXBwbGljYW50X2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nO1xyXG4gICAgdXBkYXRlUGFyYW1zLnB1c2goaWQsIGNvbXBhbnlJZCk7XHJcblxyXG4gICAgLy8gRm9yIGxvY2F0aW9uX2FkbWluLCBlbnN1cmUgdGhleSBjYW4gb25seSB1cGRhdGUgYXBwbGljYW50cyB3aXRoaW4gdGhlaXIgYXNzaWduZWQgbG9jYXRpb25cclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgdXBkYXRlU3FsICs9ICcgQU5EIChsb2NhdGlvbl9pZCA9ID8gT1IgbG9jYXRpb25faWQgSVMgTlVMTCknOyAvLyBBbGxvdyB1cGRhdGluZyB1bmFzc2lnbmVkIGFwcGxpY2FudHMgdG9vXHJcbiAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4odXBkYXRlU3FsLCB1cGRhdGVQYXJhbXMsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHVwZGF0aW5nIGFwcGxpY2FudDpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIGFwcGxpY2FudC4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdBcHBsaWNhbnQgbm90IGZvdW5kIG9yIG5vdCBhdXRob3JpemVkIHRvIHVwZGF0ZS4nIH0pOyB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnQXBwbGljYW50IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IScgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5cclxuLyoqXHJcbiAqIERFTEVURSAvYXBpL2FwcGxpY2FudHMvOmlkXHJcbiAqIERlbGV0ZXMgYW4gYXBwbGljYW50LlxyXG4gKiBSZXF1aXJlcyBzdXBlcl9hZG1pbiBvciBsb2NhdGlvbl9hZG1pbiAoZm9yIHRoZWlyIGxvY2F0aW9uJ3MgYXBwbGljYW50cykuXHJcbiAqL1xyXG5hcHAuZGVsZXRlKCcvYXBpL2FwcGxpY2FudHMvOmlkJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBJRCBwYXJhbWV0ZXJcclxuICAgIGlmICghaWQgfHwgaXNOYU4ocGFyc2VJbnQoaWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBhcHBsaWNhbnQgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gZGVsZXRlIGFwcGxpY2FudHMuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc3FsID0gJ0RFTEVURSBGUk9NIEFwcGxpY2FudHMgV0hFUkUgYXBwbGljYW50X2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nO1xyXG4gICAgY29uc3QgcGFyYW1zID0gW2lkLCBjb21wYW55SWRdO1xyXG5cclxuICAgIC8vIEFkZGl0aW9uYWwgc2VjdXJpdHkgZm9yIGxvY2F0aW9uX2FkbWluOiBlbnN1cmUgdGhleSBvbmx5IGRlbGV0ZSBhcHBsaWNhbnRzIGluIHRoZWlyIG93biBsb2NhdGlvblxyXG4gICAgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICBzcWwgKz0gJyBBTkQgKGxvY2F0aW9uX2lkID0gPyBPUiBsb2NhdGlvbl9pZCBJUyBOVUxMKSc7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4oc3FsLCBwYXJhbXMsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGRlbGV0aW5nIGFwcGxpY2FudDpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIGFwcGxpY2FudC4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdBcHBsaWNhbnQgbm90IGZvdW5kIG9yIG5vdCBhdXRob3JpemVkIHRvIGRlbGV0ZS4nIH0pOyB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDQpLnNlbmQoKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vIC0tLSBEb2N1bWVudCBNYW5hZ2VtZW50IFJvdXRlcyAtLS1cclxuXHJcbi8qKlxyXG4gKiBQT1NUIC9hcGkvZG9jdW1lbnRzXHJcbiAqIFVwbG9hZHMgKHNhdmVzIG1ldGFkYXRhIGZvcikgYSBuZXcgZG9jdW1lbnQuXHJcbiAqIFJlcXVpcmVzIGF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogTm90ZTogQWN0dWFsIGZpbGUgc3RvcmFnZSBpcyBhc3N1bWVkIHRvIGJlIGhhbmRsZWQgYnkgYSBzZXBhcmF0ZSBzZXJ2aWNlIChlLmcuLCBTMykuXHJcbiAqIFRoaXMgZW5kcG9pbnQgb25seSBzdG9yZXMgdGhlIG1ldGFkYXRhIGFuZCBhIFVSTC5cclxuICovXHJcbmFwcC5wb3N0KCcvYXBpL2RvY3VtZW50cycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IHRpdGxlLCBmaWxlX25hbWUsIGZpbGVfdHlwZSwgZmlsZV91cmwsIGRlc2NyaXB0aW9uIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCB1c2VySWQgfSA9IHJlcS51c2VyO1xyXG4gICAgY29uc3QgdXBsb2FkX2RhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgRG9jdW1lbnQgVXBsb2FkXHJcbiAgICBpZiAoIXRpdGxlIHx8IHR5cGVvZiB0aXRsZSAhPT0gJ3N0cmluZycgfHwgdGl0bGUudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRG9jdW1lbnQgdGl0bGUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWZpbGVfbmFtZSB8fCB0eXBlb2YgZmlsZV9uYW1lICE9PSAnc3RyaW5nJyB8fCBmaWxlX25hbWUudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRmlsZSBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFmaWxlX3R5cGUgfHwgdHlwZW9mIGZpbGVfdHlwZSAhPT0gJ3N0cmluZycgfHwgZmlsZV90eXBlLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ZpbGUgdHlwZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuJyB9KTtcclxuICAgIH1cclxuICAgIC8vIEJhc2ljIFVSTCB2YWxpZGF0aW9uOiBjaGVja3MgZm9yIGh0dHAocykgcHJvdG9jb2wgYW5kIHNvbWUgY29udGVudC4gQ2FuIGJlIG1vcmUgcm9idXN0LlxyXG4gICAgY29uc3QgdXJsUmVnZXggPSAvXmh0dHBzPzpcXC9cXC9bXlxccyQuPyNdLlteXFxzXSokL2k7XHJcbiAgICBpZiAoIWZpbGVfdXJsIHx8IHR5cGVvZiBmaWxlX3VybCAhPT0gJ3N0cmluZycgfHwgIXVybFJlZ2V4LnRlc3QoZmlsZV91cmwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdBIHZhbGlkIGZpbGUgVVJMIChzdGFydGluZyB3aXRoIGh0dHAgb3IgaHR0cHMpIGlzIHJlcXVpcmVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZGVzY3JpcHRpb24gIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdOb3RlcyBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIucnVuKFxyXG4gICAgICAgICdJTlNFUlQgSU5UTyBEb2N1bWVudHMgKGNvbXBhbnlfaWQsIHVzZXJfaWQsIHRpdGxlLCBmaWxlX25hbWUsIGZpbGVfdHlwZSwgZmlsZV91cmwsIGRlc2NyaXB0aW9uLCB1cGxvYWRfZGF0ZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KScsXHJcbiAgICAgICAgW2NvbXBhbnlJZCwgdXNlcklkLCB0aXRsZSwgZmlsZV9uYW1lLCBmaWxlX3R5cGUsIGZpbGVfdXJsLCBkZXNjcmlwdGlvbiwgdXBsb2FkX2RhdGVdLFxyXG4gICAgICAgIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgdXBsb2FkaW5nIGRvY3VtZW50OlwiLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gdXBsb2FkIGRvY3VtZW50IG1ldGFkYXRhLicpKTsgLy8gUGFzcyBlcnJvclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogJ0RvY3VtZW50IG1ldGFkYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseSEnLCBkb2N1bWVudElkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBHRVQgL2FwaS9kb2N1bWVudHNcclxuICogUmV0cmlldmVzIGEgbGlzdCBvZiBkb2N1bWVudHMgZm9yIHRoZSBjb21wYW55LlxyXG4gKiBGaWx0ZXJzIGNhbiBiZSBhZGRlZCAoZS5nLiwgYnkgdXBsb2FkZXIsIGJ5IHR5cGUpLlxyXG4gKiBSZXF1aXJlcyBhdXRoZW50aWNhdGVkIHVzZXIuIFN1cGVyIGFkbWlucyBjYW4gc2VlIGFsbCwgb3RoZXJzIGNhbiBzZWUgb3duIGRvY3VtZW50cy5cclxuICovXHJcbmFwcC5nZXQoJy9hcGkvZG9jdW1lbnRzJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCB1c2VySWQsIHJvbGUgfSA9IHJlcS51c2VyO1xyXG4gICAgXHJcbiAgICBsZXQgc3FsID0gJ1NFTEVDVCAqIEZST00gRG9jdW1lbnRzIFdIRVJFIGNvbXBhbnlfaWQgPSA/JztcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtjb21wYW55SWRdO1xyXG5cclxuICAgIC8vIE5vbi1zdXBlci1hZG1pbnMgb25seSBzZWUgdGhlaXIgb3duIGRvY3VtZW50c1xyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICBzcWwgKz0gJyBBTkQgdXNlcl9pZCA9ID8nO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKHVzZXJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIuYWxsKHNxbCwgcGFyYW1zLCAoZXJyLCByb3dzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgZG9jdW1lbnRzOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIGRvY3VtZW50cy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIHJlcy5qc29uKHJvd3MpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIERFTEVURSAvYXBpL2RvY3VtZW50cy86aWRcclxuICogRGVsZXRlcyBhIGRvY3VtZW50IHJlY29yZC5cclxuICogUmVxdWlyZXMgc3VwZXJfYWRtaW4gb3IgdGhlIHVzZXIgd2hvIHVwbG9hZGVkIGl0LlxyXG4gKi9cclxuYXBwLmRlbGV0ZSgnL2FwaS9kb2N1bWVudHMvOmlkJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgdXNlcklkLCByb2xlIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBJRCBwYXJhbWV0ZXJcclxuICAgIGlmICghaWQgfHwgaXNOYU4ocGFyc2VJbnQoaWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBkb2N1bWVudCBJRCBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzcWwgPSAnREVMRVRFIEZST00gRG9jdW1lbnRzIFdIRVJFIGRvY3VtZW50X2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nO1xyXG4gICAgY29uc3QgcGFyYW1zID0gW2lkLCBjb21wYW55SWRdO1xyXG5cclxuICAgIC8vIE9ubHkgc3VwZXJfYWRtaW4gb3IgdGhlIG9yaWdpbmFsIHVwbG9hZGVyIGNhbiBkZWxldGVcclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nKSB7XHJcbiAgICAgICAgc3FsICs9ICcgQU5EIHVzZXJfaWQgPSA/JztcclxuICAgICAgICBwYXJhbXMucHVzaCh1c2VySWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bihzcWwsIHBhcmFtcywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZGVsZXRpbmcgZG9jdW1lbnQ6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBkb2N1bWVudC4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdEb2N1bWVudCBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwNCkuc2VuZCgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLy8gRmFsbGJhY2sgZm9yIGFueSBvdGhlciBHRVQgcmVxdWVzdCBub3QgaGFuZGxlZCBieSBhbiBBUEkgcm91dGUgKHNlcnZlcyBpbmRleC5odG1sIGZvciBTUEEgYmVoYXZpb3IpXHJcbi8vIFRoaXMgc2hvdWxkIGFsd2F5cyBiZSB0aGUgTEFTVCByb3V0ZSBpbiB5b3VyIEV4cHJlc3MgYXBwXHJcbmFwcC5nZXQoLycqJy8sIChyZXEsIHJlcykgPT4ge1xyXG4gICAgLy8gQ29ycmVjdGx5IHNlcnZlIHRoZSBpbmRleC5odG1sIGZyb20gdGhlIHBhcmVudCBkaXJlY3RvcnlcclxuICAgIHJlcy5zZW5kRmlsZShwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4nLCAnaW5kZXguaHRtbCcpKTtcclxufSk7XHJcblxyXG4vLyAtLS0gR2xvYmFsIEVycm9yIEhhbmRsaW5nIE1pZGRsZXdhcmUgLS0tXHJcbi8vIFRoaXMgc2hvdWxkIGJlIHRoZSB2ZXJ5IGxhc3QgbWlkZGxld2FyZSBpbiB5b3VyIEV4cHJlc3MgYXBwXHJcbmFwcC51c2UoKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYFVuaGFuZGxlZCBFcnJvcjogJHtlcnIuc3RhY2t9YCk7IC8vIExvZyB0aGUgZnVsbCBzdGFjayB0cmFjZSBmb3IgZGVidWdnaW5nXHJcbiAgICAvLyBSZXNwb25kIHdpdGggYSBnZW5lcmljIGVycm9yIG1lc3NhZ2UgZm9yIHRoZSBjbGllbnRcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ0FuIHVuZXhwZWN0ZWQgc2VydmVyIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicsXHJcbiAgICAgICAgLy8gSW4gZGV2ZWxvcG1lbnQsIHlvdSBtaWdodCBzZW5kIG1vcmUgZGV0YWlsczpcclxuICAgICAgICAvLyBtZXNzYWdlOiBlcnIubWVzc2FnZSxcclxuICAgICAgICAvLyBzdGFjazogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBlcnIuc3RhY2sgOiB1bmRlZmluZWRcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vIC0tLSBTZXJ2ZXIgU3RhcnQgLS0tXHJcbi8vIFRoaXMgY29uZGl0aW9uYWwgZXhwb3J0IGFsbG93cyB0aGUgYXBwIHRvIGJlIGltcG9ydGVkIGZvciB0ZXN0aW5nXHJcbi8vIHdpdGhvdXQgc3RhcnRpbmcgdGhlIHNlcnZlciBsaXN0ZW5lciB3aGVuIHRoZSB0ZXN0IHJ1bm5lciByZXF1aXJlcyBpdC5cclxuaWYgKHJlcXVpcmUubWFpbiA9PT0gbW9kdWxlKSB7XHJcbiAgICAvLyBPbmx5IGxpc3RlbiBpZiB0aGlzIGZpbGUgaXMgcnVuIGRpcmVjdGx5IChub3QgcmVxdWlyZWQgYXMgYSBtb2R1bGUpXHJcbiAgICBhcHAubGlzdGVuKFBPUlQsICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgU2VydmVyIGlzIHJ1bm5pbmcgc3VjY2Vzc2Z1bGx5IG9uIGh0dHA6Ly9sb2NhbGhvc3Q6JHtQT1JUfWApO1xyXG4gICAgfSk7XHJcbn0gZWxzZSB7XHJcbiAgICAvLyBFeHBvcnQgdGhlIGFwcCBmb3IgdGVzdGluZyBwdXJwb3Nlc1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBhcHA7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzswQkFDQSx1S0FBQUEsQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsd0JBQUFDLE1BQUEsR0FBQUEsTUFBQSxPQUFBQyxDQUFBLEdBQUFGLENBQUEsQ0FBQUcsUUFBQSxrQkFBQUMsQ0FBQSxHQUFBSixDQUFBLENBQUFLLFdBQUEsOEJBQUFDLEVBQUFOLENBQUEsRUFBQUUsQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsUUFBQUMsQ0FBQSxHQUFBTCxDQUFBLElBQUFBLENBQUEsQ0FBQU0sU0FBQSxZQUFBQyxTQUFBLEdBQUFQLENBQUEsR0FBQU8sU0FBQSxFQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsTUFBQSxDQUFBTCxDQUFBLENBQUFDLFNB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","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","express","require","sqlite3","verbose","bcrypt","jwt","cors","path","csv","_require","Readable","rateLimit","morgan","process","env","NODE_ENV","main","module","config","stripeInstance","STRIPE_SECRET_KEY","app","allowedOrigins","CORS_ORIGIN","split","push","corsOptions","origin","callback","includes","msg","Error","indexOf","methods","credentials","optionsSuccessStatus","use","PORT","STRIPE_WEBHOOK_SECRET","authLimiter","windowMs","max","message","standardHeaders","legacyHeaders","post","raw","type","_ref","_callee","req","res","sig","event","session","userId","planId","subscriptionUpdated","subscriptionDeleted","invoiceSucceeded","invoiceFailed","_t","_t2","_context","headers","webhooks","constructEvent","body","console","error","concat","status","send","data","object","log","id","metadata","payment_status","db","run","customer","subscription","err","plan","json","received","_x","_x2","JWT_SECRET","join","__dirname","maxAge","immutable","Database","exit","get","serialize","authenticateToken","next","authHeader","token","verify","user","isValidEmail","email","test","_ref2","_callee2","_req$body","company_name","full_name","password","password_hash","_t3","_context2","trim","hash","newCompanyId","lastID","userInsertErr","_x3","_x4","_x5","_req$body2","_ref3","_callee3","isMatch","payload","_context3","compare","user_id","role","fullName","companyId","company_id","locationId","location_id","subscriptionStatus","subscription_status","plan_id","sign","expiresIn","_x6","_x7","_ref4","_callee4","_req$body3","_req$user","_t4","_context4","location","_x8","_x9","_x0","_ref5","_callee5","_req$body4","position","employee_id","_req$user2","currentUserLocationId","isLocationIdValid","locationVerification","_t5","_context5","isNaN","undefined","reject","_x1","_x10","_x11","_req$user3","put","_ref6","_callee7","_req$body5","currentPassword","newPassword","_context7","_ref7","_callee6","updateSql","updateParams","clauses","changesMade","existingUser","newPasswordHash","_t6","_context6","row","updateErr","changes","fetchErr","updatedUser","newPayload","newToken","_x15","_x16","_x12","_x13","_x14","_req$user4","sql","params","all","rows","_req$body6","location_name","location_address","_req$user5","_req$user6","parseInt","_req$user7","currentUserId","_req$query","query","filterRole","filterLocationId","allowedRoles","_req$user8","authenticatedUserId","_ref8","_callee8","_req$user9","allowedPlanIds","priceIdMap","stripePriceId","customerId","userRecord","_t7","_context8","STRIPE_PRICE_ID_PRO","STRIPE_PRICE_ID_ENT","stripe_customer_id","customers","checkout","sessions","mode","line_items","price","quantity","success_url","FRONTEND_URL","cancel_url","url","_x17","_x18","_x19","_req$body7","start_time","end_time","notes","_req$user0","Date","getTime","employee","insertErr","scheduleId","_req$query2","start_date","end_date","_req$user1","_req$user10","_req$body8","title","description","requirements","_req$user11","created_date","toISOString","_req$query3","_req$user12","allowedStatuses","_req$body9","_req$user13","_req$user14","_req$body0","job_posting_id","phone_number","_req$user15","application_date","jobPosting","applicantId","_req$query4","_req$user16","_req$body1","resume_url","_req$user17","job","_req$user18","_req$body10","file_name","file_type","file_url","_req$user19","upload_date","urlRegex","documentId","_req$user20","_req$user21","sendFile","stack","listen","exports"],"sourceRoot":"C:\\Users\\xarcy\\OneDrive\\Desktop\\onboardflow\\backend\\test\\","sources":["integration.test.cjs"],"sourcesContent":["// --- Imports ---\r\nconst express = require('express');\r\nconst sqlite3 = require('sqlite3').verbose();\r\nconst bcrypt = require('bcryptjs');\r\nconst jwt = require('jsonwebtoken');\r\nconst cors = require('cors'); // Import cors\r\nconst path = require('path');\r\nconst csv = require('csv-parser'); // For CSV parsing\r\nconst { Readable } = require('stream'); // For creating a readable stream from a string\r\nconst rateLimit = require('express-rate-limit'); // Import rate-limiting middleware\r\nconst morgan = require('morgan'); // Import morgan for request logging\r\n\r\n// Load environment variables from .env file in development\r\n// IMPORTANT: Only load .env if server.js is run directly, NOT when required by tests.\r\nif (process.env.NODE_ENV !== 'production' && require.main === module) {\r\n    require('dotenv').config();\r\n}\r\n\r\n// Import the Stripe library and initialize it with your secret key\r\n// CRUCIAL FOR TESTING: Remove the hardcoded fallback live key.\r\n// Ensure process.env.STRIPE_SECRET_KEY is set to a TEST key for development and testing.\r\nconst stripeInstance = require('stripe')(process.env.STRIPE_SECRET_KEY); \r\n\r\n// --- App Initialization ---\r\nconst app = express();\r\n\r\n// Configure CORS for production environment\r\nconst allowedOrigins = process.env.CORS_ORIGIN ? process.env.CORS_ORIGIN.split(',') : ['http://localhost:8000']; // Default to localhost for development\r\n\r\n// Add 'null' to allowed origins if not in production and not explicitly set for local file access\r\nif (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\r\n    allowedOrigins.push('null');\r\n}\r\n\r\nconst corsOptions = {\r\n    origin: function (origin, callback) {\r\n        // Allow requests with no origin (like mobile apps, curl, or local file access if 'null' is in allowedOrigins)\r\n        if (!origin) {\r\n            // Check if 'null' is explicitly allowed or if we're in dev and no CORS_ORIGIN is set\r\n            if (allowedOrigins.includes('null') || (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN)) {\r\n                return callback(null, true);\r\n            }\r\n            const msg = 'The CORS policy for this site does not allow access from the specified Origin.';\r\n            return callback(new Error(msg), false);\r\n        }\r\n\r\n        if (allowedOrigins.indexOf(origin) === -1) {\r\n            const msg = 'The CORS policy for this site does not allow access from the specified Origin.';\r\n            return callback(new Error(msg), false);\r\n        }\r\n        return callback(null, true);\r\n    },\r\n    methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\r\n    credentials: true, // Allow cookies to be sent\r\n    optionsSuccessStatus: 204 // Some legacy browsers (IE11, various SmartTVs) choke on 204\r\n};\r\napp.use(cors(corsOptions));\r\n\r\n\r\n// Use process.env.PORT for production, fallback to 3000 for local development\r\nconst PORT = process.env.PORT || 3000;\r\n\r\n// Define a webhook secret for Stripe. This should also be an environment variable.\r\nconst STRIPE_WEBHOOK_SECRET = process.env.STRIPE_WEBHOOK_SECRET || 'whsec_YOUR_WEBHOOK_SECRET';\r\n\r\n// --- Rate Limiting Configuration ---\r\nconst authLimiter = rateLimit({\r\n    windowMs: 15 * 60 * 1000, // 15 minutes\r\n    max: 10, // Max 10 requests per 15 minutes per IP\r\n    message: 'Too many login/registration attempts from this IP, please try again after 15 minutes',\r\n    standardHeaders: true, // Return rate limit info in the `RateLimit-*` headers\r\n    legacyHeaders: false, // Disable the `X-RateLimit-*` headers\r\n});\r\n\r\n// --- Middleware for Stripe Webhook (MUST be before express.json() for other routes) --\r\n// This route needs the raw body for signature verification.\r\napp.post('/api/stripe-webhook', express.raw({type: 'application/json'}), async (req, res) => {\r\n    const sig = req.headers['stripe-signature'];\r\n\r\n    let event;\r\n\r\n    try {\r\n        event = stripeInstance.webhooks.constructEvent(req.body, sig, STRIPE_WEBHOOK_SECRET);\r\n    } catch (err) {\r\n        console.error(`Webhook Error: ${err.message}`);\r\n        return res.status(400).send(`Webhook Error: ${err.message}`);\r\n    }\r\n\r\n    // Handle the event\r\n    switch (event.type) {\r\n        case 'checkout.session.completed':\r\n            const session = event.data.object;\r\n            console.log('Checkout Session Completed:', session.id);\r\n            const userId = session.metadata.userId;\r\n            const planId = session.metadata.planId;\r\n            if (session.payment_status === 'paid' && userId && planId) {\r\n                db.run(\r\n                    'UPDATE Users SET stripe_customer_id = ?, stripe_subscription_id = ?, subscription_status = ?, plan_id = ? WHERE user_id = ?',\r\n                    [session.customer, session.subscription, 'active', planId, userId],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for checkout.session.completed:', err.message);\r\n                        else console.log(`User ${userId} subscription updated to ${planId} (active).`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'customer.subscription.updated':\r\n            const subscriptionUpdated = event.data.object;\r\n            console.log('Subscription Updated:', subscriptionUpdated.id);\r\n            if (subscriptionUpdated.customer && subscriptionUpdated.status && subscriptionUpdated.plan && subscriptionUpdated.plan.id) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ?, plan_id = ? WHERE stripe_customer_id = ?',\r\n                    [subscriptionUpdated.status, subscriptionUpdated.plan.id, subscriptionUpdated.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for customer.subscription.updated:', err.message);\r\n                        else console.log(`Subscription for customer ${subscriptionUpdated.customer} status updated to ${subscriptionUpdated.status} and plan to ${subscriptionUpdated.plan.id}.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'customer.subscription.deleted':\r\n            const subscriptionDeleted = event.data.object;\r\n            console.log('Subscription Deleted:', subscriptionDeleted.id);\r\n            if (subscriptionDeleted.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ?, plan_id = ?, stripe_subscription_id = NULL WHERE stripe_customer_id = ?',\r\n                    ['cancelled', 'free', subscriptionDeleted.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for customer.subscription.deleted:', err.message);\r\n                        else console.log(`Subscription for customer ${subscriptionDeleted.customer} marked as cancelled and reverted to free.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'invoice.payment_succeeded':\r\n            const invoiceSucceeded = event.data.object;\r\n            console.log('Invoice Payment Succeeded:', invoiceSucceeded.id);\r\n            if (invoiceSucceeded.subscription && invoiceSucceeded.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?',\r\n                    ['active', invoiceSucceeded.subscription, invoiceSucceeded.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for invoice.payment_succeeded:', err.message);\r\n                        else console.log(`Subscription ${invoiceSucceeded.subscription} status set to active.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'invoice.payment_failed':\r\n            const invoiceFailed = event.data.object;\r\n            console.log('Invoice Payment Failed:', invoiceFailed.id);\r\n            if (invoiceFailed.subscription && invoiceFailed.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?',\r\n                    ['past_due', invoiceFailed.subscription, invoiceFailed.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for invoice.payment_failed:', err.message);\r\n                        else console.log(`Subscription ${invoiceFailed.subscription} status set to past_due.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        default:\r\n            console.log(`Unhandled event type ${event.type}`);\r\n    }\r\n    res.status(200).json({ received: true });\r\n});\r\n\r\n// IMPORTANT: express.json() for parsing JSON request bodies MUST come AFTER the webhook route\r\napp.use(express.json());\r\n\r\n// --- JWT Secret ---\r\n// CRUCIAL FOR TESTING: Remove the fallback value so it MUST come from process.env for tests.\r\nconst JWT_SECRET = process.env.JWT_SECRET; \r\n\r\n// --- Request Logging (using Morgan) ---\r\n// 'dev' format is good for development, 'combined' or 'tiny' for production logs\r\napp.use(morgan('dev'));\r\n\r\n// --- Serve Static Files (Frontend) with Caching ---\r\n// This middleware serves static files from the 'onboardflow' root directory\r\n// and sets Cache-Control headers for browser caching.\r\napp.use(express.static(path.join(__dirname, '..'), {\r\n    maxAge: '7d', // Cache static assets for 7 days (e.g., CSS, JS, images, favicon)\r\n    immutable: false // Set to true if asset filenames include content hashes (e.g., app.min.js?v=hash)\r\n}));\r\n\r\n// --- Database Setup ---\r\nconst db = new sqlite3.Database('./onboardflow.db', (err) => {\r\n    if (err) {\r\n        // Log database connection error and exit\r\n        console.error(\"Error opening database:\", err.message);\r\n        process.exit(1); // Exit process if database connection fails\r\n    } else {\r\n        console.log(\"Successfully connected to the database.\");\r\n        db.get(\"PRAGMA foreign_keys = ON\");\r\n        db.serialize(() => {\r\n            db.run(`CREATE TABLE IF NOT EXISTS Companies (company_id INTEGER PRIMARY KEY AUTOINCREMENT, company_name TEXT NOT NULL UNIQUE)`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Locations (location_id INTEGER PRIMARY KEY AUTOINCREMENT, company_id INTEGER, location_name TEXT NOT NULL, location_address TEXT NOT NULL, FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE)`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Users (\r\n                user_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER,\r\n                location_id INTEGER,\r\n                full_name TEXT NOT NULL,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                position TEXT,\r\n                employee_id TEXT,\r\n                role TEXT NOT NULL,\r\n                stripe_customer_id TEXT,\r\n                stripe_subscription_id TEXT,\r\n                subscription_status TEXT,\r\n                plan_id TEXT,\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Schedules (\r\n                schedule_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                employee_id INTEGER NOT NULL,\r\n                location_id INTEGER NOT NULL,\r\n                start_time TEXT NOT NULL,\r\n                end_time TEXT NOT NULL,\r\n                notes TEXT,\r\n                FOREIGN KEY (employee_id) REFERENCES Users(user_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            // NEW: Create JobPostings table\r\n            db.run(`CREATE TABLE IF NOT EXISTS JobPostings (\r\n                job_posting_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                location_id INTEGER, -- Optional: link job posting to a specific location\r\n                title TEXT NOT NULL,\r\n                description TEXT NOT NULL,\r\n                requirements TEXT, -- Optional: job requirements\r\n                status TEXT NOT NULL DEFAULT 'Open', -- e.g., 'Open', 'Closed', 'Filled'\r\n                created_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            // Update Applicants table schema to link to JobPostings and add phone_number\r\n            db.run(`CREATE TABLE IF NOT EXISTS Applicants (\r\n                applicant_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                location_id INTEGER, -- Optional: applicant's preferred location or location applied for\r\n                job_posting_id INTEGER, -- NEW: Link to JobPostings table\r\n                full_name TEXT NOT NULL,\r\n                email TEXT NOT NULL,\r\n                phone_number TEXT, -- NEW: Phone number field\r\n                status TEXT NOT NULL DEFAULT 'Applied', -- e.g., 'Applied', 'Interviewing', 'Rejected', 'Hired'\r\n                resume_url TEXT, -- Optional: URL to a resume document (e.g., hosted on cloud storage)\r\n                notes TEXT,\r\n                application_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (job_posting_id) REFERENCES JobPostings(job_posting_id) ON DELETE SET NULL -- If job posting is deleted, set this to NULL\r\n            )`);\r\n            // NEW: Create Documents table for file/video uploads\r\n            db.run(`CREATE TABLE IF NOT EXISTS Documents (\r\n                document_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL, -- User who uploaded the document\r\n                title TEXT NOT NULL,\r\n                file_name TEXT NOT NULL,\r\n                file_type TEXT NOT NULL,\r\n                file_url TEXT NOT NULL, -- URL to the stored file (e.g., S3, GCS)\r\n                description TEXT,\r\n                upload_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES Users(user_id) ON DELETE CASCADE\r\n            )`);\r\n        });\r\n    }\r\n});\r\n\r\n// --- Authentication Middleware ---\r\nfunction authenticateToken(req, res, next) {\r\n    const authHeader = req.headers['authorization'];\r\n    const token = authHeader && authHeader.split(' ')[1];\r\n    if (token == null) {\r\n        return res.status(401).json({ error: 'Unauthorized: No token provided.' });\r\n    }\r\n    jwt.verify(token, JWT_SECRET, (err, user) => {\r\n        if (err) {\r\n            // Log the specific JWT error for debugging\r\n            console.error(\"JWT Verification Error:\", err.message);\r\n            return res.status(403).json({ error: 'Forbidden: Invalid or expired token.' });\r\n        }\r\n        req.user = user;\r\n        next();\r\n    });\r\n}\r\n\r\n// --- Helper for Input Validation ---\r\nconst isValidEmail = (email) => {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\r\n};\r\n\r\n// --- API Routes (ALL API ROUTES SHOULD BE DEFINED HERE, BEFORE STATIC FILE SERVING) ---\r\n\r\n// Apply rate limiting to authentication routes\r\napp.post('/api/register', authLimiter, async (req, res, next) => { // Added 'next'\r\n    const { company_name, full_name, email, password } = req.body;\r\n\r\n    // Input Validation for Registration\r\n    if (!company_name || typeof company_name !== 'string' || company_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Company name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Password is required and must be at least 6 characters long.\" });\r\n    }\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n        db.serialize(() => {\r\n            db.run('BEGIN TRANSACTION');\r\n            db.run('INSERT INTO Companies (company_name) VALUES (?)', [company_name], function(err) {\r\n                if (err) { \r\n                    db.run('ROLLBACK'); \r\n                    console.error(\"Database error creating company:\", err);\r\n                    return next(new Error(\"Could not create company.\")); // Pass error to error handling middleware\r\n                }\r\n                const newCompanyId = this.lastID;\r\n                db.run(`INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'super_admin', 'active', 'free')`, [newCompanyId, null, full_name, email, password_hash], function(userInsertErr) {\r\n                    if (userInsertErr) { \r\n                        db.run('ROLLBACK'); \r\n                        console.error(\"Database error creating user:\", userInsertErr);\r\n                        if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { \r\n                            return res.status(409).json({ error: 'Email already registered.' }); \r\n                        }\r\n                        return next(new Error(\"Could not create user.\")); // Pass error\r\n                    }\r\n                    db.run('COMMIT');\r\n                    res.status(201).json({ message: \"Company and user registered successfully!\", userId: this.lastID });\r\n                });\r\n            });\r\n        });\r\n    } catch (error) { \r\n        console.error(\"Registration error:\", error);\r\n        next(error); // Pass error to error handling middleware\r\n    }\r\n});\r\n\r\napp.post('/api/login', authLimiter, (req, res, next) => { // Added 'next'\r\n    const { email, password } = req.body;\r\n\r\n    // Input Validation for Login\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length === 0) {\r\n        return res.status(400).json({ error: \"Password is required.\" });\r\n    }\r\n\r\n    db.get(\"SELECT * FROM Users WHERE email = ?\", [email], async (err, user) => {\r\n        if (err) {\r\n            console.error(\"Database error during login:\", err);\r\n            return next(new Error(\"A server error occurred during login.\")); // Pass error\r\n        }\r\n        if (!user) { \r\n            return res.status(401).json({ error: \"Invalid credentials.\" }); \r\n        }\r\n        const isMatch = await bcrypt.compare(password, user.password_hash);\r\n        if (!isMatch) { \r\n            return res.status(401).json({ error: \"Invalid credentials.\" }); \r\n        }\r\n        const payload = { userId: user.user_id, email: user.email, role: user.role, fullName: user.full_name, companyId: user.company_id, locationId: user.location_id, subscriptionStatus: user.subscription_status, planId: user.plan_id };\r\n        const token = jwt.sign(payload, JWT_SECRET, { expiresIn: '1h' });\r\n        res.status(200).json({ message: \"Login successful!\", token, role: user.role });\r\n    });\r\n});\r\n\r\napp.post('/api/invite-admin', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { full_name, email, password, location_id } = req.body;\r\n    const { companyId, role } = req.user;\r\n\r\n    // Input Validation for Invite Admin\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can invite other admins.' }); }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Temporary password is required and must be at least 6 characters long.\" });\r\n    }\r\n    if (typeof location_id !== 'number' || location_id <= 0) { // Assuming location_id is an integer ID\r\n        return res.status(400).json({ error: \"A valid location ID is required.\" });\r\n    }\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n        db.get('SELECT * FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n            if (err) { console.error(\"Database error checking location:\", err); return next(new Error('Database error when verifying location.')); } // Pass error\r\n            if (!location) { return res.status(400).json({ error: 'Selected location does not exist or does not belong to your company.' }); }\r\n            db.run(`INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'location_admin', 'active', 'free')`, [companyId, location_id, full_name, email, password_hash], function(userInsertErr) {\r\n                if (userInsertErr) {\r\n                    console.error(\"Database error inviting admin:\", userInsertErr);\r\n                    if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { return res.status(409).json({ error: 'Email already registered.' }); }\r\n                    return next(new Error('Failed to invite admin.')); // Pass error\r\n                }\r\n                res.status(201).json({ message: \"Location admin invited successfully!\", userId: this.lastID });\r\n            });\r\n        });\r\n    } catch (error) { console.error(\"Invite admin error:\", error); next(error); } // Pass error\r\n});\r\n\r\n// NEW: API endpoint for inviting employees\r\napp.post('/api/invite-employee', authenticateToken, async (req, res, next) => {\r\n    const { full_name, email, password, position, employee_id, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Authorization: Super admin can invite anyone, Location admin can only invite to their location or unassigned\r\n    if (!['super_admin', 'location_admin'].includes(role)) {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can invite employees.' });\r\n    }\r\n\r\n    // Input Validation for Invite Employee\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Temporary password is required and must be at least 6 characters long.\" });\r\n    }\r\n    \r\n    // Corrected location_id validation: Must be a number > 0.\r\n    // If location_id is null, it indicates an unassigned location, which is valid for a super admin.\r\n    // For location_admin, it must match their current location.\r\n    // This revised logic correctly checks for null OR a valid positive integer.\r\n    const isLocationIdValid = location_id === null || (typeof location_id === 'number' && !isNaN(location_id) && location_id > 0);\r\n    if (!isLocationIdValid) {\r\n        return res.status(400).json({ error: \"A valid location ID (positive number) is required for employee, or null for unassigned.\" });\r\n    }\r\n    \r\n    if (position !== undefined && typeof position !== 'string') {\r\n        return res.status(400).json({ error: 'Position must be a string if provided.' });\r\n    }\r\n    if (employee_id !== undefined && typeof employee_id !== 'string') {\r\n        return res.status(400).json({ error: 'Employee ID must be a string if provided.' });\r\n    }\r\n\r\n    // Location Admin specific check: ensure they are inviting to their assigned location or null\r\n    // If location_admin tries to set a location that is NOT their own, block it.\r\n    // Allow location_admin to set to null if their current location is null.\r\n    if (role === 'location_admin') {\r\n        // A location admin can ONLY assign an employee to their own location or to null (unassigned)\r\n        if (location_id !== currentUserLocationId) {\r\n            // If the target location_id is not the current user's location, check if both are null\r\n            if (!(location_id === null && currentUserLocationId === null)) {\r\n                return res.status(403).json({ error: 'Access Denied: Location admin can only invite employees to their assigned location.' });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n\r\n        // Verify the location_id belongs to the company and, if location_admin, matches their assigned location\r\n        // This check is crucial if location_id is NOT null\r\n        if (location_id !== null) {\r\n            const locationVerification = await new Promise((resolve, reject) => {\r\n                db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n                    if (err) reject(err);\r\n                    resolve(location);\r\n                });\r\n            });\r\n            if (!locationVerification) {\r\n                return res.status(400).json({ error: 'Selected location does not exist or does not belong to your company.' });\r\n            }\r\n        }\r\n\r\n        db.run(\r\n            `INSERT INTO Users (company_id, location_id, full_name, email, password_hash, position, employee_id, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, ?, ?, 'employee', 'active', 'free')`,\r\n            [companyId, location_id, full_name, email, password_hash, position, employee_id,], // Default new employees to 'employee' role\r\n            function(userInsertErr) {\r\n                if (userInsertErr) {\r\n                    console.error(\"Database error inviting employee:\", userInsertErr);\r\n                    if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { return res.status(409).json({ error: 'Email already registered.' }); }\r\n                    return next(new Error('Failed to invite employee.'));\r\n                }\r\n                res.status(201).json({ message: \"Employee invited successfully!\", userId: this.lastID });\r\n            }\r\n        );\r\n    } catch (error) {\r\n        console.error(\"Invite employee error:\", error);\r\n        next(error);\r\n    }\r\n});\r\n\r\n\r\napp.get('/api/profile', authenticateToken, (req, res) => {\r\n    const { userId, fullName, email, role, companyId, locationId, subscriptionStatus, planId } = req.user;\r\n    res.status(200).json({ userId, fullName, email, role, companyId, locationId, subscriptionStatus, planId });\r\n});\r\n\r\napp.put('/api/profile', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { fullName, email, currentPassword, newPassword } = req.body;\r\n    const { userId } = req.user;\r\n\r\n    // Input Validation for Profile Update\r\n    if (fullName === undefined && email === undefined && (!currentPassword || !newPassword)) {\r\n        return res.status(400).json({ error: 'No data provided for update.' });\r\n    }\r\n    if (fullName !== undefined && (typeof fullName !== 'string' || fullName.trim() === '')) {\r\n        return res.status(400).json({ error: \"Full name must be a non-empty string if provided.\" });\r\n    }\r\n    if (email !== undefined && !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address must be provided if changing email.\" });\r\n    }\r\n    if (newPassword !== undefined && (typeof newPassword !== 'string' || newPassword.length < 6)) {\r\n        return res.status(400).json({ error: \"New password must be at least 6 characters long if changing password.\" });\r\n    }\r\n    if ((currentPassword && !newPassword) || (!currentPassword && newPassword)) {\r\n        return res.status(400).json({ error: 'Both current password and new password are required to change password.' });\r\n    }\r\n\r\n\r\n    db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], async (err, user) => {\r\n        if (err) { console.error(\"Database error fetching user for profile update:\", err); return next(new Error(\"Server error during profile update.\")); } // Pass error\r\n        if (!user) { return res.status(404).json({ error: \"User not found.\" }); }\r\n        let updateSql = 'UPDATE Users SET ';\r\n        const updateParams = [];\r\n        const clauses = [];\r\n        let changesMade = false;\r\n        if (fullName !== undefined && fullName !== user.full_name) {\r\n            clauses.push('full_name = ?');\r\n            updateParams.push(fullName);\r\n            changesMade = true;\r\n        }\r\n        if (email !== undefined && email !== user.email) {\r\n            try { // Added try-catch for async await in db.get\r\n                const existingUser = await new Promise((resolve, reject) => {\r\n                    db.get(\"SELECT user_id FROM Users WHERE email = ? AND user_id != ?\", [email, userId], (err, row) => {\r\n                        if (err) reject(err);\r\n                        resolve(row);\r\n                    });\r\n                });\r\n                if (existingUser) { return res.status(409).json({ error: 'Email already in use by another account.' }); }\r\n            } catch (dbErr) {\r\n                console.error(\"Database error checking existing email:\", dbErr);\r\n                return next(new Error(\"Server error verifying email availability.\"));\r\n            }\r\n            clauses.push('email = ?');\r\n            updateParams.push(email);\r\n            changesMade = true;\r\n        }\r\n        if (currentPassword && newPassword) {\r\n            const isMatch = await bcrypt.compare(currentPassword, user.password_hash);\r\n            if (!isMatch) { return res.status(401).json({ error: \"Current password incorrect.\" }); }\r\n            const newPasswordHash = await bcrypt.hash(newPassword, 10);\r\n            clauses.push('password_hash = ?');\r\n            updateParams.push(newPasswordHash);\r\n            changesMade = true;\r\n        }\r\n        if (!changesMade) { return res.status(200).json({ message: 'No changes detected. Profile remains the same.' }); }\r\n        updateSql += clauses.join(', ') + ' WHERE user_id = ?';\r\n        updateParams.push(userId);\r\n        db.run(updateSql, updateParams, function(updateErr) {\r\n            if (updateErr) { console.error(\"Database error updating profile:\", updateErr); return next(new Error('Failed to update profile.')); } // Pass error\r\n            if (this.changes > 0) {\r\n                db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], (fetchErr, updatedUser) => {\r\n                    if (fetchErr || !updatedUser) { console.error(\"Error fetching updated user for new token:\", fetchErr); return res.status(200).json({ message: 'Profile updated successfully, but token could not be refreshed.' }); }\r\n                    const newPayload = { userId: updatedUser.user_id, email: updatedUser.email, role: updatedUser.role, fullName: updatedUser.full_name, companyId: updatedUser.company_id, locationId: updatedUser.location_id, subscriptionStatus: updatedUser.subscription_status, planId: user.plan_id };\r\n                    const newToken = jwt.sign(newPayload, JWT_SECRET, { expiresIn: '1h' });\r\n                    res.status(200).json({ message: 'Profile updated successfully!', token: newToken });\r\n                });\r\n            } else { res.status(200).json({ message: 'No changes applied as data was identical.' }); }\r\n        });\r\n    });\r\n});\r\n\r\napp.get('/api/locations', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, role } = req.user;\r\n    let sql = 'SELECT location_id, location_name, location_address FROM Locations WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Allowing super_admin, location_admin, and employee to view all locations in their company for dropdowns/selection\r\n    if (!['super_admin', 'location_admin', 'employee'].includes(role)) {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view locations.' });\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching locations:\", err); return next(new Error('Database error fetching locations.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.post('/api/locations', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { location_name, location_address } = req.body;\r\n    const { companyId, role } = req.user;\r\n\r\n    // Input Validation for Create Location\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can create locations.' }); }\r\n    if (!location_name || typeof location_name !== 'string' || location_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Location name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!location_address || typeof location_address !== 'string' || location_address.trim() === '') {\r\n        return res.status(400).json({ error: \"Location address is required and must be a non-empty string.\" });\r\n    }\r\n\r\n    db.run('INSERT INTO Locations (company_id, location_name, location_address) VALUES (?, ?, ?)', [companyId, location_name, location_address], function(err) {\r\n        if (err) { console.error(\"Database error creating location:\", err); return next(new Error('Failed to create location.')); } // Pass error\r\n        res.status(201).json({ message: 'Location created!', locationId: this.lastID });\r\n    });\r\n});\r\n\r\napp.delete('/api/locations/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role } = req.user;\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can delete locations.' }); }\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID provided.' });\r\n    }\r\n\r\n    db.run('DELETE FROM Locations WHERE location_id = ? AND company_id = ?', [id, companyId], function(err) {\r\n        if (err) { console.error(\"Database error deleting location:\", err); return next(new Error('Failed to delete location.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Location not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\napp.get('/api/users', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n    const { filterRole, filterLocationId } = req.query;\r\n\r\n    let sql = `SELECT Users.user_id, Users.full_name, Users.email, Users.role, Locations.location_name\r\n               FROM Users\r\n               LEFT JOIN Locations ON Users.location_id = Locations.location_id\r\n               WHERE Users.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    if (role === 'super_admin') {\r\n        // Super admin can view all users in their company.\r\n    } else if (role === 'location_admin') {\r\n        // Location admin can view all users within their assigned location, plus unassigned users for their company.\r\n        if (currentUserLocationId) {\r\n            sql += ` AND (Users.location_id = ? OR Users.location_id IS NULL)`; // Admins might need to see unassigned users\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Users.user_id = ?`;\r\n        params.push(currentUserId);\r\n    } else {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view users.' });\r\n    }\r\n\r\n    // Input validation for filterRole and filterLocationId\r\n    const allowedRoles = ['super_admin', 'location_admin', 'employee'];\r\n    if (filterRole && (!allowedRoles.includes(filterRole) || (role === 'location_admin' && filterRole === 'super_admin'))) {\r\n        return res.status(400).json({ error: 'Invalid filter role provided or insufficient permissions to filter by this role.' });\r\n    }\r\n    if (filterLocationId && isNaN(parseInt(filterLocationId))) {\r\n        return res.status(400).json({ error: 'Invalid filter location ID provided.' });\r\n    }\r\n\r\n\r\n    if (filterRole) {\r\n        sql += ` AND Users.role = ?`;\r\n        params.push(filterRole);\r\n    }\r\n    if (filterLocationId) {\r\n        // Ensure location_admin can only filter by their own location\r\n        if (role === 'super_admin' || (role === 'location_admin' && parseInt(filterLocationId) === currentUserLocationId)) {\r\n            sql += ` AND Users.location_id = ?`;\r\n            params.push(filterLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Insufficient permissions to filter by location.' });\r\n        }\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching users:\", err); return next(new Error('Database error fetching users.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.delete('/api/users/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, userId: authenticatedUserId } = req.user;\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can delete users.' }); }\r\n    if (parseInt(id) === authenticatedUserId) { return res.status(403).json({ error: 'Cannot delete your own super admin account via this interface.' }); }\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid user ID provided.' });\r\n    }\r\n\r\n    db.run('DELETE FROM Users WHERE user_id = ? AND company_id = ? AND role != \\'super_admin\\'', [id, companyId], function(err) {\r\n        if (err) { console.error(\"Database error deleting user:\", err); return next(new Error('Failed to delete user.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'User not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\napp.post('/api/create-checkout-session', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { planId } = req.body;\r\n    const { userId, email, companyId } = req.user;\r\n\r\n    // Input Validation for planId\r\n    const allowedPlanIds = ['pro', 'enterprise'];\r\n    if (!planId || !allowedPlanIds.includes(planId)) {\r\n        return res.status(400).json({ error: 'Invalid plan ID provided.' });\r\n    }\r\n\r\n    const priceIdMap = {\r\n        'pro': process.env.STRIPE_PRICE_ID_PRO,       // Use environment variable\r\n        'enterprise': process.env.STRIPE_PRICE_ID_ENT // Use environment variable\r\n    };\r\n    const stripePriceId = priceIdMap[planId];\r\n    if (!stripePriceId) { return res.status(500).json({ error: 'Stripe price ID not configured for this plan.' }); } // Changed from 400 to 500 as this is a server-side config issue\r\n    try {\r\n        let customerId;\r\n        const userRecord = await new Promise((resolve, reject) => {\r\n            db.get('SELECT stripe_customer_id FROM Users WHERE user_id = ?', [userId], (err, row) => {\r\n                if (err) reject(err);\r\n                resolve(row);\r\n            });\r\n        });\r\n        if (userRecord && userRecord.stripe_customer_id) {\r\n            customerId = userRecord.stripe_customer_id;\r\n        } else {\r\n            const customer = await stripeInstance.customers.create({ email: email, metadata: { userId: userId, companyId: companyId, }, });\r\n            customerId = customer.id;\r\n            db.run('UPDATE Users SET stripe_customer_id = ? WHERE user_id = ?', [customerId, userId], (err) => {\r\n                if (err) console.error('Failed to save Stripe customer ID to DB:', err);\r\n            });\r\n        }\r\n        const session = await stripeInstance.checkout.sessions.create({\r\n            customer: customerId,\r\n            mode: 'subscription',\r\n            line_items: [{ price: stripePriceId, quantity: 1, }, ],\r\n            // Use environment variables for success/cancel URLs, or relative paths if handled client-side\r\n            success_url: `${process.env.FRONTEND_URL || 'http://localhost:8000'}/suite-hub.html?payment=success&session_id={CHECKOUT_SESSION_ID}`,\r\n            cancel_url: `${process.env.FRONTEND_URL || 'http://localhost:8000'}/pricing.html?payment=cancelled`,\r\n            metadata: { userId: userId, planId: planId, },\r\n        });\r\n        res.status(200).json({ url: session.url });\r\n    } catch (error) { console.error('Error creating Stripe Checkout Session:', error); next(error); } // Pass error\r\n});\r\n\r\napp.post('/api/schedules', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { employee_id, location_id, start_time, end_time, notes } = req.body;\r\n    const { companyId, role, userId: currentUserId } = req.user;\r\n\r\n    // Input Validation for Create Schedule\r\n    if (role !== 'super_admin' && role !== 'location_admin') { return res.status(403).json({ error: 'Access Denied: Only admins can create schedules.' }); }\r\n    if (typeof employee_id !== 'number' || employee_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid employee ID is required.' });\r\n    }\r\n    if (typeof location_id !== 'number' || location_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid location ID is required.' });\r\n    }\r\n    if (!start_time || !end_time || isNaN(new Date(start_time).getTime()) || isNaN(new Date(end_time).getTime())) {\r\n        return res.status(400).json({ error: 'Valid start and end times are required.' });\r\n    }\r\n    if (new Date(start_time) >= new Date(end_time)) {\r\n        return res.status(400).json({ error: 'Start time must be before end time.' });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n\r\n    db.get('SELECT user_id FROM Users WHERE user_id = ? AND company_id = ?', [employee_id, companyId], (err, employee) => {\r\n        if (err) { console.error(\"Database error verifying employee:\", err); return next(new Error('Database error during employee verification.')); } // Pass error\r\n        if (!employee) { return res.status(400).json({ error: 'Employee not found in your company.' }); }\r\n        db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n            if (err) { console.error(\"Database error verifying location:\", err); return next(new Error('Database error during location verification.')); } // Pass error\r\n            if (!location) { return res.status(400).json({ error: 'Location not found in your company.' }); }\r\n            db.run(\r\n                'INSERT INTO Schedules (employee_id, location_id, start_time, end_time, notes) VALUES (?, ?, ?, ?, ?)', [employee_id, location_id, start_time, end_time, notes],\r\n                function(insertErr) {\r\n                    if (insertErr) { console.error(\"Database error creating schedule:\", insertErr); return next(new Error('Failed to create schedule.')); } // Pass error\r\n                    res.status(201).json({ message: 'Schedule created successfully!', scheduleId: this.lastID });\r\n                }\r\n            );\r\n        });\r\n    });\r\n});\r\n\r\napp.get('/api/schedules', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { employee_id, location_id, start_date, end_date } = req.query;\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = `SELECT Users.user_id, Users.full_name, Users.email, Users.role, Locations.location_name\r\n               FROM Users\r\n               LEFT JOIN Locations ON Users.location_id = Locations.location_id\r\n               WHERE Users.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    if (role === 'super_admin') {\r\n        // Super admin can view all users in their company.\r\n    } else if (role === 'location_admin') {\r\n        // Location admin can view all users within their assigned location, plus unassigned users for their company.\r\n        if (currentUserLocationId) {\r\n            sql += ` AND (Users.location_id = ? OR Users.location_id IS NULL)`; // Admins might need to see unassigned users\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Users.user_id = ?`;\r\n        params.push(currentUserId);\r\n    }\r\n\r\n    // Input validation for query parameters\r\n    if (employee_id && isNaN(parseInt(employee_id))) {\r\n        return res.status(400).json({ error: 'Invalid employee ID filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n    if (start_date && isNaN(new Date(start_date).getTime())) {\r\n        return res.status(400).json({ error: 'Invalid start date filter provided.' });\r\n    }\r\n    if (end_date && isNaN(new Date(end_date).getTime())) {\r\n        return res.status(400).json({ error: 'Invalid end date filter provided.' });\r\n    }\r\n\r\n\r\n    if (employee_id && (role === 'super_admin' || (role === 'location_admin' && parseInt(employee_id) === currentUserId) || (role === 'employee' && parseInt(employee_id) === currentUserId))) {\r\n        sql += ` AND Users.role = ?`;\r\n        params.push(filterRole); // This should be employee_id, not filterRole\r\n    }\r\n    if (location_id && (role === 'super_admin' || (role === 'location_admin' && parseInt(location_id) === currentUserLocationId))) {\r\n        sql += ` AND Users.location_id = ?`;\r\n        params.push(location_id);\r\n    }\r\n    if (start_date) {\r\n        sql += ` AND Schedules.start_time >= ?`;\r\n        params.push(start_date);\r\n    }\r\n    if (end_date) {\r\n        sql += ` AND Schedules.end_time <= ?`;\r\n        params.push(end_date);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching schedules:\", err); return next(new Error('Database error fetching schedules.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.delete('/api/schedules/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid schedule ID provided.' });\r\n    }\r\n\r\n    if (role === 'employee') {\r\n        return res.status(403).json({ error: 'Access Denied: Employees cannot delete schedules.' });\r\n    }\r\n\r\n    let sql = `DELETE FROM Schedules WHERE schedule_id = ?`;\r\n    const params = [id];\r\n\r\n    if (role === 'location_admin') {\r\n        sql += ` AND employee_id IN (SELECT user_id FROM Users WHERE location_id = ? AND company_id = ?)`;\r\n        params.push(currentUserLocationId, companyId);\r\n    } else if (role === 'super_admin') {\r\n        sql += ` AND employee_id IN (SELECT user_id FROM Users WHERE company_id = ?)`;\r\n        params.push(companyId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting schedule:\", err); return next(new Error('Failed to delete schedule.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Schedule not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// --- Hiring Routes ---\r\n\r\n/**\r\n * POST /api/job-postings\r\n * Creates a new job posting.\r\n * Requires super_admin or location_admin role.\r\n */\r\napp.post('/api/job-postings', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { title, description, requirements, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n    const created_date = new Date().toISOString(); // Current date/time for creation\r\n\r\n    // Input Validation for Create Job Posting\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can create job postings.' });\r\n    }\r\n    if (!title || typeof title !== 'string' || title.trim() === '') {\r\n        return res.status(400).json({ error: \"Job title is required and must be a non-empty string.\" });\r\n    }\r\n    if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) { // Line 1009\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    } else if (description !== undefined) { \r\n        clauses.push('description = ?'); \r\n        updateParams.push(description); \r\n    }\r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    } else if (requirements !== undefined) { \r\n        clauses.push('requirements = ?');\r\n        updateParams.push(requirements);\r\n    }\r\n    if (status !== undefined) { clauses.push('status = ?'); updateParams.push(status); }\r\n    \r\n    // super_admin can change location_id. location_admin cannot change location_id or change to different location\r\n    if (location_id !== undefined) {\r\n        if (role === 'super_admin') {\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        } else if (role === 'location_admin') {\r\n            if (location_id !== currentUserLocationId && location_id !== null) { // location_id can be null (company-wide)\r\n                return res.status(403).json({ error: 'Access Denied: Location admin cannot change job posting location to another location.' });\r\n            }\r\n            // If location admin updates job posting, and it's their location, or setting to null, it's allowed\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        }\r\n    }\r\n\r\n\r\n    if (clauses.length === 0) { return res.status(400).json({ error: 'No fields provided for update.' }); }\r\n\r\n    updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\r\n    updateParams.push(id, companyId);\r\n\r\n    // Additional security for location_admin: ensure they only update their own location's postings\r\n    if (role === 'location_admin') {\r\n        updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(updateSql, updateParams, function(err) {\r\n        if (err) { console.error(\"Database error updating job posting:\", err); return next(new Error('Failed to update job posting.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Job posting not found or not authorized to update.' }); }\r\n        res.status(200).json({ message: 'Job posting updated successfully!' });\r\n    });\r\n});\r\n\r\n/**\r\n * GET /api/job-postings\r\n * Retrieves job postings.\r\n * Can filter by location_id and status.\r\n * Requires super_admin or location_admin.\r\n */\r\napp.get('/api/job-postings', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { status, location_id } = req.query;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = 'SELECT * FROM JobPostings WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Authorization: super_admin sees all, location_admin sees their location's postings\r\n    if (role === 'location_admin') {\r\n        if (currentUserLocationId) {\r\n            sql += ' AND (location_id = ? OR location_id IS NULL)'; // Location admin sees their location's postings or company-wide\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        // Employees generally shouldn't see job postings list via this admin API\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view job postings.' });\r\n    }\r\n\r\n    // Input validation for query parameters\r\n    const allowedStatuses = ['Open', 'Closed', 'Filled']; // Assuming these are your valid statuses\r\n    if (status && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid job posting status filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n\r\n\r\n    if (status) {\r\n        sql += ' AND status = ?';\r\n        params.push(status);\r\n    }\r\n    // Only super admin can filter by any location_id beyond their own scope\r\n    if (location_id && role === 'super_admin') {\r\n        sql += ` AND location_id = ?`;\r\n        params.push(location_id);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching job postings:\", err); return next(new Error('Database error fetching job postings.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * PUT /api/job-postings/:id\r\n * Updates a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\r\napp.put('/api/job-postings/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { title, description, requirements, status, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Input Validation for Job Posting Update\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can update job postings.' });\r\n    }\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID provided.' });\r\n    }\r\n    if (title !== undefined && (typeof title !== 'string' || title.trim() === '')) {\r\n        return res.status(400).json({ error: 'Job title must be a non-empty string if provided.' });\r\n    }\r\n    if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    }\r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    }\r\n    const allowedStatuses = ['Open', 'Closed', 'Filled'];\r\n    if (status !== undefined && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid status provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    let updateSql = 'UPDATE JobPostings SET ';\r\n    const updateParams = [];\r\n    const clauses = [];\r\n\r\n    if (title !== undefined) { clauses.push('title = ?'); updateParams.push(title); }\r\n    // Line 1009 fix: Ensure this line and surrounding logic is correct.\r\n    if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) { // Line 1009\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    } else if (description !== undefined) { \r\n        clauses.push('description = ?'); \r\n        updateParams.push(description); \r\n    }\r\n    \r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    } else if (requirements !== undefined) { \r\n        clauses.push('requirements = ?');\r\n        updateParams.push(requirements);\r\n    }\r\n    \r\n    if (status !== undefined) { clauses.push('status = ?'); updateParams.push(status); }\r\n    \r\n    // super_admin can change location_id. location_admin cannot change location_id or change to different location\r\n    if (location_id !== undefined) {\r\n        if (role === 'super_admin') {\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        } else if (role === 'location_admin') {\r\n            if (location_id !== currentUserLocationId && location_id !== null) { // location_id can be null (company-wide)\r\n                return res.status(403).json({ error: 'Access Denied: Location admin cannot change job posting location to another location.' });\r\n            }\r\n            // If location admin updates job posting, and it's their location, or setting to null, it's allowed\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        }\r\n    }\r\n\r\n\r\n    if (clauses.length === 0) { return res.status(400).json({ error: 'No fields provided for update.' }); }\r\n\r\n    updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\r\n    updateParams.push(id, companyId);\r\n\r\n    // Additional security for location_admin: ensure they only update their own location's postings\r\n    if (role === 'location_admin') {\r\n        updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(updateSql, updateParams, function(err) {\r\n        if (err) { console.error(\"Database error updating job posting:\", err); return next(new Error('Failed to update job posting.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Job posting not found or not authorized to update.' }); }\r\n        res.status(200).json({ message: 'Job posting updated successfully!' });\r\n    });\r\n});\r\n\r\n/**\r\n * DELETE /api/job-postings/:id\r\n * Deletes a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\r\napp.delete('/api/job-postings/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID provided.' });\r\n    }\r\n\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can delete job postings.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM JobPostings WHERE job_posting_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Additional security for location_admin: ensure they only delete their own location's postings\r\n    if (role === 'location_admin') {\r\n        sql += ' AND (location_id = ? OR location_id IS NULL)';\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting job posting:\", err); return next(new Error('Failed to delete job posting.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Job posting not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n\r\n// Update Applicant API endpoints to use job_posting_id\r\napp.post('/api/applicants', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { job_posting_id, full_name, email, notes, location_id, phone_number } = req.body; // Added phone_number\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n    const application_date = new Date().toISOString(); // Current date/time for application\r\n\r\n    // Input Validation for Adding Applicant\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can add applicants.' });\r\n    }\r\n    if (typeof job_posting_id !== 'number' || job_posting_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid job posting ID is required.' });\r\n    }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    // Basic phone number validation (simple check for non-empty string, could be more complex with regex)\r\n    if (!phone_number || typeof phone_number !== 'string' || phone_number.trim() === '') {\r\n        return res.status(400).json({ error: \"Phone number is required.\" });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    // Verify job_posting_id belongs to the company, and for location_admin, to their location\r\n    db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], (err, jobPosting) => {\r\n        if (err) { console.error(\"Database error verifying job posting:\", err); return next(new Error('Database error when verifying job posting.')); } // Pass error\r\n        if (!jobPosting) { return res.status(400).json({ error: 'Job Posting not found or does not belong to your company.' }); }\r\n        \r\n        // Location admin can only add applicants to jobs in their assigned location or unassigned jobs\r\n        if (role === 'location_admin' && jobPosting.location_id !== currentUserLocationId && jobPosting.location_id !== null) {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin cannot add applicants to jobs outside their assigned location.' });\r\n        }\r\n\r\n        db.run(\r\n            'INSERT INTO Applicants (company_id, location_id, job_posting_id, full_name, email, phone_number, notes, application_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)',\r\n            [companyId, location_id || jobPosting.location_id, job_posting_id, full_name, email, phone_number, notes, application_date], // Use location_id from payload or job posting\r\n            function(insertErr) {\r\n                if (insertErr) { console.error(\"Database error creating applicant:\", insertErr); return next(new Error('Failed to create applicant.')); } // Pass error\r\n                res.status(201).json({ message: 'Applicant added successfully!', applicantId: this.lastID });\r\n            }\r\n        );\r\n    });\r\n});\r\n\r\napp.get('/api/applicants', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { job_posting_id, status, location_id } = req.query; // Added job_posting_id, status, location_id filters\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = `SELECT Applicants.*, JobPostings.title AS job_title_name\r\n               FROM Applicants\r\n               LEFT JOIN JobPostings ON Applicants.job_posting_id = JobPostings.job_posting_id\r\n               WHERE Applicants.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    // Input validation for query parameters\r\n    const allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired']; // Define valid statuses\r\n    if (status && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid applicant status filter provided.' });\r\n    }\r\n    if (job_posting_id && isNaN(parseInt(job_posting_id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n\r\n    if (status) {\r\n        sql += ` AND Applicants.status = ?`;\r\n        params.push(status);\r\n    }\r\n\r\n    if (role === 'location_admin') {\r\n        if (currentUserLocationId) {\r\n            sql += ` AND (Applicants.location_id = ? OR Applicants.location_id IS NULL)`; // Location admin sees applicants for their location or unassigned\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Applicants.user_id = ?`;\r\n        params.push(currentUserId);\r\n    } else {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view applicants.' });\r\n    }\r\n\r\n    // Apply job_posting_id filter if provided\r\n    if (job_posting_id) {\r\n        sql += ` AND Applicants.job_posting_id = ?`;\r\n        params.push(job_posting_id);\r\n    }\r\n    // Apply location filter from query params for super_admin\r\n    if (location_id && role === 'super_admin') {\r\n        sql += ` AND Applicants.location_id = ?`;\r\n        params.push(location_id);\r\n    }\r\n\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching applicants:\", err); return next(new Error('Database error fetching applicants.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * PUT /api/applicants/:id\r\n * Updates an applicant's details (e.g., status, notes).\r\n */\r\napp.put('/api/applicants/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { full_name, email, status, resume_url, notes, location_id, job_posting_id, phone_number } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Input Validation for Applicant Update\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can update applicant records.' });\r\n    }\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid applicant ID provided.' });\r\n    }\r\n    if (full_name !== undefined && (typeof full_name !== 'string' || full_name.trim() === '')) {\r\n        return res.status(400).json({ error: \"Full name must be a non-empty string if provided.\" });\r\n    }\r\n    if (email !== undefined && !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address must be provided if changing email.\" });\r\n    }\r\n    if (phone_number !== undefined && (typeof phone_number !== 'string' || phone_number.trim() === '')) {\r\n        return res.status(400).json({ error: \"Phone number must be a non-empty string if provided.\" });\r\n    }\r\n    const allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired'];\r\n    if (status !== undefined && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid status provided.' });\r\n    }\r\n    if (resume_url !== undefined && typeof resume_url !== 'string') { // Assuming resume_url is a string URL\r\n        return res.status(400).json({ error: 'Resume URL must be a string if provided.' });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n    if (job_posting_id !== undefined && typeof job_posting_id !== 'number' && job_posting_id !== null) {\r\n        return res.status(400).json({ error: 'Job posting ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    let updateSql = 'UPDATE Applicants SET ';\r\n    const updateParams = [];\r\n    const clauses = [];\r\n\r\n    if (full_name !== undefined) { clauses.push('full_name = ?'); updateParams.push(full_name); }\r\n    if (email !== undefined) { clauses.push('email = ?'); updateParams.push(email); }\r\n    if (phone_number !== undefined) { clauses.push('phone_number = ?'); updateParams.push(phone_number); }\r\n    if (status !== undefined) { clauses.push('status = ?'); updateParams.push(status); }\r\n    if (resume_url !== undefined) { clauses.push('resume_url = ?'); updateParams.push(resume_url); }\r\n    if (notes !== undefined) { clauses.push('notes = ?'); updateParams.push(notes); }\r\n    \r\n    // Admins can update location_id or job_posting_id, with restrictions for location_admin\r\n    if (location_id !== undefined) {\r\n        if (role === 'super_admin') {\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        } else if (role === 'location_admin') {\r\n            if (location_id !== currentUserLocationId && location_id !== null) { // location_id can be null (company-wide)\r\n                return res.status(403).json({ error: 'Access Denied: Location admin cannot assign applicants to another location.' });\r\n            }\r\n            // If location admin updates applicant location, and it's their location, or setting to null, it's allowed\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        }\r\n    }\r\n    if (job_posting_id !== undefined) {\r\n         if (role === 'super_admin') {\r\n            clauses.push('job_posting_id = ?'); updateParams.push(job_posting_id);\r\n        } else if (role === 'location_admin') {\r\n            // Verify new job_posting_id belongs to the location admin's assigned location or is company-wide\r\n            db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], (err, job) => {\r\n                if (err) { console.error(\"DB error verifying job posting for update:\", err); return next(new Error('Database error verifying job posting.')); } // Pass error\r\n                if (!job) { return res.status(400).json({ error: 'Job Posting not found or does not belong to your company.' }); }\r\n                if (job.location_id !== null && job.location_id !== currentUserLocationId) {\r\n                    return res.status(403).json({ error: 'Access Denied: Location admin cannot assign applicants to jobs outside their assigned location.' });\r\n                }\r\n            });\r\n            clauses.push('job_posting_id = ?'); updateParams.push(job_posting_id);\r\n        }\r\n    }\r\n\r\n\r\n    if (clauses.length === 0) { return res.status(400).json({ error: 'No fields provided for update.' }); }\r\n\r\n    updateSql += clauses.join(', ') + ' WHERE applicant_id = ? AND company_id = ?';\r\n    updateParams.push(id, companyId);\r\n\r\n    // For location_admin, ensure they can only update applicants within their assigned location\r\n    if (role === 'location_admin') {\r\n        updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned applicants too\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(updateSql, updateParams, function(err) {\r\n        if (err) { console.error(\"Database error updating applicant:\", err); return next(new Error('Failed to update applicant.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Applicant not found or not authorized to update.' }); }\r\n        res.status(200).json({ message: 'Applicant updated successfully!' });\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * DELETE /api/applicants/:id\r\n * Deletes an applicant.\r\n * Requires super_admin or location_admin (for their location's applicants).\r\n */\r\napp.delete('/api/applicants/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid applicant ID provided.' });\r\n    }\r\n\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can delete applicants.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM Applicants WHERE applicant_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Additional security for location_admin: ensure they only delete applicants in their own location\r\n    if (role === 'location_admin') {\r\n        sql += ' AND (location_id = ? OR location_id IS NULL)';\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting applicant:\", err); return next(new Error('Failed to delete applicant.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Applicant not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// --- Document Management Routes ---\r\n\r\n/**\r\n * POST /api/documents\r\n * Uploads (saves metadata for) a new document.\r\n * Requires authenticated user.\r\n * Note: Actual file storage is assumed to be handled by a separate service (e.g., S3).\r\n * This endpoint only stores the metadata and a URL.\r\n */\r\napp.post('/api/documents', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { title, file_name, file_type, file_url, description } = req.body;\r\n    const { companyId, userId } = req.user;\r\n    const upload_date = new Date().toISOString();\r\n\r\n    // Input Validation for Document Upload\r\n    if (!title || typeof title !== 'string' || title.trim() === '') {\r\n        return res.status(400).json({ error: 'Document title is required and must be a non-empty string.' });\r\n    }\r\n    if (!file_name || typeof file_name !== 'string' || file_name.trim() === '') {\r\n        return res.status(400).json({ error: 'File name is required and must be a non-empty string.' });\r\n    }\r\n    if (!file_type || typeof file_type !== 'string' || file_type.trim() === '') {\r\n        return res.status(400).json({ error: 'File type is required and must be a non-empty string.' });\r\n    }\r\n    // Basic URL validation: checks for http(s) protocol and some content. Can be more robust.\r\n    const urlRegex = /^https?:\\/\\/[^\\s$.?#].[^\\s]*$/i;\r\n    if (!file_url || typeof file_url !== 'string' || !urlRegex.test(file_url)) {\r\n        return res.status(400).json({ error: 'A valid file URL (starting with http or https) is required.' });\r\n    }\r\n    if (description !== undefined && typeof description !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n\r\n    db.run(\r\n        'INSERT INTO Documents (company_id, user_id, title, file_name, file_type, file_url, description, upload_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)',\r\n        [companyId, userId, title, file_name, file_type, file_url, description, upload_date],\r\n        function(err) {\r\n            if (err) {\r\n                console.error(\"Database error uploading document:\", err);\r\n                return next(new Error('Failed to upload document metadata.')); // Pass error\r\n            }\r\n            res.status(201).json({ message: 'Document metadata saved successfully!', documentId: this.lastID });\r\n        }\r\n    );\r\n});\r\n\r\n/**\r\n * GET /api/documents\r\n * Retrieves a list of documents for the company.\r\n * Filters can be added (e.g., by uploader, by type).\r\n * Requires authenticated user. Super admins can see all, others can see own documents.\r\n */\r\napp.get('/api/documents', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, userId, role } = req.user;\r\n    \r\n    let sql = 'SELECT * FROM Documents WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Non-super-admins only see their own documents\r\n    if (role !== 'super_admin') {\r\n        sql += ' AND user_id = ?';\r\n        params.push(userId);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching documents:\", err); return next(new Error('Database error fetching documents.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * DELETE /api/documents/:id\r\n * Deletes a document record.\r\n * Requires super_admin or the user who uploaded it.\r\n */\r\napp.delete('/api/documents/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, userId, role } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid document ID provided.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM Documents WHERE document_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Only super_admin or the original uploader can delete\r\n    if (role !== 'super_admin') {\r\n        sql += ' AND user_id = ?';\r\n        params.push(userId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting document:\", err); return next(new Error('Failed to delete document.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Document not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// Fallback for any other GET request not handled by an API route (serves index.html for SPA behavior)\r\n// This should always be the LAST route in your Express app\r\napp.get(/'*'/, (req, res) => {\r\n    // Correctly serve the index.html from the parent directory\r\n    res.sendFile(path.join(__dirname, '..', 'index.html'));\r\n});\r\n\r\n// --- Global Error Handling Middleware ---\r\n// This should be the very last middleware in your Express app\r\napp.use((err, req, res, next) => {\r\n    console.error(`Unhandled Error: ${err.stack}`); // Log the full stack trace for debugging\r\n    // Respond with a generic error message for the client\r\n    res.status(500).json({\r\n        error: 'An unexpected server error occurred. Please try again later.',\r\n        // In development, you might send more details:\r\n        // message: err.message,\r\n        // stack: process.env.NODE_ENV === 'development' ? err.stack : undefined\r\n    });\r\n});\r\n\r\n// --- Server Start ---\r\n// This conditional export allows the app to be imported for testing\r\n// without starting the server listener when the test runner requires it.\r\nif (require.main === module) {\r\n    // Only listen if this file is run directly (not required as a module)\r\n    app.listen(PORT, () => {\r\n        console.log(`Server is running successfully on http://localhost:${PORT}`);\r\n    });\r\n} else {\r\n    // Export the app for testing purposes\r\n    module.exports = app;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1750346437318},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\",\"filename\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$47\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.27.4:development":{"value":{"code":"\"use strict\";\n\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2); } }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n// --- Imports ---\nvar express = require('express');\nvar sqlite3 = require('sqlite3').verbose();\nvar bcrypt = require('bcryptjs');\nvar jwt = require('jsonwebtoken');\nvar cors = require('cors'); // Import cors\nvar path = require('path');\nvar csv = require('csv-parser'); // For CSV parsing\nvar _require = require('stream'),\n  Readable = _require.Readable; // For creating a readable stream from a string\nvar rateLimit = require('express-rate-limit'); // Import rate-limiting middleware\nvar morgan = require('morgan'); // Import morgan for request logging\n\n// Load environment variables from .env file in development\nif (process.env.NODE_ENV !== 'production') {\n  require('dotenv').config();\n}\n\n// Import the Stripe library and initialize it with your secret key\n// Use process.env.STRIPE_SECRET_KEY for production\nvar stripeInstance = require('stripe')(process.env.STRIPE_SECRET_KEY || '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');\n\n// --- App Initialization ---\nvar app = express();\n\n// Configure CORS for production environment\nvar allowedOrigins = process.env.CORS_ORIGIN ? process.env.CORS_ORIGIN.split(',') : ['http://localhost:8000']; // Default to localhost for development\n\n// Add 'null' to allowed origins if not in production and not explicitly set for local file access\nif (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\n  allowedOrigins.push('null');\n}\nvar corsOptions = {\n  origin: function origin(_origin, callback) {\n    // Allow requests with no origin (like mobile apps, curl, or local file access if 'null' is in allowedOrigins)\n    if (!_origin) {\n      // Check if 'null' is explicitly allowed or if we're in dev and no CORS_ORIGIN is set\n      if (allowedOrigins.includes('null') || process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\n        return callback(null, true);\n      }\n      var msg = 'The CORS policy for this site does not allow access from the specified Origin.';\n      return callback(new Error(msg), false);\n    }\n    if (allowedOrigins.indexOf(_origin) === -1) {\n      var _msg = 'The CORS policy for this site does not allow access from the specified Origin.';\n      return callback(new Error(_msg), false);\n    }\n    return callback(null, true);\n  },\n  methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\n  credentials: true,\n  // Allow cookies to be sent\n  optionsSuccessStatus: 204 // Some legacy browsers (IE11, various SmartTVs) choke on 204\n};\napp.use(cors(corsOptions));\n\n// Use process.env.PORT for production, fallback to 3000 for local development\nvar PORT = process.env.PORT || 3000;\n\n// Define a webhook secret for Stripe. This should also be an environment variable.\nvar STRIPE_WEBHOOK_SECRET = process.env.STRIPE_WEBHOOK_SECRET || 'whsec_YOUR_WEBHOOK_SECRET';\n\n// --- Rate Limiting Configuration ---\nvar authLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000,\n  // 15 minutes\n  max: 10,\n  // Max 10 requests per 15 minutes per IP\n  message: 'Too many login/registration attempts from this IP, please try again after 15 minutes',\n  standardHeaders: true,\n  // Return rate limit info in the `RateLimit-*` headers\n  legacyHeaders: false // Disable the `X-RateLimit-*` headers\n});\n\n// --- Middleware for Stripe Webhook (MUST be before express.json() for other routes) ---\n// This route needs the raw body for signature verification.\napp.post('/api/stripe-webhook', express.raw({\n  type: 'application/json'\n}), /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(req, res) {\n    var sig, event, session, userId, planId, subscriptionUpdated, subscriptionDeleted, invoiceSucceeded, invoiceFailed, _t, _t2;\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          sig = req.headers['stripe-signature'];\n          _context.p = 1;\n          event = stripeInstance.webhooks.constructEvent(req.body, sig, STRIPE_WEBHOOK_SECRET);\n          _context.n = 3;\n          break;\n        case 2:\n          _context.p = 2;\n          _t = _context.v;\n          console.error(\"Webhook Error: \".concat(_t.message));\n          return _context.a(2, res.status(400).send(\"Webhook Error: \".concat(_t.message)));\n        case 3:\n          _t2 = event.type;\n          _context.n = _t2 === 'checkout.session.completed' ? 4 : _t2 === 'customer.subscription.updated' ? 5 : _t2 === 'customer.subscription.deleted' ? 6 : _t2 === 'invoice.payment_succeeded' ? 7 : _t2 === 'invoice.payment_failed' ? 8 : 9;\n          break;\n        case 4:\n          session = event.data.object;\n          console.log('Checkout Session Completed:', session.id);\n          userId = session.metadata.userId;\n          planId = session.metadata.planId;\n          if (session.payment_status === 'paid' && userId && planId) {\n            db.run('UPDATE Users SET stripe_customer_id = ?, stripe_subscription_id = ?, subscription_status = ?, plan_id = ? WHERE user_id = ?', [session.customer, session.subscription, 'active', planId, userId], function (err) {\n              if (err) console.error('Database update error for checkout.session.completed:', err.message);else console.log(\"User \".concat(userId, \" subscription updated to \").concat(planId, \" (active).\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 5:\n          subscriptionUpdated = event.data.object;\n          console.log('Subscription Updated:', subscriptionUpdated.id);\n          if (subscriptionUpdated.customer && subscriptionUpdated.status && subscriptionUpdated.plan && subscriptionUpdated.plan.id) {\n            db.run('UPDATE Users SET subscription_status = ?, plan_id = ? WHERE stripe_customer_id = ?', [subscriptionUpdated.status, subscriptionUpdated.plan.id, subscriptionUpdated.customer], function (err) {\n              if (err) console.error('Database update error for customer.subscription.updated:', err.message);else console.log(\"Subscription for customer \".concat(subscriptionUpdated.customer, \" status updated to \").concat(subscriptionUpdated.status, \" and plan to \").concat(subscriptionUpdated.plan.id, \".\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 6:\n          subscriptionDeleted = event.data.object;\n          console.log('Subscription Deleted:', subscriptionDeleted.id);\n          if (subscriptionDeleted.customer) {\n            db.run('UPDATE Users SET subscription_status = ?, plan_id = ?, stripe_subscription_id = NULL WHERE stripe_customer_id = ?', ['cancelled', 'free', subscriptionDeleted.customer], function (err) {\n              if (err) console.error('Database update error for customer.subscription.deleted:', err.message);else console.log(\"Subscription for customer \".concat(subscriptionDeleted.customer, \" marked as cancelled and reverted to free.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 7:\n          invoiceSucceeded = event.data.object;\n          console.log('Invoice Payment Succeeded:', invoiceSucceeded.id);\n          if (invoiceSucceeded.subscription && invoiceSucceeded.customer) {\n            db.run('UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?', ['active', invoiceSucceeded.subscription, invoiceSucceeded.customer], function (err) {\n              if (err) console.error('Database update error for invoice.payment_succeeded:', err.message);else console.log(\"Subscription \".concat(invoiceSucceeded.subscription, \" status set to active.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 8:\n          invoiceFailed = event.data.object;\n          console.log('Invoice Payment Failed:', invoiceFailed.id);\n          if (invoiceFailed.subscription && invoiceFailed.customer) {\n            db.run('UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?', ['past_due', invoiceFailed.subscription, invoiceFailed.customer], function (err) {\n              if (err) console.error('Database update error for invoice.payment_failed:', err.message);else console.log(\"Subscription \".concat(invoiceFailed.subscription, \" status set to past_due.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 9:\n          console.log(\"Unhandled event type \".concat(event.type));\n        case 10:\n          res.status(200).json({\n            received: true\n          });\n        case 11:\n          return _context.a(2);\n      }\n    }, _callee, null, [[1, 2]]);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\n\n// IMPORTANT: express.json() for parsing JSON request bodies MUST come AFTER the webhook route\napp.use(express.json());\n\n// --- JWT Secret ---\n// Use process.env.JWT_SECRET for production\nvar JWT_SECRET = process.env.JWT_SECRET || 'your-super-secret-and-long-string-for-jwt';\n\n// --- Request Logging (using Morgan) ---\n// 'dev' format is good for development, 'combined' or 'tiny' for production logs\napp.use(morgan('dev'));\n\n// --- Serve Static Files (Frontend) with Caching ---\n// This middleware serves static files from the 'onboardflow' root directory\n// and sets Cache-Control headers for browser caching.\napp.use(express[\"static\"](path.join(__dirname, '..'), {\n  maxAge: '7d',\n  // Cache static assets for 7 days (e.g., CSS, JS, images, favicon)\n  immutable: false // Set to true if asset filenames include content hashes (e.g., app.min.js?v=hash)\n}));\n\n// --- Database Setup ---\nvar db = new sqlite3.Database('./onboardflow.db', function (err) {\n  if (err) {\n    // Log database connection error and exit\n    console.error(\"Error opening database:\", err.message);\n    process.exit(1); // Exit process if database connection fails\n  } else {\n    console.log(\"Successfully connected to the database.\");\n    db.get(\"PRAGMA foreign_keys = ON\");\n    db.serialize(function () {\n      db.run(\"CREATE TABLE IF NOT EXISTS Companies (company_id INTEGER PRIMARY KEY AUTOINCREMENT, company_name TEXT NOT NULL UNIQUE)\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Locations (location_id INTEGER PRIMARY KEY AUTOINCREMENT, company_id INTEGER, location_name TEXT NOT NULL, location_address TEXT NOT NULL, FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE)\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Users (\\n                user_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER,\\n                location_id INTEGER,\\n                full_name TEXT NOT NULL,\\n                email TEXT NOT NULL UNIQUE,\\n                password_hash TEXT NOT NULL,\\n                position TEXT,\\n                employee_id TEXT,\\n                role TEXT NOT NULL,\\n                stripe_customer_id TEXT,\\n                stripe_subscription_id TEXT,\\n                subscription_status TEXT,\\n                plan_id TEXT,\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Schedules (\\n                schedule_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                employee_id INTEGER NOT NULL,\\n                location_id INTEGER NOT NULL,\\n                start_time TEXT NOT NULL,\\n                end_time TEXT NOT NULL,\\n                notes TEXT,\\n                FOREIGN KEY (employee_id) REFERENCES Users(user_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      // NEW: Create JobPostings table\n      db.run(\"CREATE TABLE IF NOT EXISTS JobPostings (\\n                job_posting_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                location_id INTEGER, -- Optional: link job posting to a specific location\\n                title TEXT NOT NULL,\\n                description TEXT NOT NULL,\\n                requirements TEXT, -- Optional: job requirements\\n                status TEXT NOT NULL DEFAULT 'Open', -- e.g., 'Open', 'Closed', 'Filled'\\n                created_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      // Update Applicants table schema to link to JobPostings and add phone_number\n      db.run(\"CREATE TABLE IF NOT EXISTS Applicants (\\n                applicant_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                location_id INTEGER, -- Optional: applicant's preferred location or location applied for\\n                job_posting_id INTEGER, -- NEW: Link to JobPostings table\\n                full_name TEXT NOT NULL,\\n                email TEXT NOT NULL,\\n                phone_number TEXT, -- NEW: Phone number field\\n                status TEXT NOT NULL DEFAULT 'Applied', -- e.g., 'Applied', 'Interviewing', 'Rejected', 'Hired'\\n                resume_url TEXT, -- Optional: URL to a resume document (e.g., hosted on cloud storage)\\n                notes TEXT,\\n                application_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE,\\n                FOREIGN KEY (job_posting_id) REFERENCES JobPostings(job_posting_id) ON DELETE SET NULL -- If job posting is deleted, set this to NULL\\n            )\");\n      // NEW: Create Documents table for file/video uploads\n      db.run(\"CREATE TABLE IF NOT EXISTS Documents (\\n                document_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                user_id INTEGER NOT NULL, -- User who uploaded the document\\n                title TEXT NOT NULL,\\n                file_name TEXT NOT NULL,\\n                file_type TEXT NOT NULL,\\n                file_url TEXT NOT NULL, -- URL to the stored file (e.g., S3, GCS)\\n                description TEXT,\\n                upload_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (user_id) REFERENCES Users(user_id) ON DELETE CASCADE\\n            )\");\n    });\n  }\n});\n\n// --- Authentication Middleware ---\nfunction authenticateToken(req, res, next) {\n  var authHeader = req.headers['authorization'];\n  var token = authHeader && authHeader.split(' ')[1];\n  if (token == null) {\n    return res.status(401).json({\n      error: 'Unauthorized: No token provided.'\n    });\n  }\n  jwt.verify(token, JWT_SECRET, function (err, user) {\n    if (err) {\n      // Log the specific JWT error for debugging\n      console.error(\"JWT Verification Error:\", err.message);\n      return res.status(403).json({\n        error: 'Forbidden: Invalid or expired token.'\n      });\n    }\n    req.user = user;\n    next();\n  });\n}\n\n// --- Helper for Input Validation ---\nvar isValidEmail = function isValidEmail(email) {\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n};\n\n// --- API Routes (ALL API ROUTES SHOULD BE DEFINED HERE, BEFORE STATIC FILE SERVING) ---\n\n// Apply rate limiting to authentication routes\napp.post('/api/register', authLimiter, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(req, res, next) {\n    var _req$body, company_name, full_name, email, password, password_hash, _t3;\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          // Added 'next'\n          _req$body = req.body, company_name = _req$body.company_name, full_name = _req$body.full_name, email = _req$body.email, password = _req$body.password; // Input Validation for Registration\n          if (!(!company_name || typeof company_name !== 'string' || company_name.trim() === '')) {\n            _context2.n = 1;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Company name is required and must be a non-empty string.\"\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context2.n = 2;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context2.n = 3;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context2.n = 4;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          _context2.p = 4;\n          _context2.n = 5;\n          return bcrypt.hash(password, 10);\n        case 5:\n          password_hash = _context2.v;\n          db.serialize(function () {\n            db.run('BEGIN TRANSACTION');\n            db.run('INSERT INTO Companies (company_name) VALUES (?)', [company_name], function (err) {\n              if (err) {\n                db.run('ROLLBACK');\n                console.error(\"Database error creating company:\", err);\n                return next(new Error(\"Could not create company.\")); // Pass error to error handling middleware\n              }\n              var newCompanyId = this.lastID;\n              db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'super_admin', 'active', 'free')\", [newCompanyId, null, full_name, email, password_hash], function (userInsertErr) {\n                if (userInsertErr) {\n                  db.run('ROLLBACK');\n                  console.error(\"Database error creating user:\", userInsertErr);\n                  if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                    return res.status(409).json({\n                      error: 'Email already registered.'\n                    });\n                  }\n                  return next(new Error(\"Could not create user.\")); // Pass error\n                }\n                db.run('COMMIT');\n                res.status(201).json({\n                  message: \"Company and user registered successfully!\",\n                  userId: this.lastID\n                });\n              });\n            });\n          });\n          _context2.n = 7;\n          break;\n        case 6:\n          _context2.p = 6;\n          _t3 = _context2.v;\n          console.error(\"Registration error:\", _t3);\n          next(_t3); // Pass error to error handling middleware\n        case 7:\n          return _context2.a(2);\n      }\n    }, _callee2, null, [[4, 6]]);\n  }));\n  return function (_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}());\napp.post('/api/login', authLimiter, function (req, res, next) {\n  // Added 'next'\n  var _req$body2 = req.body,\n    email = _req$body2.email,\n    password = _req$body2.password;\n\n  // Input Validation for Login\n  if (!email || !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address is required.\"\n    });\n  }\n  if (!password || typeof password !== 'string' || password.length === 0) {\n    return res.status(400).json({\n      error: \"Password is required.\"\n    });\n  }\n  db.get(\"SELECT * FROM Users WHERE email = ?\", [email], /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(err, user) {\n      var isMatch, payload, token;\n      return _regenerator().w(function (_context3) {\n        while (1) switch (_context3.n) {\n          case 0:\n            if (!err) {\n              _context3.n = 1;\n              break;\n            }\n            console.error(\"Database error during login:\", err);\n            return _context3.a(2, next(new Error(\"A server error occurred during login.\")));\n          case 1:\n            if (user) {\n              _context3.n = 2;\n              break;\n            }\n            return _context3.a(2, res.status(401).json({\n              error: \"Invalid credentials.\"\n            }));\n          case 2:\n            _context3.n = 3;\n            return bcrypt.compare(password, user.password_hash);\n          case 3:\n            isMatch = _context3.v;\n            if (isMatch) {\n              _context3.n = 4;\n              break;\n            }\n            return _context3.a(2, res.status(401).json({\n              error: \"Invalid credentials.\"\n            }));\n          case 4:\n            payload = {\n              userId: user.user_id,\n              email: user.email,\n              role: user.role,\n              fullName: user.full_name,\n              companyId: user.company_id,\n              locationId: user.location_id,\n              subscriptionStatus: user.subscription_status,\n              planId: user.plan_id\n            };\n            token = jwt.sign(payload, JWT_SECRET, {\n              expiresIn: '1h'\n            });\n            res.status(200).json({\n              message: \"Login successful!\",\n              token: token,\n              role: user.role\n            });\n          case 5:\n            return _context3.a(2);\n        }\n      }, _callee3);\n    }));\n    return function (_x6, _x7) {\n      return _ref3.apply(this, arguments);\n    };\n  }());\n});\napp.post('/api/invite-admin', authenticateToken, /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(req, res, next) {\n    var _req$body3, full_name, email, password, location_id, _req$user, companyId, role, password_hash, _t4;\n    return _regenerator().w(function (_context4) {\n      while (1) switch (_context4.n) {\n        case 0:\n          // Added 'next'\n          _req$body3 = req.body, full_name = _req$body3.full_name, email = _req$body3.email, password = _req$body3.password, location_id = _req$body3.location_id;\n          _req$user = req.user, companyId = _req$user.companyId, role = _req$user.role; // Input Validation for Invite Admin\n          if (!(role !== 'super_admin')) {\n            _context4.n = 1;\n            break;\n          }\n          return _context4.a(2, res.status(403).json({\n            error: 'Access Denied: Only super admins can invite other admins.'\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context4.n = 2;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context4.n = 3;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context4.n = 4;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"Temporary password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          if (!(typeof location_id !== 'number' || location_id <= 0)) {\n            _context4.n = 5;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"A valid location ID is required.\"\n          }));\n        case 5:\n          _context4.p = 5;\n          _context4.n = 6;\n          return bcrypt.hash(password, 10);\n        case 6:\n          password_hash = _context4.v;\n          db.get('SELECT * FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n            if (err) {\n              console.error(\"Database error checking location:\", err);\n              return next(new Error('Database error when verifying location.'));\n            } // Pass error\n            if (!location) {\n              return res.status(400).json({\n                error: 'Selected location does not exist or does not belong to your company.'\n              });\n            }\n            db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'location_admin', 'active', 'free')\", [companyId, location_id, full_name, email, password_hash], function (userInsertErr) {\n              if (userInsertErr) {\n                console.error(\"Database error inviting admin:\", userInsertErr);\n                if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                  return res.status(409).json({\n                    error: 'Email already registered.'\n                  });\n                }\n                return next(new Error('Failed to invite admin.')); // Pass error\n              }\n              res.status(201).json({\n                message: \"Location admin invited successfully!\",\n                userId: this.lastID\n              });\n            });\n          });\n          _context4.n = 8;\n          break;\n        case 7:\n          _context4.p = 7;\n          _t4 = _context4.v;\n          console.error(\"Invite admin error:\", _t4);\n          next(_t4);\n        case 8:\n          return _context4.a(2);\n      }\n    }, _callee4, null, [[5, 7]]);\n  }));\n  return function (_x8, _x9, _x0) {\n    return _ref4.apply(this, arguments);\n  };\n}());\n\n// NEW: API endpoint for inviting employees\napp.post('/api/invite-employee', authenticateToken, /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(req, res, next) {\n    var _req$body4, full_name, email, password, position, employee_id, location_id, _req$user2, companyId, role, currentUserLocationId, isLocationIdValid, password_hash, locationVerification, _t5;\n    return _regenerator().w(function (_context5) {\n      while (1) switch (_context5.n) {\n        case 0:\n          _req$body4 = req.body, full_name = _req$body4.full_name, email = _req$body4.email, password = _req$body4.password, position = _req$body4.position, employee_id = _req$body4.employee_id, location_id = _req$body4.location_id;\n          _req$user2 = req.user, companyId = _req$user2.companyId, role = _req$user2.role, currentUserLocationId = _req$user2.locationId; // Authorization: Super admin can invite anyone, Location admin can only invite to their location or unassigned\n          if (['super_admin', 'location_admin'].includes(role)) {\n            _context5.n = 1;\n            break;\n          }\n          return _context5.a(2, res.status(403).json({\n            error: 'Access Denied: Only admins can invite employees.'\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context5.n = 2;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context5.n = 3;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context5.n = 4;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"Temporary password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          // Corrected location_id validation: Must be a number > 0.\n          // If location_id is null, it indicates an unassigned location, which is valid for a super admin.\n          // For location_admin, it must match their current location.\n          // This revised logic correctly checks for null OR a valid positive integer.\n          isLocationIdValid = location_id === null || typeof location_id === 'number' && !isNaN(location_id) && location_id > 0;\n          if (isLocationIdValid) {\n            _context5.n = 5;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"A valid location ID (positive number) is required for employee, or null for unassigned.\"\n          }));\n        case 5:\n          if (!(position !== undefined && typeof position !== 'string')) {\n            _context5.n = 6;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Position must be a string if provided.'\n          }));\n        case 6:\n          if (!(employee_id !== undefined && typeof employee_id !== 'string')) {\n            _context5.n = 7;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Employee ID must be a string if provided.'\n          }));\n        case 7:\n          if (!(role === 'location_admin')) {\n            _context5.n = 8;\n            break;\n          }\n          if (!(location_id !== currentUserLocationId)) {\n            _context5.n = 8;\n            break;\n          }\n          if (location_id === null && currentUserLocationId === null) {\n            _context5.n = 8;\n            break;\n          }\n          return _context5.a(2, res.status(403).json({\n            error: 'Access Denied: Location admin can only invite employees to their assigned location.'\n          }));\n        case 8:\n          _context5.p = 8;\n          _context5.n = 9;\n          return bcrypt.hash(password, 10);\n        case 9:\n          password_hash = _context5.v;\n          if (!(location_id !== null)) {\n            _context5.n = 11;\n            break;\n          }\n          _context5.n = 10;\n          return new Promise(function (resolve, reject) {\n            db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n              if (err) reject(err);\n              resolve(location);\n            });\n          });\n        case 10:\n          locationVerification = _context5.v;\n          if (locationVerification) {\n            _context5.n = 11;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Selected location does not exist or does not belong to your company.'\n          }));\n        case 11:\n          db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, position, employee_id, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, ?, ?, 'employee', 'active', 'free')\", [companyId, location_id, full_name, email, password_hash, position, employee_id],\n          // Default new employees to 'employee' role\n          function (userInsertErr) {\n            if (userInsertErr) {\n              console.error(\"Database error inviting employee:\", userInsertErr);\n              if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                return res.status(409).json({\n                  error: 'Email already registered.'\n                });\n              }\n              return next(new Error('Failed to invite employee.'));\n            }\n            res.status(201).json({\n              message: \"Employee invited successfully!\",\n              userId: this.lastID\n            });\n          });\n          _context5.n = 13;\n          break;\n        case 12:\n          _context5.p = 12;\n          _t5 = _context5.v;\n          console.error(\"Invite employee error:\", _t5);\n          next(_t5);\n        case 13:\n          return _context5.a(2);\n      }\n    }, _callee5, null, [[8, 12]]);\n  }));\n  return function (_x1, _x10, _x11) {\n    return _ref5.apply(this, arguments);\n  };\n}());\napp.get('/api/profile', authenticateToken, function (req, res) {\n  var _req$user3 = req.user,\n    userId = _req$user3.userId,\n    fullName = _req$user3.fullName,\n    email = _req$user3.email,\n    role = _req$user3.role,\n    companyId = _req$user3.companyId,\n    locationId = _req$user3.locationId,\n    subscriptionStatus = _req$user3.subscriptionStatus,\n    planId = _req$user3.planId;\n  res.status(200).json({\n    userId: userId,\n    fullName: fullName,\n    email: email,\n    role: role,\n    companyId: companyId,\n    locationId: locationId,\n    subscriptionStatus: subscriptionStatus,\n    planId: planId\n  });\n});\napp.put('/api/profile', authenticateToken, /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7(req, res, next) {\n    var _req$body5, fullName, email, currentPassword, newPassword, userId;\n    return _regenerator().w(function (_context7) {\n      while (1) switch (_context7.n) {\n        case 0:\n          // Added 'next'\n          _req$body5 = req.body, fullName = _req$body5.fullName, email = _req$body5.email, currentPassword = _req$body5.currentPassword, newPassword = _req$body5.newPassword;\n          userId = req.user.userId; // Input Validation for Profile Update\n          if (!(fullName === undefined && email === undefined && (!currentPassword || !newPassword))) {\n            _context7.n = 1;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: 'No data provided for update.'\n          }));\n        case 1:\n          if (!(fullName !== undefined && (typeof fullName !== 'string' || fullName.trim() === ''))) {\n            _context7.n = 2;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"Full name must be a non-empty string if provided.\"\n          }));\n        case 2:\n          if (!(email !== undefined && !isValidEmail(email))) {\n            _context7.n = 3;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"A valid email address must be provided if changing email.\"\n          }));\n        case 3:\n          if (!(newPassword !== undefined && (typeof newPassword !== 'string' || newPassword.length < 6))) {\n            _context7.n = 4;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"New password must be at least 6 characters long if changing password.\"\n          }));\n        case 4:\n          if (!(currentPassword && !newPassword || !currentPassword && newPassword)) {\n            _context7.n = 5;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: 'Both current password and new password are required to change password.'\n          }));\n        case 5:\n          db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], /*#__PURE__*/function () {\n            var _ref7 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6(err, user) {\n              var updateSql, updateParams, clauses, changesMade, existingUser, isMatch, newPasswordHash, _t6;\n              return _regenerator().w(function (_context6) {\n                while (1) switch (_context6.n) {\n                  case 0:\n                    if (!err) {\n                      _context6.n = 1;\n                      break;\n                    }\n                    console.error(\"Database error fetching user for profile update:\", err);\n                    return _context6.a(2, next(new Error(\"Server error during profile update.\")));\n                  case 1:\n                    if (user) {\n                      _context6.n = 2;\n                      break;\n                    }\n                    return _context6.a(2, res.status(404).json({\n                      error: \"User not found.\"\n                    }));\n                  case 2:\n                    updateSql = 'UPDATE Users SET ';\n                    updateParams = [];\n                    clauses = [];\n                    changesMade = false;\n                    if (fullName !== undefined && fullName !== user.full_name) {\n                      clauses.push('full_name = ?');\n                      updateParams.push(fullName);\n                      changesMade = true;\n                    }\n                    if (!(email !== undefined && email !== user.email)) {\n                      _context6.n = 8;\n                      break;\n                    }\n                    _context6.p = 3;\n                    _context6.n = 4;\n                    return new Promise(function (resolve, reject) {\n                      db.get(\"SELECT user_id FROM Users WHERE email = ? AND user_id != ?\", [email, userId], function (err, row) {\n                        if (err) reject(err);\n                        resolve(row);\n                      });\n                    });\n                  case 4:\n                    existingUser = _context6.v;\n                    if (!existingUser) {\n                      _context6.n = 5;\n                      break;\n                    }\n                    return _context6.a(2, res.status(409).json({\n                      error: 'Email already in use by another account.'\n                    }));\n                  case 5:\n                    _context6.n = 7;\n                    break;\n                  case 6:\n                    _context6.p = 6;\n                    _t6 = _context6.v;\n                    console.error(\"Database error checking existing email:\", _t6);\n                    return _context6.a(2, next(new Error(\"Server error verifying email availability.\")));\n                  case 7:\n                    clauses.push('email = ?');\n                    updateParams.push(email);\n                    changesMade = true;\n                  case 8:\n                    if (!(currentPassword && newPassword)) {\n                      _context6.n = 12;\n                      break;\n                    }\n                    _context6.n = 9;\n                    return bcrypt.compare(currentPassword, user.password_hash);\n                  case 9:\n                    isMatch = _context6.v;\n                    if (isMatch) {\n                      _context6.n = 10;\n                      break;\n                    }\n                    return _context6.a(2, res.status(401).json({\n                      error: \"Current password incorrect.\"\n                    }));\n                  case 10:\n                    _context6.n = 11;\n                    return bcrypt.hash(newPassword, 10);\n                  case 11:\n                    newPasswordHash = _context6.v;\n                    clauses.push('password_hash = ?');\n                    updateParams.push(newPasswordHash);\n                    changesMade = true;\n                  case 12:\n                    if (changesMade) {\n                      _context6.n = 13;\n                      break;\n                    }\n                    return _context6.a(2, res.status(200).json({\n                      message: 'No changes detected. Profile remains the same.'\n                    }));\n                  case 13:\n                    updateSql += clauses.join(', ') + ' WHERE user_id = ?';\n                    updateParams.push(userId);\n                    db.run(updateSql, updateParams, function (updateErr) {\n                      if (updateErr) {\n                        console.error(\"Database error updating profile:\", updateErr);\n                        return next(new Error('Failed to update profile.'));\n                      } // Pass error\n                      if (this.changes > 0) {\n                        db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], function (fetchErr, updatedUser) {\n                          if (fetchErr || !updatedUser) {\n                            console.error(\"Error fetching updated user for new token:\", fetchErr);\n                            return res.status(200).json({\n                              message: 'Profile updated successfully, but token could not be refreshed.'\n                            });\n                          }\n                          var newPayload = {\n                            userId: updatedUser.user_id,\n                            email: updatedUser.email,\n                            role: updatedUser.role,\n                            fullName: updatedUser.full_name,\n                            companyId: updatedUser.company_id,\n                            locationId: updatedUser.location_id,\n                            subscriptionStatus: updatedUser.subscription_status,\n                            planId: user.plan_id\n                          };\n                          var newToken = jwt.sign(newPayload, JWT_SECRET, {\n                            expiresIn: '1h'\n                          });\n                          res.status(200).json({\n                            message: 'Profile updated successfully!',\n                            token: newToken\n                          });\n                        });\n                      } else {\n                        res.status(200).json({\n                          message: 'No changes applied as data was identical.'\n                        });\n                      }\n                    });\n                  case 14:\n                    return _context6.a(2);\n                }\n              }, _callee6, null, [[3, 6]]);\n            }));\n            return function (_x15, _x16) {\n              return _ref7.apply(this, arguments);\n            };\n          }());\n        case 6:\n          return _context7.a(2);\n      }\n    }, _callee7);\n  }));\n  return function (_x12, _x13, _x14) {\n    return _ref6.apply(this, arguments);\n  };\n}());\napp.get('/api/locations', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user4 = req.user,\n    companyId = _req$user4.companyId,\n    role = _req$user4.role;\n  var sql = 'SELECT location_id, location_name, location_address FROM Locations WHERE company_id = ?';\n  var params = [companyId];\n\n  // Allowing super_admin, location_admin, and employee to view all locations in their company for dropdowns/selection\n  if (!['super_admin', 'location_admin', 'employee'].includes(role)) {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view locations.'\n    });\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching locations:\", err);\n      return next(new Error('Database error fetching locations.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp.post('/api/locations', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body6 = req.body,\n    location_name = _req$body6.location_name,\n    location_address = _req$body6.location_address;\n  var _req$user5 = req.user,\n    companyId = _req$user5.companyId,\n    role = _req$user5.role;\n\n  // Input Validation for Create Location\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can create locations.'\n    });\n  }\n  if (!location_name || typeof location_name !== 'string' || location_name.trim() === '') {\n    return res.status(400).json({\n      error: \"Location name is required and must be a non-empty string.\"\n    });\n  }\n  if (!location_address || typeof location_address !== 'string' || location_address.trim() === '') {\n    return res.status(400).json({\n      error: \"Location address is required and must be a non-empty string.\"\n    });\n  }\n  db.run('INSERT INTO Locations (company_id, location_name, location_address) VALUES (?, ?, ?)', [companyId, location_name, location_address], function (err) {\n    if (err) {\n      console.error(\"Database error creating location:\", err);\n      return next(new Error('Failed to create location.'));\n    } // Pass error\n    res.status(201).json({\n      message: 'Location created!',\n      locationId: this.lastID\n    });\n  });\n});\napp[\"delete\"]('/api/locations/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user6 = req.user,\n    companyId = _req$user6.companyId,\n    role = _req$user6.role;\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can delete locations.'\n    });\n  }\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID provided.'\n    });\n  }\n  db.run('DELETE FROM Locations WHERE location_id = ? AND company_id = ?', [id, companyId], function (err) {\n    if (err) {\n      console.error(\"Database error deleting location:\", err);\n      return next(new Error('Failed to delete location.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Location not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\napp.get('/api/users', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user7 = req.user,\n    companyId = _req$user7.companyId,\n    role = _req$user7.role,\n    currentUserId = _req$user7.userId,\n    currentUserLocationId = _req$user7.locationId;\n  var _req$query = req.query,\n    filterRole = _req$query.filterRole,\n    filterLocationId = _req$query.filterLocationId;\n  var sql = \"SELECT Users.user_id, Users.full_name, Users.email, Users.role, Locations.location_name\\n               FROM Users\\n               LEFT JOIN Locations ON Users.location_id = Locations.location_id\\n               WHERE Users.company_id = ?\";\n  var params = [companyId];\n  if (role === 'super_admin') {\n    // Super admin can view all users in their company.\n  } else if (role === 'location_admin') {\n    // Location admin can view all users within their assigned location, plus unassigned users for their company.\n    if (currentUserLocationId) {\n      sql += \" AND (Users.location_id = ? OR Users.location_id IS NULL)\"; // Admins might need to see unassigned users\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Users.user_id = ?\";\n    params.push(currentUserId);\n  } else {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view users.'\n    });\n  }\n\n  // Input validation for filterRole and filterLocationId\n  var allowedRoles = ['super_admin', 'location_admin', 'employee'];\n  if (filterRole && (!allowedRoles.includes(filterRole) || role === 'location_admin' && filterRole === 'super_admin')) {\n    return res.status(400).json({\n      error: 'Invalid filter role provided or insufficient permissions to filter by this role.'\n    });\n  }\n  if (filterLocationId && isNaN(parseInt(filterLocationId))) {\n    return res.status(400).json({\n      error: 'Invalid filter location ID provided.'\n    });\n  }\n  if (filterRole) {\n    if (role === 'super_admin' || role === 'location_admin' && (filterRole === 'employee' || filterRole === 'location_admin') || role === 'employee' && filterRole === 'employee') {\n      sql += \" AND Users.role = ?\";\n      params.push(filterRole);\n    } else {\n      // This case should ideally be caught by the earlier validation for allowedRoles, but for defense-in-depth:\n      return res.status(403).json({\n        error: 'Access Denied: Insufficient permissions to filter by role.'\n      });\n    }\n  }\n  if (filterLocationId) {\n    // Ensure location_admin can only filter by their own location\n    if (role === 'super_admin' || role === 'location_admin' && parseInt(filterLocationId) === currentUserLocationId) {\n      sql += \" AND Users.location_id = ?\";\n      params.push(filterLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Insufficient permissions to filter by location.'\n      });\n    }\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching users:\", err);\n      return next(new Error('Database error fetching users.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp[\"delete\"]('/api/users/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user8 = req.user,\n    companyId = _req$user8.companyId,\n    role = _req$user8.role,\n    authenticatedUserId = _req$user8.userId;\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can delete users.'\n    });\n  }\n  if (parseInt(id) === authenticatedUserId) {\n    return res.status(403).json({\n      error: 'Cannot delete your own super admin account via this interface.'\n    });\n  }\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid user ID provided.'\n    });\n  }\n  db.run('DELETE FROM Users WHERE user_id = ? AND company_id = ? AND role != \\'super_admin\\'', [id, companyId], function (err) {\n    if (err) {\n      console.error(\"Database error deleting user:\", err);\n      return next(new Error('Failed to delete user.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'User not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\napp.post('/api/create-checkout-session', authenticateToken, /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee8(req, res, next) {\n    var planId, _req$user9, userId, email, companyId, allowedPlanIds, priceIdMap, stripePriceId, customerId, userRecord, customer, session, _t7;\n    return _regenerator().w(function (_context8) {\n      while (1) switch (_context8.n) {\n        case 0:\n          // Added 'next'\n          planId = req.body.planId;\n          _req$user9 = req.user, userId = _req$user9.userId, email = _req$user9.email, companyId = _req$user9.companyId; // Input Validation for planId\n          allowedPlanIds = ['pro', 'enterprise'];\n          if (!(!planId || !allowedPlanIds.includes(planId))) {\n            _context8.n = 1;\n            break;\n          }\n          return _context8.a(2, res.status(400).json({\n            error: 'Invalid plan ID provided.'\n          }));\n        case 1:\n          priceIdMap = {\n            'pro': process.env.STRIPE_PRICE_ID_PRO,\n            // Use environment variable\n            'enterprise': process.env.STRIPE_PRICE_ID_ENT // Use environment variable\n          };\n          stripePriceId = priceIdMap[planId];\n          if (stripePriceId) {\n            _context8.n = 2;\n            break;\n          }\n          return _context8.a(2, res.status(500).json({\n            error: 'Stripe price ID not configured for this plan.'\n          }));\n        case 2:\n          _context8.p = 2;\n          _context8.n = 3;\n          return new Promise(function (resolve, reject) {\n            db.get('SELECT stripe_customer_id FROM Users WHERE user_id = ?', [userId], function (err, row) {\n              if (err) reject(err);\n              resolve(row);\n            });\n          });\n        case 3:\n          userRecord = _context8.v;\n          if (!(userRecord && userRecord.stripe_customer_id)) {\n            _context8.n = 4;\n            break;\n          }\n          customerId = userRecord.stripe_customer_id;\n          _context8.n = 6;\n          break;\n        case 4:\n          _context8.n = 5;\n          return stripeInstance.customers.create({\n            email: email,\n            metadata: {\n              userId: userId,\n              companyId: companyId\n            }\n          });\n        case 5:\n          customer = _context8.v;\n          customerId = customer.id;\n          db.run('UPDATE Users SET stripe_customer_id = ? WHERE user_id = ?', [customerId, userId], function (err) {\n            if (err) console.error('Failed to save Stripe customer ID to DB:', err);\n          });\n        case 6:\n          _context8.n = 7;\n          return stripeInstance.checkout.sessions.create({\n            customer: customerId,\n            mode: 'subscription',\n            line_items: [{\n              price: stripePriceId,\n              quantity: 1\n            }],\n            // Use environment variables for success/cancel URLs, or relative paths if handled client-side\n            success_url: \"\".concat(process.env.FRONTEND_URL || 'http://localhost:8000', \"/suite-hub.html?payment=success&session_id={CHECKOUT_SESSION_ID}\"),\n            cancel_url: \"\".concat(process.env.FRONTEND_URL || 'http://localhost:8000', \"/pricing.html?payment=cancelled\"),\n            metadata: {\n              userId: userId,\n              planId: planId\n            }\n          });\n        case 7:\n          session = _context8.v;\n          res.status(200).json({\n            url: session.url\n          });\n          _context8.n = 9;\n          break;\n        case 8:\n          _context8.p = 8;\n          _t7 = _context8.v;\n          console.error('Error creating Stripe Checkout Session:', _t7);\n          next(_t7);\n        case 9:\n          return _context8.a(2);\n      }\n    }, _callee8, null, [[2, 8]]);\n  }));\n  return function (_x17, _x18, _x19) {\n    return _ref8.apply(this, arguments);\n  };\n}());\napp.post('/api/schedules', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body7 = req.body,\n    employee_id = _req$body7.employee_id,\n    location_id = _req$body7.location_id,\n    start_time = _req$body7.start_time,\n    end_time = _req$body7.end_time,\n    notes = _req$body7.notes;\n  var _req$user0 = req.user,\n    companyId = _req$user0.companyId,\n    role = _req$user0.role,\n    currentUserId = _req$user0.userId;\n\n  // Input Validation for Create Schedule\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can create schedules.'\n    });\n  }\n  if (typeof employee_id !== 'number' || employee_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid employee ID is required.'\n    });\n  }\n  if (typeof location_id !== 'number' || location_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid location ID is required.'\n    });\n  }\n  if (!start_time || !end_time || isNaN(new Date(start_time).getTime()) || isNaN(new Date(end_time).getTime())) {\n    return res.status(400).json({\n      error: 'Valid start and end times are required.'\n    });\n  }\n  if (new Date(start_time) >= new Date(end_time)) {\n    return res.status(400).json({\n      error: 'Start time must be before end time.'\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  db.get('SELECT user_id FROM Users WHERE user_id = ? AND company_id = ?', [employee_id, companyId], function (err, employee) {\n    if (err) {\n      console.error(\"Database error verifying employee:\", err);\n      return next(new Error('Database error during employee verification.'));\n    } // Pass error\n    if (!employee) {\n      return res.status(400).json({\n        error: 'Employee not found in your company.'\n      });\n    }\n    db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n      if (err) {\n        console.error(\"Database error verifying location:\", err);\n        return next(new Error('Database error during location verification.'));\n      } // Pass error\n      if (!location) {\n        return res.status(400).json({\n          error: 'Location not found in your company.'\n        });\n      }\n      db.run('INSERT INTO Schedules (employee_id, location_id, start_time, end_time, notes) VALUES (?, ?, ?, ?, ?)', [employee_id, location_id, start_time, end_time, notes], function (insertErr) {\n        if (insertErr) {\n          console.error(\"Database error creating schedule:\", insertErr);\n          return next(new Error('Failed to create schedule.'));\n        } // Pass error\n        res.status(201).json({\n          message: 'Schedule created successfully!',\n          scheduleId: this.lastID\n        });\n      });\n    });\n  });\n});\napp.get('/api/schedules', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query2 = req.query,\n    employee_id = _req$query2.employee_id,\n    location_id = _req$query2.location_id,\n    start_date = _req$query2.start_date,\n    end_date = _req$query2.end_date;\n  var _req$user1 = req.user,\n    companyId = _req$user1.companyId,\n    role = _req$user1.role,\n    currentUserId = _req$user1.userId,\n    currentUserLocationId = _req$user1.locationId;\n  var sql = \"SELECT Schedules.*, Users.full_name AS employee_name, Users.email AS employee_email, Locations.location_name\\n               FROM Schedules\\n               JOIN Users ON Schedules.employee_id = Users.user_id\\n               JOIN Locations ON Schedules.location_id = Locations.location_id\\n               WHERE Users.company_id = ?\";\n  var params = [companyId];\n  if (role === 'location_admin') {\n    if (currentUserLocationId) {\n      sql += \" AND Schedules.location_id = ?\";\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Users.user_id = ?\";\n    params.push(currentUserId);\n  }\n\n  // Input validation for query parameters\n  if (employee_id && isNaN(parseInt(employee_id))) {\n    return res.status(400).json({\n      error: 'Invalid employee ID filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (start_date && isNaN(new Date(start_date).getTime())) {\n    return res.status(400).json({\n      error: 'Invalid start date filter provided.'\n    });\n  }\n  if (end_date && isNaN(new Date(end_date).getTime())) {\n    return res.status(400).json({\n      error: 'Invalid end date filter provided.'\n    });\n  }\n  if (employee_id && (role === 'super_admin' || role === 'location_admin' && parseInt(employee_id) === currentUserId || role === 'employee' && parseInt(employee_id) === currentUserId)) {\n    sql += \" AND Users.role = ?\";\n    params.push(filterRole); // This should be employee_id, not filterRole\n  }\n  if (location_id && (role === 'super_admin' || role === 'location_admin' && parseInt(location_id) === currentUserLocationId)) {\n    sql += \" AND Schedules.location_id = ?\";\n    params.push(location_id);\n  }\n  if (start_date) {\n    sql += \" AND Schedules.start_time >= ?\";\n    params.push(start_date);\n  }\n  if (end_date) {\n    sql += \" AND Schedules.end_time <= ?\";\n    params.push(end_date);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching schedules:\", err);\n      return next(new Error('Database error fetching schedules.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp[\"delete\"]('/api/schedules/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user10 = req.user,\n    companyId = _req$user10.companyId,\n    role = _req$user10.role,\n    currentUserId = _req$user10.userId,\n    currentUserLocationId = _req$user10.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid schedule ID provided.'\n    });\n  }\n  if (role === 'employee') {\n    return res.status(403).json({\n      error: 'Access Denied: Employees cannot delete schedules.'\n    });\n  }\n  var sql = \"DELETE FROM Schedules WHERE schedule_id = ?\";\n  var params = [id];\n  if (role === 'location_admin') {\n    sql += \" AND employee_id IN (SELECT user_id FROM Users WHERE location_id = ? AND company_id = ?)\";\n    params.push(currentUserLocationId, companyId);\n  } else if (role === 'super_admin') {\n    sql += \" AND employee_id IN (SELECT user_id FROM Users WHERE company_id = ?)\";\n    params.push(companyId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting schedule:\", err);\n      return next(new Error('Failed to delete schedule.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Schedule not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// --- Hiring Routes ---\n\n/**\r\n * POST /api/job-postings\r\n * Creates a new job posting.\r\n * Requires super_admin or location_admin role.\r\n */\napp.post('/api/job-postings', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body8 = req.body,\n    title = _req$body8.title,\n    description = _req$body8.description,\n    requirements = _req$body8.requirements,\n    location_id = _req$body8.location_id;\n  var _req$user11 = req.user,\n    companyId = _req$user11.companyId,\n    role = _req$user11.role,\n    currentUserLocationId = _req$user11.locationId;\n  var created_date = new Date().toISOString(); // Current date/time for creation\n\n  // Input Validation for Create Job Posting\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can create job postings.'\n    });\n  }\n  if (!title || typeof title !== 'string' || title.trim() === '') {\n    return res.status(400).json({\n      error: \"Job title is required and must be a non-empty string.\"\n    });\n  }\n  if (!description || typeof description !== 'string' || description.trim() === '') {\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    // location_id can be null\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n\n  // If location_admin, ensure location_id matches their assigned location, or is null\n  // A location admin can only create job postings for their assigned location or company-wide if their location is null\n  if (role === 'location_admin' && location_id && location_id !== currentUserLocationId) {\n    return res.status(403).json({\n      error: 'Access Denied: Location admin can only post jobs for their assigned location.'\n    });\n  }\n  db.run('INSERT INTO JobPostings (company_id, location_id, title, description, requirements, status, created_date) VALUES (?, ?, ?, ?, ?, ?, ?)', [companyId, location_id, title, description, requirements, 'Open', created_date],\n  // Default status to 'Open'\n  function (err) {\n    if (err) {\n      console.error(\"Database error creating job posting:\", err);\n      return next(new Error('Failed to create job posting.')); // Pass error\n    }\n    res.status(201).json({\n      message: 'Job posting created successfully!',\n      jobPostingId: this.lastID\n    });\n  });\n});\n\n/**\r\n * GET /api/job-postings\r\n * Retrieves job postings.\r\n * Can filter by location_id and status.\r\n * Requires super_admin or location_admin.\r\n */\napp.get('/api/job-postings', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query3 = req.query,\n    status = _req$query3.status,\n    location_id = _req$query3.location_id;\n  var _req$user12 = req.user,\n    companyId = _req$user12.companyId,\n    role = _req$user12.role,\n    currentUserLocationId = _req$user12.locationId;\n  var sql = 'SELECT * FROM JobPostings WHERE company_id = ?';\n  var params = [companyId];\n\n  // Authorization: super_admin sees all, location_admin sees their location's postings\n  if (role === 'location_admin') {\n    if (currentUserLocationId) {\n      sql += ' AND (location_id = ? OR location_id IS NULL)'; // Location admin sees their location's postings or company-wide\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    // Employees generally shouldn't see job postings list via this admin API\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view job postings.'\n    });\n  }\n\n  // Input validation for query parameters\n  var allowedStatuses = ['Open', 'Closed', 'Filled']; // Assuming these are your valid statuses\n  if (status && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid job posting status filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (status) {\n    sql += ' AND status = ?';\n    params.push(status);\n  }\n  // Only super admin can filter by any location_id beyond their own scope\n  if (location_id && role === 'super_admin') {\n    sql += ' AND location_id = ?';\n    params.push(location_id);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching job postings:\", err);\n      return next(new Error('Database error fetching job postings.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * PUT /api/job-postings/:id\r\n * Updates a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\napp.put('/api/job-postings/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$body9 = req.body,\n    title = _req$body9.title,\n    description = _req$body9.description,\n    requirements = _req$body9.requirements,\n    status = _req$body9.status,\n    location_id = _req$body9.location_id;\n  var _req$user13 = req.user,\n    companyId = _req$user13.companyId,\n    role = _req$user13.role,\n    currentUserLocationId = _req$user13.locationId;\n\n  // Input Validation for Job Posting Update\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can update job postings.'\n    });\n  }\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID provided.'\n    });\n  }\n  if (title !== undefined && (typeof title !== 'string' || title.trim() === '')) {\n    return res.status(400).json({\n      error: 'Job title must be a non-empty string if provided.'\n    });\n  }\n  if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  }\n  var allowedStatuses = ['Open', 'Closed', 'Filled'];\n  if (status !== undefined && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid status provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n  var updateSql = 'UPDATE JobPostings SET ';\n  var updateParams = [];\n  var clauses = [];\n  if (title !== undefined) {\n    clauses.push('title = ?');\n    updateParams.push(title);\n  }\n  // Fix: Missing closing parenthesis for this condition\n  if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\n    // Line 1009\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  }\n  if (status !== undefined) {\n    clauses.push('status = ?');\n    updateParams.push(status);\n  }\n\n  // super_admin can change location_id. location_admin cannot change location_id or change to different location\n  if (location_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    } else if (role === 'location_admin') {\n      if (location_id !== currentUserLocationId && location_id !== null) {\n        // location_id can be null (company-wide)\n        return res.status(403).json({\n          error: 'Access Denied: Location admin cannot change job posting location to another location.'\n        });\n      }\n      // If location admin updates job posting, and it's their location, or setting to null, it's allowed\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    }\n  }\n  if (clauses.length === 0) {\n    return res.status(400).json({\n      error: 'No fields provided for update.'\n    });\n  }\n  updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\n  updateParams.push(id, companyId);\n\n  // Additional security for location_admin: ensure they only update their own location's postings\n  if (role === 'location_admin') {\n    updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\n    params.push(currentUserLocationId);\n  }\n  db.run(updateSql, updateParams, function (err) {\n    if (err) {\n      console.error(\"Database error updating job posting:\", err);\n      return next(new Error('Failed to update job posting.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Job posting not found or not authorized to update.'\n      });\n    }\n    res.status(200).json({\n      message: 'Job posting updated successfully!'\n    });\n  });\n});\n\n/**\r\n * DELETE /api/job-postings/:id\r\n * Deletes a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\napp[\"delete\"]('/api/job-postings/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user14 = req.user,\n    companyId = _req$user14.companyId,\n    role = _req$user14.role,\n    currentUserLocationId = _req$user14.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID provided.'\n    });\n  }\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can delete job postings.'\n    });\n  }\n  var sql = 'DELETE FROM JobPostings WHERE job_posting_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Additional security for location_admin: ensure they only delete their own location's postings\n  if (role === 'location_admin') {\n    sql += ' AND (location_id = ? OR location_id IS NULL)';\n    params.push(currentUserLocationId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting job posting:\", err);\n      return next(new Error('Failed to delete job posting.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Job posting not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// Update Applicant API endpoints to use job_posting_id\napp.post('/api/applicants', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body0 = req.body,\n    job_posting_id = _req$body0.job_posting_id,\n    full_name = _req$body0.full_name,\n    email = _req$body0.email,\n    notes = _req$body0.notes,\n    location_id = _req$body0.location_id,\n    phone_number = _req$body0.phone_number; // Added phone_number\n  var _req$user15 = req.user,\n    companyId = _req$user15.companyId,\n    role = _req$user15.role,\n    currentUserLocationId = _req$user15.locationId;\n  var application_date = new Date().toISOString(); // Current date/time for application\n\n  // Input Validation for Adding Applicant\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can add applicants.'\n    });\n  }\n  if (typeof job_posting_id !== 'number' || job_posting_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid job posting ID is required.'\n    });\n  }\n  if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\n    return res.status(400).json({\n      error: \"Full name is required and must be a non-empty string.\"\n    });\n  }\n  if (!email || !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address is required.\"\n    });\n  }\n  // Basic phone number validation (simple check for non-empty string, could be more complex with regex)\n  if (!phone_number || typeof phone_number !== 'string' || phone_number.trim() === '') {\n    return res.status(400).json({\n      error: \"Phone number is required.\"\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n\n  // Verify job_posting_id belongs to the company, and for location_admin, to their location\n  db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], function (err, jobPosting) {\n    if (err) {\n      console.error(\"Database error verifying job posting:\", err);\n      return next(new Error('Database error when verifying job posting.'));\n    } // Pass error\n    if (!jobPosting) {\n      return res.status(400).json({\n        error: 'Job Posting not found or does not belong to your company.'\n      });\n    }\n\n    // Location admin can only add applicants to jobs in their assigned location or unassigned jobs\n    if (role === 'location_admin' && jobPosting.location_id !== currentUserLocationId && jobPosting.location_id !== null) {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin cannot add applicants to jobs outside their assigned location.'\n      });\n    }\n    db.run('INSERT INTO Applicants (company_id, location_id, job_posting_id, full_name, email, phone_number, notes, application_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)', [companyId, location_id || jobPosting.location_id, job_posting_id, full_name, email, phone_number, notes, application_date],\n    // Use location_id from payload or job posting\n    function (insertErr) {\n      if (insertErr) {\n        console.error(\"Database error creating applicant:\", insertErr);\n        return next(new Error('Failed to create applicant.'));\n      } // Pass error\n      res.status(201).json({\n        message: 'Applicant added successfully!',\n        applicantId: this.lastID\n      });\n    });\n  });\n});\napp.get('/api/applicants', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query4 = req.query,\n    job_posting_id = _req$query4.job_posting_id,\n    status = _req$query4.status,\n    location_id = _req$query4.location_id; // Added job_posting_id, status, location_id filters\n  var _req$user16 = req.user,\n    companyId = _req$user16.companyId,\n    role = _req$user16.role,\n    currentUserId = _req$user16.userId,\n    currentUserLocationId = _req$user16.locationId;\n  var sql = \"SELECT Applicants.*, JobPostings.title AS job_title_name\\n               FROM Applicants\\n               LEFT JOIN JobPostings ON Applicants.job_posting_id = JobPostings.job_posting_id\\n               WHERE Applicants.company_id = ?\";\n  var params = [companyId];\n\n  // Input validation for query parameters\n  var allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired']; // Define valid statuses\n  if (status && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid applicant status filter provided.'\n    });\n  }\n  if (job_posting_id && isNaN(parseInt(job_posting_id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (status) {\n    sql += \" AND Applicants.status = ?\";\n    params.push(status);\n  }\n  if (role === 'location_admin') {\n    if (currentUserLocationId) {\n      sql += \" AND (Applicants.location_id = ? OR Applicants.location_id IS NULL)\"; // Location admin sees applicants for their location or unassigned\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Applicants.user_id = ?\";\n    params.push(currentUserId);\n  } else {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view applicants.'\n    });\n  }\n\n  // Apply job_posting_id filter if provided\n  if (job_posting_id) {\n    sql += \" AND Applicants.job_posting_id = ?\";\n    params.push(job_posting_id);\n  }\n  // Apply location filter from query params for super_admin\n  if (location_id && role === 'super_admin') {\n    sql += \" AND Applicants.location_id = ?\";\n    params.push(location_id);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching applicants:\", err);\n      return next(new Error('Database error fetching applicants.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * PUT /api/applicants/:id\r\n * Updates an applicant's details (e.g., status, notes).\r\n */\napp.put('/api/applicants/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$body1 = req.body,\n    full_name = _req$body1.full_name,\n    email = _req$body1.email,\n    status = _req$body1.status,\n    resume_url = _req$body1.resume_url,\n    notes = _req$body1.notes,\n    location_id = _req$body1.location_id,\n    job_posting_id = _req$body1.job_posting_id,\n    phone_number = _req$body1.phone_number;\n  var _req$user17 = req.user,\n    companyId = _req$user17.companyId,\n    role = _req$user17.role,\n    currentUserLocationId = _req$user17.locationId;\n\n  // Input Validation for Applicant Update\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can update applicant records.'\n    });\n  }\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid applicant ID provided.'\n    });\n  }\n  if (full_name !== undefined && (typeof full_name !== 'string' || full_name.trim() === '')) {\n    return res.status(400).json({\n      error: \"Full name must be a non-empty string if provided.\"\n    });\n  }\n  if (email !== undefined && !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address must be provided if changing email.\"\n    });\n  }\n  if (phone_number !== undefined && (typeof phone_number !== 'string' || phone_number.trim() === '')) {\n    return res.status(400).json({\n      error: \"Phone number must be a non-empty string if provided.\"\n    });\n  }\n  var allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired'];\n  if (status !== undefined && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid status provided.'\n    });\n  }\n  if (resume_url !== undefined && typeof resume_url !== 'string') {\n    // Assuming resume_url is a string URL\n    return res.status(400).json({\n      error: 'Resume URL must be a string if provided.'\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n  if (job_posting_id !== undefined && typeof job_posting_id !== 'number' && job_posting_id !== null) {\n    return res.status(400).json({\n      error: 'Job posting ID must be a number or null if provided.'\n    });\n  }\n  var updateSql = 'UPDATE Applicants SET ';\n  var updateParams = [];\n  var clauses = [];\n\n  // Fields that can be updated\n  if (full_name !== undefined) {\n    clauses.push('full_name = ?');\n    updateParams.push(full_name);\n  }\n  if (email !== undefined) {\n    clauses.push('email = ?');\n    updateParams.push(email);\n  }\n  if (phone_number !== undefined) {\n    clauses.push('phone_number = ?');\n    updateParams.push(phone_number);\n  }\n  if (status !== undefined) {\n    clauses.push('status = ?');\n    updateParams.push(status);\n  }\n  if (resume_url !== undefined) {\n    clauses.push('resume_url = ?');\n    updateParams.push(resume_url);\n  }\n  if (notes !== undefined) {\n    clauses.push('notes = ?');\n    updateParams.push(notes);\n  }\n\n  // Admins can update location_id or job_posting_id, with restrictions for location_admin\n  if (location_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    } else if (role === 'location_admin') {\n      if (location_id !== currentUserLocationId && location_id !== null) {\n        // location_id can be null (company-wide)\n        return res.status(403).json({\n          error: 'Access Denied: Location admin cannot assign applicants to another location.'\n        });\n      }\n      // If location admin updates applicant location, and it's their location, or setting to null, it's allowed\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    }\n  }\n  if (job_posting_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('job_posting_id = ?');\n      updateParams.push(job_posting_id);\n    } else if (role === 'location_admin') {\n      // Verify new job_posting_id belongs to the location admin's assigned location or is company-wide\n      db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], function (err, job) {\n        if (err) {\n          console.error(\"DB error verifying job posting for update:\", err);\n          return next(new Error('Database error verifying job posting.'));\n        } // Pass error\n        if (!job) {\n          return res.status(400).json({\n            error: 'Job Posting not found or does not belong to your company.'\n          });\n        }\n        if (job.location_id !== null && job.location_id !== currentUserLocationId) {\n          return res.status(403).json({\n            error: 'Access Denied: Location admin cannot assign applicants to jobs outside their assigned location.'\n          });\n        }\n      });\n      clauses.push('job_posting_id = ?');\n      updateParams.push(job_posting_id);\n    }\n  }\n  if (clauses.length === 0) {\n    return res.status(400).json({\n      error: 'No fields provided for update.'\n    });\n  }\n  updateSql += clauses.join(', ') + ' WHERE applicant_id = ? AND company_id = ?';\n  updateParams.push(id, companyId);\n\n  // For location_admin, ensure they can only update applicants within their assigned location\n  if (role === 'location_admin') {\n    updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned applicants too\n    params.push(currentUserLocationId);\n  }\n  db.run(updateSql, updateParams, function (err) {\n    if (err) {\n      console.error(\"Database error updating applicant:\", err);\n      return next(new Error('Failed to update applicant.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Applicant not found or not authorized to update.'\n      });\n    }\n    res.status(200).json({\n      message: 'Applicant updated successfully!'\n    });\n  });\n});\n\n/**\r\n * DELETE /api/applicants/:id\r\n * Deletes an applicant.\r\n * Requires super_admin or location_admin (for their location's applicants).\r\n */\napp[\"delete\"]('/api/applicants/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user18 = req.user,\n    companyId = _req$user18.companyId,\n    role = _req$user18.role,\n    currentUserLocationId = _req$user18.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid applicant ID provided.'\n    });\n  }\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can delete applicants.'\n    });\n  }\n  var sql = 'DELETE FROM Applicants WHERE applicant_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Additional security for location_admin: ensure they only delete applicants in their own location\n  if (role === 'location_admin') {\n    sql += ' AND (location_id = ? OR location_id IS NULL)';\n    params.push(currentUserLocationId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting applicant:\", err);\n      return next(new Error('Failed to delete applicant.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Applicant not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// --- Document Management Routes ---\n\n/**\r\n * POST /api/documents\r\n * Uploads (saves metadata for) a new document.\r\n * Requires authenticated user.\r\n * Note: Actual file storage is assumed to be handled by a separate service (e.g., S3).\r\n * This endpoint only stores the metadata and a URL.\r\n */\napp.post('/api/documents', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body10 = req.body,\n    title = _req$body10.title,\n    file_name = _req$body10.file_name,\n    file_type = _req$body10.file_type,\n    file_url = _req$body10.file_url,\n    description = _req$body10.description;\n  var _req$user19 = req.user,\n    companyId = _req$user19.companyId,\n    userId = _req$user19.userId;\n  var upload_date = new Date().toISOString();\n\n  // Input Validation for Document Upload\n  if (!title || typeof title !== 'string' || title.trim() === '') {\n    return res.status(400).json({\n      error: 'Document title is required and must be a non-empty string.'\n    });\n  }\n  if (!file_name || typeof file_name !== 'string' || file_name.trim() === '') {\n    return res.status(400).json({\n      error: 'File name is required and must be a non-empty string.'\n    });\n  }\n  if (!file_type || typeof file_type !== 'string' || file_type.trim() === '') {\n    return res.status(400).json({\n      error: 'File type is required and must be a non-empty string.'\n    });\n  }\n  // Basic URL validation: checks for http(s) protocol and some content. Can be more robust.\n  var urlRegex = /^https?:\\/\\/[^\\s$.?#].[^\\s]*$/i;\n  if (!file_url || typeof file_url !== 'string' || !urlRegex.test(file_url)) {\n    return res.status(400).json({\n      error: 'A valid file URL (starting with http or https) is required.'\n    });\n  }\n  if (description !== undefined && typeof description !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  db.run('INSERT INTO Documents (company_id, user_id, title, file_name, file_type, file_url, description, upload_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)', [companyId, userId, title, file_name, file_type, file_url, description, upload_date], function (err) {\n    if (err) {\n      console.error(\"Database error uploading document:\", err);\n      return next(new Error('Failed to upload document metadata.')); // Pass error\n    }\n    res.status(201).json({\n      message: 'Document metadata saved successfully!',\n      documentId: this.lastID\n    });\n  });\n});\n\n/**\r\n * GET /api/documents\r\n * Retrieves a list of documents for the company.\r\n * Filters can be added (e.g., by uploader, by type).\r\n * Requires authenticated user. Super admins can see all, others can see own documents.\r\n */\napp.get('/api/documents', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user20 = req.user,\n    companyId = _req$user20.companyId,\n    userId = _req$user20.userId,\n    role = _req$user20.role;\n  var sql = 'SELECT * FROM Documents WHERE company_id = ?';\n  var params = [companyId];\n\n  // Non-super-admins only see their own documents\n  if (role !== 'super_admin') {\n    sql += ' AND user_id = ?';\n    params.push(userId);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching documents:\", err);\n      return next(new Error('Database error fetching documents.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * DELETE /api/documents/:id\r\n * Deletes a document record.\r\n * Requires super_admin or the user who uploaded it.\r\n */\napp[\"delete\"]('/api/documents/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user21 = req.user,\n    companyId = _req$user21.companyId,\n    userId = _req$user21.userId,\n    role = _req$user21.role;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid document ID provided.'\n    });\n  }\n  var sql = 'DELETE FROM Documents WHERE document_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Only super_admin or the original uploader can delete\n  if (role !== 'super_admin') {\n    sql += ' AND user_id = ?';\n    params.push(userId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting document:\", err);\n      return next(new Error('Failed to delete document.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Document not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// Fallback for any other GET request not handled by an API route (serves index.html for SPA behavior)\n// This should always be the LAST route in your Express app\napp.get(/'*'/, function (req, res) {\n  // Correctly serve the index.html from the parent directory\n  res.sendFile(path.join(__dirname, '..', 'index.html'));\n});\n\n// --- Global Error Handling Middleware ---\n// This should be the very last middleware in your Express app\napp.use(function (err, req, res, next) {\n  console.error(\"Unhandled Error: \".concat(err.stack)); // Log the full stack trace for debugging\n  // Respond with a generic error message for the client\n  res.status(500).json({\n    error: 'An unexpected server error occurred. Please try again later.'\n    // In development, you might send more details:\n    // message: err.message,\n    // stack: process.env.NODE_ENV === 'development' ? err.stack : undefined\n  });\n});\n\n// --- Server Start ---\n// This conditional export allows the app to be imported for testing\n// without starting the server listener when the test runner requires it.\nif (require.main === module) {\n  // Only listen if this file is run directly (not required as a module)\n  app.listen(PORT, function () {\n    console.log(\"Server is running successfully on http://localhost:\".concat(PORT));\n  });\n} else {\n  // Export the app for testing purposes\n  module.exports = app;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiX2ludm9rZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsImV4cHJlc3MiLCJyZXF1aXJlIiwic3FsaXRlMyIsInZlcmJvc2UiLCJiY3J5cHQiLCJqd3QiLCJjb3JzIiwicGF0aCIsImNzdiIsIl9yZXF1aXJlIiwiUmVhZGFibGUiLCJyYXRlTGltaXQiLCJtb3JnYW4iLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJjb25maWciLCJzdHJpcGVJbnN0YW5jZSIsIlNUUklQRV9TRUNSRVRfS0VZIiwiYXBwIiwiYWxsb3dlZE9yaWdpbnMiLCJDT1JTX09SSUdJTiIsInNwbGl0IiwicHVzaCIsImNvcnNPcHRpb25zIiwib3JpZ2luIiwiY2FsbGJhY2siLCJpbmNsdWRlcyIsIm1zZyIsIkVycm9yIiwiaW5kZXhPZiIsIm1ldGhvZHMiLCJjcmVkZW50aWFscyIsIm9wdGlvbnNTdWNjZXNzU3RhdHVzIiwidXNlIiwiUE9SVCIsIlNUUklQRV9XRUJIT09LX1NFQ1JFVCIsImF1dGhMaW1pdGVyIiwid2luZG93TXMiLCJtYXgiLCJtZXNzYWdlIiwic3RhbmRhcmRIZWFkZXJzIiwibGVnYWN5SGVhZGVycyIsInBvc3QiLCJyYXciLCJ0eXBlIiwiX3JlZiIsIl9jYWxsZWUiLCJyZXEiLCJyZXMiLCJzaWciLCJldmVudCIsInNlc3Npb24iLCJ1c2VySWQiLCJwbGFuSWQiLCJzdWJzY3JpcHRpb25VcGRhdGVkIiwic3Vic2NyaXB0aW9uRGVsZXRlZCIsImludm9pY2VTdWNjZWVkZWQiLCJpbnZvaWNlRmFpbGVkIiwiX3QiLCJfdDIiLCJfY29udGV4dCIsImhlYWRlcnMiLCJ3ZWJob29rcyIsImNvbnN0cnVjdEV2ZW50IiwiYm9keSIsImNvbnNvbGUiLCJlcnJvciIsImNvbmNhdCIsInN0YXR1cyIsInNlbmQiLCJkYXRhIiwib2JqZWN0IiwibG9nIiwiaWQiLCJtZXRhZGF0YSIsInBheW1lbnRfc3RhdHVzIiwiZGIiLCJydW4iLCJjdXN0b21lciIsInN1YnNjcmlwdGlvbiIsImVyciIsInBsYW4iLCJqc29uIiwicmVjZWl2ZWQiLCJfeCIsIl94MiIsIkpXVF9TRUNSRVQiLCJqb2luIiwiX19kaXJuYW1lIiwibWF4QWdlIiwiaW1tdXRhYmxlIiwiRGF0YWJhc2UiLCJleGl0IiwiZ2V0Iiwic2VyaWFsaXplIiwiYXV0aGVudGljYXRlVG9rZW4iLCJuZXh0IiwiYXV0aEhlYWRlciIsInRva2VuIiwidmVyaWZ5IiwidXNlciIsImlzVmFsaWRFbWFpbCIsImVtYWlsIiwidGVzdCIsIl9yZWYyIiwiX2NhbGxlZTIiLCJfcmVxJGJvZHkiLCJjb21wYW55X25hbWUiLCJmdWxsX25hbWUiLCJwYXNzd29yZCIsInBhc3N3b3JkX2hhc2giLCJfdDMiLCJfY29udGV4dDIiLCJ0cmltIiwiaGFzaCIsIm5ld0NvbXBhbnlJZCIsImxhc3RJRCIsInVzZXJJbnNlcnRFcnIiLCJfeDMiLCJfeDQiLCJfeDUiLCJfcmVxJGJvZHkyIiwiX3JlZjMiLCJfY2FsbGVlMyIsImlzTWF0Y2giLCJwYXlsb2FkIiwiX2NvbnRleHQzIiwiY29tcGFyZSIsInVzZXJfaWQiLCJyb2xlIiwiZnVsbE5hbWUiLCJjb21wYW55SWQiLCJjb21wYW55X2lkIiwibG9jYXRpb25JZCIsImxvY2F0aW9uX2lkIiwic3Vic2NyaXB0aW9uU3RhdHVzIiwic3Vic2NyaXB0aW9uX3N0YXR1cyIsInBsYW5faWQiLCJzaWduIiwiZXhwaXJlc0luIiwiX3g2IiwiX3g3IiwiX3JlZjQiLCJfY2FsbGVlNCIsIl9yZXEkYm9keTMiLCJfcmVxJHVzZXIiLCJfdDQiLCJfY29udGV4dDQiLCJsb2NhdGlvbiIsIl94OCIsIl94OSIsIl94MCIsIl9yZWY1IiwiX2NhbGxlZTUiLCJfcmVxJGJvZHk0IiwicG9zaXRpb24iLCJlbXBsb3llZV9pZCIsIl9yZXEkdXNlcjIiLCJjdXJyZW50VXNlckxvY2F0aW9uSWQiLCJpc0xvY2F0aW9uSWRWYWxpZCIsImxvY2F0aW9uVmVyaWZpY2F0aW9uIiwiX3Q1IiwiX2NvbnRleHQ1IiwiaXNOYU4iLCJ1bmRlZmluZWQiLCJyZWplY3QiLCJfeDEiLCJfeDEwIiwiX3gxMSIsIl9yZXEkdXNlcjMiLCJwdXQiLCJfcmVmNiIsIl9jYWxsZWU3IiwiX3JlcSRib2R5NSIsImN1cnJlbnRQYXNzd29yZCIsIm5ld1Bhc3N3b3JkIiwiX2NvbnRleHQ3IiwiX3JlZjciLCJfY2FsbGVlNiIsInVwZGF0ZVNxbCIsInVwZGF0ZVBhcmFtcyIsImNsYXVzZXMiLCJjaGFuZ2VzTWFkZSIsImV4aXN0aW5nVXNlciIsIm5ld1Bhc3N3b3JkSGFzaCIsIl90NiIsIl9jb250ZXh0NiIsInJvdyIsInVwZGF0ZUVyciIsImNoYW5nZXMiLCJmZXRjaEVyciIsInVwZGF0ZWRVc2VyIiwibmV3UGF5bG9hZCIsIm5ld1Rva2VuIiwiX3gxNSIsIl94MTYiLCJfeDEyIiwiX3gxMyIsIl94MTQiLCJfcmVxJHVzZXI0Iiwic3FsIiwicGFyYW1zIiwiYWxsIiwicm93cyIsIl9yZXEkYm9keTYiLCJsb2NhdGlvbl9uYW1lIiwibG9jYXRpb25fYWRkcmVzcyIsIl9yZXEkdXNlcjUiLCJfcmVxJHVzZXI2IiwicGFyc2VJbnQiLCJfcmVxJHVzZXI3IiwiY3VycmVudFVzZXJJZCIsIl9yZXEkcXVlcnkiLCJxdWVyeSIsImZpbHRlclJvbGUiLCJmaWx0ZXJMb2NhdGlvbklkIiwiYWxsb3dlZFJvbGVzIiwiX3JlcSR1c2VyOCIsImF1dGhlbnRpY2F0ZWRVc2VySWQiLCJfcmVmOCIsIl9jYWxsZWU4IiwiX3JlcSR1c2VyOSIsImFsbG93ZWRQbGFuSWRzIiwicHJpY2VJZE1hcCIsInN0cmlwZVByaWNlSWQiLCJjdXN0b21lcklkIiwidXNlclJlY29yZCIsIl90NyIsIl9jb250ZXh0OCIsIlNUUklQRV9QUklDRV9JRF9QUk8iLCJTVFJJUEVfUFJJQ0VfSURfRU5UIiwic3RyaXBlX2N1c3RvbWVyX2lkIiwiY3VzdG9tZXJzIiwiY2hlY2tvdXQiLCJzZXNzaW9ucyIsIm1vZGUiLCJsaW5lX2l0ZW1zIiwicHJpY2UiLCJxdWFudGl0eSIsInN1Y2Nlc3NfdXJsIiwiRlJPTlRFTkRfVVJMIiwiY2FuY2VsX3VybCIsInVybCIsIl94MTciLCJfeDE4IiwiX3gxOSIsIl9yZXEkYm9keTciLCJzdGFydF90aW1lIiwiZW5kX3RpbWUiLCJub3RlcyIsIl9yZXEkdXNlcjAiLCJEYXRlIiwiZ2V0VGltZSIsImVtcGxveWVlIiwiaW5zZXJ0RXJyIiwic2NoZWR1bGVJZCIsIl9yZXEkcXVlcnkyIiwic3RhcnRfZGF0ZSIsImVuZF9kYXRlIiwiX3JlcSR1c2VyMSIsIl9yZXEkdXNlcjEwIiwiX3JlcSRib2R5OCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJyZXF1aXJlbWVudHMiLCJfcmVxJHVzZXIxMSIsImNyZWF0ZWRfZGF0ZSIsInRvSVNPU3RyaW5nIiwiam9iUG9zdGluZ0lkIiwiX3JlcSRxdWVyeTMiLCJfcmVxJHVzZXIxMiIsImFsbG93ZWRTdGF0dXNlcyIsIl9yZXEkYm9keTkiLCJfcmVxJHVzZXIxMyIsIl9yZXEkdXNlcjE0IiwiX3JlcSRib2R5MCIsImpvYl9wb3N0aW5nX2lkIiwicGhvbmVfbnVtYmVyIiwiX3JlcSR1c2VyMTUiLCJhcHBsaWNhdGlvbl9kYXRlIiwiam9iUG9zdGluZyIsImFwcGxpY2FudElkIiwiX3JlcSRxdWVyeTQiLCJfcmVxJHVzZXIxNiIsIl9yZXEkYm9keTEiLCJyZXN1bWVfdXJsIiwiX3JlcSR1c2VyMTciLCJqb2IiLCJfcmVxJHVzZXIxOCIsIl9yZXEkYm9keTEwIiwiZmlsZV9uYW1lIiwiZmlsZV90eXBlIiwiZmlsZV91cmwiLCJfcmVxJHVzZXIxOSIsInVwbG9hZF9kYXRlIiwidXJsUmVnZXgiLCJkb2N1bWVudElkIiwiX3JlcSR1c2VyMjAiLCJfcmVxJHVzZXIyMSIsInNlbmRGaWxlIiwic3RhY2siLCJtYWluIiwibW9kdWxlIiwibGlzdGVuIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFx4YXJjeVxcT25lRHJpdmVcXERlc2t0b3BcXG9uYm9hcmRmbG93XFxiYWNrZW5kXFwiLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAtLS0gSW1wb3J0cyAtLS1cclxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3Qgc3FsaXRlMyA9IHJlcXVpcmUoJ3NxbGl0ZTMnKS52ZXJib3NlKCk7XHJcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7XHJcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xyXG5jb25zdCBjb3JzID0gcmVxdWlyZSgnY29ycycpOyAvLyBJbXBvcnQgY29yc1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5jb25zdCBjc3YgPSByZXF1aXJlKCdjc3YtcGFyc2VyJyk7IC8vIEZvciBDU1YgcGFyc2luZ1xyXG5jb25zdCB7IFJlYWRhYmxlIH0gPSByZXF1aXJlKCdzdHJlYW0nKTsgLy8gRm9yIGNyZWF0aW5nIGEgcmVhZGFibGUgc3RyZWFtIGZyb20gYSBzdHJpbmdcclxuY29uc3QgcmF0ZUxpbWl0ID0gcmVxdWlyZSgnZXhwcmVzcy1yYXRlLWxpbWl0Jyk7IC8vIEltcG9ydCByYXRlLWxpbWl0aW5nIG1pZGRsZXdhcmVcclxuY29uc3QgbW9yZ2FuID0gcmVxdWlyZSgnbW9yZ2FuJyk7IC8vIEltcG9ydCBtb3JnYW4gZm9yIHJlcXVlc3QgbG9nZ2luZ1xyXG5cclxuLy8gTG9hZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZnJvbSAuZW52IGZpbGUgaW4gZGV2ZWxvcG1lbnRcclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgIHJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xyXG59XHJcblxyXG4vLyBJbXBvcnQgdGhlIFN0cmlwZSBsaWJyYXJ5IGFuZCBpbml0aWFsaXplIGl0IHdpdGggeW91ciBzZWNyZXQga2V5XHJcbi8vIFVzZSBwcm9jZXNzLmVudi5TVFJJUEVfU0VDUkVUX0tFWSBmb3IgcHJvZHVjdGlvblxyXG5jb25zdCBzdHJpcGVJbnN0YW5jZSA9IHJlcXVpcmUoJ3N0cmlwZScpKHByb2Nlc3MuZW52LlNUUklQRV9TRUNSRVRfS0VZIHx8ICdza19saXZlXzUxUmE0UkpHMDZOSHJ3c1k5dVpySHBXeVRySm0yMXFlaDNXV0VDVXVwWDR6VTZiTmJqYTE1aEhFeDZOTGxEOWY3WXZ5YTZCNkI2OU5JSEF0VG1UZjhRT0g1MDBsOFo3enJIWScpO1xyXG5cclxuLy8gLS0tIEFwcCBJbml0aWFsaXphdGlvbiAtLS1cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuLy8gQ29uZmlndXJlIENPUlMgZm9yIHByb2R1Y3Rpb24gZW52aXJvbm1lbnRcclxuY29uc3QgYWxsb3dlZE9yaWdpbnMgPSBwcm9jZXNzLmVudi5DT1JTX09SSUdJTiA/IHByb2Nlc3MuZW52LkNPUlNfT1JJR0lOLnNwbGl0KCcsJykgOiBbJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCddOyAvLyBEZWZhdWx0IHRvIGxvY2FsaG9zdCBmb3IgZGV2ZWxvcG1lbnRcclxuXHJcbi8vIEFkZCAnbnVsbCcgdG8gYWxsb3dlZCBvcmlnaW5zIGlmIG5vdCBpbiBwcm9kdWN0aW9uIGFuZCBub3QgZXhwbGljaXRseSBzZXQgZm9yIGxvY2FsIGZpbGUgYWNjZXNzXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFwcm9jZXNzLmVudi5DT1JTX09SSUdJTikge1xyXG4gICAgYWxsb3dlZE9yaWdpbnMucHVzaCgnbnVsbCcpO1xyXG59XHJcblxyXG5jb25zdCBjb3JzT3B0aW9ucyA9IHtcclxuICAgIG9yaWdpbjogZnVuY3Rpb24gKG9yaWdpbiwgY2FsbGJhY2spIHtcclxuICAgICAgICAvLyBBbGxvdyByZXF1ZXN0cyB3aXRoIG5vIG9yaWdpbiAobGlrZSBtb2JpbGUgYXBwcywgY3VybCwgb3IgbG9jYWwgZmlsZSBhY2Nlc3MgaWYgJ251bGwnIGlzIGluIGFsbG93ZWRPcmlnaW5zKVxyXG4gICAgICAgIGlmICghb3JpZ2luKSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmICdudWxsJyBpcyBleHBsaWNpdGx5IGFsbG93ZWQgb3IgaWYgd2UncmUgaW4gZGV2IGFuZCBubyBDT1JTX09SSUdJTiBpcyBzZXRcclxuICAgICAgICAgICAgaWYgKGFsbG93ZWRPcmlnaW5zLmluY2x1ZGVzKCdudWxsJykgfHwgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXByb2Nlc3MuZW52LkNPUlNfT1JJR0lOKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9ICdUaGUgQ09SUyBwb2xpY3kgZm9yIHRoaXMgc2l0ZSBkb2VzIG5vdCBhbGxvdyBhY2Nlc3MgZnJvbSB0aGUgc3BlY2lmaWVkIE9yaWdpbi4nO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKG1zZyksIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhbGxvd2VkT3JpZ2lucy5pbmRleE9mKG9yaWdpbikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9ICdUaGUgQ09SUyBwb2xpY3kgZm9yIHRoaXMgc2l0ZSBkb2VzIG5vdCBhbGxvdyBhY2Nlc3MgZnJvbSB0aGUgc3BlY2lmaWVkIE9yaWdpbi4nO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKG1zZyksIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRydWUpO1xyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6ICdHRVQsSEVBRCxQVVQsUEFUQ0gsUE9TVCxERUxFVEUnLFxyXG4gICAgY3JlZGVudGlhbHM6IHRydWUsIC8vIEFsbG93IGNvb2tpZXMgdG8gYmUgc2VudFxyXG4gICAgb3B0aW9uc1N1Y2Nlc3NTdGF0dXM6IDIwNCAvLyBTb21lIGxlZ2FjeSBicm93c2VycyAoSUUxMSwgdmFyaW91cyBTbWFydFRWcykgY2hva2Ugb24gMjA0XHJcbn07XHJcbmFwcC51c2UoY29ycyhjb3JzT3B0aW9ucykpO1xyXG5cclxuXHJcbi8vIFVzZSBwcm9jZXNzLmVudi5QT1JUIGZvciBwcm9kdWN0aW9uLCBmYWxsYmFjayB0byAzMDAwIGZvciBsb2NhbCBkZXZlbG9wbWVudFxyXG5jb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwO1xyXG5cclxuLy8gRGVmaW5lIGEgd2ViaG9vayBzZWNyZXQgZm9yIFN0cmlwZS4gVGhpcyBzaG91bGQgYWxzbyBiZSBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZS5cclxuY29uc3QgU1RSSVBFX1dFQkhPT0tfU0VDUkVUID0gcHJvY2Vzcy5lbnYuU1RSSVBFX1dFQkhPT0tfU0VDUkVUIHx8ICd3aHNlY19ZT1VSX1dFQkhPT0tfU0VDUkVUJztcclxuXHJcbi8vIC0tLSBSYXRlIExpbWl0aW5nIENvbmZpZ3VyYXRpb24gLS0tXHJcbmNvbnN0IGF1dGhMaW1pdGVyID0gcmF0ZUxpbWl0KHtcclxuICAgIHdpbmRvd01zOiAxNSAqIDYwICogMTAwMCwgLy8gMTUgbWludXRlc1xyXG4gICAgbWF4OiAxMCwgLy8gTWF4IDEwIHJlcXVlc3RzIHBlciAxNSBtaW51dGVzIHBlciBJUFxyXG4gICAgbWVzc2FnZTogJ1RvbyBtYW55IGxvZ2luL3JlZ2lzdHJhdGlvbiBhdHRlbXB0cyBmcm9tIHRoaXMgSVAsIHBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgMTUgbWludXRlcycsXHJcbiAgICBzdGFuZGFyZEhlYWRlcnM6IHRydWUsIC8vIFJldHVybiByYXRlIGxpbWl0IGluZm8gaW4gdGhlIGBSYXRlTGltaXQtKmAgaGVhZGVyc1xyXG4gICAgbGVnYWN5SGVhZGVyczogZmFsc2UsIC8vIERpc2FibGUgdGhlIGBYLVJhdGVMaW1pdC0qYCBoZWFkZXJzXHJcbn0pO1xyXG5cclxuLy8gLS0tIE1pZGRsZXdhcmUgZm9yIFN0cmlwZSBXZWJob29rIChNVVNUIGJlIGJlZm9yZSBleHByZXNzLmpzb24oKSBmb3Igb3RoZXIgcm91dGVzKSAtLS1cclxuLy8gVGhpcyByb3V0ZSBuZWVkcyB0aGUgcmF3IGJvZHkgZm9yIHNpZ25hdHVyZSB2ZXJpZmljYXRpb24uXHJcbmFwcC5wb3N0KCcvYXBpL3N0cmlwZS13ZWJob29rJywgZXhwcmVzcy5yYXcoe3R5cGU6ICdhcHBsaWNhdGlvbi9qc29uJ30pLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHNpZyA9IHJlcS5oZWFkZXJzWydzdHJpcGUtc2lnbmF0dXJlJ107XHJcblxyXG4gICAgbGV0IGV2ZW50O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgZXZlbnQgPSBzdHJpcGVJbnN0YW5jZS53ZWJob29rcy5jb25zdHJ1Y3RFdmVudChyZXEuYm9keSwgc2lnLCBTVFJJUEVfV0VCSE9PS19TRUNSRVQpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgV2ViaG9vayBFcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoYFdlYmhvb2sgRXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGFuZGxlIHRoZSBldmVudFxyXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XHJcbiAgICAgICAgY2FzZSAnY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQnOlxyXG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gZXZlbnQuZGF0YS5vYmplY3Q7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDaGVja291dCBTZXNzaW9uIENvbXBsZXRlZDonLCBzZXNzaW9uLmlkKTtcclxuICAgICAgICAgICAgY29uc3QgdXNlcklkID0gc2Vzc2lvbi5tZXRhZGF0YS51c2VySWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYW5JZCA9IHNlc3Npb24ubWV0YWRhdGEucGxhbklkO1xyXG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5wYXltZW50X3N0YXR1cyA9PT0gJ3BhaWQnICYmIHVzZXJJZCAmJiBwbGFuSWQpIHtcclxuICAgICAgICAgICAgICAgIGRiLnJ1bihcclxuICAgICAgICAgICAgICAgICAgICAnVVBEQVRFIFVzZXJzIFNFVCBzdHJpcGVfY3VzdG9tZXJfaWQgPSA/LCBzdHJpcGVfc3Vic2NyaXB0aW9uX2lkID0gPywgc3Vic2NyaXB0aW9uX3N0YXR1cyA9ID8sIHBsYW5faWQgPSA/IFdIRVJFIHVzZXJfaWQgPSA/JyxcclxuICAgICAgICAgICAgICAgICAgICBbc2Vzc2lvbi5jdXN0b21lciwgc2Vzc2lvbi5zdWJzY3JpcHRpb24sICdhY3RpdmUnLCBwbGFuSWQsIHVzZXJJZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIHVwZGF0ZSBlcnJvciBmb3IgY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQ6JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGNvbnNvbGUubG9nKGBVc2VyICR7dXNlcklkfSBzdWJzY3JpcHRpb24gdXBkYXRlZCB0byAke3BsYW5JZH0gKGFjdGl2ZSkuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdjdXN0b21lci5zdWJzY3JpcHRpb24udXBkYXRlZCc6XHJcbiAgICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvblVwZGF0ZWQgPSBldmVudC5kYXRhLm9iamVjdDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1YnNjcmlwdGlvbiBVcGRhdGVkOicsIHN1YnNjcmlwdGlvblVwZGF0ZWQuaWQpO1xyXG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uVXBkYXRlZC5jdXN0b21lciAmJiBzdWJzY3JpcHRpb25VcGRhdGVkLnN0YXR1cyAmJiBzdWJzY3JpcHRpb25VcGRhdGVkLnBsYW4gJiYgc3Vic2NyaXB0aW9uVXBkYXRlZC5wbGFuLmlkKSB7XHJcbiAgICAgICAgICAgICAgICBkYi5ydW4oXHJcbiAgICAgICAgICAgICAgICAgICAgJ1VQREFURSBVc2VycyBTRVQgc3Vic2NyaXB0aW9uX3N0YXR1cyA9ID8sIHBsYW5faWQgPSA/IFdIRVJFIHN0cmlwZV9jdXN0b21lcl9pZCA9ID8nLFxyXG4gICAgICAgICAgICAgICAgICAgIFtzdWJzY3JpcHRpb25VcGRhdGVkLnN0YXR1cywgc3Vic2NyaXB0aW9uVXBkYXRlZC5wbGFuLmlkLCBzdWJzY3JpcHRpb25VcGRhdGVkLmN1c3RvbWVyXSxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgY29uc29sZS5lcnJvcignRGF0YWJhc2UgdXBkYXRlIGVycm9yIGZvciBjdXN0b21lci5zdWJzY3JpcHRpb24udXBkYXRlZDonLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgY29uc29sZS5sb2coYFN1YnNjcmlwdGlvbiBmb3IgY3VzdG9tZXIgJHtzdWJzY3JpcHRpb25VcGRhdGVkLmN1c3RvbWVyfSBzdGF0dXMgdXBkYXRlZCB0byAke3N1YnNjcmlwdGlvblVwZGF0ZWQuc3RhdHVzfSBhbmQgcGxhbiB0byAke3N1YnNjcmlwdGlvblVwZGF0ZWQucGxhbi5pZH0uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdjdXN0b21lci5zdWJzY3JpcHRpb24uZGVsZXRlZCc6XHJcbiAgICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbkRlbGV0ZWQgPSBldmVudC5kYXRhLm9iamVjdDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1YnNjcmlwdGlvbiBEZWxldGVkOicsIHN1YnNjcmlwdGlvbkRlbGV0ZWQuaWQpO1xyXG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uRGVsZXRlZC5jdXN0b21lcikge1xyXG4gICAgICAgICAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAgICAgICAgICdVUERBVEUgVXNlcnMgU0VUIHN1YnNjcmlwdGlvbl9zdGF0dXMgPSA/LCBwbGFuX2lkID0gPywgc3RyaXBlX3N1YnNjcmlwdGlvbl9pZCA9IE5VTEwgV0hFUkUgc3RyaXBlX2N1c3RvbWVyX2lkID0gPycsXHJcbiAgICAgICAgICAgICAgICAgICAgWydjYW5jZWxsZWQnLCAnZnJlZScsIHN1YnNjcmlwdGlvbkRlbGV0ZWQuY3VzdG9tZXJdLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSB1cGRhdGUgZXJyb3IgZm9yIGN1c3RvbWVyLnN1YnNjcmlwdGlvbi5kZWxldGVkOicsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBjb25zb2xlLmxvZyhgU3Vic2NyaXB0aW9uIGZvciBjdXN0b21lciAke3N1YnNjcmlwdGlvbkRlbGV0ZWQuY3VzdG9tZXJ9IG1hcmtlZCBhcyBjYW5jZWxsZWQgYW5kIHJldmVydGVkIHRvIGZyZWUuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkJzpcclxuICAgICAgICAgICAgY29uc3QgaW52b2ljZVN1Y2NlZWRlZCA9IGV2ZW50LmRhdGEub2JqZWN0O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSW52b2ljZSBQYXltZW50IFN1Y2NlZWRlZDonLCBpbnZvaWNlU3VjY2VlZGVkLmlkKTtcclxuICAgICAgICAgICAgaWYgKGludm9pY2VTdWNjZWVkZWQuc3Vic2NyaXB0aW9uICYmIGludm9pY2VTdWNjZWVkZWQuY3VzdG9tZXIpIHtcclxuICAgICAgICAgICAgICAgIGRiLnJ1bihcclxuICAgICAgICAgICAgICAgICAgICAnVVBEQVRFIFVzZXJzIFNFVCBzdWJzY3JpcHRpb25fc3RhdHVzID0gPyBXSEVSRSBzdHJpcGVfc3Vic2NyaXB0aW9uX2lkID0gPyBBTkQgc3RyaXBlX2N1c3RvbWVyX2lkID0gPycsXHJcbiAgICAgICAgICAgICAgICAgICAgWydhY3RpdmUnLCBpbnZvaWNlU3VjY2VlZGVkLnN1YnNjcmlwdGlvbiwgaW52b2ljZVN1Y2NlZWRlZC5jdXN0b21lcl0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIHVwZGF0ZSBlcnJvciBmb3IgaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZDonLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgY29uc29sZS5sb2coYFN1YnNjcmlwdGlvbiAke2ludm9pY2VTdWNjZWVkZWQuc3Vic2NyaXB0aW9ufSBzdGF0dXMgc2V0IHRvIGFjdGl2ZS5gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2ludm9pY2UucGF5bWVudF9mYWlsZWQnOlxyXG4gICAgICAgICAgICBjb25zdCBpbnZvaWNlRmFpbGVkID0gZXZlbnQuZGF0YS5vYmplY3Q7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbnZvaWNlIFBheW1lbnQgRmFpbGVkOicsIGludm9pY2VGYWlsZWQuaWQpO1xyXG4gICAgICAgICAgICBpZiAoaW52b2ljZUZhaWxlZC5zdWJzY3JpcHRpb24gJiYgaW52b2ljZUZhaWxlZC5jdXN0b21lcikge1xyXG4gICAgICAgICAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAgICAgICAgICdVUERBVEUgVXNlcnMgU0VUIHN1YnNjcmlwdGlvbl9zdGF0dXMgPSA/IFdIRVJFIHN0cmlwZV9zdWJzY3JpcHRpb25faWQgPSA/IEFORCBzdHJpcGVfY3VzdG9tZXJfaWQgPSA/JyxcclxuICAgICAgICAgICAgICAgICAgICBbJ3Bhc3RfZHVlJywgaW52b2ljZUZhaWxlZC5zdWJzY3JpcHRpb24sIGludm9pY2VGYWlsZWQuY3VzdG9tZXJdLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSB1cGRhdGUgZXJyb3IgZm9yIGludm9pY2UucGF5bWVudF9mYWlsZWQ6JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGNvbnNvbGUubG9nKGBTdWJzY3JpcHRpb24gJHtpbnZvaWNlRmFpbGVkLnN1YnNjcmlwdGlvbn0gc3RhdHVzIHNldCB0byBwYXN0X2R1ZS5gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBVbmhhbmRsZWQgZXZlbnQgdHlwZSAke2V2ZW50LnR5cGV9YCk7XHJcbiAgICB9XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHJlY2VpdmVkOiB0cnVlIH0pO1xyXG59KTtcclxuXHJcbi8vIElNUE9SVEFOVDogZXhwcmVzcy5qc29uKCkgZm9yIHBhcnNpbmcgSlNPTiByZXF1ZXN0IGJvZGllcyBNVVNUIGNvbWUgQUZURVIgdGhlIHdlYmhvb2sgcm91dGVcclxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XHJcblxyXG4vLyAtLS0gSldUIFNlY3JldCAtLS1cclxuLy8gVXNlIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgZm9yIHByb2R1Y3Rpb25cclxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ3lvdXItc3VwZXItc2VjcmV0LWFuZC1sb25nLXN0cmluZy1mb3Itand0JztcclxuXHJcbi8vIC0tLSBSZXF1ZXN0IExvZ2dpbmcgKHVzaW5nIE1vcmdhbikgLS0tXHJcbi8vICdkZXYnIGZvcm1hdCBpcyBnb29kIGZvciBkZXZlbG9wbWVudCwgJ2NvbWJpbmVkJyBvciAndGlueScgZm9yIHByb2R1Y3Rpb24gbG9nc1xyXG5hcHAudXNlKG1vcmdhbignZGV2JykpO1xyXG5cclxuLy8gLS0tIFNlcnZlIFN0YXRpYyBGaWxlcyAoRnJvbnRlbmQpIHdpdGggQ2FjaGluZyAtLS1cclxuLy8gVGhpcyBtaWRkbGV3YXJlIHNlcnZlcyBzdGF0aWMgZmlsZXMgZnJvbSB0aGUgJ29uYm9hcmRmbG93JyByb290IGRpcmVjdG9yeVxyXG4vLyBhbmQgc2V0cyBDYWNoZS1Db250cm9sIGhlYWRlcnMgZm9yIGJyb3dzZXIgY2FjaGluZy5cclxuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4nKSwge1xyXG4gICAgbWF4QWdlOiAnN2QnLCAvLyBDYWNoZSBzdGF0aWMgYXNzZXRzIGZvciA3IGRheXMgKGUuZy4sIENTUywgSlMsIGltYWdlcywgZmF2aWNvbilcclxuICAgIGltbXV0YWJsZTogZmFsc2UgLy8gU2V0IHRvIHRydWUgaWYgYXNzZXQgZmlsZW5hbWVzIGluY2x1ZGUgY29udGVudCBoYXNoZXMgKGUuZy4sIGFwcC5taW4uanM/dj1oYXNoKVxyXG59KSk7XHJcblxyXG4vLyAtLS0gRGF0YWJhc2UgU2V0dXAgLS0tXHJcbmNvbnN0IGRiID0gbmV3IHNxbGl0ZTMuRGF0YWJhc2UoJy4vb25ib2FyZGZsb3cuZGInLCAoZXJyKSA9PiB7XHJcbiAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgLy8gTG9nIGRhdGFiYXNlIGNvbm5lY3Rpb24gZXJyb3IgYW5kIGV4aXRcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igb3BlbmluZyBkYXRhYmFzZTpcIiwgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTsgLy8gRXhpdCBwcm9jZXNzIGlmIGRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbHNcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIHRoZSBkYXRhYmFzZS5cIik7XHJcbiAgICAgICAgZGIuZ2V0KFwiUFJBR01BIGZvcmVpZ25fa2V5cyA9IE9OXCIpO1xyXG4gICAgICAgIGRiLnNlcmlhbGl6ZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGRiLnJ1bihgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgQ29tcGFuaWVzIChjb21wYW55X2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCwgY29tcGFueV9uYW1lIFRFWFQgTk9UIE5VTEwgVU5JUVVFKWApO1xyXG4gICAgICAgICAgICBkYi5ydW4oYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIExvY2F0aW9ucyAobG9jYXRpb25faWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULCBjb21wYW55X2lkIElOVEVHRVIsIGxvY2F0aW9uX25hbWUgVEVYVCBOT1QgTlVMTCwgbG9jYXRpb25fYWRkcmVzcyBURVhUIE5PVCBOVUxMLCBGT1JFSUdOIEtFWSAoY29tcGFueV9pZCkgUkVGRVJFTkNFUyBDb21wYW5pZXMoY29tcGFueV9pZCkgT04gREVMRVRFIENBU0NBREUpYCk7XHJcbiAgICAgICAgICAgIGRiLnJ1bihgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgVXNlcnMgKFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXHJcbiAgICAgICAgICAgICAgICBjb21wYW55X2lkIElOVEVHRVIsXHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbl9pZCBJTlRFR0VSLFxyXG4gICAgICAgICAgICAgICAgZnVsbF9uYW1lIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBlbWFpbCBURVhUIE5PVCBOVUxMIFVOSVFVRSxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkX2hhc2ggVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBlbXBsb3llZV9pZCBURVhULFxyXG4gICAgICAgICAgICAgICAgcm9sZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgc3RyaXBlX2N1c3RvbWVyX2lkIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBzdHJpcGVfc3Vic2NyaXB0aW9uX2lkIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25fc3RhdHVzIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBwbGFuX2lkIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAoY29tcGFueV9pZCkgUkVGRVJFTkNFUyBDb21wYW5pZXMoY29tcGFueV9pZCkgT04gREVMRVRFIENBU0NBREUsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAobG9jYXRpb25faWQpIFJFRkVSRU5DRVMgTG9jYXRpb25zKGxvY2F0aW9uX2lkKSBPTiBERUxFVEUgQ0FTQ0FERVxyXG4gICAgICAgICAgICApYCk7XHJcbiAgICAgICAgICAgIGRiLnJ1bihgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgU2NoZWR1bGVzIChcclxuICAgICAgICAgICAgICAgIHNjaGVkdWxlX2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcclxuICAgICAgICAgICAgICAgIGVtcGxveWVlX2lkIElOVEVHRVIgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbl9pZCBJTlRFR0VSIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRfdGltZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgZW5kX3RpbWUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIG5vdGVzIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAoZW1wbG95ZWVfaWQpIFJFRkVSRU5DRVMgVXNlcnModXNlcl9pZCkgT04gREVMRVRFIENBU0NBREUsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAobG9jYXRpb25faWQpIFJFRkVSRU5DRVMgTG9jYXRpb25zKGxvY2F0aW9uX2lkKSBPTiBERUxFVEUgQ0FTQ0FERVxyXG4gICAgICAgICAgICApYCk7XHJcbiAgICAgICAgICAgIC8vIE5FVzogQ3JlYXRlIEpvYlBvc3RpbmdzIHRhYmxlXHJcbiAgICAgICAgICAgIGRiLnJ1bihgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgSm9iUG9zdGluZ3MgKFxyXG4gICAgICAgICAgICAgICAgam9iX3Bvc3RpbmdfaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxyXG4gICAgICAgICAgICAgICAgY29tcGFueV9pZCBJTlRFR0VSIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25faWQgSU5URUdFUiwgLS0gT3B0aW9uYWw6IGxpbmsgam9iIHBvc3RpbmcgdG8gYSBzcGVjaWZpYyBsb2NhdGlvblxyXG4gICAgICAgICAgICAgICAgdGl0bGUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICByZXF1aXJlbWVudHMgVEVYVCwgLS0gT3B0aW9uYWw6IGpvYiByZXF1aXJlbWVudHNcclxuICAgICAgICAgICAgICAgIHN0YXR1cyBURVhUIE5PVCBOVUxMIERFRkFVTFQgJ09wZW4nLCAtLSBlLmcuLCAnT3BlbicsICdDbG9zZWQnLCAnRmlsbGVkJ1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9kYXRlIFRFWFQgTk9UIE5VTEwsIC0tIElTTyA4NjAxIGZvcm1hdFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGNvbXBhbnlfaWQpIFJFRkVSRU5DRVMgQ29tcGFuaWVzKGNvbXBhbnlfaWQpIE9OIERFTEVURSBDQVNDQURFLFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGxvY2F0aW9uX2lkKSBSRUZFUkVOQ0VTIExvY2F0aW9ucyhsb2NhdGlvbl9pZCkgT04gREVMRVRFIENBU0NBREVcclxuICAgICAgICAgICAgKWApO1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgQXBwbGljYW50cyB0YWJsZSBzY2hlbWEgdG8gbGluayB0byBKb2JQb3N0aW5ncyBhbmQgYWRkIHBob25lX251bWJlclxyXG4gICAgICAgICAgICBkYi5ydW4oYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIEFwcGxpY2FudHMgKFxyXG4gICAgICAgICAgICAgICAgYXBwbGljYW50X2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcclxuICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQgSU5URUdFUiBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkIElOVEVHRVIsIC0tIE9wdGlvbmFsOiBhcHBsaWNhbnQncyBwcmVmZXJyZWQgbG9jYXRpb24gb3IgbG9jYXRpb24gYXBwbGllZCBmb3JcclxuICAgICAgICAgICAgICAgIGpvYl9wb3N0aW5nX2lkIElOVEVHRVIsIC0tIE5FVzogTGluayB0byBKb2JQb3N0aW5ncyB0YWJsZVxyXG4gICAgICAgICAgICAgICAgZnVsbF9uYW1lIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBlbWFpbCBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgcGhvbmVfbnVtYmVyIFRFWFQsIC0tIE5FVzogUGhvbmUgbnVtYmVyIGZpZWxkXHJcbiAgICAgICAgICAgICAgICBzdGF0dXMgVEVYVCBOT1QgTlVMTCBERUZBVUxUICdBcHBsaWVkJywgLS0gZS5nLiwgJ0FwcGxpZWQnLCAnSW50ZXJ2aWV3aW5nJywgJ1JlamVjdGVkJywgJ0hpcmVkJ1xyXG4gICAgICAgICAgICAgICAgcmVzdW1lX3VybCBURVhULCAtLSBPcHRpb25hbDogVVJMIHRvIGEgcmVzdW1lIGRvY3VtZW50IChlLmcuLCBob3N0ZWQgb24gY2xvdWQgc3RvcmFnZSlcclxuICAgICAgICAgICAgICAgIG5vdGVzIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbl9kYXRlIFRFWFQgTk9UIE5VTEwsIC0tIElTTyA4NjAxIGZvcm1hdFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGNvbXBhbnlfaWQpIFJFRkVSRU5DRVMgQ29tcGFuaWVzKGNvbXBhbnlfaWQpIE9OIERFTEVURSBDQVNDQURFLFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGxvY2F0aW9uX2lkKSBSRUZFUkVOQ0VTIExvY2F0aW9ucyhsb2NhdGlvbl9pZCkgT04gREVMRVRFIENBU0NBREUsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAoam9iX3Bvc3RpbmdfaWQpIFJFRkVSRU5DRVMgSm9iUG9zdGluZ3Moam9iX3Bvc3RpbmdfaWQpIE9OIERFTEVURSBTRVQgTlVMTCAtLSBJZiBqb2IgcG9zdGluZyBpcyBkZWxldGVkLCBzZXQgdGhpcyB0byBOVUxMXHJcbiAgICAgICAgICAgIClgKTtcclxuICAgICAgICAgICAgLy8gTkVXOiBDcmVhdGUgRG9jdW1lbnRzIHRhYmxlIGZvciBmaWxlL3ZpZGVvIHVwbG9hZHNcclxuICAgICAgICAgICAgZGIucnVuKGBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBEb2N1bWVudHMgKFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRfaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxyXG4gICAgICAgICAgICAgICAgY29tcGFueV9pZCBJTlRFR0VSIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZCBJTlRFR0VSIE5PVCBOVUxMLCAtLSBVc2VyIHdobyB1cGxvYWRlZCB0aGUgZG9jdW1lbnRcclxuICAgICAgICAgICAgICAgIHRpdGxlIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBmaWxlX25hbWUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGZpbGVfdHlwZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgZmlsZV91cmwgVEVYVCBOT1QgTlVMTCwgLS0gVVJMIHRvIHRoZSBzdG9yZWQgZmlsZSAoZS5nLiwgUzMsIEdDUylcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uIFRFWFQsXHJcbiAgICAgICAgICAgICAgICB1cGxvYWRfZGF0ZSBURVhUIE5PVCBOVUxMLCAtLSBJU08gODYwMSBmb3JtYXRcclxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZIChjb21wYW55X2lkKSBSRUZFUkVOQ0VTIENvbXBhbmllcyhjb21wYW55X2lkKSBPTiBERUxFVEUgQ0FTQ0FERSxcclxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZICh1c2VyX2lkKSBSRUZFUkVOQ0VTIFVzZXJzKHVzZXJfaWQpIE9OIERFTEVURSBDQVNDQURFXHJcbiAgICAgICAgICAgIClgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG4vLyAtLS0gQXV0aGVudGljYXRpb24gTWlkZGxld2FyZSAtLS1cclxuZnVuY3Rpb24gYXV0aGVudGljYXRlVG9rZW4ocmVxLCByZXMsIG5leHQpIHtcclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddO1xyXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyICYmIGF1dGhIZWFkZXIuc3BsaXQoJyAnKVsxXTtcclxuICAgIGlmICh0b2tlbiA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQ6IE5vIHRva2VuIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVULCAoZXJyLCB1c2VyKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAvLyBMb2cgdGhlIHNwZWNpZmljIEpXVCBlcnJvciBmb3IgZGVidWdnaW5nXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJKV1QgVmVyaWZpY2F0aW9uIEVycm9yOlwiLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnRm9yYmlkZGVuOiBJbnZhbGlkIG9yIGV4cGlyZWQgdG9rZW4uJyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVxLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIG5leHQoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyAtLS0gSGVscGVyIGZvciBJbnB1dCBWYWxpZGF0aW9uIC0tLVxyXG5jb25zdCBpc1ZhbGlkRW1haWwgPSAoZW1haWwpID0+IHtcclxuICAgIHJldHVybiAvXlteXFxzQF0rQFteXFxzQF0rXFwuW15cXHNAXSskLy50ZXN0KGVtYWlsKTtcclxufTtcclxuXHJcbi8vIC0tLSBBUEkgUm91dGVzIChBTEwgQVBJIFJPVVRFUyBTSE9VTEQgQkUgREVGSU5FRCBIRVJFLCBCRUZPUkUgU1RBVElDIEZJTEUgU0VSVklORykgLS0tXHJcblxyXG4vLyBBcHBseSByYXRlIGxpbWl0aW5nIHRvIGF1dGhlbnRpY2F0aW9uIHJvdXRlc1xyXG5hcHAucG9zdCgnL2FwaS9yZWdpc3RlcicsIGF1dGhMaW1pdGVyLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGNvbXBhbnlfbmFtZSwgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIFJlZ2lzdHJhdGlvblxyXG4gICAgaWYgKCFjb21wYW55X25hbWUgfHwgdHlwZW9mIGNvbXBhbnlfbmFtZSAhPT0gJ3N0cmluZycgfHwgY29tcGFueV9uYW1lLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJDb21wYW55IG5hbWUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFmdWxsX25hbWUgfHwgdHlwZW9mIGZ1bGxfbmFtZSAhPT0gJ3N0cmluZycgfHwgZnVsbF9uYW1lLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJGdWxsIG5hbWUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFlbWFpbCB8fCAhaXNWYWxpZEVtYWlsKGVtYWlsKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkEgdmFsaWQgZW1haWwgYWRkcmVzcyBpcyByZXF1aXJlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghcGFzc3dvcmQgfHwgdHlwZW9mIHBhc3N3b3JkICE9PSAnc3RyaW5nJyB8fCBwYXNzd29yZC5sZW5ndGggPCA2KSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiUGFzc3dvcmQgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzIGxvbmcuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXNzd29yZF9oYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKTtcclxuICAgICAgICBkYi5zZXJpYWxpemUoKCkgPT4ge1xyXG4gICAgICAgICAgICBkYi5ydW4oJ0JFR0lOIFRSQU5TQUNUSU9OJyk7XHJcbiAgICAgICAgICAgIGRiLnJ1bignSU5TRVJUIElOVE8gQ29tcGFuaWVzIChjb21wYW55X25hbWUpIFZBTFVFUyAoPyknLCBbY29tcGFueV9uYW1lXSwgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGRiLnJ1bignUk9MTEJBQ0snKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGNyZWF0aW5nIGNvbXBhbnk6XCIsIGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKFwiQ291bGQgbm90IGNyZWF0ZSBjb21wYW55LlwiKSk7IC8vIFBhc3MgZXJyb3IgdG8gZXJyb3IgaGFuZGxpbmcgbWlkZGxld2FyZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q29tcGFueUlkID0gdGhpcy5sYXN0SUQ7XHJcbiAgICAgICAgICAgICAgICBkYi5ydW4oYElOU0VSVCBJTlRPIFVzZXJzIChjb21wYW55X2lkLCBsb2NhdGlvbl9pZCwgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmRfaGFzaCwgcm9sZSwgc3Vic2NyaXB0aW9uX3N0YXR1cywgcGxhbl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCAnc3VwZXJfYWRtaW4nLCAnYWN0aXZlJywgJ2ZyZWUnKWAsIFtuZXdDb21wYW55SWQsIG51bGwsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkX2hhc2hdLCBmdW5jdGlvbih1c2VySW5zZXJ0RXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJJbnNlcnRFcnIpIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLnJ1bignUk9MTEJBQ0snKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBjcmVhdGluZyB1c2VyOlwiLCB1c2VySW5zZXJ0RXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJJbnNlcnRFcnIubWVzc2FnZS5pbmNsdWRlcygnVU5JUVVFIGNvbnN0cmFpbnQgZmFpbGVkOiBVc2Vycy5lbWFpbCcpKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHsgZXJyb3I6ICdFbWFpbCBhbHJlYWR5IHJlZ2lzdGVyZWQuJyB9KTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKFwiQ291bGQgbm90IGNyZWF0ZSB1c2VyLlwiKSk7IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGIucnVuKCdDT01NSVQnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6IFwiQ29tcGFueSBhbmQgdXNlciByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseSFcIiwgdXNlcklkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7IFxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWdpc3RyYXRpb24gZXJyb3I6XCIsIGVycm9yKTtcclxuICAgICAgICBuZXh0KGVycm9yKTsgLy8gUGFzcyBlcnJvciB0byBlcnJvciBoYW5kbGluZyBtaWRkbGV3YXJlXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoJy9hcGkvbG9naW4nLCBhdXRoTGltaXRlciwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIExvZ2luXHJcbiAgICBpZiAoIWVtYWlsIHx8ICFpc1ZhbGlkRW1haWwoZW1haWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBlbWFpbCBhZGRyZXNzIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwYXNzd29yZCB8fCB0eXBlb2YgcGFzc3dvcmQgIT09ICdzdHJpbmcnIHx8IHBhc3N3b3JkLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlBhc3N3b3JkIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLmdldChcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgZW1haWwgPSA/XCIsIFtlbWFpbF0sIGFzeW5jIChlcnIsIHVzZXIpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBkdXJpbmcgbG9naW46XCIsIGVycik7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcihcIkEgc2VydmVyIGVycm9yIG9jY3VycmVkIGR1cmluZyBsb2dpbi5cIikpOyAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdXNlcikgeyBcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBjcmVkZW50aWFscy5cIiB9KTsgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGlzTWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZF9oYXNoKTtcclxuICAgICAgICBpZiAoIWlzTWF0Y2gpIHsgXHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkludmFsaWQgY3JlZGVudGlhbHMuXCIgfSk7IFxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwYXlsb2FkID0geyB1c2VySWQ6IHVzZXIudXNlcl9pZCwgZW1haWw6IHVzZXIuZW1haWwsIHJvbGU6IHVzZXIucm9sZSwgZnVsbE5hbWU6IHVzZXIuZnVsbF9uYW1lLCBjb21wYW55SWQ6IHVzZXIuY29tcGFueV9pZCwgbG9jYXRpb25JZDogdXNlci5sb2NhdGlvbl9pZCwgc3Vic2NyaXB0aW9uU3RhdHVzOiB1c2VyLnN1YnNjcmlwdGlvbl9zdGF0dXMsIHBsYW5JZDogdXNlci5wbGFuX2lkIH07XHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihwYXlsb2FkLCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogJzFoJyB9KTtcclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiTG9naW4gc3VjY2Vzc2Z1bCFcIiwgdG9rZW4sIHJvbGU6IHVzZXIucm9sZSB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5wb3N0KCcvYXBpL2ludml0ZS1hZG1pbicsIGF1dGhlbnRpY2F0ZVRva2VuLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBsb2NhdGlvbl9pZCB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgSW52aXRlIEFkbWluXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgc3VwZXIgYWRtaW5zIGNhbiBpbnZpdGUgb3RoZXIgYWRtaW5zLicgfSk7IH1cclxuICAgIGlmICghZnVsbF9uYW1lIHx8IHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZW1haWwgfHwgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXBhc3N3b3JkIHx8IHR5cGVvZiBwYXNzd29yZCAhPT0gJ3N0cmluZycgfHwgcGFzc3dvcmQubGVuZ3RoIDwgNikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlRlbXBvcmFyeSBwYXNzd29yZCBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhdCBsZWFzdCA2IGNoYXJhY3RlcnMgbG9uZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbG9jYXRpb25faWQgIT09ICdudW1iZXInIHx8IGxvY2F0aW9uX2lkIDw9IDApIHsgLy8gQXNzdW1pbmcgbG9jYXRpb25faWQgaXMgYW4gaW50ZWdlciBJRFxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkEgdmFsaWQgbG9jYXRpb24gSUQgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXNzd29yZF9oYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKTtcclxuICAgICAgICBkYi5nZXQoJ1NFTEVDVCAqIEZST00gTG9jYXRpb25zIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nLCBbbG9jYXRpb25faWQsIGNvbXBhbnlJZF0sIChlcnIsIGxvY2F0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGNoZWNraW5nIGxvY2F0aW9uOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIHdoZW4gdmVyaWZ5aW5nIGxvY2F0aW9uLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgIGlmICghbG9jYXRpb24pIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdTZWxlY3RlZCBsb2NhdGlvbiBkb2VzIG5vdCBleGlzdCBvciBkb2VzIG5vdCBiZWxvbmcgdG8geW91ciBjb21wYW55LicgfSk7IH1cclxuICAgICAgICAgICAgZGIucnVuKGBJTlNFUlQgSU5UTyBVc2VycyAoY29tcGFueV9pZCwgbG9jYXRpb25faWQsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkX2hhc2gsIHJvbGUsIHN1YnNjcmlwdGlvbl9zdGF0dXMsIHBsYW5faWQpIFZBTFVFUyAoPywgPywgPywgPywgPywgJ2xvY2F0aW9uX2FkbWluJywgJ2FjdGl2ZScsICdmcmVlJylgLCBbY29tcGFueUlkLCBsb2NhdGlvbl9pZCwgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmRfaGFzaF0sIGZ1bmN0aW9uKHVzZXJJbnNlcnRFcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VySW5zZXJ0RXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGludml0aW5nIGFkbWluOlwiLCB1c2VySW5zZXJ0RXJyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlckluc2VydEVyci5tZXNzYWdlLmluY2x1ZGVzKCdVTklRVUUgY29uc3RyYWludCBmYWlsZWQ6IFVzZXJzLmVtYWlsJykpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHsgZXJyb3I6ICdFbWFpbCBhbHJlYWR5IHJlZ2lzdGVyZWQuJyB9KTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIGludml0ZSBhZG1pbi4nKSk7IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogXCJMb2NhdGlvbiBhZG1pbiBpbnZpdGVkIHN1Y2Nlc3NmdWxseSFcIiwgdXNlcklkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikgeyBjb25zb2xlLmVycm9yKFwiSW52aXRlIGFkbWluIGVycm9yOlwiLCBlcnJvcik7IG5leHQoZXJyb3IpOyB9IC8vIFBhc3MgZXJyb3JcclxufSk7XHJcblxyXG4vLyBORVc6IEFQSSBlbmRwb2ludCBmb3IgaW52aXRpbmcgZW1wbG95ZWVzXHJcbmFwcC5wb3N0KCcvYXBpL2ludml0ZS1lbXBsb3llZScsIGF1dGhlbnRpY2F0ZVRva2VuLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICAgIGNvbnN0IHsgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHBvc2l0aW9uLCBlbXBsb3llZV9pZCwgbG9jYXRpb25faWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gQXV0aG9yaXphdGlvbjogU3VwZXIgYWRtaW4gY2FuIGludml0ZSBhbnlvbmUsIExvY2F0aW9uIGFkbWluIGNhbiBvbmx5IGludml0ZSB0byB0aGVpciBsb2NhdGlvbiBvciB1bmFzc2lnbmVkXHJcbiAgICBpZiAoIVsnc3VwZXJfYWRtaW4nLCAnbG9jYXRpb25fYWRtaW4nXS5pbmNsdWRlcyhyb2xlKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogT25seSBhZG1pbnMgY2FuIGludml0ZSBlbXBsb3llZXMuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBJbnZpdGUgRW1wbG95ZWVcclxuICAgIGlmICghZnVsbF9uYW1lIHx8IHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZW1haWwgfHwgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXBhc3N3b3JkIHx8IHR5cGVvZiBwYXNzd29yZCAhPT0gJ3N0cmluZycgfHwgcGFzc3dvcmQubGVuZ3RoIDwgNikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlRlbXBvcmFyeSBwYXNzd29yZCBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhdCBsZWFzdCA2IGNoYXJhY3RlcnMgbG9uZy5cIiB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ29ycmVjdGVkIGxvY2F0aW9uX2lkIHZhbGlkYXRpb246IE11c3QgYmUgYSBudW1iZXIgPiAwLlxyXG4gICAgLy8gSWYgbG9jYXRpb25faWQgaXMgbnVsbCwgaXQgaW5kaWNhdGVzIGFuIHVuYXNzaWduZWQgbG9jYXRpb24sIHdoaWNoIGlzIHZhbGlkIGZvciBhIHN1cGVyIGFkbWluLlxyXG4gICAgLy8gRm9yIGxvY2F0aW9uX2FkbWluLCBpdCBtdXN0IG1hdGNoIHRoZWlyIGN1cnJlbnQgbG9jYXRpb24uXHJcbiAgICAvLyBUaGlzIHJldmlzZWQgbG9naWMgY29ycmVjdGx5IGNoZWNrcyBmb3IgbnVsbCBPUiBhIHZhbGlkIHBvc2l0aXZlIGludGVnZXIuXHJcbiAgICBjb25zdCBpc0xvY2F0aW9uSWRWYWxpZCA9IGxvY2F0aW9uX2lkID09PSBudWxsIHx8ICh0eXBlb2YgbG9jYXRpb25faWQgPT09ICdudW1iZXInICYmICFpc05hTihsb2NhdGlvbl9pZCkgJiYgbG9jYXRpb25faWQgPiAwKTtcclxuICAgIGlmICghaXNMb2NhdGlvbklkVmFsaWQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGxvY2F0aW9uIElEIChwb3NpdGl2ZSBudW1iZXIpIGlzIHJlcXVpcmVkIGZvciBlbXBsb3llZSwgb3IgbnVsbCBmb3IgdW5hc3NpZ25lZC5cIiB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHBvc2l0aW9uICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHBvc2l0aW9uICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUG9zaXRpb24gbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGVtcGxveWVlX2lkICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVtcGxveWVlX2lkICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRW1wbG95ZWUgSUQgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvY2F0aW9uIEFkbWluIHNwZWNpZmljIGNoZWNrOiBlbnN1cmUgdGhleSBhcmUgaW52aXRpbmcgdG8gdGhlaXIgYXNzaWduZWQgbG9jYXRpb24gb3IgbnVsbFxyXG4gICAgLy8gSWYgbG9jYXRpb25fYWRtaW4gdHJpZXMgdG8gc2V0IGEgbG9jYXRpb24gdGhhdCBpcyBOT1QgdGhlaXIgb3duLCBibG9jayBpdC5cclxuICAgIC8vIEFsbG93IGxvY2F0aW9uX2FkbWluIHRvIHNldCB0byBudWxsIGlmIHRoZWlyIGN1cnJlbnQgbG9jYXRpb24gaXMgbnVsbC5cclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgLy8gQSBsb2NhdGlvbiBhZG1pbiBjYW4gT05MWSBhc3NpZ24gYW4gZW1wbG95ZWUgdG8gdGhlaXIgb3duIGxvY2F0aW9uIG9yIHRvIG51bGwgKHVuYXNzaWduZWQpXHJcbiAgICAgICAgaWYgKGxvY2F0aW9uX2lkICE9PSBjdXJyZW50VXNlckxvY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHRhcmdldCBsb2NhdGlvbl9pZCBpcyBub3QgdGhlIGN1cnJlbnQgdXNlcidzIGxvY2F0aW9uLCBjaGVjayBpZiBib3RoIGFyZSBudWxsXHJcbiAgICAgICAgICAgIGlmICghKGxvY2F0aW9uX2lkID09PSBudWxsICYmIGN1cnJlbnRVc2VyTG9jYXRpb25JZCA9PT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gY2FuIG9ubHkgaW52aXRlIGVtcGxveWVlcyB0byB0aGVpciBhc3NpZ25lZCBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBhc3N3b3JkX2hhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApO1xyXG5cclxuICAgICAgICAvLyBWZXJpZnkgdGhlIGxvY2F0aW9uX2lkIGJlbG9uZ3MgdG8gdGhlIGNvbXBhbnkgYW5kLCBpZiBsb2NhdGlvbl9hZG1pbiwgbWF0Y2hlcyB0aGVpciBhc3NpZ25lZCBsb2NhdGlvblxyXG4gICAgICAgIC8vIFRoaXMgY2hlY2sgaXMgY3J1Y2lhbCBpZiBsb2NhdGlvbl9pZCBpcyBOT1QgbnVsbFxyXG4gICAgICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvblZlcmlmaWNhdGlvbiA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGRiLmdldCgnU0VMRUNUIGxvY2F0aW9uX2lkIEZST00gTG9jYXRpb25zIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nLCBbbG9jYXRpb25faWQsIGNvbXBhbnlJZF0sIChlcnIsIGxvY2F0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShsb2NhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICghbG9jYXRpb25WZXJpZmljYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnU2VsZWN0ZWQgbG9jYXRpb24gZG9lcyBub3QgZXhpc3Qgb3IgZG9lcyBub3QgYmVsb25nIHRvIHlvdXIgY29tcGFueS4nIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYi5ydW4oXHJcbiAgICAgICAgICAgIGBJTlNFUlQgSU5UTyBVc2VycyAoY29tcGFueV9pZCwgbG9jYXRpb25faWQsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkX2hhc2gsIHBvc2l0aW9uLCBlbXBsb3llZV9pZCwgcm9sZSwgc3Vic2NyaXB0aW9uX3N0YXR1cywgcGxhbl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCAnZW1wbG95ZWUnLCAnYWN0aXZlJywgJ2ZyZWUnKWAsXHJcbiAgICAgICAgICAgIFtjb21wYW55SWQsIGxvY2F0aW9uX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBwYXNzd29yZF9oYXNoLCBwb3NpdGlvbiwgZW1wbG95ZWVfaWQsXSwgLy8gRGVmYXVsdCBuZXcgZW1wbG95ZWVzIHRvICdlbXBsb3llZScgcm9sZVxyXG4gICAgICAgICAgICBmdW5jdGlvbih1c2VySW5zZXJ0RXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlckluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBpbnZpdGluZyBlbXBsb3llZTpcIiwgdXNlckluc2VydEVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJJbnNlcnRFcnIubWVzc2FnZS5pbmNsdWRlcygnVU5JUVVFIGNvbnN0cmFpbnQgZmFpbGVkOiBVc2Vycy5lbWFpbCcpKSB7IHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IGVycm9yOiAnRW1haWwgYWxyZWFkeSByZWdpc3RlcmVkLicgfSk7IH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBpbnZpdGUgZW1wbG95ZWUuJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIkVtcGxveWVlIGludml0ZWQgc3VjY2Vzc2Z1bGx5IVwiLCB1c2VySWQ6IHRoaXMubGFzdElEIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkludml0ZSBlbXBsb3llZSBlcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgICAgIG5leHQoZXJyb3IpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcblxyXG5hcHAuZ2V0KCcvYXBpL3Byb2ZpbGUnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHVzZXJJZCwgZnVsbE5hbWUsIGVtYWlsLCByb2xlLCBjb21wYW55SWQsIGxvY2F0aW9uSWQsIHN1YnNjcmlwdGlvblN0YXR1cywgcGxhbklkIH0gPSByZXEudXNlcjtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXNlcklkLCBmdWxsTmFtZSwgZW1haWwsIHJvbGUsIGNvbXBhbnlJZCwgbG9jYXRpb25JZCwgc3Vic2NyaXB0aW9uU3RhdHVzLCBwbGFuSWQgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnB1dCgnL2FwaS9wcm9maWxlJywgYXV0aGVudGljYXRlVG9rZW4sIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgZnVsbE5hbWUsIGVtYWlsLCBjdXJyZW50UGFzc3dvcmQsIG5ld1Bhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBQcm9maWxlIFVwZGF0ZVxyXG4gICAgaWYgKGZ1bGxOYW1lID09PSB1bmRlZmluZWQgJiYgZW1haWwgPT09IHVuZGVmaW5lZCAmJiAoIWN1cnJlbnRQYXNzd29yZCB8fCAhbmV3UGFzc3dvcmQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdObyBkYXRhIHByb3ZpZGVkIGZvciB1cGRhdGUuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChmdWxsTmFtZSAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgZnVsbE5hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxOYW1lLnRyaW0oKSA9PT0gJycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nIGlmIHByb3ZpZGVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGVtYWlsICE9PSB1bmRlZmluZWQgJiYgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgbXVzdCBiZSBwcm92aWRlZCBpZiBjaGFuZ2luZyBlbWFpbC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmIChuZXdQYXNzd29yZCAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgbmV3UGFzc3dvcmQgIT09ICdzdHJpbmcnIHx8IG5ld1Bhc3N3b3JkLmxlbmd0aCA8IDYpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiTmV3IHBhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzIGxvbmcgaWYgY2hhbmdpbmcgcGFzc3dvcmQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoKGN1cnJlbnRQYXNzd29yZCAmJiAhbmV3UGFzc3dvcmQpIHx8ICghY3VycmVudFBhc3N3b3JkICYmIG5ld1Bhc3N3b3JkKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnQm90aCBjdXJyZW50IHBhc3N3b3JkIGFuZCBuZXcgcGFzc3dvcmQgYXJlIHJlcXVpcmVkIHRvIGNoYW5nZSBwYXNzd29yZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkYi5nZXQoXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/XCIsIFt1c2VySWRdLCBhc3luYyAoZXJyLCB1c2VyKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgdXNlciBmb3IgcHJvZmlsZSB1cGRhdGU6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcihcIlNlcnZlciBlcnJvciBkdXJpbmcgcHJvZmlsZSB1cGRhdGUuXCIpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKCF1c2VyKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIlVzZXIgbm90IGZvdW5kLlwiIH0pOyB9XHJcbiAgICAgICAgbGV0IHVwZGF0ZVNxbCA9ICdVUERBVEUgVXNlcnMgU0VUICc7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlUGFyYW1zID0gW107XHJcbiAgICAgICAgY29uc3QgY2xhdXNlcyA9IFtdO1xyXG4gICAgICAgIGxldCBjaGFuZ2VzTWFkZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChmdWxsTmFtZSAhPT0gdW5kZWZpbmVkICYmIGZ1bGxOYW1lICE9PSB1c2VyLmZ1bGxfbmFtZSkge1xyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2Z1bGxfbmFtZSA9ID8nKTtcclxuICAgICAgICAgICAgdXBkYXRlUGFyYW1zLnB1c2goZnVsbE5hbWUpO1xyXG4gICAgICAgICAgICBjaGFuZ2VzTWFkZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbWFpbCAhPT0gdW5kZWZpbmVkICYmIGVtYWlsICE9PSB1c2VyLmVtYWlsKSB7XHJcbiAgICAgICAgICAgIHRyeSB7IC8vIEFkZGVkIHRyeS1jYXRjaCBmb3IgYXN5bmMgYXdhaXQgaW4gZGIuZ2V0XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGIuZ2V0KFwiU0VMRUNUIHVzZXJfaWQgRlJPTSBVc2VycyBXSEVSRSBlbWFpbCA9ID8gQU5EIHVzZXJfaWQgIT0gP1wiLCBbZW1haWwsIHVzZXJJZF0sIChlcnIsIHJvdykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdVc2VyKSB7IHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IGVycm9yOiAnRW1haWwgYWxyZWFkeSBpbiB1c2UgYnkgYW5vdGhlciBhY2NvdW50LicgfSk7IH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZGJFcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBjaGVja2luZyBleGlzdGluZyBlbWFpbDpcIiwgZGJFcnIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKFwiU2VydmVyIGVycm9yIHZlcmlmeWluZyBlbWFpbCBhdmFpbGFiaWxpdHkuXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2VtYWlsID0gPycpO1xyXG4gICAgICAgICAgICB1cGRhdGVQYXJhbXMucHVzaChlbWFpbCk7XHJcbiAgICAgICAgICAgIGNoYW5nZXNNYWRlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGN1cnJlbnRQYXNzd29yZCAmJiBuZXdQYXNzd29yZCkge1xyXG4gICAgICAgICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUoY3VycmVudFBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkX2hhc2gpO1xyXG4gICAgICAgICAgICBpZiAoIWlzTWF0Y2gpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwiQ3VycmVudCBwYXNzd29yZCBpbmNvcnJlY3QuXCIgfSk7IH1cclxuICAgICAgICAgICAgY29uc3QgbmV3UGFzc3dvcmRIYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gobmV3UGFzc3dvcmQsIDEwKTtcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdwYXNzd29yZF9oYXNoID0gPycpO1xyXG4gICAgICAgICAgICB1cGRhdGVQYXJhbXMucHVzaChuZXdQYXNzd29yZEhhc2gpO1xyXG4gICAgICAgICAgICBjaGFuZ2VzTWFkZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghY2hhbmdlc01hZGUpIHsgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ05vIGNoYW5nZXMgZGV0ZWN0ZWQuIFByb2ZpbGUgcmVtYWlucyB0aGUgc2FtZS4nIH0pOyB9XHJcbiAgICAgICAgdXBkYXRlU3FsICs9IGNsYXVzZXMuam9pbignLCAnKSArICcgV0hFUkUgdXNlcl9pZCA9ID8nO1xyXG4gICAgICAgIHVwZGF0ZVBhcmFtcy5wdXNoKHVzZXJJZCk7XHJcbiAgICAgICAgZGIucnVuKHVwZGF0ZVNxbCwgdXBkYXRlUGFyYW1zLCBmdW5jdGlvbih1cGRhdGVFcnIpIHtcclxuICAgICAgICAgICAgaWYgKHVwZGF0ZUVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgdXBkYXRpbmcgcHJvZmlsZTpcIiwgdXBkYXRlRXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHByb2ZpbGUuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA+IDApIHtcclxuICAgICAgICAgICAgICAgIGRiLmdldChcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID9cIiwgW3VzZXJJZF0sIChmZXRjaEVyciwgdXBkYXRlZFVzZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmV0Y2hFcnIgfHwgIXVwZGF0ZWRVc2VyKSB7IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyB1cGRhdGVkIHVzZXIgZm9yIG5ldyB0b2tlbjpcIiwgZmV0Y2hFcnIpOyByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnUHJvZmlsZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseSwgYnV0IHRva2VuIGNvdWxkIG5vdCBiZSByZWZyZXNoZWQuJyB9KTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BheWxvYWQgPSB7IHVzZXJJZDogdXBkYXRlZFVzZXIudXNlcl9pZCwgZW1haWw6IHVwZGF0ZWRVc2VyLmVtYWlsLCByb2xlOiB1cGRhdGVkVXNlci5yb2xlLCBmdWxsTmFtZTogdXBkYXRlZFVzZXIuZnVsbF9uYW1lLCBjb21wYW55SWQ6IHVwZGF0ZWRVc2VyLmNvbXBhbnlfaWQsIGxvY2F0aW9uSWQ6IHVwZGF0ZWRVc2VyLmxvY2F0aW9uX2lkLCBzdWJzY3JpcHRpb25TdGF0dXM6IHVwZGF0ZWRVc2VyLnN1YnNjcmlwdGlvbl9zdGF0dXMsIHBsYW5JZDogdXNlci5wbGFuX2lkIH07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VG9rZW4gPSBqd3Quc2lnbihuZXdQYXlsb2FkLCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogJzFoJyB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdQcm9maWxlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IScsIHRva2VuOiBuZXdUb2tlbiB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgeyByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdObyBjaGFuZ2VzIGFwcGxpZWQgYXMgZGF0YSB3YXMgaWRlbnRpY2FsLicgfSk7IH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5nZXQoJy9hcGkvbG9jYXRpb25zJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlIH0gPSByZXEudXNlcjtcclxuICAgIGxldCBzcWwgPSAnU0VMRUNUIGxvY2F0aW9uX2lkLCBsb2NhdGlvbl9uYW1lLCBsb2NhdGlvbl9hZGRyZXNzIEZST00gTG9jYXRpb25zIFdIRVJFIGNvbXBhbnlfaWQgPSA/JztcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtjb21wYW55SWRdO1xyXG5cclxuICAgIC8vIEFsbG93aW5nIHN1cGVyX2FkbWluLCBsb2NhdGlvbl9hZG1pbiwgYW5kIGVtcGxveWVlIHRvIHZpZXcgYWxsIGxvY2F0aW9ucyBpbiB0aGVpciBjb21wYW55IGZvciBkcm9wZG93bnMvc2VsZWN0aW9uXHJcbiAgICBpZiAoIVsnc3VwZXJfYWRtaW4nLCAnbG9jYXRpb25fYWRtaW4nLCAnZW1wbG95ZWUnXS5pbmNsdWRlcyhyb2xlKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zIHRvIHZpZXcgbG9jYXRpb25zLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIuYWxsKHNxbCwgcGFyYW1zLCAoZXJyLCByb3dzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgbG9jYXRpb25zOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIGxvY2F0aW9ucy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIHJlcy5qc29uKHJvd3MpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoJy9hcGkvbG9jYXRpb25zJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgbG9jYXRpb25fbmFtZSwgbG9jYXRpb25fYWRkcmVzcyB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgQ3JlYXRlIExvY2F0aW9uXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgc3VwZXIgYWRtaW5zIGNhbiBjcmVhdGUgbG9jYXRpb25zLicgfSk7IH1cclxuICAgIGlmICghbG9jYXRpb25fbmFtZSB8fCB0eXBlb2YgbG9jYXRpb25fbmFtZSAhPT0gJ3N0cmluZycgfHwgbG9jYXRpb25fbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiTG9jYXRpb24gbmFtZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWxvY2F0aW9uX2FkZHJlc3MgfHwgdHlwZW9mIGxvY2F0aW9uX2FkZHJlc3MgIT09ICdzdHJpbmcnIHx8IGxvY2F0aW9uX2FkZHJlc3MudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkxvY2F0aW9uIGFkZHJlc3MgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bignSU5TRVJUIElOVE8gTG9jYXRpb25zIChjb21wYW55X2lkLCBsb2NhdGlvbl9uYW1lLCBsb2NhdGlvbl9hZGRyZXNzKSBWQUxVRVMgKD8sID8sID8pJywgW2NvbXBhbnlJZCwgbG9jYXRpb25fbmFtZSwgbG9jYXRpb25fYWRkcmVzc10sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGNyZWF0aW5nIGxvY2F0aW9uOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgbG9jYXRpb24uJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdMb2NhdGlvbiBjcmVhdGVkIScsIGxvY2F0aW9uSWQ6IHRoaXMubGFzdElEIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLmRlbGV0ZSgnL2FwaS9sb2NhdGlvbnMvOmlkJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgc3VwZXIgYWRtaW5zIGNhbiBkZWxldGUgbG9jYXRpb25zLicgfSk7IH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBJRCBwYXJhbWV0ZXJcclxuICAgIGlmICghaWQgfHwgaXNOYU4ocGFyc2VJbnQoaWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBsb2NhdGlvbiBJRCBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bignREVMRVRFIEZST00gTG9jYXRpb25zIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nLCBbaWQsIGNvbXBhbnlJZF0sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGRlbGV0aW5nIGxvY2F0aW9uOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgbG9jYXRpb24uJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnTG9jYXRpb24gbm90IGZvdW5kIG9yIG5vdCBhdXRob3JpemVkIHRvIGRlbGV0ZS4nIH0pOyB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDQpLnNlbmQoKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5nZXQoJy9hcGkvdXNlcnMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIHVzZXJJZDogY3VycmVudFVzZXJJZCwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuICAgIGNvbnN0IHsgZmlsdGVyUm9sZSwgZmlsdGVyTG9jYXRpb25JZCB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICAgIGxldCBzcWwgPSBgU0VMRUNUIFVzZXJzLnVzZXJfaWQsIFVzZXJzLmZ1bGxfbmFtZSwgVXNlcnMuZW1haWwsIFVzZXJzLnJvbGUsIExvY2F0aW9ucy5sb2NhdGlvbl9uYW1lXHJcbiAgICAgICAgICAgICAgIEZST00gVXNlcnNcclxuICAgICAgICAgICAgICAgTEVGVCBKT0lOIExvY2F0aW9ucyBPTiBVc2Vycy5sb2NhdGlvbl9pZCA9IExvY2F0aW9ucy5sb2NhdGlvbl9pZFxyXG4gICAgICAgICAgICAgICBXSEVSRSBVc2Vycy5jb21wYW55X2lkID0gP2A7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbY29tcGFueUlkXTtcclxuXHJcbiAgICBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIC8vIFN1cGVyIGFkbWluIGNhbiB2aWV3IGFsbCB1c2VycyBpbiB0aGVpciBjb21wYW55LlxyXG4gICAgfSBlbHNlIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgLy8gTG9jYXRpb24gYWRtaW4gY2FuIHZpZXcgYWxsIHVzZXJzIHdpdGhpbiB0aGVpciBhc3NpZ25lZCBsb2NhdGlvbiwgcGx1cyB1bmFzc2lnbmVkIHVzZXJzIGZvciB0aGVpciBjb21wYW55LlxyXG4gICAgICAgIGlmIChjdXJyZW50VXNlckxvY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgc3FsICs9IGAgQU5EIChVc2Vycy5sb2NhdGlvbl9pZCA9ID8gT1IgVXNlcnMubG9jYXRpb25faWQgSVMgTlVMTClgOyAvLyBBZG1pbnMgbWlnaHQgbmVlZCB0byBzZWUgdW5hc3NpZ25lZCB1c2Vyc1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gbm90IGFzc2lnbmVkIHRvIGEgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdlbXBsb3llZScpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgVXNlcnMudXNlcl9pZCA9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VySWQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IEluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byB2aWV3IHVzZXJzLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5wdXQgdmFsaWRhdGlvbiBmb3IgZmlsdGVyUm9sZSBhbmQgZmlsdGVyTG9jYXRpb25JZFxyXG4gICAgY29uc3QgYWxsb3dlZFJvbGVzID0gWydzdXBlcl9hZG1pbicsICdsb2NhdGlvbl9hZG1pbicsICdlbXBsb3llZSddO1xyXG4gICAgaWYgKGZpbHRlclJvbGUgJiYgKCFhbGxvd2VkUm9sZXMuaW5jbHVkZXMoZmlsdGVyUm9sZSkgfHwgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicgJiYgZmlsdGVyUm9sZSA9PT0gJ3N1cGVyX2FkbWluJykpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGZpbHRlciByb2xlIHByb3ZpZGVkIG9yIGluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byBmaWx0ZXIgYnkgdGhpcyByb2xlLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZmlsdGVyTG9jYXRpb25JZCAmJiBpc05hTihwYXJzZUludChmaWx0ZXJMb2NhdGlvbklkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgZmlsdGVyIGxvY2F0aW9uIElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlmIChmaWx0ZXJSb2xlKSB7XHJcbiAgICAgICAgaWYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicgfHwgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicgJiYgKGZpbHRlclJvbGUgPT09ICdlbXBsb3llZScgfHwgZmlsdGVyUm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykpIHx8IChyb2xlID09PSAnZW1wbG95ZWUnICYmIGZpbHRlclJvbGUgPT09ICdlbXBsb3llZScpKSB7XHJcbiAgICAgICAgICAgIHNxbCArPSBgIEFORCBVc2Vycy5yb2xlID0gP2A7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGZpbHRlclJvbGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgY2FzZSBzaG91bGQgaWRlYWxseSBiZSBjYXVnaHQgYnkgdGhlIGVhcmxpZXIgdmFsaWRhdGlvbiBmb3IgYWxsb3dlZFJvbGVzLCBidXQgZm9yIGRlZmVuc2UtaW4tZGVwdGg6XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zIHRvIGZpbHRlciBieSByb2xlLicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlckxvY2F0aW9uSWQpIHtcclxuICAgICAgICAvLyBFbnN1cmUgbG9jYXRpb25fYWRtaW4gY2FuIG9ubHkgZmlsdGVyIGJ5IHRoZWlyIG93biBsb2NhdGlvblxyXG4gICAgICAgIGlmIChyb2xlID09PSAnc3VwZXJfYWRtaW4nIHx8IChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIHBhcnNlSW50KGZpbHRlckxvY2F0aW9uSWQpID09PSBjdXJyZW50VXNlckxvY2F0aW9uSWQpKSB7XHJcbiAgICAgICAgICAgIHNxbCArPSBgIEFORCBVc2Vycy5sb2NhdGlvbl9pZCA9ID9gO1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChmaWx0ZXJMb2NhdGlvbklkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IEluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byBmaWx0ZXIgYnkgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGIuYWxsKHNxbCwgcGFyYW1zLCAoZXJyLCByb3dzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgdXNlcnM6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgdXNlcnMuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuanNvbihyb3dzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5kZWxldGUoJy9hcGkvdXNlcnMvOmlkJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgdXNlcklkOiBhdXRoZW50aWNhdGVkVXNlcklkIH0gPSByZXEudXNlcjtcclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogT25seSBzdXBlciBhZG1pbnMgY2FuIGRlbGV0ZSB1c2Vycy4nIH0pOyB9XHJcbiAgICBpZiAocGFyc2VJbnQoaWQpID09PSBhdXRoZW50aWNhdGVkVXNlcklkKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQ2Fubm90IGRlbGV0ZSB5b3VyIG93biBzdXBlciBhZG1pbiBhY2NvdW50IHZpYSB0aGlzIGludGVyZmFjZS4nIH0pOyB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgSUQgcGFyYW1ldGVyXHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgdXNlciBJRCBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bignREVMRVRFIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/IEFORCByb2xlICE9IFxcJ3N1cGVyX2FkbWluXFwnJywgW2lkLCBjb21wYW55SWRdLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBkZWxldGluZyB1c2VyOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgdXNlci4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byBkZWxldGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjA0KS5zZW5kKCk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAucG9zdCgnL2FwaS9jcmVhdGUtY2hlY2tvdXQtc2Vzc2lvbicsIGF1dGhlbnRpY2F0ZVRva2VuLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IHBsYW5JZCB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IHVzZXJJZCwgZW1haWwsIGNvbXBhbnlJZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgcGxhbklkXHJcbiAgICBjb25zdCBhbGxvd2VkUGxhbklkcyA9IFsncHJvJywgJ2VudGVycHJpc2UnXTtcclxuICAgIGlmICghcGxhbklkIHx8ICFhbGxvd2VkUGxhbklkcy5pbmNsdWRlcyhwbGFuSWQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHBsYW4gSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwcmljZUlkTWFwID0ge1xyXG4gICAgICAgICdwcm8nOiBwcm9jZXNzLmVudi5TVFJJUEVfUFJJQ0VfSURfUFJPLCAgICAgICAvLyBVc2UgZW52aXJvbm1lbnQgdmFyaWFibGVcclxuICAgICAgICAnZW50ZXJwcmlzZSc6IHByb2Nlc3MuZW52LlNUUklQRV9QUklDRV9JRF9FTlQgLy8gVXNlIGVudmlyb25tZW50IHZhcmlhYmxlXHJcbiAgICB9O1xyXG4gICAgY29uc3Qgc3RyaXBlUHJpY2VJZCA9IHByaWNlSWRNYXBbcGxhbklkXTtcclxuICAgIGlmICghc3RyaXBlUHJpY2VJZCkgeyByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ1N0cmlwZSBwcmljZSBJRCBub3QgY29uZmlndXJlZCBmb3IgdGhpcyBwbGFuLicgfSk7IH0gLy8gQ2hhbmdlZCBmcm9tIDQwMCB0byA1MDAgYXMgdGhpcyBpcyBhIHNlcnZlci1zaWRlIGNvbmZpZyBpc3N1ZVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBsZXQgY3VzdG9tZXJJZDtcclxuICAgICAgICBjb25zdCB1c2VyUmVjb3JkID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBkYi5nZXQoJ1NFTEVDVCBzdHJpcGVfY3VzdG9tZXJfaWQgRlJPTSBVc2VycyBXSEVSRSB1c2VyX2lkID0gPycsIFt1c2VySWRdLCAoZXJyLCByb3cpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyb3cpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodXNlclJlY29yZCAmJiB1c2VyUmVjb3JkLnN0cmlwZV9jdXN0b21lcl9pZCkge1xyXG4gICAgICAgICAgICBjdXN0b21lcklkID0gdXNlclJlY29yZC5zdHJpcGVfY3VzdG9tZXJfaWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBhd2FpdCBzdHJpcGVJbnN0YW5jZS5jdXN0b21lcnMuY3JlYXRlKHsgZW1haWw6IGVtYWlsLCBtZXRhZGF0YTogeyB1c2VySWQ6IHVzZXJJZCwgY29tcGFueUlkOiBjb21wYW55SWQsIH0sIH0pO1xyXG4gICAgICAgICAgICBjdXN0b21lcklkID0gY3VzdG9tZXIuaWQ7XHJcbiAgICAgICAgICAgIGRiLnJ1bignVVBEQVRFIFVzZXJzIFNFVCBzdHJpcGVfY3VzdG9tZXJfaWQgPSA/IFdIRVJFIHVzZXJfaWQgPSA/JywgW2N1c3RvbWVySWQsIHVzZXJJZF0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIFN0cmlwZSBjdXN0b21lciBJRCB0byBEQjonLCBlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHN0cmlwZUluc3RhbmNlLmNoZWNrb3V0LnNlc3Npb25zLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGN1c3RvbWVyOiBjdXN0b21lcklkLFxyXG4gICAgICAgICAgICBtb2RlOiAnc3Vic2NyaXB0aW9uJyxcclxuICAgICAgICAgICAgbGluZV9pdGVtczogW3sgcHJpY2U6IHN0cmlwZVByaWNlSWQsIHF1YW50aXR5OiAxLCB9LCBdLFxyXG4gICAgICAgICAgICAvLyBVc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciBzdWNjZXNzL2NhbmNlbCBVUkxzLCBvciByZWxhdGl2ZSBwYXRocyBpZiBoYW5kbGVkIGNsaWVudC1zaWRlXHJcbiAgICAgICAgICAgIHN1Y2Nlc3NfdXJsOiBgJHtwcm9jZXNzLmVudi5GUk9OVEVORF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCd9L3N1aXRlLWh1Yi5odG1sP3BheW1lbnQ9c3VjY2VzcyZzZXNzaW9uX2lkPXtDSEVDS09VVF9TRVNTSU9OX0lEfWAsXHJcbiAgICAgICAgICAgIGNhbmNlbF91cmw6IGAke3Byb2Nlc3MuZW52LkZST05URU5EX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo4MDAwJ30vcHJpY2luZy5odG1sP3BheW1lbnQ9Y2FuY2VsbGVkYCxcclxuICAgICAgICAgICAgbWV0YWRhdGE6IHsgdXNlcklkOiB1c2VySWQsIHBsYW5JZDogcGxhbklkLCB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXJsOiBzZXNzaW9uLnVybCB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7IGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIFN0cmlwZSBDaGVja291dCBTZXNzaW9uOicsIGVycm9yKTsgbmV4dChlcnJvcik7IH0gLy8gUGFzcyBlcnJvclxyXG59KTtcclxuXHJcbmFwcC5wb3N0KCcvYXBpL3NjaGVkdWxlcycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGVtcGxveWVlX2lkLCBsb2NhdGlvbl9pZCwgc3RhcnRfdGltZSwgZW5kX3RpbWUsIG5vdGVzIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCB1c2VySWQ6IGN1cnJlbnRVc2VySWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIENyZWF0ZSBTY2hlZHVsZVxyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicgJiYgcm9sZSAhPT0gJ2xvY2F0aW9uX2FkbWluJykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgYWRtaW5zIGNhbiBjcmVhdGUgc2NoZWR1bGVzLicgfSk7IH1cclxuICAgIGlmICh0eXBlb2YgZW1wbG95ZWVfaWQgIT09ICdudW1iZXInIHx8IGVtcGxveWVlX2lkIDw9IDApIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0EgdmFsaWQgZW1wbG95ZWUgSUQgaXMgcmVxdWlyZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbG9jYXRpb25faWQgIT09ICdudW1iZXInIHx8IGxvY2F0aW9uX2lkIDw9IDApIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0EgdmFsaWQgbG9jYXRpb24gSUQgaXMgcmVxdWlyZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICghc3RhcnRfdGltZSB8fCAhZW5kX3RpbWUgfHwgaXNOYU4obmV3IERhdGUoc3RhcnRfdGltZSkuZ2V0VGltZSgpKSB8fCBpc05hTihuZXcgRGF0ZShlbmRfdGltZSkuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVmFsaWQgc3RhcnQgYW5kIGVuZCB0aW1lcyBhcmUgcmVxdWlyZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChuZXcgRGF0ZShzdGFydF90aW1lKSA+PSBuZXcgRGF0ZShlbmRfdGltZSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1N0YXJ0IHRpbWUgbXVzdCBiZSBiZWZvcmUgZW5kIHRpbWUuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChub3RlcyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBub3RlcyAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ05vdGVzIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5nZXQoJ1NFTEVDVCB1c2VyX2lkIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JywgW2VtcGxveWVlX2lkLCBjb21wYW55SWRdLCAoZXJyLCBlbXBsb3llZSkgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHZlcmlmeWluZyBlbXBsb3llZTpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciBkdXJpbmcgZW1wbG95ZWUgdmVyaWZpY2F0aW9uLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKCFlbXBsb3llZSkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0VtcGxveWVlIG5vdCBmb3VuZCBpbiB5b3VyIGNvbXBhbnkuJyB9KTsgfVxyXG4gICAgICAgIGRiLmdldCgnU0VMRUNUIGxvY2F0aW9uX2lkIEZST00gTG9jYXRpb25zIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nLCBbbG9jYXRpb25faWQsIGNvbXBhbnlJZF0sIChlcnIsIGxvY2F0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHZlcmlmeWluZyBsb2NhdGlvbjpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciBkdXJpbmcgbG9jYXRpb24gdmVyaWZpY2F0aW9uLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgIGlmICghbG9jYXRpb24pIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdMb2NhdGlvbiBub3QgZm91bmQgaW4geW91ciBjb21wYW55LicgfSk7IH1cclxuICAgICAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAgICAgJ0lOU0VSVCBJTlRPIFNjaGVkdWxlcyAoZW1wbG95ZWVfaWQsIGxvY2F0aW9uX2lkLCBzdGFydF90aW1lLCBlbmRfdGltZSwgbm90ZXMpIFZBTFVFUyAoPywgPywgPywgPywgPyknLCBbZW1wbG95ZWVfaWQsIGxvY2F0aW9uX2lkLCBzdGFydF90aW1lLCBlbmRfdGltZSwgbm90ZXNdLFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oaW5zZXJ0RXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc2VydEVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgY3JlYXRpbmcgc2NoZWR1bGU6XCIsIGluc2VydEVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBzY2hlZHVsZS4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogJ1NjaGVkdWxlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IScsIHNjaGVkdWxlSWQ6IHRoaXMubGFzdElEIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLmdldCgnL2FwaS9zY2hlZHVsZXMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBlbXBsb3llZV9pZCwgbG9jYXRpb25faWQsIHN0YXJ0X2RhdGUsIGVuZF9kYXRlIH0gPSByZXEucXVlcnk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgdXNlcklkOiBjdXJyZW50VXNlcklkLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIGxldCBzcWwgPSBgU0VMRUNUIFNjaGVkdWxlcy4qLCBVc2Vycy5mdWxsX25hbWUgQVMgZW1wbG95ZWVfbmFtZSwgVXNlcnMuZW1haWwgQVMgZW1wbG95ZWVfZW1haWwsIExvY2F0aW9ucy5sb2NhdGlvbl9uYW1lXHJcbiAgICAgICAgICAgICAgIEZST00gU2NoZWR1bGVzXHJcbiAgICAgICAgICAgICAgIEpPSU4gVXNlcnMgT04gU2NoZWR1bGVzLmVtcGxveWVlX2lkID0gVXNlcnMudXNlcl9pZFxyXG4gICAgICAgICAgICAgICBKT0lOIExvY2F0aW9ucyBPTiBTY2hlZHVsZXMubG9jYXRpb25faWQgPSBMb2NhdGlvbnMubG9jYXRpb25faWRcclxuICAgICAgICAgICAgICAgV0hFUkUgVXNlcnMuY29tcGFueV9pZCA9ID9gO1xyXG4gICAgY29uc3QgcGFyYW1zID0gW2NvbXBhbnlJZF07XHJcblxyXG4gICAgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICBpZiAoY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIHNxbCArPSBgIEFORCBTY2hlZHVsZXMubG9jYXRpb25faWQgPSA/YDtcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIG5vdCBhc3NpZ25lZCB0byBhIGxvY2F0aW9uLicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChyb2xlID09PSAnZW1wbG95ZWUnKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIFVzZXJzLnVzZXJfaWQgPSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlcklkKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbnB1dCB2YWxpZGF0aW9uIGZvciBxdWVyeSBwYXJhbWV0ZXJzXHJcbiAgICBpZiAoZW1wbG95ZWVfaWQgJiYgaXNOYU4ocGFyc2VJbnQoZW1wbG95ZWVfaWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBlbXBsb3llZSBJRCBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChsb2NhdGlvbl9pZCAmJiBpc05hTihwYXJzZUludChsb2NhdGlvbl9pZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGxvY2F0aW9uIElEIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHN0YXJ0X2RhdGUgJiYgaXNOYU4obmV3IERhdGUoc3RhcnRfZGF0ZSkuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBzdGFydCBkYXRlIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGVuZF9kYXRlICYmIGlzTmFOKG5ldyBEYXRlKGVuZF9kYXRlKS5nZXRUaW1lKCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGVuZCBkYXRlIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZiAoZW1wbG95ZWVfaWQgJiYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicgfHwgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicgJiYgcGFyc2VJbnQoZW1wbG95ZWVfaWQpID09PSBjdXJyZW50VXNlcklkKSB8fCAocm9sZSA9PT0gJ2VtcGxveWVlJyAmJiBwYXJzZUludChlbXBsb3llZV9pZCkgPT09IGN1cnJlbnRVc2VySWQpKSkge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBVc2Vycy5yb2xlID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goZmlsdGVyUm9sZSk7IC8vIFRoaXMgc2hvdWxkIGJlIGVtcGxveWVlX2lkLCBub3QgZmlsdGVyUm9sZVxyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICYmIChyb2xlID09PSAnc3VwZXJfYWRtaW4nIHx8IChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIHBhcnNlSW50KGxvY2F0aW9uX2lkKSA9PT0gY3VycmVudFVzZXJMb2NhdGlvbklkKSkpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgU2NoZWR1bGVzLmxvY2F0aW9uX2lkID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgfVxyXG4gICAgaWYgKHN0YXJ0X2RhdGUpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgU2NoZWR1bGVzLnN0YXJ0X3RpbWUgPj0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goc3RhcnRfZGF0ZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZW5kX2RhdGUpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgU2NoZWR1bGVzLmVuZF90aW1lIDw9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGVuZF9kYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5hbGwoc3FsLCBwYXJhbXMsIChlcnIsIHJvd3MpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBzY2hlZHVsZXM6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgc2NoZWR1bGVzLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgcmVzLmpzb24ocm93cyk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAuZGVsZXRlKCcvYXBpL3NjaGVkdWxlcy86aWQnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCB1c2VySWQ6IGN1cnJlbnRVc2VySWQsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgSUQgcGFyYW1ldGVyXHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgc2NoZWR1bGUgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm9sZSA9PT0gJ2VtcGxveWVlJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogRW1wbG95ZWVzIGNhbm5vdCBkZWxldGUgc2NoZWR1bGVzLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNxbCA9IGBERUxFVEUgRlJPTSBTY2hlZHVsZXMgV0hFUkUgc2NoZWR1bGVfaWQgPSA/YDtcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtpZF07XHJcblxyXG4gICAgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgZW1wbG95ZWVfaWQgSU4gKFNFTEVDVCB1c2VyX2lkIEZST00gVXNlcnMgV0hFUkUgbG9jYXRpb25faWQgPSA/IEFORCBjb21wYW55X2lkID0gPylgO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VyTG9jYXRpb25JZCwgY29tcGFueUlkKTtcclxuICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBlbXBsb3llZV9pZCBJTiAoU0VMRUNUIHVzZXJfaWQgRlJPTSBVc2VycyBXSEVSRSBjb21wYW55X2lkID0gPylgO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGNvbXBhbnlJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIucnVuKHNxbCwgcGFyYW1zLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBkZWxldGluZyBzY2hlZHVsZTpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIHNjaGVkdWxlLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1NjaGVkdWxlIG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byBkZWxldGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjA0KS5zZW5kKCk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyAtLS0gSGlyaW5nIFJvdXRlcyAtLS1cclxuXHJcbi8qKlxyXG4gKiBQT1NUIC9hcGkvam9iLXBvc3RpbmdzXHJcbiAqIENyZWF0ZXMgYSBuZXcgam9iIHBvc3RpbmcuXHJcbiAqIFJlcXVpcmVzIHN1cGVyX2FkbWluIG9yIGxvY2F0aW9uX2FkbWluIHJvbGUuXHJcbiAqL1xyXG5hcHAucG9zdCgnL2FwaS9qb2ItcG9zdGluZ3MnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIHJlcXVpcmVtZW50cywgbG9jYXRpb25faWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcbiAgICBjb25zdCBjcmVhdGVkX2RhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7IC8vIEN1cnJlbnQgZGF0ZS90aW1lIGZvciBjcmVhdGlvblxyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIENyZWF0ZSBKb2IgUG9zdGluZ1xyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicgJiYgcm9sZSAhPT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogT25seSBhZG1pbnMgY2FuIGNyZWF0ZSBqb2IgcG9zdGluZ3MuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICghdGl0bGUgfHwgdHlwZW9mIHRpdGxlICE9PSAnc3RyaW5nJyB8fCB0aXRsZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiSm9iIHRpdGxlIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZGVzY3JpcHRpb24gfHwgdHlwZW9mIGRlc2NyaXB0aW9uICE9PSAnc3RyaW5nJyB8fCBkZXNjcmlwdGlvbi50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdEZXNjcmlwdGlvbiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcXVpcmVtZW50cyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlbWVudHMgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdSZXF1aXJlbWVudHMgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGxvY2F0aW9uX2lkICE9PSAnbnVtYmVyJyAmJiBsb2NhdGlvbl9pZCAhPT0gbnVsbCkgeyAvLyBsb2NhdGlvbl9pZCBjYW4gYmUgbnVsbFxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTG9jYXRpb24gSUQgbXVzdCBiZSBhIG51bWJlciBvciBudWxsIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgbG9jYXRpb25fYWRtaW4sIGVuc3VyZSBsb2NhdGlvbl9pZCBtYXRjaGVzIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uLCBvciBpcyBudWxsXHJcbiAgICAvLyBBIGxvY2F0aW9uIGFkbWluIGNhbiBvbmx5IGNyZWF0ZSBqb2IgcG9zdGluZ3MgZm9yIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uIG9yIGNvbXBhbnktd2lkZSBpZiB0aGVpciBsb2NhdGlvbiBpcyBudWxsXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJyAmJiBsb2NhdGlvbl9pZCAmJiBsb2NhdGlvbl9pZCAhPT0gY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBMb2NhdGlvbiBhZG1pbiBjYW4gb25seSBwb3N0IGpvYnMgZm9yIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIucnVuKFxyXG4gICAgICAgICdJTlNFUlQgSU5UTyBKb2JQb3N0aW5ncyAoY29tcGFueV9pZCwgbG9jYXRpb25faWQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgcmVxdWlyZW1lbnRzLCBzdGF0dXMsIGNyZWF0ZWRfZGF0ZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/KScsXHJcbiAgICAgICAgW2NvbXBhbnlJZCwgbG9jYXRpb25faWQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgcmVxdWlyZW1lbnRzLCAnT3BlbicsIGNyZWF0ZWRfZGF0ZV0sIC8vIERlZmF1bHQgc3RhdHVzIHRvICdPcGVuJ1xyXG4gICAgICAgIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgY3JlYXRpbmcgam9iIHBvc3Rpbmc6XCIsIGVycik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgam9iIHBvc3RpbmcuJykpOyAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiAnSm9iIHBvc3RpbmcgY3JlYXRlZCBzdWNjZXNzZnVsbHkhJywgam9iUG9zdGluZ0lkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBHRVQgL2FwaS9qb2ItcG9zdGluZ3NcclxuICogUmV0cmlldmVzIGpvYiBwb3N0aW5ncy5cclxuICogQ2FuIGZpbHRlciBieSBsb2NhdGlvbl9pZCBhbmQgc3RhdHVzLlxyXG4gKiBSZXF1aXJlcyBzdXBlcl9hZG1pbiBvciBsb2NhdGlvbl9hZG1pbi5cclxuICovXHJcbmFwcC5nZXQoJy9hcGkvam9iLXBvc3RpbmdzJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgc3RhdHVzLCBsb2NhdGlvbl9pZCB9ID0gcmVxLnF1ZXJ5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgbGV0IHNxbCA9ICdTRUxFQ1QgKiBGUk9NIEpvYlBvc3RpbmdzIFdIRVJFIGNvbXBhbnlfaWQgPSA/JztcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtjb21wYW55SWRdO1xyXG5cclxuICAgIC8vIEF1dGhvcml6YXRpb246IHN1cGVyX2FkbWluIHNlZXMgYWxsLCBsb2NhdGlvbl9hZG1pbiBzZWVzIHRoZWlyIGxvY2F0aW9uJ3MgcG9zdGluZ3NcclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRVc2VyTG9jYXRpb25JZCkge1xyXG4gICAgICAgICAgICBzcWwgKz0gJyBBTkQgKGxvY2F0aW9uX2lkID0gPyBPUiBsb2NhdGlvbl9pZCBJUyBOVUxMKSc7IC8vIExvY2F0aW9uIGFkbWluIHNlZXMgdGhlaXIgbG9jYXRpb24ncyBwb3N0aW5ncyBvciBjb21wYW55LXdpZGVcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIG5vdCBhc3NpZ25lZCB0byBhIGxvY2F0aW9uLicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChyb2xlID09PSAnZW1wbG95ZWUnKSB7XHJcbiAgICAgICAgLy8gRW1wbG95ZWVzIGdlbmVyYWxseSBzaG91bGRuJ3Qgc2VlIGpvYiBwb3N0aW5ncyBsaXN0IHZpYSB0aGlzIGFkbWluIEFQSVxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zIHRvIHZpZXcgam9iIHBvc3RpbmdzLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5wdXQgdmFsaWRhdGlvbiBmb3IgcXVlcnkgcGFyYW1ldGVyc1xyXG4gICAgY29uc3QgYWxsb3dlZFN0YXR1c2VzID0gWydPcGVuJywgJ0Nsb3NlZCcsICdGaWxsZWQnXTsgLy8gQXNzdW1pbmcgdGhlc2UgYXJlIHlvdXIgdmFsaWQgc3RhdHVzZXNcclxuICAgIGlmIChzdGF0dXMgJiYgIWFsbG93ZWRTdGF0dXNlcy5pbmNsdWRlcyhzdGF0dXMpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGpvYiBwb3N0aW5nIHN0YXR1cyBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChsb2NhdGlvbl9pZCAmJiBpc05hTihwYXJzZUludChsb2NhdGlvbl9pZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGxvY2F0aW9uIElEIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZiAoc3RhdHVzKSB7XHJcbiAgICAgICAgc3FsICs9ICcgQU5EIHN0YXR1cyA9ID8nO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKHN0YXR1cyk7XHJcbiAgICB9XHJcbiAgICAvLyBPbmx5IHN1cGVyIGFkbWluIGNhbiBmaWx0ZXIgYnkgYW55IGxvY2F0aW9uX2lkIGJleW9uZCB0aGVpciBvd24gc2NvcGVcclxuICAgIGlmIChsb2NhdGlvbl9pZCAmJiByb2xlID09PSAnc3VwZXJfYWRtaW4nKSB7XHJcbiAgICAgICAgc3FsICs9ICcgQU5EIGxvY2F0aW9uX2lkID0gPyc7XHJcbiAgICAgICAgcGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLmFsbChzcWwsIHBhcmFtcywgKGVyciwgcm93cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGZldGNoaW5nIGpvYiBwb3N0aW5nczpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBqb2IgcG9zdGluZ3MuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuanNvbihyb3dzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBQVVQgL2FwaS9qb2ItcG9zdGluZ3MvOmlkXHJcbiAqIFVwZGF0ZXMgYSBqb2IgcG9zdGluZy5cclxuICogUmVxdWlyZXMgc3VwZXJfYWRtaW4gb3IgbG9jYXRpb25fYWRtaW4gKGZvciB0aGVpciBsb2NhdGlvbidzIHBvc3RpbmdzKS5cclxuICovXHJcbmFwcC5wdXQoJy9hcGkvam9iLXBvc3RpbmdzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIHJlcXVpcmVtZW50cywgc3RhdHVzLCBsb2NhdGlvbl9pZCB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBKb2IgUG9zdGluZyBVcGRhdGVcclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nICYmIHJvbGUgIT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgYWRtaW5zIGNhbiB1cGRhdGUgam9iIHBvc3RpbmdzLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgam9iIHBvc3RpbmcgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgdGl0bGUgIT09ICdzdHJpbmcnIHx8IHRpdGxlLnRyaW0oKSA9PT0gJycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdKb2IgdGl0bGUgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChkZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgZGVzY3JpcHRpb24gIT09ICdzdHJpbmcnIHx8IGRlc2NyaXB0aW9uLnRyaW0oKSA9PT0gJycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdEZXNjcmlwdGlvbiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcXVpcmVtZW50cyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlbWVudHMgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdSZXF1aXJlbWVudHMgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYWxsb3dlZFN0YXR1c2VzID0gWydPcGVuJywgJ0Nsb3NlZCcsICdGaWxsZWQnXTtcclxuICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCAmJiAhYWxsb3dlZFN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgc3RhdHVzIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25faWQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbG9jYXRpb25faWQgIT09ICdudW1iZXInICYmIGxvY2F0aW9uX2lkICE9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdMb2NhdGlvbiBJRCBtdXN0IGJlIGEgbnVtYmVyIG9yIG51bGwgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgbGV0IHVwZGF0ZVNxbCA9ICdVUERBVEUgSm9iUG9zdGluZ3MgU0VUICc7XHJcbiAgICBjb25zdCB1cGRhdGVQYXJhbXMgPSBbXTtcclxuICAgIGNvbnN0IGNsYXVzZXMgPSBbXTtcclxuXHJcbiAgICBpZiAodGl0bGUgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ3RpdGxlID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaCh0aXRsZSk7IH1cclxuICAgIC8vIEZpeDogTWlzc2luZyBjbG9zaW5nIHBhcmVudGhlc2lzIGZvciB0aGlzIGNvbmRpdGlvblxyXG4gICAgaWYgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBkZXNjcmlwdGlvbiAhPT0gJ3N0cmluZycgfHwgZGVzY3JpcHRpb24udHJpbSgpID09PSAnJykpIHsgLy8gTGluZSAxMDA5XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdEZXNjcmlwdGlvbiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcXVpcmVtZW50cyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlbWVudHMgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdSZXF1aXJlbWVudHMgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgnc3RhdHVzID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChzdGF0dXMpOyB9XHJcbiAgICBcclxuICAgIC8vIHN1cGVyX2FkbWluIGNhbiBjaGFuZ2UgbG9jYXRpb25faWQuIGxvY2F0aW9uX2FkbWluIGNhbm5vdCBjaGFuZ2UgbG9jYXRpb25faWQgb3IgY2hhbmdlIHRvIGRpZmZlcmVudCBsb2NhdGlvblxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2xvY2F0aW9uX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gY3VycmVudFVzZXJMb2NhdGlvbklkICYmIGxvY2F0aW9uX2lkICE9PSBudWxsKSB7IC8vIGxvY2F0aW9uX2lkIGNhbiBiZSBudWxsIChjb21wYW55LXdpZGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIGNhbm5vdCBjaGFuZ2Ugam9iIHBvc3RpbmcgbG9jYXRpb24gdG8gYW5vdGhlciBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIElmIGxvY2F0aW9uIGFkbWluIHVwZGF0ZXMgam9iIHBvc3RpbmcsIGFuZCBpdCdzIHRoZWlyIGxvY2F0aW9uLCBvciBzZXR0aW5nIHRvIG51bGwsIGl0J3MgYWxsb3dlZFxyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2xvY2F0aW9uX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZiAoY2xhdXNlcy5sZW5ndGggPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdObyBmaWVsZHMgcHJvdmlkZWQgZm9yIHVwZGF0ZS4nIH0pOyB9XHJcblxyXG4gICAgdXBkYXRlU3FsICs9IGNsYXVzZXMuam9pbignLCAnKSArICcgV0hFUkUgam9iX3Bvc3RpbmdfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyc7XHJcbiAgICB1cGRhdGVQYXJhbXMucHVzaChpZCwgY29tcGFueUlkKTtcclxuXHJcbiAgICAvLyBBZGRpdGlvbmFsIHNlY3VyaXR5IGZvciBsb2NhdGlvbl9hZG1pbjogZW5zdXJlIHRoZXkgb25seSB1cGRhdGUgdGhlaXIgb3duIGxvY2F0aW9uJ3MgcG9zdGluZ3NcclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgdXBkYXRlU3FsICs9ICcgQU5EIChsb2NhdGlvbl9pZCA9ID8gT1IgbG9jYXRpb25faWQgSVMgTlVMTCknOyAvLyBBbGxvdyB1cGRhdGluZyB1bmFzc2lnbmVkIGpvYnMgdG9vXHJcbiAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4odXBkYXRlU3FsLCB1cGRhdGVQYXJhbXMsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHVwZGF0aW5nIGpvYiBwb3N0aW5nOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgam9iIHBvc3RpbmcuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnSm9iIHBvc3Rpbmcgbm90IGZvdW5kIG9yIG5vdCBhdXRob3JpemVkIHRvIHVwZGF0ZS4nIH0pOyB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnSm9iIHBvc3RpbmcgdXBkYXRlZCBzdWNjZXNzZnVsbHkhJyB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBERUxFVEUgL2FwaS9qb2ItcG9zdGluZ3MvOmlkXHJcbiAqIERlbGV0ZXMgYSBqb2IgcG9zdGluZy5cclxuICogUmVxdWlyZXMgc3VwZXJfYWRtaW4gb3IgbG9jYXRpb25fYWRtaW4gKGZvciB0aGVpciBsb2NhdGlvbidzIHBvc3RpbmdzKS5cclxuICovXHJcbmFwcC5kZWxldGUoJy9hcGkvam9iLXBvc3RpbmdzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgSUQgcGFyYW1ldGVyXHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgam9iIHBvc3RpbmcgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gZGVsZXRlIGpvYiBwb3N0aW5ncy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzcWwgPSAnREVMRVRFIEZST00gSm9iUG9zdGluZ3MgV0hFUkUgam9iX3Bvc3RpbmdfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyc7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbaWQsIGNvbXBhbnlJZF07XHJcblxyXG4gICAgLy8gQWRkaXRpb25hbCBzZWN1cml0eSBmb3IgbG9jYXRpb25fYWRtaW46IGVuc3VyZSB0aGV5IG9ubHkgZGVsZXRlIHRoZWlyIG93biBsb2NhdGlvbidzIHBvc3RpbmdzXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSAnIEFORCAobG9jYXRpb25faWQgPSA/IE9SIGxvY2F0aW9uX2lkIElTIE5VTEwpJztcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bihzcWwsIHBhcmFtcywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZGVsZXRpbmcgam9iIHBvc3Rpbmc6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBqb2IgcG9zdGluZy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdKb2IgcG9zdGluZyBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwNCkuc2VuZCgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuXHJcbi8vIFVwZGF0ZSBBcHBsaWNhbnQgQVBJIGVuZHBvaW50cyB0byB1c2Ugam9iX3Bvc3RpbmdfaWRcclxuYXBwLnBvc3QoJy9hcGkvYXBwbGljYW50cycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGpvYl9wb3N0aW5nX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBub3RlcywgbG9jYXRpb25faWQsIHBob25lX251bWJlciB9ID0gcmVxLmJvZHk7IC8vIEFkZGVkIHBob25lX251bWJlclxyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcbiAgICBjb25zdCBhcHBsaWNhdGlvbl9kYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOyAvLyBDdXJyZW50IGRhdGUvdGltZSBmb3IgYXBwbGljYXRpb25cclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBBZGRpbmcgQXBwbGljYW50XHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gYWRkIGFwcGxpY2FudHMuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygam9iX3Bvc3RpbmdfaWQgIT09ICdudW1iZXInIHx8IGpvYl9wb3N0aW5nX2lkIDw9IDApIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0EgdmFsaWQgam9iIHBvc3RpbmcgSUQgaXMgcmVxdWlyZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICghZnVsbF9uYW1lIHx8IHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZW1haWwgfHwgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBCYXNpYyBwaG9uZSBudW1iZXIgdmFsaWRhdGlvbiAoc2ltcGxlIGNoZWNrIGZvciBub24tZW1wdHkgc3RyaW5nLCBjb3VsZCBiZSBtb3JlIGNvbXBsZXggd2l0aCByZWdleClcclxuICAgIGlmICghcGhvbmVfbnVtYmVyIHx8IHR5cGVvZiBwaG9uZV9udW1iZXIgIT09ICdzdHJpbmcnIHx8IHBob25lX251bWJlci50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiUGhvbmUgbnVtYmVyIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKG5vdGVzICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG5vdGVzICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm90ZXMgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGxvY2F0aW9uX2lkICE9PSAnbnVtYmVyJyAmJiBsb2NhdGlvbl9pZCAhPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTG9jYXRpb24gSUQgbXVzdCBiZSBhIG51bWJlciBvciBudWxsIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIFZlcmlmeSBqb2JfcG9zdGluZ19pZCBiZWxvbmdzIHRvIHRoZSBjb21wYW55LCBhbmQgZm9yIGxvY2F0aW9uX2FkbWluLCB0byB0aGVpciBsb2NhdGlvblxyXG4gICAgZGIuZ2V0KCdTRUxFQ1Qgam9iX3Bvc3RpbmdfaWQsIGxvY2F0aW9uX2lkIEZST00gSm9iUG9zdGluZ3MgV0hFUkUgam9iX3Bvc3RpbmdfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPycsIFtqb2JfcG9zdGluZ19pZCwgY29tcGFueUlkXSwgKGVyciwgam9iUG9zdGluZykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHZlcmlmeWluZyBqb2IgcG9zdGluZzpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciB3aGVuIHZlcmlmeWluZyBqb2IgcG9zdGluZy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICgham9iUG9zdGluZykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0pvYiBQb3N0aW5nIG5vdCBmb3VuZCBvciBkb2VzIG5vdCBiZWxvbmcgdG8geW91ciBjb21wYW55LicgfSk7IH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBMb2NhdGlvbiBhZG1pbiBjYW4gb25seSBhZGQgYXBwbGljYW50cyB0byBqb2JzIGluIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uIG9yIHVuYXNzaWduZWQgam9ic1xyXG4gICAgICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIGpvYlBvc3RpbmcubG9jYXRpb25faWQgIT09IGN1cnJlbnRVc2VyTG9jYXRpb25JZCAmJiBqb2JQb3N0aW5nLmxvY2F0aW9uX2lkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gY2Fubm90IGFkZCBhcHBsaWNhbnRzIHRvIGpvYnMgb3V0c2lkZSB0aGVpciBhc3NpZ25lZCBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAnSU5TRVJUIElOVE8gQXBwbGljYW50cyAoY29tcGFueV9pZCwgbG9jYXRpb25faWQsIGpvYl9wb3N0aW5nX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBwaG9uZV9udW1iZXIsIG5vdGVzLCBhcHBsaWNhdGlvbl9kYXRlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8pJyxcclxuICAgICAgICAgICAgW2NvbXBhbnlJZCwgbG9jYXRpb25faWQgfHwgam9iUG9zdGluZy5sb2NhdGlvbl9pZCwgam9iX3Bvc3RpbmdfaWQsIGZ1bGxfbmFtZSwgZW1haWwsIHBob25lX251bWJlciwgbm90ZXMsIGFwcGxpY2F0aW9uX2RhdGVdLCAvLyBVc2UgbG9jYXRpb25faWQgZnJvbSBwYXlsb2FkIG9yIGpvYiBwb3N0aW5nXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKGluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluc2VydEVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgY3JlYXRpbmcgYXBwbGljYW50OlwiLCBpbnNlcnRFcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgYXBwbGljYW50LicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdBcHBsaWNhbnQgYWRkZWQgc3VjY2Vzc2Z1bGx5IScsIGFwcGxpY2FudElkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAuZ2V0KCcvYXBpL2FwcGxpY2FudHMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBqb2JfcG9zdGluZ19pZCwgc3RhdHVzLCBsb2NhdGlvbl9pZCB9ID0gcmVxLnF1ZXJ5OyAvLyBBZGRlZCBqb2JfcG9zdGluZ19pZCwgc3RhdHVzLCBsb2NhdGlvbl9pZCBmaWx0ZXJzXHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgdXNlcklkOiBjdXJyZW50VXNlcklkLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIGxldCBzcWwgPSBgU0VMRUNUIEFwcGxpY2FudHMuKiwgSm9iUG9zdGluZ3MudGl0bGUgQVMgam9iX3RpdGxlX25hbWVcclxuICAgICAgICAgICAgICAgRlJPTSBBcHBsaWNhbnRzXHJcbiAgICAgICAgICAgICAgIExFRlQgSk9JTiBKb2JQb3N0aW5ncyBPTiBBcHBsaWNhbnRzLmpvYl9wb3N0aW5nX2lkID0gSm9iUG9zdGluZ3Muam9iX3Bvc3RpbmdfaWRcclxuICAgICAgICAgICAgICAgV0hFUkUgQXBwbGljYW50cy5jb21wYW55X2lkID0gP2A7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbY29tcGFueUlkXTtcclxuXHJcbiAgICAvLyBJbnB1dCB2YWxpZGF0aW9uIGZvciBxdWVyeSBwYXJhbWV0ZXJzXHJcbiAgICBjb25zdCBhbGxvd2VkU3RhdHVzZXMgPSBbJ0FwcGxpZWQnLCAnSW50ZXJ2aWV3aW5nJywgJ1JlamVjdGVkJywgJ0hpcmVkJ107IC8vIERlZmluZSB2YWxpZCBzdGF0dXNlc1xyXG4gICAgaWYgKHN0YXR1cyAmJiAhYWxsb3dlZFN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgYXBwbGljYW50IHN0YXR1cyBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChqb2JfcG9zdGluZ19pZCAmJiBpc05hTihwYXJzZUludChqb2JfcG9zdGluZ19pZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGpvYiBwb3N0aW5nIElEIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICYmIGlzTmFOKHBhcnNlSW50KGxvY2F0aW9uX2lkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgbG9jYXRpb24gSUQgZmlsdGVyIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHN0YXR1cykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBBcHBsaWNhbnRzLnN0YXR1cyA9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKHN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICBpZiAoY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIHNxbCArPSBgIEFORCAoQXBwbGljYW50cy5sb2NhdGlvbl9pZCA9ID8gT1IgQXBwbGljYW50cy5sb2NhdGlvbl9pZCBJUyBOVUxMKWA7IC8vIExvY2F0aW9uIGFkbWluIHNlZXMgYXBwbGljYW50cyBmb3IgdGhlaXIgbG9jYXRpb24gb3IgdW5hc3NpZ25lZFxyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gbm90IGFzc2lnbmVkIHRvIGEgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdlbXBsb3llZScpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgQXBwbGljYW50cy51c2VyX2lkID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJJZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zIHRvIHZpZXcgYXBwbGljYW50cy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFwcGx5IGpvYl9wb3N0aW5nX2lkIGZpbHRlciBpZiBwcm92aWRlZFxyXG4gICAgaWYgKGpvYl9wb3N0aW5nX2lkKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIEFwcGxpY2FudHMuam9iX3Bvc3RpbmdfaWQgPSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChqb2JfcG9zdGluZ19pZCk7XHJcbiAgICB9XHJcbiAgICAvLyBBcHBseSBsb2NhdGlvbiBmaWx0ZXIgZnJvbSBxdWVyeSBwYXJhbXMgZm9yIHN1cGVyX2FkbWluXHJcbiAgICBpZiAobG9jYXRpb25faWQgJiYgcm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBBcHBsaWNhbnRzLmxvY2F0aW9uX2lkID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkYi5hbGwoc3FsLCBwYXJhbXMsIChlcnIsIHJvd3MpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBhcHBsaWNhbnRzOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIGFwcGxpY2FudHMuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuanNvbihyb3dzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBQVVQgL2FwaS9hcHBsaWNhbnRzLzppZFxyXG4gKiBVcGRhdGVzIGFuIGFwcGxpY2FudCdzIGRldGFpbHMgKGUuZy4sIHN0YXR1cywgbm90ZXMpLlxyXG4gKi9cclxuYXBwLnB1dCgnL2FwaS9hcHBsaWNhbnRzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBmdWxsX25hbWUsIGVtYWlsLCBzdGF0dXMsIHJlc3VtZV91cmwsIG5vdGVzLCBsb2NhdGlvbl9pZCwgam9iX3Bvc3RpbmdfaWQsIHBob25lX251bWJlciB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBBcHBsaWNhbnQgVXBkYXRlXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gdXBkYXRlIGFwcGxpY2FudCByZWNvcmRzLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgYXBwbGljYW50IElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZnVsbF9uYW1lICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkZ1bGwgbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmIChlbWFpbCAhPT0gdW5kZWZpbmVkICYmICFpc1ZhbGlkRW1haWwoZW1haWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBlbWFpbCBhZGRyZXNzIG11c3QgYmUgcHJvdmlkZWQgaWYgY2hhbmdpbmcgZW1haWwuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocGhvbmVfbnVtYmVyICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBwaG9uZV9udW1iZXIgIT09ICdzdHJpbmcnIHx8IHBob25lX251bWJlci50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlBob25lIG51bWJlciBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFsbG93ZWRTdGF0dXNlcyA9IFsnQXBwbGllZCcsICdJbnRlcnZpZXdpbmcnLCAnUmVqZWN0ZWQnLCAnSGlyZWQnXTtcclxuICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCAmJiAhYWxsb3dlZFN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgc3RhdHVzIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocmVzdW1lX3VybCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXN1bWVfdXJsICE9PSAnc3RyaW5nJykgeyAvLyBBc3N1bWluZyByZXN1bWVfdXJsIGlzIGEgc3RyaW5nIFVSTFxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUmVzdW1lIFVSTCBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobm90ZXMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygbm90ZXMgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdOb3RlcyBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25faWQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbG9jYXRpb25faWQgIT09ICdudW1iZXInICYmIGxvY2F0aW9uX2lkICE9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdMb2NhdGlvbiBJRCBtdXN0IGJlIGEgbnVtYmVyIG9yIG51bGwgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChqb2JfcG9zdGluZ19pZCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBqb2JfcG9zdGluZ19pZCAhPT0gJ251bWJlcicgJiYgam9iX3Bvc3RpbmdfaWQgIT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0pvYiBwb3N0aW5nIElEIG11c3QgYmUgYSBudW1iZXIgb3IgbnVsbCBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBsZXQgdXBkYXRlU3FsID0gJ1VQREFURSBBcHBsaWNhbnRzIFNFVCAnO1xyXG4gICAgY29uc3QgdXBkYXRlUGFyYW1zID0gW107XHJcbiAgICBjb25zdCBjbGF1c2VzID0gW107XHJcblxyXG4gICAgLy8gRmllbGRzIHRoYXQgY2FuIGJlIHVwZGF0ZWRcclxuICAgIGlmIChmdWxsX25hbWUgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ2Z1bGxfbmFtZSA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2goZnVsbF9uYW1lKTsgfVxyXG4gICAgaWYgKGVtYWlsICE9PSB1bmRlZmluZWQpIHsgY2xhdXNlcy5wdXNoKCdlbWFpbCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2goZW1haWwpOyB9XHJcbiAgICBpZiAocGhvbmVfbnVtYmVyICE9PSB1bmRlZmluZWQpIHsgY2xhdXNlcy5wdXNoKCdwaG9uZV9udW1iZXIgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKHBob25lX251bWJlcik7IH1cclxuICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ3N0YXR1cyA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2goc3RhdHVzKTsgfVxyXG4gICAgaWYgKHJlc3VtZV91cmwgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ3Jlc3VtZV91cmwgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKHJlc3VtZV91cmwpOyB9XHJcbiAgICBpZiAobm90ZXMgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ25vdGVzID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChub3Rlcyk7IH1cclxuICAgIFxyXG4gICAgLy8gQWRtaW5zIGNhbiB1cGRhdGUgbG9jYXRpb25faWQgb3Igam9iX3Bvc3RpbmdfaWQsIHdpdGggcmVzdHJpY3Rpb25zIGZvciBsb2NhdGlvbl9hZG1pblxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2xvY2F0aW9uX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gY3VycmVudFVzZXJMb2NhdGlvbklkICYmIGxvY2F0aW9uX2lkICE9PSBudWxsKSB7IC8vIGxvY2F0aW9uX2lkIGNhbiBiZSBudWxsIChjb21wYW55LXdpZGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIGNhbm5vdCBhc3NpZ24gYXBwbGljYW50cyB0byBhbm90aGVyIGxvY2F0aW9uLicgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWYgbG9jYXRpb24gYWRtaW4gdXBkYXRlcyBhcHBsaWNhbnQgbG9jYXRpb24sIGFuZCBpdCdzIHRoZWlyIGxvY2F0aW9uLCBvciBzZXR0aW5nIHRvIG51bGwsIGl0J3MgYWxsb3dlZFxyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2xvY2F0aW9uX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGpvYl9wb3N0aW5nX2lkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgaWYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdqb2JfcG9zdGluZ19pZCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2goam9iX3Bvc3RpbmdfaWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgICAgICAvLyBWZXJpZnkgbmV3IGpvYl9wb3N0aW5nX2lkIGJlbG9uZ3MgdG8gdGhlIGxvY2F0aW9uIGFkbWluJ3MgYXNzaWduZWQgbG9jYXRpb24gb3IgaXMgY29tcGFueS13aWRlXHJcbiAgICAgICAgICAgIGRiLmdldCgnU0VMRUNUIGpvYl9wb3N0aW5nX2lkLCBsb2NhdGlvbl9pZCBGUk9NIEpvYlBvc3RpbmdzIFdIRVJFIGpvYl9wb3N0aW5nX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nLCBbam9iX3Bvc3RpbmdfaWQsIGNvbXBhbnlJZF0sIChlcnIsIGpvYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiREIgZXJyb3IgdmVyaWZ5aW5nIGpvYiBwb3N0aW5nIGZvciB1cGRhdGU6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgdmVyaWZ5aW5nIGpvYiBwb3N0aW5nLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgICAgICBpZiAoIWpvYikgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0pvYiBQb3N0aW5nIG5vdCBmb3VuZCBvciBkb2VzIG5vdCBiZWxvbmcgdG8geW91ciBjb21wYW55LicgfSk7IH1cclxuICAgICAgICAgICAgICAgIGlmIChqb2IubG9jYXRpb25faWQgIT09IG51bGwgJiYgam9iLmxvY2F0aW9uX2lkICE9PSBjdXJyZW50VXNlckxvY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIGNhbm5vdCBhc3NpZ24gYXBwbGljYW50cyB0byBqb2JzIG91dHNpZGUgdGhlaXIgYXNzaWduZWQgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNsYXVzZXMucHVzaCgnam9iX3Bvc3RpbmdfaWQgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKGpvYl9wb3N0aW5nX2lkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlmIChjbGF1c2VzLmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ05vIGZpZWxkcyBwcm92aWRlZCBmb3IgdXBkYXRlLicgfSk7IH1cclxuXHJcbiAgICB1cGRhdGVTcWwgKz0gY2xhdXNlcy5qb2luKCcsICcpICsgJyBXSEVSRSBhcHBsaWNhbnRfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyc7XHJcbiAgICB1cGRhdGVQYXJhbXMucHVzaChpZCwgY29tcGFueUlkKTtcclxuXHJcbiAgICAvLyBGb3IgbG9jYXRpb25fYWRtaW4sIGVuc3VyZSB0aGV5IGNhbiBvbmx5IHVwZGF0ZSBhcHBsaWNhbnRzIHdpdGhpbiB0aGVpciBhc3NpZ25lZCBsb2NhdGlvblxyXG4gICAgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICB1cGRhdGVTcWwgKz0gJyBBTkQgKGxvY2F0aW9uX2lkID0gPyBPUiBsb2NhdGlvbl9pZCBJUyBOVUxMKSc7IC8vIEFsbG93IHVwZGF0aW5nIHVuYXNzaWduZWQgYXBwbGljYW50cyB0b29cclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bih1cGRhdGVTcWwsIHVwZGF0ZVBhcmFtcywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgdXBkYXRpbmcgYXBwbGljYW50OlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgYXBwbGljYW50LicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0FwcGxpY2FudCBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gdXBkYXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdBcHBsaWNhbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHkhJyB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcblxyXG4vKipcclxuICogREVMRVRFIC9hcGkvYXBwbGljYW50cy86aWRcclxuICogRGVsZXRlcyBhbiBhcHBsaWNhbnQuXHJcbiAqIFJlcXVpcmVzIHN1cGVyX2FkbWluIG9yIGxvY2F0aW9uX2FkbWluIChmb3IgdGhlaXIgbG9jYXRpb24ncyBhcHBsaWNhbnRzKS5cclxuICovXHJcbmFwcC5kZWxldGUoJy9hcGkvYXBwbGljYW50cy86aWQnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIElEIHBhcmFtZXRlclxyXG4gICAgaWYgKCFpZCB8fCBpc05hTihwYXJzZUludChpZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGFwcGxpY2FudCBJRCBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nICYmIHJvbGUgIT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgYWRtaW5zIGNhbiBkZWxldGUgYXBwbGljYW50cy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzcWwgPSAnREVMRVRFIEZST00gQXBwbGljYW50cyBXSEVSRSBhcHBsaWNhbnRfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyc7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbaWQsIGNvbXBhbnlJZF07XHJcblxyXG4gICAgLy8gQWRkaXRpb25hbCBzZWN1cml0eSBmb3IgbG9jYXRpb25fYWRtaW46IGVuc3VyZSB0aGV5IG9ubHkgZGVsZXRlIGFwcGxpY2FudHMgaW4gdGhlaXIgb3duIGxvY2F0aW9uXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSAnIEFORCAobG9jYXRpb25faWQgPSA/IE9SIGxvY2F0aW9uX2lkIElTIE5VTEwpJztcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bihzcWwsIHBhcmFtcywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZGVsZXRpbmcgYXBwbGljYW50OlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgYXBwbGljYW50LicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0FwcGxpY2FudCBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwNCkuc2VuZCgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLy8gLS0tIERvY3VtZW50IE1hbmFnZW1lbnQgUm91dGVzIC0tLVxyXG5cclxuLyoqXHJcbiAqIFBPU1QgL2FwaS9kb2N1bWVudHNcclxuICogVXBsb2FkcyAoc2F2ZXMgbWV0YWRhdGEgZm9yKSBhIG5ldyBkb2N1bWVudC5cclxuICogUmVxdWlyZXMgYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBOb3RlOiBBY3R1YWwgZmlsZSBzdG9yYWdlIGlzIGFzc3VtZWQgdG8gYmUgaGFuZGxlZCBieSBhIHNlcGFyYXRlIHNlcnZpY2UgKGUuZy4sIFMzKS5cclxuICogVGhpcyBlbmRwb2ludCBvbmx5IHN0b3JlcyB0aGUgbWV0YWRhdGEgYW5kIGEgVVJMLlxyXG4gKi9cclxuYXBwLnBvc3QoJy9hcGkvZG9jdW1lbnRzJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgdGl0bGUsIGZpbGVfbmFtZSwgZmlsZV90eXBlLCBmaWxlX3VybCwgZGVzY3JpcHRpb24gfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHVzZXJJZCB9ID0gcmVxLnVzZXI7XHJcbiAgICBjb25zdCB1cGxvYWRfZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBEb2N1bWVudCBVcGxvYWRcclxuICAgIGlmICghdGl0bGUgfHwgdHlwZW9mIHRpdGxlICE9PSAnc3RyaW5nJyB8fCB0aXRsZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdEb2N1bWVudCB0aXRsZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICghZmlsZV9uYW1lIHx8IHR5cGVvZiBmaWxlX25hbWUgIT09ICdzdHJpbmcnIHx8IGZpbGVfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdGaWxlIG5hbWUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWZpbGVfdHlwZSB8fCB0eXBlb2YgZmlsZV90eXBlICE9PSAnc3RyaW5nJyB8fCBmaWxlX3R5cGUudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRmlsZSB0eXBlIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy4nIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gQmFzaWMgVVJMIHZhbGlkYXRpb246IGNoZWNrcyBmb3IgaHR0cChzKSBwcm90b2NvbCBhbmQgc29tZSBjb250ZW50LiBDYW4gYmUgbW9yZSByb2J1c3QuXHJcbiAgICBjb25zdCB1cmxSZWdleCA9IC9eaHR0cHM/OlxcL1xcL1teXFxzJC4/I10uW15cXHNdKiQvaTtcclxuICAgIGlmICghZmlsZV91cmwgfHwgdHlwZW9mIGZpbGVfdXJsICE9PSAnc3RyaW5nJyB8fCAhdXJsUmVnZXgudGVzdChmaWxlX3VybCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0EgdmFsaWQgZmlsZSBVUkwgKHN0YXJ0aW5nIHdpdGggaHR0cCBvciBodHRwcykgaXMgcmVxdWlyZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChkZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBkZXNjcmlwdGlvbiAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ05vdGVzIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4oXHJcbiAgICAgICAgJ0lOU0VSVCBJTlRPIERvY3VtZW50cyAoY29tcGFueV9pZCwgdXNlcl9pZCwgdGl0bGUsIGZpbGVfbmFtZSwgZmlsZV90eXBlLCBmaWxlX3VybCwgZGVzY3JpcHRpb24sIHVwbG9hZF9kYXRlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8pJyxcclxuICAgICAgICBbY29tcGFueUlkLCB1c2VySWQsIHRpdGxlLCBmaWxlX25hbWUsIGZpbGVfdHlwZSwgZmlsZV91cmwsIGRlc2NyaXB0aW9uLCB1cGxvYWRfZGF0ZV0sXHJcbiAgICAgICAgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciB1cGxvYWRpbmcgZG9jdW1lbnQ6XCIsIGVycik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGxvYWQgZG9jdW1lbnQgbWV0YWRhdGEuJykpOyAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiAnRG9jdW1lbnQgbWV0YWRhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5IScsIGRvY3VtZW50SWQ6IHRoaXMubGFzdElEIH0pO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEdFVCAvYXBpL2RvY3VtZW50c1xyXG4gKiBSZXRyaWV2ZXMgYSBsaXN0IG9mIGRvY3VtZW50cyBmb3IgdGhlIGNvbXBhbnkuXHJcbiAqIEZpbHRlcnMgY2FuIGJlIGFkZGVkIChlLmcuLCBieSB1cGxvYWRlciwgYnkgdHlwZSkuXHJcbiAqIFJlcXVpcmVzIGF1dGhlbnRpY2F0ZWQgdXNlci4gU3VwZXIgYWRtaW5zIGNhbiBzZWUgYWxsLCBvdGhlcnMgY2FuIHNlZSBvd24gZG9jdW1lbnRzLlxyXG4gKi9cclxuYXBwLmdldCgnL2FwaS9kb2N1bWVudHMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHVzZXJJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcbiAgICBcclxuICAgIGxldCBzcWwgPSAnU0VMRUNUICogRlJPTSBEb2N1bWVudHMgV0hFUkUgY29tcGFueV9pZCA9ID8nO1xyXG4gICAgY29uc3QgcGFyYW1zID0gW2NvbXBhbnlJZF07XHJcblxyXG4gICAgLy8gTm9uLXN1cGVyLWFkbWlucyBvbmx5IHNlZSB0aGVpciBvd24gZG9jdW1lbnRzXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSAnIEFORCB1c2VyX2lkID0gPyc7XHJcbiAgICAgICAgcGFyYW1zLnB1c2godXNlcklkKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5hbGwoc3FsLCBwYXJhbXMsIChlcnIsIHJvd3MpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBkb2N1bWVudHM6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgZG9jdW1lbnRzLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgcmVzLmpzb24ocm93cyk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vKipcclxuICogREVMRVRFIC9hcGkvZG9jdW1lbnRzLzppZFxyXG4gKiBEZWxldGVzIGEgZG9jdW1lbnQgcmVjb3JkLlxyXG4gKiBSZXF1aXJlcyBzdXBlcl9hZG1pbiBvciB0aGUgdXNlciB3aG8gdXBsb2FkZWQgaXQuXHJcbiAqL1xyXG5hcHAuZGVsZXRlKCcvYXBpL2RvY3VtZW50cy86aWQnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCB1c2VySWQsIHJvbGUgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIElEIHBhcmFtZXRlclxyXG4gICAgaWYgKCFpZCB8fCBpc05hTihwYXJzZUludChpZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGRvY3VtZW50IElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNxbCA9ICdERUxFVEUgRlJPTSBEb2N1bWVudHMgV0hFUkUgZG9jdW1lbnRfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyc7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbaWQsIGNvbXBhbnlJZF07XHJcblxyXG4gICAgLy8gT25seSBzdXBlcl9hZG1pbiBvciB0aGUgb3JpZ2luYWwgdXBsb2FkZXIgY2FuIGRlbGV0ZVxyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICBzcWwgKz0gJyBBTkQgdXNlcl9pZCA9ID8nO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKHVzZXJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIucnVuKHNxbCwgcGFyYW1zLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBkZWxldGluZyBkb2N1bWVudDpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIGRvY3VtZW50LicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0RvY3VtZW50IG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byBkZWxldGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjA0KS5zZW5kKCk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyBGYWxsYmFjayBmb3IgYW55IG90aGVyIEdFVCByZXF1ZXN0IG5vdCBoYW5kbGVkIGJ5IGFuIEFQSSByb3V0ZSAoc2VydmVzIGluZGV4Lmh0bWwgZm9yIFNQQSBiZWhhdmlvcilcclxuLy8gVGhpcyBzaG91bGQgYWx3YXlzIGJlIHRoZSBMQVNUIHJvdXRlIGluIHlvdXIgRXhwcmVzcyBhcHBcclxuYXBwLmdldCgvJyonLywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAvLyBDb3JyZWN0bHkgc2VydmUgdGhlIGluZGV4Lmh0bWwgZnJvbSB0aGUgcGFyZW50IGRpcmVjdG9yeVxyXG4gICAgcmVzLnNlbmRGaWxlKHBhdGguam9pbihfX2Rpcm5hbWUsICcuLicsICdpbmRleC5odG1sJykpO1xyXG59KTtcclxuXHJcbi8vIC0tLSBHbG9iYWwgRXJyb3IgSGFuZGxpbmcgTWlkZGxld2FyZSAtLS1cclxuLy8gVGhpcyBzaG91bGQgYmUgdGhlIHZlcnkgbGFzdCBtaWRkbGV3YXJlIGluIHlvdXIgRXhwcmVzcyBhcHBcclxuYXBwLnVzZSgoZXJyLCByZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihgVW5oYW5kbGVkIEVycm9yOiAke2Vyci5zdGFja31gKTsgLy8gTG9nIHRoZSBmdWxsIHN0YWNrIHRyYWNlIGZvciBkZWJ1Z2dpbmdcclxuICAgIC8vIFJlc3BvbmQgd2l0aCBhIGdlbmVyaWMgZXJyb3IgbWVzc2FnZSBmb3IgdGhlIGNsaWVudFxyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnQW4gdW5leHBlY3RlZCBzZXJ2ZXIgZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcclxuICAgICAgICAvLyBJbiBkZXZlbG9wbWVudCwgeW91IG1pZ2h0IHNlbmQgbW9yZSBkZXRhaWxzOlxyXG4gICAgICAgIC8vIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxyXG4gICAgICAgIC8vIHN0YWNrOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVyci5zdGFjayA6IHVuZGVmaW5lZFxyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLy8gLS0tIFNlcnZlciBTdGFydCAtLS1cclxuLy8gVGhpcyBjb25kaXRpb25hbCBleHBvcnQgYWxsb3dzIHRoZSBhcHAgdG8gYmUgaW1wb3J0ZWQgZm9yIHRlc3RpbmdcclxuLy8gd2l0aG91dCBzdGFydGluZyB0aGUgc2VydmVyIGxpc3RlbmVyIHdoZW4gdGhlIHRlc3QgcnVubmVyIHJlcXVpcmVzIGl0LlxyXG5pZiAocmVxdWlyZS5tYWluID09PSBtb2R1bGUpIHtcclxuICAgIC8vIE9ubHkgbGlzdGVuIGlmIHRoaXMgZmlsZSBpcyBydW4gZGlyZWN0bHkgKG5vdCByZXF1aXJlZCBhcyBhIG1vZHVsZSlcclxuICAgIGFwcC5saXN0ZW4oUE9SVCwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBTZXJ2ZXIgaXMgcnVubmluZyBzdWNjZXNzZnVsbHkgb24gaHR0cDovL2xvY2FsaG9zdDoke1BPUlR9YCk7XHJcbiAgICB9KTtcclxufSBlbHNlIHtcclxuICAgIC8vIEV4cG9ydCB0aGUgYXBwIGZvciB0ZXN0aW5nIHB1cnBvc2VzXHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGFwcDtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7OzBCQUNBLHVLQUFBQSxDQUFBLEVBQUFDLENBQUEsRUFBQUMsQ0FBQSx3QkFBQUMsTUFBQSxHQUFBQSxNQUFBLE9BQUFDLENBQUEsR0FBQUYsQ0FBQSxDQUFBRyxRQUFBLGtCQUFBQyxDQUFBLEdBQUFKLENBQUEsQ0FBQUssV0FBQSw4QkFBQUMsRUFBQU4sQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsRUFBQUUsQ0FBQSxRQUFBQyxDQUFBLEdBQUFMLENBQUEsSUFBQUEsQ0FBQSxDQUFBTSxTQUFBLFlBQUFDLFNBQUEsR0FBQVAsQ0FBQSxHQUFBTyxTQUFBLEVBQUFDLENBQUEsR0FBQUMsTUFBQSxDQUFBQyxNQUFBLENBQUFMLENBQUEsQ0FBQUMsU0FBQSxVQUFBSyxtQkFBQSxDQUFBSCxDQUFBLHVCQUFBVixDQUFBLEVBQUFFLENBQUEsRUFBQUUsQ0FBQSxRQUFBRSxDQUFBLEVBQUFD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","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","express","require","sqlite3","verbose","bcrypt","jwt","cors","path","csv","_require","Readable","rateLimit","morgan","process","env","NODE_ENV","config","stripeInstance","STRIPE_SECRET_KEY","app","allowedOrigins","CORS_ORIGIN","split","push","corsOptions","origin","callback","includes","msg","Error","indexOf","methods","credentials","optionsSuccessStatus","use","PORT","STRIPE_WEBHOOK_SECRET","authLimiter","windowMs","max","message","standardHeaders","legacyHeaders","post","raw","type","_ref","_callee","req","res","sig","event","session","userId","planId","subscriptionUpdated","subscriptionDeleted","invoiceSucceeded","invoiceFailed","_t","_t2","_context","headers","webhooks","constructEvent","body","console","error","concat","status","send","data","object","log","id","metadata","payment_status","db","run","customer","subscription","err","plan","json","received","_x","_x2","JWT_SECRET","join","__dirname","maxAge","immutable","Database","exit","get","serialize","authenticateToken","next","authHeader","token","verify","user","isValidEmail","email","test","_ref2","_callee2","_req$body","company_name","full_name","password","password_hash","_t3","_context2","trim","hash","newCompanyId","lastID","userInsertErr","_x3","_x4","_x5","_req$body2","_ref3","_callee3","isMatch","payload","_context3","compare","user_id","role","fullName","companyId","company_id","locationId","location_id","subscriptionStatus","subscription_status","plan_id","sign","expiresIn","_x6","_x7","_ref4","_callee4","_req$body3","_req$user","_t4","_context4","location","_x8","_x9","_x0","_ref5","_callee5","_req$body4","position","employee_id","_req$user2","currentUserLocationId","isLocationIdValid","locationVerification","_t5","_context5","isNaN","undefined","reject","_x1","_x10","_x11","_req$user3","put","_ref6","_callee7","_req$body5","currentPassword","newPassword","_context7","_ref7","_callee6","updateSql","updateParams","clauses","changesMade","existingUser","newPasswordHash","_t6","_context6","row","updateErr","changes","fetchErr","updatedUser","newPayload","newToken","_x15","_x16","_x12","_x13","_x14","_req$user4","sql","params","all","rows","_req$body6","location_name","location_address","_req$user5","_req$user6","parseInt","_req$user7","currentUserId","_req$query","query","filterRole","filterLocationId","allowedRoles","_req$user8","authenticatedUserId","_ref8","_callee8","_req$user9","allowedPlanIds","priceIdMap","stripePriceId","customerId","userRecord","_t7","_context8","STRIPE_PRICE_ID_PRO","STRIPE_PRICE_ID_ENT","stripe_customer_id","customers","checkout","sessions","mode","line_items","price","quantity","success_url","FRONTEND_URL","cancel_url","url","_x17","_x18","_x19","_req$body7","start_time","end_time","notes","_req$user0","Date","getTime","employee","insertErr","scheduleId","_req$query2","start_date","end_date","_req$user1","_req$user10","_req$body8","title","description","requirements","_req$user11","created_date","toISOString","jobPostingId","_req$query3","_req$user12","allowedStatuses","_req$body9","_req$user13","_req$user14","_req$body0","job_posting_id","phone_number","_req$user15","application_date","jobPosting","applicantId","_req$query4","_req$user16","_req$body1","resume_url","_req$user17","job","_req$user18","_req$body10","file_name","file_type","file_url","_req$user19","upload_date","urlRegex","documentId","_req$user20","_req$user21","sendFile","stack","main","module","listen","exports"],"sourceRoot":"C:\\Users\\xarcy\\OneDrive\\Desktop\\onboardflow\\backend\\","sources":["server.js"],"sourcesContent":["// --- Imports ---\r\nconst express = require('express');\r\nconst sqlite3 = require('sqlite3').verbose();\r\nconst bcrypt = require('bcryptjs');\r\nconst jwt = require('jsonwebtoken');\r\nconst cors = require('cors'); // Import cors\r\nconst path = require('path');\r\nconst csv = require('csv-parser'); // For CSV parsing\r\nconst { Readable } = require('stream'); // For creating a readable stream from a string\r\nconst rateLimit = require('express-rate-limit'); // Import rate-limiting middleware\r\nconst morgan = require('morgan'); // Import morgan for request logging\r\n\r\n// Load environment variables from .env file in development\r\nif (process.env.NODE_ENV !== 'production') {\r\n    require('dotenv').config();\r\n}\r\n\r\n// Import the Stripe library and initialize it with your secret key\r\n// Use process.env.STRIPE_SECRET_KEY for production\r\nconst stripeInstance = require('stripe')(process.env.STRIPE_SECRET_KEY || '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');\r\n\r\n// --- App Initialization ---\r\nconst app = express();\r\n\r\n// Configure CORS for production environment\r\nconst allowedOrigins = process.env.CORS_ORIGIN ? process.env.CORS_ORIGIN.split(',') : ['http://localhost:8000']; // Default to localhost for development\r\n\r\n// Add 'null' to allowed origins if not in production and not explicitly set for local file access\r\nif (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\r\n    allowedOrigins.push('null');\r\n}\r\n\r\nconst corsOptions = {\r\n    origin: function (origin, callback) {\r\n        // Allow requests with no origin (like mobile apps, curl, or local file access if 'null' is in allowedOrigins)\r\n        if (!origin) {\r\n            // Check if 'null' is explicitly allowed or if we're in dev and no CORS_ORIGIN is set\r\n            if (allowedOrigins.includes('null') || (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN)) {\r\n                return callback(null, true);\r\n            }\r\n            const msg = 'The CORS policy for this site does not allow access from the specified Origin.';\r\n            return callback(new Error(msg), false);\r\n        }\r\n\r\n        if (allowedOrigins.indexOf(origin) === -1) {\r\n            const msg = 'The CORS policy for this site does not allow access from the specified Origin.';\r\n            return callback(new Error(msg), false);\r\n        }\r\n        return callback(null, true);\r\n    },\r\n    methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\r\n    credentials: true, // Allow cookies to be sent\r\n    optionsSuccessStatus: 204 // Some legacy browsers (IE11, various SmartTVs) choke on 204\r\n};\r\napp.use(cors(corsOptions));\r\n\r\n\r\n// Use process.env.PORT for production, fallback to 3000 for local development\r\nconst PORT = process.env.PORT || 3000;\r\n\r\n// Define a webhook secret for Stripe. This should also be an environment variable.\r\nconst STRIPE_WEBHOOK_SECRET = process.env.STRIPE_WEBHOOK_SECRET || 'whsec_YOUR_WEBHOOK_SECRET';\r\n\r\n// --- Rate Limiting Configuration ---\r\nconst authLimiter = rateLimit({\r\n    windowMs: 15 * 60 * 1000, // 15 minutes\r\n    max: 10, // Max 10 requests per 15 minutes per IP\r\n    message: 'Too many login/registration attempts from this IP, please try again after 15 minutes',\r\n    standardHeaders: true, // Return rate limit info in the `RateLimit-*` headers\r\n    legacyHeaders: false, // Disable the `X-RateLimit-*` headers\r\n});\r\n\r\n// --- Middleware for Stripe Webhook (MUST be before express.json() for other routes) ---\r\n// This route needs the raw body for signature verification.\r\napp.post('/api/stripe-webhook', express.raw({type: 'application/json'}), async (req, res) => {\r\n    const sig = req.headers['stripe-signature'];\r\n\r\n    let event;\r\n\r\n    try {\r\n        event = stripeInstance.webhooks.constructEvent(req.body, sig, STRIPE_WEBHOOK_SECRET);\r\n    } catch (err) {\r\n        console.error(`Webhook Error: ${err.message}`);\r\n        return res.status(400).send(`Webhook Error: ${err.message}`);\r\n    }\r\n\r\n    // Handle the event\r\n    switch (event.type) {\r\n        case 'checkout.session.completed':\r\n            const session = event.data.object;\r\n            console.log('Checkout Session Completed:', session.id);\r\n            const userId = session.metadata.userId;\r\n            const planId = session.metadata.planId;\r\n            if (session.payment_status === 'paid' && userId && planId) {\r\n                db.run(\r\n                    'UPDATE Users SET stripe_customer_id = ?, stripe_subscription_id = ?, subscription_status = ?, plan_id = ? WHERE user_id = ?',\r\n                    [session.customer, session.subscription, 'active', planId, userId],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for checkout.session.completed:', err.message);\r\n                        else console.log(`User ${userId} subscription updated to ${planId} (active).`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'customer.subscription.updated':\r\n            const subscriptionUpdated = event.data.object;\r\n            console.log('Subscription Updated:', subscriptionUpdated.id);\r\n            if (subscriptionUpdated.customer && subscriptionUpdated.status && subscriptionUpdated.plan && subscriptionUpdated.plan.id) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ?, plan_id = ? WHERE stripe_customer_id = ?',\r\n                    [subscriptionUpdated.status, subscriptionUpdated.plan.id, subscriptionUpdated.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for customer.subscription.updated:', err.message);\r\n                        else console.log(`Subscription for customer ${subscriptionUpdated.customer} status updated to ${subscriptionUpdated.status} and plan to ${subscriptionUpdated.plan.id}.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'customer.subscription.deleted':\r\n            const subscriptionDeleted = event.data.object;\r\n            console.log('Subscription Deleted:', subscriptionDeleted.id);\r\n            if (subscriptionDeleted.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ?, plan_id = ?, stripe_subscription_id = NULL WHERE stripe_customer_id = ?',\r\n                    ['cancelled', 'free', subscriptionDeleted.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for customer.subscription.deleted:', err.message);\r\n                        else console.log(`Subscription for customer ${subscriptionDeleted.customer} marked as cancelled and reverted to free.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'invoice.payment_succeeded':\r\n            const invoiceSucceeded = event.data.object;\r\n            console.log('Invoice Payment Succeeded:', invoiceSucceeded.id);\r\n            if (invoiceSucceeded.subscription && invoiceSucceeded.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?',\r\n                    ['active', invoiceSucceeded.subscription, invoiceSucceeded.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for invoice.payment_succeeded:', err.message);\r\n                        else console.log(`Subscription ${invoiceSucceeded.subscription} status set to active.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'invoice.payment_failed':\r\n            const invoiceFailed = event.data.object;\r\n            console.log('Invoice Payment Failed:', invoiceFailed.id);\r\n            if (invoiceFailed.subscription && invoiceFailed.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?',\r\n                    ['past_due', invoiceFailed.subscription, invoiceFailed.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for invoice.payment_failed:', err.message);\r\n                        else console.log(`Subscription ${invoiceFailed.subscription} status set to past_due.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        default:\r\n            console.log(`Unhandled event type ${event.type}`);\r\n    }\r\n    res.status(200).json({ received: true });\r\n});\r\n\r\n// IMPORTANT: express.json() for parsing JSON request bodies MUST come AFTER the webhook route\r\napp.use(express.json());\r\n\r\n// --- JWT Secret ---\r\n// Use process.env.JWT_SECRET for production\r\nconst JWT_SECRET = process.env.JWT_SECRET || 'your-super-secret-and-long-string-for-jwt';\r\n\r\n// --- Request Logging (using Morgan) ---\r\n// 'dev' format is good for development, 'combined' or 'tiny' for production logs\r\napp.use(morgan('dev'));\r\n\r\n// --- Serve Static Files (Frontend) with Caching ---\r\n// This middleware serves static files from the 'onboardflow' root directory\r\n// and sets Cache-Control headers for browser caching.\r\napp.use(express.static(path.join(__dirname, '..'), {\r\n    maxAge: '7d', // Cache static assets for 7 days (e.g., CSS, JS, images, favicon)\r\n    immutable: false // Set to true if asset filenames include content hashes (e.g., app.min.js?v=hash)\r\n}));\r\n\r\n// --- Database Setup ---\r\nconst db = new sqlite3.Database('./onboardflow.db', (err) => {\r\n    if (err) {\r\n        // Log database connection error and exit\r\n        console.error(\"Error opening database:\", err.message);\r\n        process.exit(1); // Exit process if database connection fails\r\n    } else {\r\n        console.log(\"Successfully connected to the database.\");\r\n        db.get(\"PRAGMA foreign_keys = ON\");\r\n        db.serialize(() => {\r\n            db.run(`CREATE TABLE IF NOT EXISTS Companies (company_id INTEGER PRIMARY KEY AUTOINCREMENT, company_name TEXT NOT NULL UNIQUE)`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Locations (location_id INTEGER PRIMARY KEY AUTOINCREMENT, company_id INTEGER, location_name TEXT NOT NULL, location_address TEXT NOT NULL, FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE)`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Users (\r\n                user_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER,\r\n                location_id INTEGER,\r\n                full_name TEXT NOT NULL,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                position TEXT,\r\n                employee_id TEXT,\r\n                role TEXT NOT NULL,\r\n                stripe_customer_id TEXT,\r\n                stripe_subscription_id TEXT,\r\n                subscription_status TEXT,\r\n                plan_id TEXT,\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Schedules (\r\n                schedule_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                employee_id INTEGER NOT NULL,\r\n                location_id INTEGER NOT NULL,\r\n                start_time TEXT NOT NULL,\r\n                end_time TEXT NOT NULL,\r\n                notes TEXT,\r\n                FOREIGN KEY (employee_id) REFERENCES Users(user_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            // NEW: Create JobPostings table\r\n            db.run(`CREATE TABLE IF NOT EXISTS JobPostings (\r\n                job_posting_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                location_id INTEGER, -- Optional: link job posting to a specific location\r\n                title TEXT NOT NULL,\r\n                description TEXT NOT NULL,\r\n                requirements TEXT, -- Optional: job requirements\r\n                status TEXT NOT NULL DEFAULT 'Open', -- e.g., 'Open', 'Closed', 'Filled'\r\n                created_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            // Update Applicants table schema to link to JobPostings and add phone_number\r\n            db.run(`CREATE TABLE IF NOT EXISTS Applicants (\r\n                applicant_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                location_id INTEGER, -- Optional: applicant's preferred location or location applied for\r\n                job_posting_id INTEGER, -- NEW: Link to JobPostings table\r\n                full_name TEXT NOT NULL,\r\n                email TEXT NOT NULL,\r\n                phone_number TEXT, -- NEW: Phone number field\r\n                status TEXT NOT NULL DEFAULT 'Applied', -- e.g., 'Applied', 'Interviewing', 'Rejected', 'Hired'\r\n                resume_url TEXT, -- Optional: URL to a resume document (e.g., hosted on cloud storage)\r\n                notes TEXT,\r\n                application_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (job_posting_id) REFERENCES JobPostings(job_posting_id) ON DELETE SET NULL -- If job posting is deleted, set this to NULL\r\n            )`);\r\n            // NEW: Create Documents table for file/video uploads\r\n            db.run(`CREATE TABLE IF NOT EXISTS Documents (\r\n                document_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL, -- User who uploaded the document\r\n                title TEXT NOT NULL,\r\n                file_name TEXT NOT NULL,\r\n                file_type TEXT NOT NULL,\r\n                file_url TEXT NOT NULL, -- URL to the stored file (e.g., S3, GCS)\r\n                description TEXT,\r\n                upload_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES Users(user_id) ON DELETE CASCADE\r\n            )`);\r\n        });\r\n    }\r\n});\r\n\r\n// --- Authentication Middleware ---\r\nfunction authenticateToken(req, res, next) {\r\n    const authHeader = req.headers['authorization'];\r\n    const token = authHeader && authHeader.split(' ')[1];\r\n    if (token == null) {\r\n        return res.status(401).json({ error: 'Unauthorized: No token provided.' });\r\n    }\r\n    jwt.verify(token, JWT_SECRET, (err, user) => {\r\n        if (err) {\r\n            // Log the specific JWT error for debugging\r\n            console.error(\"JWT Verification Error:\", err.message);\r\n            return res.status(403).json({ error: 'Forbidden: Invalid or expired token.' });\r\n        }\r\n        req.user = user;\r\n        next();\r\n    });\r\n}\r\n\r\n// --- Helper for Input Validation ---\r\nconst isValidEmail = (email) => {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\r\n};\r\n\r\n// --- API Routes (ALL API ROUTES SHOULD BE DEFINED HERE, BEFORE STATIC FILE SERVING) ---\r\n\r\n// Apply rate limiting to authentication routes\r\napp.post('/api/register', authLimiter, async (req, res, next) => { // Added 'next'\r\n    const { company_name, full_name, email, password } = req.body;\r\n\r\n    // Input Validation for Registration\r\n    if (!company_name || typeof company_name !== 'string' || company_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Company name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Password is required and must be at least 6 characters long.\" });\r\n    }\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n        db.serialize(() => {\r\n            db.run('BEGIN TRANSACTION');\r\n            db.run('INSERT INTO Companies (company_name) VALUES (?)', [company_name], function(err) {\r\n                if (err) { \r\n                    db.run('ROLLBACK'); \r\n                    console.error(\"Database error creating company:\", err);\r\n                    return next(new Error(\"Could not create company.\")); // Pass error to error handling middleware\r\n                }\r\n                const newCompanyId = this.lastID;\r\n                db.run(`INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'super_admin', 'active', 'free')`, [newCompanyId, null, full_name, email, password_hash], function(userInsertErr) {\r\n                    if (userInsertErr) { \r\n                        db.run('ROLLBACK'); \r\n                        console.error(\"Database error creating user:\", userInsertErr);\r\n                        if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { \r\n                            return res.status(409).json({ error: 'Email already registered.' }); \r\n                        }\r\n                        return next(new Error(\"Could not create user.\")); // Pass error\r\n                    }\r\n                    db.run('COMMIT');\r\n                    res.status(201).json({ message: \"Company and user registered successfully!\", userId: this.lastID });\r\n                });\r\n            });\r\n        });\r\n    } catch (error) { \r\n        console.error(\"Registration error:\", error);\r\n        next(error); // Pass error to error handling middleware\r\n    }\r\n});\r\n\r\napp.post('/api/login', authLimiter, (req, res, next) => { // Added 'next'\r\n    const { email, password } = req.body;\r\n\r\n    // Input Validation for Login\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length === 0) {\r\n        return res.status(400).json({ error: \"Password is required.\" });\r\n    }\r\n\r\n    db.get(\"SELECT * FROM Users WHERE email = ?\", [email], async (err, user) => {\r\n        if (err) {\r\n            console.error(\"Database error during login:\", err);\r\n            return next(new Error(\"A server error occurred during login.\")); // Pass error\r\n        }\r\n        if (!user) { \r\n            return res.status(401).json({ error: \"Invalid credentials.\" }); \r\n        }\r\n        const isMatch = await bcrypt.compare(password, user.password_hash);\r\n        if (!isMatch) { \r\n            return res.status(401).json({ error: \"Invalid credentials.\" }); \r\n        }\r\n        const payload = { userId: user.user_id, email: user.email, role: user.role, fullName: user.full_name, companyId: user.company_id, locationId: user.location_id, subscriptionStatus: user.subscription_status, planId: user.plan_id };\r\n        const token = jwt.sign(payload, JWT_SECRET, { expiresIn: '1h' });\r\n        res.status(200).json({ message: \"Login successful!\", token, role: user.role });\r\n    });\r\n});\r\n\r\napp.post('/api/invite-admin', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { full_name, email, password, location_id } = req.body;\r\n    const { companyId, role } = req.user;\r\n\r\n    // Input Validation for Invite Admin\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can invite other admins.' }); }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Temporary password is required and must be at least 6 characters long.\" });\r\n    }\r\n    if (typeof location_id !== 'number' || location_id <= 0) { // Assuming location_id is an integer ID\r\n        return res.status(400).json({ error: \"A valid location ID is required.\" });\r\n    }\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n        db.get('SELECT * FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n            if (err) { console.error(\"Database error checking location:\", err); return next(new Error('Database error when verifying location.')); } // Pass error\r\n            if (!location) { return res.status(400).json({ error: 'Selected location does not exist or does not belong to your company.' }); }\r\n            db.run(`INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'location_admin', 'active', 'free')`, [companyId, location_id, full_name, email, password_hash], function(userInsertErr) {\r\n                if (userInsertErr) {\r\n                    console.error(\"Database error inviting admin:\", userInsertErr);\r\n                    if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { return res.status(409).json({ error: 'Email already registered.' }); }\r\n                    return next(new Error('Failed to invite admin.')); // Pass error\r\n                }\r\n                res.status(201).json({ message: \"Location admin invited successfully!\", userId: this.lastID });\r\n            });\r\n        });\r\n    } catch (error) { console.error(\"Invite admin error:\", error); next(error); } // Pass error\r\n});\r\n\r\n// NEW: API endpoint for inviting employees\r\napp.post('/api/invite-employee', authenticateToken, async (req, res, next) => {\r\n    const { full_name, email, password, position, employee_id, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Authorization: Super admin can invite anyone, Location admin can only invite to their location or unassigned\r\n    if (!['super_admin', 'location_admin'].includes(role)) {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can invite employees.' });\r\n    }\r\n\r\n    // Input Validation for Invite Employee\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Temporary password is required and must be at least 6 characters long.\" });\r\n    }\r\n    \r\n    // Corrected location_id validation: Must be a number > 0.\r\n    // If location_id is null, it indicates an unassigned location, which is valid for a super admin.\r\n    // For location_admin, it must match their current location.\r\n    // This revised logic correctly checks for null OR a valid positive integer.\r\n    const isLocationIdValid = location_id === null || (typeof location_id === 'number' && !isNaN(location_id) && location_id > 0);\r\n    if (!isLocationIdValid) {\r\n        return res.status(400).json({ error: \"A valid location ID (positive number) is required for employee, or null for unassigned.\" });\r\n    }\r\n    \r\n    if (position !== undefined && typeof position !== 'string') {\r\n        return res.status(400).json({ error: 'Position must be a string if provided.' });\r\n    }\r\n    if (employee_id !== undefined && typeof employee_id !== 'string') {\r\n        return res.status(400).json({ error: 'Employee ID must be a string if provided.' });\r\n    }\r\n\r\n    // Location Admin specific check: ensure they are inviting to their assigned location or null\r\n    // If location_admin tries to set a location that is NOT their own, block it.\r\n    // Allow location_admin to set to null if their current location is null.\r\n    if (role === 'location_admin') {\r\n        // A location admin can ONLY assign an employee to their own location or to null (unassigned)\r\n        if (location_id !== currentUserLocationId) {\r\n            // If the target location_id is not the current user's location, check if both are null\r\n            if (!(location_id === null && currentUserLocationId === null)) {\r\n                return res.status(403).json({ error: 'Access Denied: Location admin can only invite employees to their assigned location.' });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n\r\n        // Verify the location_id belongs to the company and, if location_admin, matches their assigned location\r\n        // This check is crucial if location_id is NOT null\r\n        if (location_id !== null) {\r\n            const locationVerification = await new Promise((resolve, reject) => {\r\n                db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n                    if (err) reject(err);\r\n                    resolve(location);\r\n                });\r\n            });\r\n            if (!locationVerification) {\r\n                return res.status(400).json({ error: 'Selected location does not exist or does not belong to your company.' });\r\n            }\r\n        }\r\n\r\n        db.run(\r\n            `INSERT INTO Users (company_id, location_id, full_name, email, password_hash, position, employee_id, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, ?, ?, 'employee', 'active', 'free')`,\r\n            [companyId, location_id, full_name, email, password_hash, position, employee_id,], // Default new employees to 'employee' role\r\n            function(userInsertErr) {\r\n                if (userInsertErr) {\r\n                    console.error(\"Database error inviting employee:\", userInsertErr);\r\n                    if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { return res.status(409).json({ error: 'Email already registered.' }); }\r\n                    return next(new Error('Failed to invite employee.'));\r\n                }\r\n                res.status(201).json({ message: \"Employee invited successfully!\", userId: this.lastID });\r\n            }\r\n        );\r\n    } catch (error) {\r\n        console.error(\"Invite employee error:\", error);\r\n        next(error);\r\n    }\r\n});\r\n\r\n\r\napp.get('/api/profile', authenticateToken, (req, res) => {\r\n    const { userId, fullName, email, role, companyId, locationId, subscriptionStatus, planId } = req.user;\r\n    res.status(200).json({ userId, fullName, email, role, companyId, locationId, subscriptionStatus, planId });\r\n});\r\n\r\napp.put('/api/profile', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { fullName, email, currentPassword, newPassword } = req.body;\r\n    const { userId } = req.user;\r\n\r\n    // Input Validation for Profile Update\r\n    if (fullName === undefined && email === undefined && (!currentPassword || !newPassword)) {\r\n        return res.status(400).json({ error: 'No data provided for update.' });\r\n    }\r\n    if (fullName !== undefined && (typeof fullName !== 'string' || fullName.trim() === '')) {\r\n        return res.status(400).json({ error: \"Full name must be a non-empty string if provided.\" });\r\n    }\r\n    if (email !== undefined && !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address must be provided if changing email.\" });\r\n    }\r\n    if (newPassword !== undefined && (typeof newPassword !== 'string' || newPassword.length < 6)) {\r\n        return res.status(400).json({ error: \"New password must be at least 6 characters long if changing password.\" });\r\n    }\r\n    if ((currentPassword && !newPassword) || (!currentPassword && newPassword)) {\r\n        return res.status(400).json({ error: 'Both current password and new password are required to change password.' });\r\n    }\r\n\r\n\r\n    db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], async (err, user) => {\r\n        if (err) { console.error(\"Database error fetching user for profile update:\", err); return next(new Error(\"Server error during profile update.\")); } // Pass error\r\n        if (!user) { return res.status(404).json({ error: \"User not found.\" }); }\r\n        let updateSql = 'UPDATE Users SET ';\r\n        const updateParams = [];\r\n        const clauses = [];\r\n        let changesMade = false;\r\n        if (fullName !== undefined && fullName !== user.full_name) {\r\n            clauses.push('full_name = ?');\r\n            updateParams.push(fullName);\r\n            changesMade = true;\r\n        }\r\n        if (email !== undefined && email !== user.email) {\r\n            try { // Added try-catch for async await in db.get\r\n                const existingUser = await new Promise((resolve, reject) => {\r\n                    db.get(\"SELECT user_id FROM Users WHERE email = ? AND user_id != ?\", [email, userId], (err, row) => {\r\n                        if (err) reject(err);\r\n                        resolve(row);\r\n                    });\r\n                });\r\n                if (existingUser) { return res.status(409).json({ error: 'Email already in use by another account.' }); }\r\n            } catch (dbErr) {\r\n                console.error(\"Database error checking existing email:\", dbErr);\r\n                return next(new Error(\"Server error verifying email availability.\"));\r\n            }\r\n            clauses.push('email = ?');\r\n            updateParams.push(email);\r\n            changesMade = true;\r\n        }\r\n        if (currentPassword && newPassword) {\r\n            const isMatch = await bcrypt.compare(currentPassword, user.password_hash);\r\n            if (!isMatch) { return res.status(401).json({ error: \"Current password incorrect.\" }); }\r\n            const newPasswordHash = await bcrypt.hash(newPassword, 10);\r\n            clauses.push('password_hash = ?');\r\n            updateParams.push(newPasswordHash);\r\n            changesMade = true;\r\n        }\r\n        if (!changesMade) { return res.status(200).json({ message: 'No changes detected. Profile remains the same.' }); }\r\n        updateSql += clauses.join(', ') + ' WHERE user_id = ?';\r\n        updateParams.push(userId);\r\n        db.run(updateSql, updateParams, function(updateErr) {\r\n            if (updateErr) { console.error(\"Database error updating profile:\", updateErr); return next(new Error('Failed to update profile.')); } // Pass error\r\n            if (this.changes > 0) {\r\n                db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], (fetchErr, updatedUser) => {\r\n                    if (fetchErr || !updatedUser) { console.error(\"Error fetching updated user for new token:\", fetchErr); return res.status(200).json({ message: 'Profile updated successfully, but token could not be refreshed.' }); }\r\n                    const newPayload = { userId: updatedUser.user_id, email: updatedUser.email, role: updatedUser.role, fullName: updatedUser.full_name, companyId: updatedUser.company_id, locationId: updatedUser.location_id, subscriptionStatus: updatedUser.subscription_status, planId: user.plan_id };\r\n                    const newToken = jwt.sign(newPayload, JWT_SECRET, { expiresIn: '1h' });\r\n                    res.status(200).json({ message: 'Profile updated successfully!', token: newToken });\r\n                });\r\n            } else { res.status(200).json({ message: 'No changes applied as data was identical.' }); }\r\n        });\r\n    });\r\n});\r\n\r\napp.get('/api/locations', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, role } = req.user;\r\n    let sql = 'SELECT location_id, location_name, location_address FROM Locations WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Allowing super_admin, location_admin, and employee to view all locations in their company for dropdowns/selection\r\n    if (!['super_admin', 'location_admin', 'employee'].includes(role)) {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view locations.' });\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching locations:\", err); return next(new Error('Database error fetching locations.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.post('/api/locations', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { location_name, location_address } = req.body;\r\n    const { companyId, role } = req.user;\r\n\r\n    // Input Validation for Create Location\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can create locations.' }); }\r\n    if (!location_name || typeof location_name !== 'string' || location_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Location name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!location_address || typeof location_address !== 'string' || location_address.trim() === '') {\r\n        return res.status(400).json({ error: \"Location address is required and must be a non-empty string.\" });\r\n    }\r\n\r\n    db.run('INSERT INTO Locations (company_id, location_name, location_address) VALUES (?, ?, ?)', [companyId, location_name, location_address], function(err) {\r\n        if (err) { console.error(\"Database error creating location:\", err); return next(new Error('Failed to create location.')); } // Pass error\r\n        res.status(201).json({ message: 'Location created!', locationId: this.lastID });\r\n    });\r\n});\r\n\r\napp.delete('/api/locations/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role } = req.user;\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can delete locations.' }); }\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID provided.' });\r\n    }\r\n\r\n    db.run('DELETE FROM Locations WHERE location_id = ? AND company_id = ?', [id, companyId], function(err) {\r\n        if (err) { console.error(\"Database error deleting location:\", err); return next(new Error('Failed to delete location.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Location not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\napp.get('/api/users', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n    const { filterRole, filterLocationId } = req.query;\r\n\r\n    let sql = `SELECT Users.user_id, Users.full_name, Users.email, Users.role, Locations.location_name\r\n               FROM Users\r\n               LEFT JOIN Locations ON Users.location_id = Locations.location_id\r\n               WHERE Users.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    if (role === 'super_admin') {\r\n        // Super admin can view all users in their company.\r\n    } else if (role === 'location_admin') {\r\n        // Location admin can view all users within their assigned location, plus unassigned users for their company.\r\n        if (currentUserLocationId) {\r\n            sql += ` AND (Users.location_id = ? OR Users.location_id IS NULL)`; // Admins might need to see unassigned users\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Users.user_id = ?`;\r\n        params.push(currentUserId);\r\n    } else {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view users.' });\r\n    }\r\n\r\n    // Input validation for filterRole and filterLocationId\r\n    const allowedRoles = ['super_admin', 'location_admin', 'employee'];\r\n    if (filterRole && (!allowedRoles.includes(filterRole) || (role === 'location_admin' && filterRole === 'super_admin'))) {\r\n        return res.status(400).json({ error: 'Invalid filter role provided or insufficient permissions to filter by this role.' });\r\n    }\r\n    if (filterLocationId && isNaN(parseInt(filterLocationId))) {\r\n        return res.status(400).json({ error: 'Invalid filter location ID provided.' });\r\n    }\r\n\r\n\r\n    if (filterRole) {\r\n        if (role === 'super_admin' || (role === 'location_admin' && (filterRole === 'employee' || filterRole === 'location_admin')) || (role === 'employee' && filterRole === 'employee')) {\r\n            sql += ` AND Users.role = ?`;\r\n            params.push(filterRole);\r\n        } else {\r\n            // This case should ideally be caught by the earlier validation for allowedRoles, but for defense-in-depth:\r\n            return res.status(403).json({ error: 'Access Denied: Insufficient permissions to filter by role.' });\r\n        }\r\n    }\r\n    if (filterLocationId) {\r\n        // Ensure location_admin can only filter by their own location\r\n        if (role === 'super_admin' || (role === 'location_admin' && parseInt(filterLocationId) === currentUserLocationId)) {\r\n            sql += ` AND Users.location_id = ?`;\r\n            params.push(filterLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Insufficient permissions to filter by location.' });\r\n        }\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching users:\", err); return next(new Error('Database error fetching users.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.delete('/api/users/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, userId: authenticatedUserId } = req.user;\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can delete users.' }); }\r\n    if (parseInt(id) === authenticatedUserId) { return res.status(403).json({ error: 'Cannot delete your own super admin account via this interface.' }); }\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid user ID provided.' });\r\n    }\r\n\r\n    db.run('DELETE FROM Users WHERE user_id = ? AND company_id = ? AND role != \\'super_admin\\'', [id, companyId], function(err) {\r\n        if (err) { console.error(\"Database error deleting user:\", err); return next(new Error('Failed to delete user.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'User not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\napp.post('/api/create-checkout-session', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { planId } = req.body;\r\n    const { userId, email, companyId } = req.user;\r\n\r\n    // Input Validation for planId\r\n    const allowedPlanIds = ['pro', 'enterprise'];\r\n    if (!planId || !allowedPlanIds.includes(planId)) {\r\n        return res.status(400).json({ error: 'Invalid plan ID provided.' });\r\n    }\r\n\r\n    const priceIdMap = {\r\n        'pro': process.env.STRIPE_PRICE_ID_PRO,       // Use environment variable\r\n        'enterprise': process.env.STRIPE_PRICE_ID_ENT // Use environment variable\r\n    };\r\n    const stripePriceId = priceIdMap[planId];\r\n    if (!stripePriceId) { return res.status(500).json({ error: 'Stripe price ID not configured for this plan.' }); } // Changed from 400 to 500 as this is a server-side config issue\r\n    try {\r\n        let customerId;\r\n        const userRecord = await new Promise((resolve, reject) => {\r\n            db.get('SELECT stripe_customer_id FROM Users WHERE user_id = ?', [userId], (err, row) => {\r\n                if (err) reject(err);\r\n                resolve(row);\r\n            });\r\n        });\r\n        if (userRecord && userRecord.stripe_customer_id) {\r\n            customerId = userRecord.stripe_customer_id;\r\n        } else {\r\n            const customer = await stripeInstance.customers.create({ email: email, metadata: { userId: userId, companyId: companyId, }, });\r\n            customerId = customer.id;\r\n            db.run('UPDATE Users SET stripe_customer_id = ? WHERE user_id = ?', [customerId, userId], (err) => {\r\n                if (err) console.error('Failed to save Stripe customer ID to DB:', err);\r\n            });\r\n        }\r\n        const session = await stripeInstance.checkout.sessions.create({\r\n            customer: customerId,\r\n            mode: 'subscription',\r\n            line_items: [{ price: stripePriceId, quantity: 1, }, ],\r\n            // Use environment variables for success/cancel URLs, or relative paths if handled client-side\r\n            success_url: `${process.env.FRONTEND_URL || 'http://localhost:8000'}/suite-hub.html?payment=success&session_id={CHECKOUT_SESSION_ID}`,\r\n            cancel_url: `${process.env.FRONTEND_URL || 'http://localhost:8000'}/pricing.html?payment=cancelled`,\r\n            metadata: { userId: userId, planId: planId, },\r\n        });\r\n        res.status(200).json({ url: session.url });\r\n    } catch (error) { console.error('Error creating Stripe Checkout Session:', error); next(error); } // Pass error\r\n});\r\n\r\napp.post('/api/schedules', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { employee_id, location_id, start_time, end_time, notes } = req.body;\r\n    const { companyId, role, userId: currentUserId } = req.user;\r\n\r\n    // Input Validation for Create Schedule\r\n    if (role !== 'super_admin' && role !== 'location_admin') { return res.status(403).json({ error: 'Access Denied: Only admins can create schedules.' }); }\r\n    if (typeof employee_id !== 'number' || employee_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid employee ID is required.' });\r\n    }\r\n    if (typeof location_id !== 'number' || location_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid location ID is required.' });\r\n    }\r\n    if (!start_time || !end_time || isNaN(new Date(start_time).getTime()) || isNaN(new Date(end_time).getTime())) {\r\n        return res.status(400).json({ error: 'Valid start and end times are required.' });\r\n    }\r\n    if (new Date(start_time) >= new Date(end_time)) {\r\n        return res.status(400).json({ error: 'Start time must be before end time.' });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n\r\n    db.get('SELECT user_id FROM Users WHERE user_id = ? AND company_id = ?', [employee_id, companyId], (err, employee) => {\r\n        if (err) { console.error(\"Database error verifying employee:\", err); return next(new Error('Database error during employee verification.')); } // Pass error\r\n        if (!employee) { return res.status(400).json({ error: 'Employee not found in your company.' }); }\r\n        db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n            if (err) { console.error(\"Database error verifying location:\", err); return next(new Error('Database error during location verification.')); } // Pass error\r\n            if (!location) { return res.status(400).json({ error: 'Location not found in your company.' }); }\r\n            db.run(\r\n                'INSERT INTO Schedules (employee_id, location_id, start_time, end_time, notes) VALUES (?, ?, ?, ?, ?)', [employee_id, location_id, start_time, end_time, notes],\r\n                function(insertErr) {\r\n                    if (insertErr) { console.error(\"Database error creating schedule:\", insertErr); return next(new Error('Failed to create schedule.')); } // Pass error\r\n                    res.status(201).json({ message: 'Schedule created successfully!', scheduleId: this.lastID });\r\n                }\r\n            );\r\n        });\r\n    });\r\n});\r\n\r\napp.get('/api/schedules', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { employee_id, location_id, start_date, end_date } = req.query;\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = `SELECT Schedules.*, Users.full_name AS employee_name, Users.email AS employee_email, Locations.location_name\r\n               FROM Schedules\r\n               JOIN Users ON Schedules.employee_id = Users.user_id\r\n               JOIN Locations ON Schedules.location_id = Locations.location_id\r\n               WHERE Users.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    if (role === 'location_admin') {\r\n        if (currentUserLocationId) {\r\n            sql += ` AND Schedules.location_id = ?`;\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Users.user_id = ?`;\r\n        params.push(currentUserId);\r\n    }\r\n\r\n    // Input validation for query parameters\r\n    if (employee_id && isNaN(parseInt(employee_id))) {\r\n        return res.status(400).json({ error: 'Invalid employee ID filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n    if (start_date && isNaN(new Date(start_date).getTime())) {\r\n        return res.status(400).json({ error: 'Invalid start date filter provided.' });\r\n    }\r\n    if (end_date && isNaN(new Date(end_date).getTime())) {\r\n        return res.status(400).json({ error: 'Invalid end date filter provided.' });\r\n    }\r\n\r\n\r\n    if (employee_id && (role === 'super_admin' || (role === 'location_admin' && parseInt(employee_id) === currentUserId) || (role === 'employee' && parseInt(employee_id) === currentUserId))) {\r\n        sql += ` AND Users.role = ?`;\r\n        params.push(filterRole); // This should be employee_id, not filterRole\r\n    }\r\n    if (location_id && (role === 'super_admin' || (role === 'location_admin' && parseInt(location_id) === currentUserLocationId))) {\r\n        sql += ` AND Schedules.location_id = ?`;\r\n        params.push(location_id);\r\n    }\r\n    if (start_date) {\r\n        sql += ` AND Schedules.start_time >= ?`;\r\n        params.push(start_date);\r\n    }\r\n    if (end_date) {\r\n        sql += ` AND Schedules.end_time <= ?`;\r\n        params.push(end_date);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching schedules:\", err); return next(new Error('Database error fetching schedules.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.delete('/api/schedules/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid schedule ID provided.' });\r\n    }\r\n\r\n    if (role === 'employee') {\r\n        return res.status(403).json({ error: 'Access Denied: Employees cannot delete schedules.' });\r\n    }\r\n\r\n    let sql = `DELETE FROM Schedules WHERE schedule_id = ?`;\r\n    const params = [id];\r\n\r\n    if (role === 'location_admin') {\r\n        sql += ` AND employee_id IN (SELECT user_id FROM Users WHERE location_id = ? AND company_id = ?)`;\r\n        params.push(currentUserLocationId, companyId);\r\n    } else if (role === 'super_admin') {\r\n        sql += ` AND employee_id IN (SELECT user_id FROM Users WHERE company_id = ?)`;\r\n        params.push(companyId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting schedule:\", err); return next(new Error('Failed to delete schedule.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Schedule not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// --- Hiring Routes ---\r\n\r\n/**\r\n * POST /api/job-postings\r\n * Creates a new job posting.\r\n * Requires super_admin or location_admin role.\r\n */\r\napp.post('/api/job-postings', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { title, description, requirements, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n    const created_date = new Date().toISOString(); // Current date/time for creation\r\n\r\n    // Input Validation for Create Job Posting\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can create job postings.' });\r\n    }\r\n    if (!title || typeof title !== 'string' || title.trim() === '') {\r\n        return res.status(400).json({ error: \"Job title is required and must be a non-empty string.\" });\r\n    }\r\n    if (!description || typeof description !== 'string' || description.trim() === '') {\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    }\r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) { // location_id can be null\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n\r\n    // If location_admin, ensure location_id matches their assigned location, or is null\r\n    // A location admin can only create job postings for their assigned location or company-wide if their location is null\r\n    if (role === 'location_admin' && location_id && location_id !== currentUserLocationId) {\r\n        return res.status(403).json({ error: 'Access Denied: Location admin can only post jobs for their assigned location.' });\r\n    }\r\n\r\n    db.run(\r\n        'INSERT INTO JobPostings (company_id, location_id, title, description, requirements, status, created_date) VALUES (?, ?, ?, ?, ?, ?, ?)',\r\n        [companyId, location_id, title, description, requirements, 'Open', created_date], // Default status to 'Open'\r\n        function(err) {\r\n            if (err) {\r\n                console.error(\"Database error creating job posting:\", err);\r\n                return next(new Error('Failed to create job posting.')); // Pass error\r\n            }\r\n            res.status(201).json({ message: 'Job posting created successfully!', jobPostingId: this.lastID });\r\n        }\r\n    );\r\n});\r\n\r\n/**\r\n * GET /api/job-postings\r\n * Retrieves job postings.\r\n * Can filter by location_id and status.\r\n * Requires super_admin or location_admin.\r\n */\r\napp.get('/api/job-postings', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { status, location_id } = req.query;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = 'SELECT * FROM JobPostings WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Authorization: super_admin sees all, location_admin sees their location's postings\r\n    if (role === 'location_admin') {\r\n        if (currentUserLocationId) {\r\n            sql += ' AND (location_id = ? OR location_id IS NULL)'; // Location admin sees their location's postings or company-wide\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        // Employees generally shouldn't see job postings list via this admin API\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view job postings.' });\r\n    }\r\n\r\n    // Input validation for query parameters\r\n    const allowedStatuses = ['Open', 'Closed', 'Filled']; // Assuming these are your valid statuses\r\n    if (status && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid job posting status filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n\r\n\r\n    if (status) {\r\n        sql += ' AND status = ?';\r\n        params.push(status);\r\n    }\r\n    // Only super admin can filter by any location_id beyond their own scope\r\n    if (location_id && role === 'super_admin') {\r\n        sql += ' AND location_id = ?';\r\n        params.push(location_id);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching job postings:\", err); return next(new Error('Database error fetching job postings.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * PUT /api/job-postings/:id\r\n * Updates a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\r\napp.put('/api/job-postings/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { title, description, requirements, status, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Input Validation for Job Posting Update\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can update job postings.' });\r\n    }\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID provided.' });\r\n    }\r\n    if (title !== undefined && (typeof title !== 'string' || title.trim() === '')) {\r\n        return res.status(400).json({ error: 'Job title must be a non-empty string if provided.' });\r\n    }\r\n    if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    }\r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    }\r\n    const allowedStatuses = ['Open', 'Closed', 'Filled'];\r\n    if (status !== undefined && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid status provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    let updateSql = 'UPDATE JobPostings SET ';\r\n    const updateParams = [];\r\n    const clauses = [];\r\n\r\n    if (title !== undefined) { clauses.push('title = ?'); updateParams.push(title); }\r\n    // Fix: Missing closing parenthesis for this condition\r\n    if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) { // Line 1009\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    }\r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    }\r\n    if (status !== undefined) { clauses.push('status = ?'); updateParams.push(status); }\r\n    \r\n    // super_admin can change location_id. location_admin cannot change location_id or change to different location\r\n    if (location_id !== undefined) {\r\n        if (role === 'super_admin') {\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        } else if (role === 'location_admin') {\r\n            if (location_id !== currentUserLocationId && location_id !== null) { // location_id can be null (company-wide)\r\n                return res.status(403).json({ error: 'Access Denied: Location admin cannot change job posting location to another location.' });\r\n            }\r\n            // If location admin updates job posting, and it's their location, or setting to null, it's allowed\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        }\r\n    }\r\n\r\n\r\n    if (clauses.length === 0) { return res.status(400).json({ error: 'No fields provided for update.' }); }\r\n\r\n    updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\r\n    updateParams.push(id, companyId);\r\n\r\n    // Additional security for location_admin: ensure they only update their own location's postings\r\n    if (role === 'location_admin') {\r\n        updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(updateSql, updateParams, function(err) {\r\n        if (err) { console.error(\"Database error updating job posting:\", err); return next(new Error('Failed to update job posting.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Job posting not found or not authorized to update.' }); }\r\n        res.status(200).json({ message: 'Job posting updated successfully!' });\r\n    });\r\n});\r\n\r\n/**\r\n * DELETE /api/job-postings/:id\r\n * Deletes a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\r\napp.delete('/api/job-postings/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID provided.' });\r\n    }\r\n\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can delete job postings.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM JobPostings WHERE job_posting_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Additional security for location_admin: ensure they only delete their own location's postings\r\n    if (role === 'location_admin') {\r\n        sql += ' AND (location_id = ? OR location_id IS NULL)';\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting job posting:\", err); return next(new Error('Failed to delete job posting.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Job posting not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n\r\n// Update Applicant API endpoints to use job_posting_id\r\napp.post('/api/applicants', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { job_posting_id, full_name, email, notes, location_id, phone_number } = req.body; // Added phone_number\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n    const application_date = new Date().toISOString(); // Current date/time for application\r\n\r\n    // Input Validation for Adding Applicant\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can add applicants.' });\r\n    }\r\n    if (typeof job_posting_id !== 'number' || job_posting_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid job posting ID is required.' });\r\n    }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    // Basic phone number validation (simple check for non-empty string, could be more complex with regex)\r\n    if (!phone_number || typeof phone_number !== 'string' || phone_number.trim() === '') {\r\n        return res.status(400).json({ error: \"Phone number is required.\" });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    // Verify job_posting_id belongs to the company, and for location_admin, to their location\r\n    db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], (err, jobPosting) => {\r\n        if (err) { console.error(\"Database error verifying job posting:\", err); return next(new Error('Database error when verifying job posting.')); } // Pass error\r\n        if (!jobPosting) { return res.status(400).json({ error: 'Job Posting not found or does not belong to your company.' }); }\r\n        \r\n        // Location admin can only add applicants to jobs in their assigned location or unassigned jobs\r\n        if (role === 'location_admin' && jobPosting.location_id !== currentUserLocationId && jobPosting.location_id !== null) {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin cannot add applicants to jobs outside their assigned location.' });\r\n        }\r\n\r\n        db.run(\r\n            'INSERT INTO Applicants (company_id, location_id, job_posting_id, full_name, email, phone_number, notes, application_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)',\r\n            [companyId, location_id || jobPosting.location_id, job_posting_id, full_name, email, phone_number, notes, application_date], // Use location_id from payload or job posting\r\n            function(insertErr) {\r\n                if (insertErr) { console.error(\"Database error creating applicant:\", insertErr); return next(new Error('Failed to create applicant.')); } // Pass error\r\n                res.status(201).json({ message: 'Applicant added successfully!', applicantId: this.lastID });\r\n            }\r\n        );\r\n    });\r\n});\r\n\r\napp.get('/api/applicants', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { job_posting_id, status, location_id } = req.query; // Added job_posting_id, status, location_id filters\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = `SELECT Applicants.*, JobPostings.title AS job_title_name\r\n               FROM Applicants\r\n               LEFT JOIN JobPostings ON Applicants.job_posting_id = JobPostings.job_posting_id\r\n               WHERE Applicants.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    // Input validation for query parameters\r\n    const allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired']; // Define valid statuses\r\n    if (status && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid applicant status filter provided.' });\r\n    }\r\n    if (job_posting_id && isNaN(parseInt(job_posting_id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n\r\n    if (status) {\r\n        sql += ` AND Applicants.status = ?`;\r\n        params.push(status);\r\n    }\r\n\r\n    if (role === 'location_admin') {\r\n        if (currentUserLocationId) {\r\n            sql += ` AND (Applicants.location_id = ? OR Applicants.location_id IS NULL)`; // Location admin sees applicants for their location or unassigned\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Applicants.user_id = ?`;\r\n        params.push(currentUserId);\r\n    } else {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view applicants.' });\r\n    }\r\n\r\n    // Apply job_posting_id filter if provided\r\n    if (job_posting_id) {\r\n        sql += ` AND Applicants.job_posting_id = ?`;\r\n        params.push(job_posting_id);\r\n    }\r\n    // Apply location filter from query params for super_admin\r\n    if (location_id && role === 'super_admin') {\r\n        sql += ` AND Applicants.location_id = ?`;\r\n        params.push(location_id);\r\n    }\r\n\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching applicants:\", err); return next(new Error('Database error fetching applicants.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * PUT /api/applicants/:id\r\n * Updates an applicant's details (e.g., status, notes).\r\n */\r\napp.put('/api/applicants/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { full_name, email, status, resume_url, notes, location_id, job_posting_id, phone_number } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Input Validation for Applicant Update\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can update applicant records.' });\r\n    }\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid applicant ID provided.' });\r\n    }\r\n    if (full_name !== undefined && (typeof full_name !== 'string' || full_name.trim() === '')) {\r\n        return res.status(400).json({ error: \"Full name must be a non-empty string if provided.\" });\r\n    }\r\n    if (email !== undefined && !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address must be provided if changing email.\" });\r\n    }\r\n    if (phone_number !== undefined && (typeof phone_number !== 'string' || phone_number.trim() === '')) {\r\n        return res.status(400).json({ error: \"Phone number must be a non-empty string if provided.\" });\r\n    }\r\n    const allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired'];\r\n    if (status !== undefined && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid status provided.' });\r\n    }\r\n    if (resume_url !== undefined && typeof resume_url !== 'string') { // Assuming resume_url is a string URL\r\n        return res.status(400).json({ error: 'Resume URL must be a string if provided.' });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n    if (job_posting_id !== undefined && typeof job_posting_id !== 'number' && job_posting_id !== null) {\r\n        return res.status(400).json({ error: 'Job posting ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    let updateSql = 'UPDATE Applicants SET ';\r\n    const updateParams = [];\r\n    const clauses = [];\r\n\r\n    // Fields that can be updated\r\n    if (full_name !== undefined) { clauses.push('full_name = ?'); updateParams.push(full_name); }\r\n    if (email !== undefined) { clauses.push('email = ?'); updateParams.push(email); }\r\n    if (phone_number !== undefined) { clauses.push('phone_number = ?'); updateParams.push(phone_number); }\r\n    if (status !== undefined) { clauses.push('status = ?'); updateParams.push(status); }\r\n    if (resume_url !== undefined) { clauses.push('resume_url = ?'); updateParams.push(resume_url); }\r\n    if (notes !== undefined) { clauses.push('notes = ?'); updateParams.push(notes); }\r\n    \r\n    // Admins can update location_id or job_posting_id, with restrictions for location_admin\r\n    if (location_id !== undefined) {\r\n        if (role === 'super_admin') {\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        } else if (role === 'location_admin') {\r\n            if (location_id !== currentUserLocationId && location_id !== null) { // location_id can be null (company-wide)\r\n                return res.status(403).json({ error: 'Access Denied: Location admin cannot assign applicants to another location.' });\r\n            }\r\n            // If location admin updates applicant location, and it's their location, or setting to null, it's allowed\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        }\r\n    }\r\n    if (job_posting_id !== undefined) {\r\n         if (role === 'super_admin') {\r\n            clauses.push('job_posting_id = ?'); updateParams.push(job_posting_id);\r\n        } else if (role === 'location_admin') {\r\n            // Verify new job_posting_id belongs to the location admin's assigned location or is company-wide\r\n            db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], (err, job) => {\r\n                if (err) { console.error(\"DB error verifying job posting for update:\", err); return next(new Error('Database error verifying job posting.')); } // Pass error\r\n                if (!job) { return res.status(400).json({ error: 'Job Posting not found or does not belong to your company.' }); }\r\n                if (job.location_id !== null && job.location_id !== currentUserLocationId) {\r\n                    return res.status(403).json({ error: 'Access Denied: Location admin cannot assign applicants to jobs outside their assigned location.' });\r\n                }\r\n            });\r\n            clauses.push('job_posting_id = ?'); updateParams.push(job_posting_id);\r\n        }\r\n    }\r\n\r\n\r\n    if (clauses.length === 0) { return res.status(400).json({ error: 'No fields provided for update.' }); }\r\n\r\n    updateSql += clauses.join(', ') + ' WHERE applicant_id = ? AND company_id = ?';\r\n    updateParams.push(id, companyId);\r\n\r\n    // For location_admin, ensure they can only update applicants within their assigned location\r\n    if (role === 'location_admin') {\r\n        updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned applicants too\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(updateSql, updateParams, function(err) {\r\n        if (err) { console.error(\"Database error updating applicant:\", err); return next(new Error('Failed to update applicant.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Applicant not found or not authorized to update.' }); }\r\n        res.status(200).json({ message: 'Applicant updated successfully!' });\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * DELETE /api/applicants/:id\r\n * Deletes an applicant.\r\n * Requires super_admin or location_admin (for their location's applicants).\r\n */\r\napp.delete('/api/applicants/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid applicant ID provided.' });\r\n    }\r\n\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can delete applicants.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM Applicants WHERE applicant_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Additional security for location_admin: ensure they only delete applicants in their own location\r\n    if (role === 'location_admin') {\r\n        sql += ' AND (location_id = ? OR location_id IS NULL)';\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting applicant:\", err); return next(new Error('Failed to delete applicant.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Applicant not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// --- Document Management Routes ---\r\n\r\n/**\r\n * POST /api/documents\r\n * Uploads (saves metadata for) a new document.\r\n * Requires authenticated user.\r\n * Note: Actual file storage is assumed to be handled by a separate service (e.g., S3).\r\n * This endpoint only stores the metadata and a URL.\r\n */\r\napp.post('/api/documents', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { title, file_name, file_type, file_url, description } = req.body;\r\n    const { companyId, userId } = req.user;\r\n    const upload_date = new Date().toISOString();\r\n\r\n    // Input Validation for Document Upload\r\n    if (!title || typeof title !== 'string' || title.trim() === '') {\r\n        return res.status(400).json({ error: 'Document title is required and must be a non-empty string.' });\r\n    }\r\n    if (!file_name || typeof file_name !== 'string' || file_name.trim() === '') {\r\n        return res.status(400).json({ error: 'File name is required and must be a non-empty string.' });\r\n    }\r\n    if (!file_type || typeof file_type !== 'string' || file_type.trim() === '') {\r\n        return res.status(400).json({ error: 'File type is required and must be a non-empty string.' });\r\n    }\r\n    // Basic URL validation: checks for http(s) protocol and some content. Can be more robust.\r\n    const urlRegex = /^https?:\\/\\/[^\\s$.?#].[^\\s]*$/i;\r\n    if (!file_url || typeof file_url !== 'string' || !urlRegex.test(file_url)) {\r\n        return res.status(400).json({ error: 'A valid file URL (starting with http or https) is required.' });\r\n    }\r\n    if (description !== undefined && typeof description !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n\r\n    db.run(\r\n        'INSERT INTO Documents (company_id, user_id, title, file_name, file_type, file_url, description, upload_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)',\r\n        [companyId, userId, title, file_name, file_type, file_url, description, upload_date],\r\n        function(err) {\r\n            if (err) {\r\n                console.error(\"Database error uploading document:\", err);\r\n                return next(new Error('Failed to upload document metadata.')); // Pass error\r\n            }\r\n            res.status(201).json({ message: 'Document metadata saved successfully!', documentId: this.lastID });\r\n        }\r\n    );\r\n});\r\n\r\n/**\r\n * GET /api/documents\r\n * Retrieves a list of documents for the company.\r\n * Filters can be added (e.g., by uploader, by type).\r\n * Requires authenticated user. Super admins can see all, others can see own documents.\r\n */\r\napp.get('/api/documents', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, userId, role } = req.user;\r\n    \r\n    let sql = 'SELECT * FROM Documents WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Non-super-admins only see their own documents\r\n    if (role !== 'super_admin') {\r\n        sql += ' AND user_id = ?';\r\n        params.push(userId);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching documents:\", err); return next(new Error('Database error fetching documents.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * DELETE /api/documents/:id\r\n * Deletes a document record.\r\n * Requires super_admin or the user who uploaded it.\r\n */\r\napp.delete('/api/documents/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, userId, role } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid document ID provided.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM Documents WHERE document_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Only super_admin or the original uploader can delete\r\n    if (role !== 'super_admin') {\r\n        sql += ' AND user_id = ?';\r\n        params.push(userId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting document:\", err); return next(new Error('Failed to delete document.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Document not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// Fallback for any other GET request not handled by an API route (serves index.html for SPA behavior)\r\n// This should always be the LAST route in your Express app\r\napp.get(/'*'/, (req, res) => {\r\n    // Correctly serve the index.html from the parent directory\r\n    res.sendFile(path.join(__dirname, '..', 'index.html'));\r\n});\r\n\r\n// --- Global Error Handling Middleware ---\r\n// This should be the very last middleware in your Express app\r\napp.use((err, req, res, next) => {\r\n    console.error(`Unhandled Error: ${err.stack}`); // Log the full stack trace for debugging\r\n    // Respond with a generic error message for the client\r\n    res.status(500).json({\r\n        error: 'An unexpected server error occurred. Please try again later.',\r\n        // In development, you might send more details:\r\n        // message: err.message,\r\n        // stack: process.env.NODE_ENV === 'development' ? err.stack : undefined\r\n    });\r\n});\r\n\r\n// --- Server Start ---\r\n// This conditional export allows the app to be imported for testing\r\n// without starting the server listener when the test runner requires it.\r\nif (require.main === module) {\r\n    // Only listen if this file is run directly (not required as a module)\r\n    app.listen(PORT, () => {\r\n        console.log(`Server is running successfully on http://localhost:${PORT}`);\r\n    });\r\n} else {\r\n    // Export the app for testing purposes\r\n    module.exports = app;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1750315066447},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\test\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\",\"filename\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\test\\\\server.test.cjs\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$47\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.27.4:development":{"value":{"code":"\"use strict\";\n\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2); } }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n// --- Imports ---\nvar express = require('express');\nvar sqlite3 = require('sqlite3').verbose();\nvar bcrypt = require('bcryptjs');\nvar jwt = require('jsonwebtoken');\nvar cors = require('cors'); // Import cors\nvar path = require('path');\nvar csv = require('csv-parser'); // For CSV parsing\nvar _require = require('stream'),\n  Readable = _require.Readable; // For creating a readable stream from a string\nvar rateLimit = require('express-rate-limit'); // Import rate-limiting middleware\nvar morgan = require('morgan'); // Import morgan for request logging\n\n// Load environment variables from .env file in development\n// IMPORTANT: Only load .env if server.js is run directly, NOT when required by tests.\nif (process.env.NODE_ENV !== 'production' && require.main === module) {\n  require('dotenv').config();\n}\n\n// Import the Stripe library and initialize it with your secret key\n// Use process.env.STRIPE_SECRET_KEY for production\nvar stripeInstance = require('stripe')(process.env.STRIPE_SECRET_KEY || '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');\n\n// --- App Initialization ---\nvar app = express();\n\n// Configure CORS for production environment\nvar allowedOrigins = process.env.CORS_ORIGIN ? process.env.CORS_ORIGIN.split(',') : ['http://localhost:8000']; // Default to localhost for development\n\n// Add 'null' to allowed origins if not in production and not explicitly set for local file access\nif (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\n  allowedOrigins.push('null');\n}\nvar corsOptions = {\n  origin: function origin(_origin, callback) {\n    // Allow requests with no origin (like mobile apps, curl, or local file access if 'null' is in allowedOrigins)\n    if (!_origin) {\n      // Check if 'null' is explicitly allowed or if we're in dev and no CORS_ORIGIN is set\n      if (allowedOrigins.includes('null') || process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\n        return callback(null, true);\n      }\n      var msg = 'The CORS policy for this site does not allow access from the specified Origin.';\n      return callback(new Error(msg), false);\n    }\n    if (allowedOrigins.indexOf(_origin) === -1) {\n      var _msg = 'The CORS policy for this site does not allow access from the specified Origin.';\n      return callback(new Error(_msg), false);\n    }\n    return callback(null, true);\n  },\n  methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\n  credentials: true,\n  // Allow cookies to be sent\n  optionsSuccessStatus: 204 // Some legacy browsers (IE11, various SmartTVs) choke on 204\n};\napp.use(cors(corsOptions));\n\n// Use process.env.PORT for production, fallback to 3000 for local development\nvar PORT = process.env.PORT || 3000;\n\n// Define a webhook secret for Stripe. This should also be an environment variable.\nvar STRIPE_WEBHOOK_SECRET = process.env.STRIPE_WEBHOOK_SECRET || 'whsec_YOUR_WEBHOOK_SECRET';\n\n// --- Rate Limiting Configuration ---\nvar authLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000,\n  // 15 minutes\n  max: 10,\n  // Max 10 requests per 15 minutes per IP\n  message: 'Too many login/registration attempts from this IP, please try again after 15 minutes',\n  standardHeaders: true,\n  // Return rate limit info in the `RateLimit-*` headers\n  legacyHeaders: false // Disable the `X-RateLimit-*` headers\n});\n\n// --- Middleware for Stripe Webhook (MUST be before express.json() for other routes) --\n// This route needs the raw body for signature verification.\napp.post('/api/stripe-webhook', express.raw({\n  type: 'application/json'\n}), /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(req, res) {\n    var sig, event, session, userId, planId, subscriptionUpdated, subscriptionDeleted, invoiceSucceeded, invoiceFailed, _t, _t2;\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          sig = req.headers['stripe-signature'];\n          _context.p = 1;\n          event = stripeInstance.webhooks.constructEvent(req.body, sig, STRIPE_WEBHOOK_SECRET);\n          _context.n = 3;\n          break;\n        case 2:\n          _context.p = 2;\n          _t = _context.v;\n          console.error(\"Webhook Error: \".concat(_t.message));\n          return _context.a(2, res.status(400).send(\"Webhook Error: \".concat(_t.message)));\n        case 3:\n          _t2 = event.type;\n          _context.n = _t2 === 'checkout.session.completed' ? 4 : _t2 === 'customer.subscription.updated' ? 5 : _t2 === 'customer.subscription.deleted' ? 6 : _t2 === 'invoice.payment_succeeded' ? 7 : _t2 === 'invoice.payment_failed' ? 8 : 9;\n          break;\n        case 4:\n          session = event.data.object;\n          console.log('Checkout Session Completed:', session.id);\n          userId = session.metadata.userId;\n          planId = session.metadata.planId;\n          if (session.payment_status === 'paid' && userId && planId) {\n            db.run('UPDATE Users SET stripe_customer_id = ?, stripe_subscription_id = ?, subscription_status = ?, plan_id = ? WHERE user_id = ?', [session.customer, session.subscription, 'active', planId, userId], function (err) {\n              if (err) console.error('Database update error for checkout.session.completed:', err.message);else console.log(\"User \".concat(userId, \" subscription updated to \").concat(planId, \" (active).\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 5:\n          subscriptionUpdated = event.data.object;\n          console.log('Subscription Updated:', subscriptionUpdated.id);\n          if (subscriptionUpdated.customer && subscriptionUpdated.status && subscriptionUpdated.plan && subscriptionUpdated.plan.id) {\n            db.run('UPDATE Users SET subscription_status = ?, plan_id = ? WHERE stripe_customer_id = ?', [subscriptionUpdated.status, subscriptionUpdated.plan.id, subscriptionUpdated.customer], function (err) {\n              if (err) console.error('Database update error for customer.subscription.updated:', err.message);else console.log(\"Subscription for customer \".concat(subscriptionUpdated.customer, \" status updated to \").concat(subscriptionUpdated.status, \" and plan to \").concat(subscriptionUpdated.plan.id, \".\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 6:\n          subscriptionDeleted = event.data.object;\n          console.log('Subscription Deleted:', subscriptionDeleted.id);\n          if (subscriptionDeleted.customer) {\n            db.run('UPDATE Users SET subscription_status = ?, plan_id = ?, stripe_subscription_id = NULL WHERE stripe_customer_id = ?', ['cancelled', 'free', subscriptionDeleted.customer], function (err) {\n              if (err) console.error('Database update error for customer.subscription.deleted:', err.message);else console.log(\"Subscription for customer \".concat(subscriptionDeleted.customer, \" marked as cancelled and reverted to free.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 7:\n          invoiceSucceeded = event.data.object;\n          console.log('Invoice Payment Succeeded:', invoiceSucceeded.id);\n          if (invoiceSucceeded.subscription && invoiceSucceeded.customer) {\n            db.run('UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?', ['active', invoiceSucceeded.subscription, invoiceSucceeded.customer], function (err) {\n              if (err) console.error('Database update error for invoice.payment_succeeded:', err.message);else console.log(\"Subscription \".concat(invoiceSucceeded.subscription, \" status set to active.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 8:\n          invoiceFailed = event.data.object;\n          console.log('Invoice Payment Failed:', invoiceFailed.id);\n          if (invoiceFailed.subscription && invoiceFailed.customer) {\n            db.run('UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?', ['past_due', invoiceFailed.subscription, invoiceFailed.customer], function (err) {\n              if (err) console.error('Database update error for invoice.payment_failed:', err.message);else console.log(\"Subscription \".concat(invoiceFailed.subscription, \" status set to past_due.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 9:\n          console.log(\"Unhandled event type \".concat(event.type));\n        case 10:\n          res.status(200).json({\n            received: true\n          });\n        case 11:\n          return _context.a(2);\n      }\n    }, _callee, null, [[1, 2]]);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\n\n// IMPORTANT: express.json() for parsing JSON request bodies MUST come AFTER the webhook route\napp.use(express.json());\n\n// --- JWT Secret ---\n// CRUCIAL FOR TESTING: Directly access process.env.JWT_SECRET without fallback.\n// This ensures tests control the secret used by the app instance.\nvar JWT_SECRET = process.env.JWT_SECRET; // Ensure it *must* come from process.env\n\n// --- Request Logging (using Morgan) ---\n// 'dev' format is good for development, 'combined' or 'tiny' for production logs\napp.use(morgan('dev'));\n\n// --- Serve Static Files (Frontend) with Caching ---\n// This middleware serves static files from the 'onboardflow' root directory\n// and sets Cache-Control headers for browser caching.\napp.use(express[\"static\"](path.join(__dirname, '..'), {\n  maxAge: '7d',\n  // Cache static assets for 7 days (e.g., CSS, JS, images, favicon)\n  immutable: false // Set to true if asset filenames include content hashes (e.g., app.min.js?v=hash)\n}));\n\n// --- Database Setup ---\nvar db = new sqlite3.Database('./onboardflow.db', function (err) {\n  if (err) {\n    // Log database connection error and exit\n    console.error(\"Error opening database:\", err.message);\n    process.exit(1); // Exit process if database connection fails\n  } else {\n    console.log(\"Successfully connected to the database.\");\n    db.get(\"PRAGMA foreign_keys = ON\");\n    db.serialize(function () {\n      db.run(\"CREATE TABLE IF NOT EXISTS Companies (company_id INTEGER PRIMARY KEY AUTOINCREMENT, company_name TEXT NOT NULL UNIQUE)\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Locations (location_id INTEGER PRIMARY KEY AUTOINCREMENT, company_id INTEGER, location_name TEXT NOT NULL, location_address TEXT NOT NULL, FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE)\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Users (\\n                user_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER,\\n                location_id INTEGER,\\n                full_name TEXT NOT NULL,\\n                email TEXT NOT NULL UNIQUE,\\n                password_hash TEXT NOT NULL,\\n                position TEXT,\\n                employee_id TEXT,\\n                role TEXT NOT NULL,\\n                stripe_customer_id TEXT,\\n                stripe_subscription_id TEXT,\\n                subscription_status TEXT,\\n                plan_id TEXT,\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Schedules (\\n                schedule_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                employee_id INTEGER NOT NULL,\\n                location_id INTEGER NOT NULL,\\n                start_time TEXT NOT NULL,\\n                end_time TEXT NOT NULL,\\n                notes TEXT,\\n                FOREIGN KEY (employee_id) REFERENCES Users(user_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      // NEW: Create JobPostings table\n      db.run(\"CREATE TABLE IF NOT EXISTS JobPostings (\\n                job_posting_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                location_id INTEGER, -- Optional: link job posting to a specific location\\n                title TEXT NOT NULL,\\n                description TEXT NOT NULL,\\n                requirements TEXT, -- Optional: job requirements\\n                status TEXT NOT NULL DEFAULT 'Open', -- e.g., 'Open', 'Closed', 'Filled'\\n                created_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      // Update Applicants table schema to link to JobPostings and add phone_number\n      db.run(\"CREATE TABLE IF NOT EXISTS Applicants (\\n                applicant_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                location_id INTEGER, -- Optional: applicant's preferred location or location applied for\\n                job_posting_id INTEGER, -- NEW: Link to JobPostings table\\n                full_name TEXT NOT NULL,\\n                email TEXT NOT NULL,\\n                phone_number TEXT, -- NEW: Phone number field\\n                status TEXT NOT NULL DEFAULT 'Applied', -- e.g., 'Applied', 'Interviewing', 'Rejected', 'Hired'\\n                resume_url TEXT, -- Optional: URL to a resume document (e.g., hosted on cloud storage)\\n                notes TEXT,\\n                application_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE,\\n                FOREIGN KEY (job_posting_id) REFERENCES JobPostings(job_posting_id) ON DELETE SET NULL -- If job posting is deleted, set this to NULL\\n            )\");\n      // NEW: Create Documents table for file/video uploads\n      db.run(\"CREATE TABLE IF NOT EXISTS Documents (\\n                document_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                user_id INTEGER NOT NULL, -- User who uploaded the document\\n                title TEXT NOT NULL,\\n                file_name TEXT NOT NULL,\\n                file_type TEXT NOT NULL,\\n                file_url TEXT NOT NULL, -- URL to the stored file (e.g., S3, GCS)\\n                description TEXT,\\n                upload_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (user_id) REFERENCES Users(user_id) ON DELETE CASCADE\\n            )\");\n    });\n  }\n});\n\n// --- Authentication Middleware ---\nfunction authenticateToken(req, res, next) {\n  var authHeader = req.headers['authorization'];\n  var token = authHeader && authHeader.split(' ')[1];\n  if (token == null) {\n    return res.status(401).json({\n      error: 'Unauthorized: No token provided.'\n    });\n  }\n  jwt.verify(token, JWT_SECRET, function (err, user) {\n    if (err) {\n      // Log the specific JWT error for debugging\n      console.error(\"JWT Verification Error:\", err.message);\n      return res.status(403).json({\n        error: 'Forbidden: Invalid or expired token.'\n      });\n    }\n    req.user = user;\n    next();\n  });\n}\n\n// --- Helper for Input Validation ---\nvar isValidEmail = function isValidEmail(email) {\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n};\n\n// --- API Routes (ALL API ROUTES SHOULD BE DEFINED HERE, BEFORE STATIC FILE SERVING) ---\n\n// Apply rate limiting to authentication routes\napp.post('/api/register', authLimiter, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(req, res, next) {\n    var _req$body, company_name, full_name, email, password, password_hash, _t3;\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          // Added 'next'\n          _req$body = req.body, company_name = _req$body.company_name, full_name = _req$body.full_name, email = _req$body.email, password = _req$body.password; // Input Validation for Registration\n          if (!(!company_name || typeof company_name !== 'string' || company_name.trim() === '')) {\n            _context2.n = 1;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Company name is required and must be a non-empty string.\"\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context2.n = 2;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context2.n = 3;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context2.n = 4;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          _context2.p = 4;\n          _context2.n = 5;\n          return bcrypt.hash(password, 10);\n        case 5:\n          password_hash = _context2.v;\n          db.serialize(function () {\n            db.run('BEGIN TRANSACTION');\n            db.run('INSERT INTO Companies (company_name) VALUES (?)', [company_name], function (err) {\n              if (err) {\n                db.run('ROLLBACK');\n                console.error(\"Database error creating company:\", err);\n                return next(new Error(\"Could not create company.\")); // Pass error to error handling middleware\n              }\n              var newCompanyId = this.lastID;\n              db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'super_admin', 'active', 'free')\", [newCompanyId, null, full_name, email, password_hash], function (userInsertErr) {\n                if (userInsertErr) {\n                  db.run('ROLLBACK');\n                  console.error(\"Database error creating user:\", userInsertErr);\n                  if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                    return res.status(409).json({\n                      error: 'Email already registered.'\n                    });\n                  }\n                  return next(new Error(\"Could not create user.\")); // Pass error\n                }\n                db.run('COMMIT');\n                res.status(201).json({\n                  message: \"Company and user registered successfully!\",\n                  userId: this.lastID\n                });\n              });\n            });\n          });\n          _context2.n = 7;\n          break;\n        case 6:\n          _context2.p = 6;\n          _t3 = _context2.v;\n          console.error(\"Registration error:\", _t3);\n          next(_t3); // Pass error to error handling middleware\n        case 7:\n          return _context2.a(2);\n      }\n    }, _callee2, null, [[4, 6]]);\n  }));\n  return function (_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}());\napp.post('/api/login', authLimiter, function (req, res, next) {\n  // Added 'next'\n  var _req$body2 = req.body,\n    email = _req$body2.email,\n    password = _req$body2.password;\n\n  // Input Validation for Login\n  if (!email || !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address is required.\"\n    });\n  }\n  if (!password || typeof password !== 'string' || password.length === 0) {\n    return res.status(400).json({\n      error: \"Password is required.\"\n    });\n  }\n  db.get(\"SELECT * FROM Users WHERE email = ?\", [email], /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(err, user) {\n      var isMatch, payload, token;\n      return _regenerator().w(function (_context3) {\n        while (1) switch (_context3.n) {\n          case 0:\n            if (!err) {\n              _context3.n = 1;\n              break;\n            }\n            console.error(\"Database error during login:\", err);\n            return _context3.a(2, next(new Error(\"A server error occurred during login.\")));\n          case 1:\n            if (user) {\n              _context3.n = 2;\n              break;\n            }\n            return _context3.a(2, res.status(401).json({\n              error: \"Invalid credentials.\"\n            }));\n          case 2:\n            _context3.n = 3;\n            return bcrypt.compare(password, user.password_hash);\n          case 3:\n            isMatch = _context3.v;\n            if (isMatch) {\n              _context3.n = 4;\n              break;\n            }\n            return _context3.a(2, res.status(401).json({\n              error: \"Invalid credentials.\"\n            }));\n          case 4:\n            payload = {\n              userId: user.user_id,\n              email: user.email,\n              role: user.role,\n              fullName: user.full_name,\n              companyId: user.company_id,\n              locationId: user.location_id,\n              subscriptionStatus: user.subscription_status,\n              planId: user.plan_id\n            };\n            token = jwt.sign(payload, JWT_SECRET, {\n              expiresIn: '1h'\n            });\n            res.status(200).json({\n              message: \"Login successful!\",\n              token: token,\n              role: user.role\n            });\n          case 5:\n            return _context3.a(2);\n        }\n      }, _callee3);\n    }));\n    return function (_x6, _x7) {\n      return _ref3.apply(this, arguments);\n    };\n  }());\n});\napp.post('/api/invite-admin', authenticateToken, /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(req, res, next) {\n    var _req$body3, full_name, email, password, location_id, _req$user, companyId, role, password_hash, _t4;\n    return _regenerator().w(function (_context4) {\n      while (1) switch (_context4.n) {\n        case 0:\n          // Added 'next'\n          _req$body3 = req.body, full_name = _req$body3.full_name, email = _req$body3.email, password = _req$body3.password, location_id = _req$body3.location_id;\n          _req$user = req.user, companyId = _req$user.companyId, role = _req$user.role; // Input Validation for Invite Admin\n          if (!(role !== 'super_admin')) {\n            _context4.n = 1;\n            break;\n          }\n          return _context4.a(2, res.status(403).json({\n            error: 'Access Denied: Only super admins can invite other admins.'\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context4.n = 2;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context4.n = 3;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context4.n = 4;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"Temporary password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          if (!(typeof location_id !== 'number' || location_id <= 0)) {\n            _context4.n = 5;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"A valid location ID is required.\"\n          }));\n        case 5:\n          _context4.p = 5;\n          _context4.n = 6;\n          return bcrypt.hash(password, 10);\n        case 6:\n          password_hash = _context4.v;\n          db.get('SELECT * FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n            if (err) {\n              console.error(\"Database error checking location:\", err);\n              return next(new Error('Database error when verifying location.'));\n            } // Pass error\n            if (!location) {\n              return res.status(400).json({\n                error: 'Selected location does not exist or does not belong to your company.'\n              });\n            }\n            db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'location_admin', 'active', 'free')\", [companyId, location_id, full_name, email, password_hash], function (userInsertErr) {\n              if (userInsertErr) {\n                console.error(\"Database error inviting admin:\", userInsertErr);\n                if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                  return res.status(409).json({\n                    error: 'Email already registered.'\n                  });\n                }\n                return next(new Error('Failed to invite admin.')); // Pass error\n              }\n              res.status(201).json({\n                message: \"Location admin invited successfully!\",\n                userId: this.lastID\n              });\n            });\n          });\n          _context4.n = 8;\n          break;\n        case 7:\n          _context4.p = 7;\n          _t4 = _context4.v;\n          console.error(\"Invite admin error:\", _t4);\n          next(_t4);\n        case 8:\n          return _context4.a(2);\n      }\n    }, _callee4, null, [[5, 7]]);\n  }));\n  return function (_x8, _x9, _x0) {\n    return _ref4.apply(this, arguments);\n  };\n}());\n\n// NEW: API endpoint for inviting employees\napp.post('/api/invite-employee', authenticateToken, /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(req, res, next) {\n    var _req$body4, full_name, email, password, position, employee_id, location_id, _req$user2, companyId, role, currentUserLocationId, isLocationIdValid, password_hash, locationVerification, _t5;\n    return _regenerator().w(function (_context5) {\n      while (1) switch (_context5.n) {\n        case 0:\n          _req$body4 = req.body, full_name = _req$body4.full_name, email = _req$body4.email, password = _req$body4.password, position = _req$body4.position, employee_id = _req$body4.employee_id, location_id = _req$body4.location_id;\n          _req$user2 = req.user, companyId = _req$user2.companyId, role = _req$user2.role, currentUserLocationId = _req$user2.locationId; // Authorization: Super admin can invite anyone, Location admin can only invite to their location or unassigned\n          if (['super_admin', 'location_admin'].includes(role)) {\n            _context5.n = 1;\n            break;\n          }\n          return _context5.a(2, res.status(403).json({\n            error: 'Access Denied: Only admins can invite employees.'\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context5.n = 2;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context5.n = 3;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context5.n = 4;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"Temporary password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          // Corrected location_id validation: Must be a number > 0.\n          // If location_id is null, it indicates an unassigned location, which is valid for a super admin.\n          // For location_admin, it must match their current location.\n          // This revised logic correctly checks for null OR a valid positive integer.\n          isLocationIdValid = location_id === null || typeof location_id === 'number' && !isNaN(location_id) && location_id > 0;\n          if (isLocationIdValid) {\n            _context5.n = 5;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"A valid location ID (positive number) is required for employee, or null for unassigned.\"\n          }));\n        case 5:\n          if (!(position !== undefined && typeof position !== 'string')) {\n            _context5.n = 6;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Position must be a string if provided.'\n          }));\n        case 6:\n          if (!(employee_id !== undefined && typeof employee_id !== 'string')) {\n            _context5.n = 7;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Employee ID must be a string if provided.'\n          }));\n        case 7:\n          if (!(role === 'location_admin')) {\n            _context5.n = 8;\n            break;\n          }\n          if (!(location_id !== currentUserLocationId)) {\n            _context5.n = 8;\n            break;\n          }\n          if (location_id === null && currentUserLocationId === null) {\n            _context5.n = 8;\n            break;\n          }\n          return _context5.a(2, res.status(403).json({\n            error: 'Access Denied: Location admin can only invite employees to their assigned location.'\n          }));\n        case 8:\n          _context5.p = 8;\n          _context5.n = 9;\n          return bcrypt.hash(password, 10);\n        case 9:\n          password_hash = _context5.v;\n          if (!(location_id !== null)) {\n            _context5.n = 11;\n            break;\n          }\n          _context5.n = 10;\n          return new Promise(function (resolve, reject) {\n            db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n              if (err) reject(err);\n              resolve(location);\n            });\n          });\n        case 10:\n          locationVerification = _context5.v;\n          if (locationVerification) {\n            _context5.n = 11;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Selected location does not exist or does not belong to your company.'\n          }));\n        case 11:\n          db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, position, employee_id, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, ?, ?, 'employee', 'active', 'free')\", [companyId, location_id, full_name, email, password_hash, position, employee_id],\n          // Default new employees to 'employee' role\n          function (userInsertErr) {\n            if (userInsertErr) {\n              console.error(\"Database error inviting employee:\", userInsertErr);\n              if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                return res.status(409).json({\n                  error: 'Email already registered.'\n                });\n              }\n              return next(new Error('Failed to invite employee.'));\n            }\n            res.status(201).json({\n              message: \"Employee invited successfully!\",\n              userId: this.lastID\n            });\n          });\n          _context5.n = 13;\n          break;\n        case 12:\n          _context5.p = 12;\n          _t5 = _context5.v;\n          console.error(\"Invite employee error:\", _t5);\n          next(_t5);\n        case 13:\n          return _context5.a(2);\n      }\n    }, _callee5, null, [[8, 12]]);\n  }));\n  return function (_x1, _x10, _x11) {\n    return _ref5.apply(this, arguments);\n  };\n}());\napp.get('/api/profile', authenticateToken, function (req, res) {\n  var _req$user3 = req.user,\n    userId = _req$user3.userId,\n    fullName = _req$user3.fullName,\n    email = _req$user3.email,\n    role = _req$user3.role,\n    companyId = _req$user3.companyId,\n    locationId = _req$user3.locationId,\n    subscriptionStatus = _req$user3.subscriptionStatus,\n    planId = _req$user3.planId;\n  res.status(200).json({\n    userId: userId,\n    fullName: fullName,\n    email: email,\n    role: role,\n    companyId: companyId,\n    locationId: locationId,\n    subscriptionStatus: subscriptionStatus,\n    planId: planId\n  });\n});\napp.put('/api/profile', authenticateToken, /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7(req, res, next) {\n    var _req$body5, fullName, email, currentPassword, newPassword, userId;\n    return _regenerator().w(function (_context7) {\n      while (1) switch (_context7.n) {\n        case 0:\n          // Added 'next'\n          _req$body5 = req.body, fullName = _req$body5.fullName, email = _req$body5.email, currentPassword = _req$body5.currentPassword, newPassword = _req$body5.newPassword;\n          userId = req.user.userId; // Input Validation for Profile Update\n          if (!(fullName === undefined && email === undefined && (!currentPassword || !newPassword))) {\n            _context7.n = 1;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: 'No data provided for update.'\n          }));\n        case 1:\n          if (!(fullName !== undefined && (typeof fullName !== 'string' || fullName.trim() === ''))) {\n            _context7.n = 2;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"Full name must be a non-empty string if provided.\"\n          }));\n        case 2:\n          if (!(email !== undefined && !isValidEmail(email))) {\n            _context7.n = 3;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"A valid email address must be provided if changing email.\"\n          }));\n        case 3:\n          if (!(newPassword !== undefined && (typeof newPassword !== 'string' || newPassword.length < 6))) {\n            _context7.n = 4;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"New password must be at least 6 characters long if changing password.\"\n          }));\n        case 4:\n          if (!(currentPassword && !newPassword || !currentPassword && newPassword)) {\n            _context7.n = 5;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: 'Both current password and new password are required to change password.'\n          }));\n        case 5:\n          db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], /*#__PURE__*/function () {\n            var _ref7 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6(err, user) {\n              var updateSql, updateParams, clauses, changesMade, existingUser, isMatch, newPasswordHash, _t6;\n              return _regenerator().w(function (_context6) {\n                while (1) switch (_context6.n) {\n                  case 0:\n                    if (!err) {\n                      _context6.n = 1;\n                      break;\n                    }\n                    console.error(\"Database error fetching user for profile update:\", err);\n                    return _context6.a(2, next(new Error(\"Server error during profile update.\")));\n                  case 1:\n                    if (user) {\n                      _context6.n = 2;\n                      break;\n                    }\n                    return _context6.a(2, res.status(404).json({\n                      error: \"User not found.\"\n                    }));\n                  case 2:\n                    updateSql = 'UPDATE Users SET ';\n                    updateParams = [];\n                    clauses = [];\n                    changesMade = false;\n                    if (fullName !== undefined && fullName !== user.full_name) {\n                      clauses.push('full_name = ?');\n                      updateParams.push(fullName);\n                      changesMade = true;\n                    }\n                    if (!(email !== undefined && email !== user.email)) {\n                      _context6.n = 8;\n                      break;\n                    }\n                    _context6.p = 3;\n                    _context6.n = 4;\n                    return new Promise(function (resolve, reject) {\n                      db.get(\"SELECT user_id FROM Users WHERE email = ? AND user_id != ?\", [email, userId], function (err, row) {\n                        if (err) reject(err);\n                        resolve(row);\n                      });\n                    });\n                  case 4:\n                    existingUser = _context6.v;\n                    if (!existingUser) {\n                      _context6.n = 5;\n                      break;\n                    }\n                    return _context6.a(2, res.status(409).json({\n                      error: 'Email already in use by another account.'\n                    }));\n                  case 5:\n                    _context6.n = 7;\n                    break;\n                  case 6:\n                    _context6.p = 6;\n                    _t6 = _context6.v;\n                    console.error(\"Database error checking existing email:\", _t6);\n                    return _context6.a(2, next(new Error(\"Server error verifying email availability.\")));\n                  case 7:\n                    clauses.push('email = ?');\n                    updateParams.push(email);\n                    changesMade = true;\n                  case 8:\n                    if (!(currentPassword && newPassword)) {\n                      _context6.n = 12;\n                      break;\n                    }\n                    _context6.n = 9;\n                    return bcrypt.compare(currentPassword, user.password_hash);\n                  case 9:\n                    isMatch = _context6.v;\n                    if (isMatch) {\n                      _context6.n = 10;\n                      break;\n                    }\n                    return _context6.a(2, res.status(401).json({\n                      error: \"Current password incorrect.\"\n                    }));\n                  case 10:\n                    _context6.n = 11;\n                    return bcrypt.hash(newPassword, 10);\n                  case 11:\n                    newPasswordHash = _context6.v;\n                    clauses.push('password_hash = ?');\n                    updateParams.push(newPasswordHash);\n                    changesMade = true;\n                  case 12:\n                    if (changesMade) {\n                      _context6.n = 13;\n                      break;\n                    }\n                    return _context6.a(2, res.status(200).json({\n                      message: 'No changes detected. Profile remains the same.'\n                    }));\n                  case 13:\n                    updateSql += clauses.join(', ') + ' WHERE user_id = ?';\n                    updateParams.push(userId);\n                    db.run(updateSql, updateParams, function (updateErr) {\n                      if (updateErr) {\n                        console.error(\"Database error updating profile:\", updateErr);\n                        return next(new Error('Failed to update profile.'));\n                      } // Pass error\n                      if (this.changes > 0) {\n                        db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], function (fetchErr, updatedUser) {\n                          if (fetchErr || !updatedUser) {\n                            console.error(\"Error fetching updated user for new token:\", fetchErr);\n                            return res.status(200).json({\n                              message: 'Profile updated successfully, but token could not be refreshed.'\n                            });\n                          }\n                          var newPayload = {\n                            userId: updatedUser.user_id,\n                            email: updatedUser.email,\n                            role: updatedUser.role,\n                            fullName: updatedUser.full_name,\n                            companyId: updatedUser.company_id,\n                            locationId: updatedUser.location_id,\n                            subscriptionStatus: updatedUser.subscription_status,\n                            planId: user.plan_id\n                          };\n                          var newToken = jwt.sign(newPayload, JWT_SECRET, {\n                            expiresIn: '1h'\n                          });\n                          res.status(200).json({\n                            message: 'Profile updated successfully!',\n                            token: newToken\n                          });\n                        });\n                      } else {\n                        res.status(200).json({\n                          message: 'No changes applied as data was identical.'\n                        });\n                      }\n                    });\n                  case 14:\n                    return _context6.a(2);\n                }\n              }, _callee6, null, [[3, 6]]);\n            }));\n            return function (_x15, _x16) {\n              return _ref7.apply(this, arguments);\n            };\n          }());\n        case 6:\n          return _context7.a(2);\n      }\n    }, _callee7);\n  }));\n  return function (_x12, _x13, _x14) {\n    return _ref6.apply(this, arguments);\n  };\n}());\napp.get('/api/locations', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user4 = req.user,\n    companyId = _req$user4.companyId,\n    role = _req$user4.role;\n  var sql = 'SELECT location_id, location_name, location_address FROM Locations WHERE company_id = ?';\n  var params = [companyId];\n\n  // Allowing super_admin, location_admin, and employee to view all locations in their company for dropdowns/selection\n  if (!['super_admin', 'location_admin', 'employee'].includes(role)) {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view locations.'\n    });\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching locations:\", err);\n      return next(new Error('Database error fetching locations.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp.post('/api/locations', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body6 = req.body,\n    location_name = _req$body6.location_name,\n    location_address = _req$body6.location_address;\n  var _req$user5 = req.user,\n    companyId = _req$user5.companyId,\n    role = _req$user5.role;\n\n  // Input Validation for Create Location\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can create locations.'\n    });\n  }\n  if (!location_name || typeof location_name !== 'string' || location_name.trim() === '') {\n    return res.status(400).json({\n      error: \"Location name is required and must be a non-empty string.\"\n    });\n  }\n  if (!location_address || typeof location_address !== 'string' || location_address.trim() === '') {\n    return res.status(400).json({\n      error: \"Location address is required and must be a non-empty string.\"\n    });\n  }\n  db.run('INSERT INTO Locations (company_id, location_name, location_address) VALUES (?, ?, ?)', [companyId, location_name, location_address], function (err) {\n    if (err) {\n      console.error(\"Database error creating location:\", err);\n      return next(new Error('Failed to create location.'));\n    } // Pass error\n    res.status(201).json({\n      message: 'Location created!',\n      locationId: this.lastID\n    });\n  });\n});\napp[\"delete\"]('/api/locations/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user6 = req.user,\n    companyId = _req$user6.companyId,\n    role = _req$user6.role;\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can delete locations.'\n    });\n  }\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID provided.'\n    });\n  }\n  db.run('DELETE FROM Locations WHERE location_id = ? AND company_id = ?', [id, companyId], function (err) {\n    if (err) {\n      console.error(\"Database error deleting location:\", err);\n      return next(new Error('Failed to delete location.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Location not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\napp.get('/api/users', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user7 = req.user,\n    companyId = _req$user7.companyId,\n    role = _req$user7.role,\n    currentUserId = _req$user7.userId,\n    currentUserLocationId = _req$user7.locationId;\n  var _req$query = req.query,\n    filterRole = _req$query.filterRole,\n    filterLocationId = _req$query.filterLocationId;\n  var sql = \"SELECT Users.user_id, Users.full_name, Users.email, Users.role, Locations.location_name\\n               FROM Users\\n               LEFT JOIN Locations ON Users.location_id = Locations.location_id\\n               WHERE Users.company_id = ?\";\n  var params = [companyId];\n  if (role === 'super_admin') {\n    // Super admin can view all users in their company.\n  } else if (role === 'location_admin') {\n    // Location admin can view all users within their assigned location, plus unassigned users for their company.\n    if (currentUserLocationId) {\n      sql += \" AND (Users.location_id = ? OR Users.location_id IS NULL)\"; // Admins might need to see unassigned users\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Users.user_id = ?\";\n    params.push(currentUserId);\n  } else {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view users.'\n    });\n  }\n\n  // Input validation for filterRole and filterLocationId\n  var allowedRoles = ['super_admin', 'location_admin', 'employee'];\n  if (filterRole && (!allowedRoles.includes(filterRole) || role === 'location_admin' && filterRole === 'super_admin')) {\n    return res.status(400).json({\n      error: 'Invalid filter role provided or insufficient permissions to filter by this role.'\n    });\n  }\n  if (filterLocationId && isNaN(parseInt(filterLocationId))) {\n    return res.status(400).json({\n      error: 'Invalid filter location ID provided.'\n    });\n  }\n  if (filterRole) {\n    if (role === 'super_admin' || role === 'location_admin' && (filterRole === 'employee' || filterRole === 'location_admin') || role === 'employee' && filterRole === 'employee') {\n      sql += \" AND Users.role = ?\";\n      params.push(filterRole);\n    } else {\n      // This case should ideally be caught by the earlier validation for allowedRoles, but for defense-in-depth:\n      return res.status(403).json({\n        error: 'Access Denied: Insufficient permissions to filter by role.'\n      });\n    }\n  }\n  if (filterLocationId) {\n    // Ensure location_admin can only filter by their own location\n    if (role === 'super_admin' || role === 'location_admin' && parseInt(filterLocationId) === currentUserLocationId) {\n      sql += \" AND Users.location_id = ?\";\n      params.push(filterLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Insufficient permissions to filter by location.'\n      });\n    }\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching users:\", err);\n      return next(new Error('Database error fetching users.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp[\"delete\"]('/api/users/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user8 = req.user,\n    companyId = _req$user8.companyId,\n    role = _req$user8.role,\n    authenticatedUserId = _req$user8.userId;\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can delete users.'\n    });\n  }\n  if (parseInt(id) === authenticatedUserId) {\n    return res.status(403).json({\n      error: 'Cannot delete your own super admin account via this interface.'\n    });\n  }\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid user ID provided.'\n    });\n  }\n  db.run('DELETE FROM Users WHERE user_id = ? AND company_id = ? AND role != \\'super_admin\\'', [id, companyId], function (err) {\n    if (err) {\n      console.error(\"Database error deleting user:\", err);\n      return next(new Error('Failed to delete user.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'User not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\napp.post('/api/create-checkout-session', authenticateToken, /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee8(req, res, next) {\n    var planId, _req$user9, userId, email, companyId, allowedPlanIds, priceIdMap, stripePriceId, customerId, userRecord, customer, session, _t7;\n    return _regenerator().w(function (_context8) {\n      while (1) switch (_context8.n) {\n        case 0:\n          // Added 'next'\n          planId = req.body.planId;\n          _req$user9 = req.user, userId = _req$user9.userId, email = _req$user9.email, companyId = _req$user9.companyId; // Input Validation for planId\n          allowedPlanIds = ['pro', 'enterprise'];\n          if (!(!planId || !allowedPlanIds.includes(planId))) {\n            _context8.n = 1;\n            break;\n          }\n          return _context8.a(2, res.status(400).json({\n            error: 'Invalid plan ID provided.'\n          }));\n        case 1:\n          priceIdMap = {\n            'pro': process.env.STRIPE_PRICE_ID_PRO,\n            // Use environment variable\n            'enterprise': process.env.STRIPE_PRICE_ID_ENT // Use environment variable\n          };\n          stripePriceId = priceIdMap[planId];\n          if (stripePriceId) {\n            _context8.n = 2;\n            break;\n          }\n          return _context8.a(2, res.status(500).json({\n            error: 'Stripe price ID not configured for this plan.'\n          }));\n        case 2:\n          _context8.p = 2;\n          _context8.n = 3;\n          return new Promise(function (resolve, reject) {\n            db.get('SELECT stripe_customer_id FROM Users WHERE user_id = ?', [userId], function (err, row) {\n              if (err) reject(err);\n              resolve(row);\n            });\n          });\n        case 3:\n          userRecord = _context8.v;\n          if (!(userRecord && userRecord.stripe_customer_id)) {\n            _context8.n = 4;\n            break;\n          }\n          customerId = userRecord.stripe_customer_id;\n          _context8.n = 6;\n          break;\n        case 4:\n          _context8.n = 5;\n          return stripeInstance.customers.create({\n            email: email,\n            metadata: {\n              userId: userId,\n              companyId: companyId\n            }\n          });\n        case 5:\n          customer = _context8.v;\n          customerId = customer.id;\n          db.run('UPDATE Users SET stripe_customer_id = ? WHERE user_id = ?', [customerId, userId], function (err) {\n            if (err) console.error('Failed to save Stripe customer ID to DB:', err);\n          });\n        case 6:\n          _context8.n = 7;\n          return stripeInstance.checkout.sessions.create({\n            customer: customerId,\n            mode: 'subscription',\n            line_items: [{\n              price: stripePriceId,\n              quantity: 1\n            }],\n            // Use environment variables for success/cancel URLs, or relative paths if handled client-side\n            success_url: \"\".concat(process.env.FRONTEND_URL || 'http://localhost:8000', \"/suite-hub.html?payment=success&session_id={CHECKOUT_SESSION_ID}\"),\n            cancel_url: \"\".concat(process.env.FRONTEND_URL || 'http://localhost:8000', \"/pricing.html?payment=cancelled\"),\n            metadata: {\n              userId: userId,\n              planId: planId\n            }\n          });\n        case 7:\n          session = _context8.v;\n          res.status(200).json({\n            url: session.url\n          });\n          _context8.n = 9;\n          break;\n        case 8:\n          _context8.p = 8;\n          _t7 = _context8.v;\n          console.error('Error creating Stripe Checkout Session:', _t7);\n          next(_t7);\n        case 9:\n          return _context8.a(2);\n      }\n    }, _callee8, null, [[2, 8]]);\n  }));\n  return function (_x17, _x18, _x19) {\n    return _ref8.apply(this, arguments);\n  };\n}());\napp.post('/api/schedules', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body7 = req.body,\n    employee_id = _req$body7.employee_id,\n    location_id = _req$body7.location_id,\n    start_time = _req$body7.start_time,\n    end_time = _req$body7.end_time,\n    notes = _req$body7.notes;\n  var _req$user0 = req.user,\n    companyId = _req$user0.companyId,\n    role = _req$user0.role,\n    currentUserId = _req$user0.userId;\n\n  // Input Validation for Create Schedule\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can create schedules.'\n    });\n  }\n  if (typeof employee_id !== 'number' || employee_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid employee ID is required.'\n    });\n  }\n  if (typeof location_id !== 'number' || location_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid location ID is required.'\n    });\n  }\n  if (!start_time || !end_time || isNaN(new Date(start_time).getTime()) || isNaN(new Date(end_time).getTime())) {\n    return res.status(400).json({\n      error: 'Valid start and end times are required.'\n    });\n  }\n  if (new Date(start_time) >= new Date(end_time)) {\n    return res.status(400).json({\n      error: 'Start time must be before end time.'\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  db.get('SELECT user_id FROM Users WHERE user_id = ? AND company_id = ?', [employee_id, companyId], function (err, employee) {\n    if (err) {\n      console.error(\"Database error verifying employee:\", err);\n      return next(new Error('Database error during employee verification.'));\n    } // Pass error\n    if (!employee) {\n      return res.status(400).json({\n        error: 'Employee not found in your company.'\n      });\n    }\n    db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n      if (err) {\n        console.error(\"Database error verifying location:\", err);\n        return next(new Error('Database error during location verification.'));\n      } // Pass error\n      if (!location) {\n        return res.status(400).json({\n          error: 'Location not found in your company.'\n        });\n      }\n      db.run('INSERT INTO Schedules (employee_id, location_id, start_time, end_time, notes) VALUES (?, ?, ?, ?, ?)', [employee_id, location_id, start_time, end_time, notes], function (insertErr) {\n        if (insertErr) {\n          console.error(\"Database error creating schedule:\", insertErr);\n          return next(new Error('Failed to create schedule.'));\n        } // Pass error\n        res.status(201).json({\n          message: 'Schedule created successfully!',\n          scheduleId: this.lastID\n        });\n      });\n    });\n  });\n});\napp.get('/api/schedules', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query2 = req.query,\n    employee_id = _req$query2.employee_id,\n    location_id = _req$query2.location_id,\n    start_date = _req$query2.start_date,\n    end_date = _req$query2.end_date;\n  var _req$user1 = req.user,\n    companyId = _req$user1.companyId,\n    role = _req$user1.role,\n    currentUserId = _req$user1.userId,\n    currentUserLocationId = _req$user1.locationId;\n  var sql = \"SELECT Schedules.*, Users.full_name AS employee_name, Users.email AS employee_email, Locations.location_name\\n               FROM Schedules\\n               JOIN Users ON Schedules.employee_id = Users.user_id\\n               JOIN Locations ON Schedules.location_id = Locations.location_id\\n               WHERE Users.company_id = ?\";\n  var params = [companyId];\n  if (role === 'location_admin') {\n    if (currentUserLocationId) {\n      sql += \" AND Schedules.location_id = ?\";\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Users.user_id = ?\";\n    params.push(currentUserId);\n  }\n\n  // Input validation for query parameters\n  if (employee_id && isNaN(parseInt(employee_id))) {\n    return res.status(400).json({\n      error: 'Invalid employee ID filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (start_date && isNaN(new Date(start_date).getTime())) {\n    return res.status(400).json({\n      error: 'Invalid start date filter provided.'\n    });\n  }\n  if (end_date && isNaN(new Date(end_date).getTime())) {\n    return res.status(400).json({\n      error: 'Invalid end date filter provided.'\n    });\n  }\n  if (employee_id && (role === 'super_admin' || role === 'location_admin' && parseInt(employee_id) === currentUserId || role === 'employee' && parseInt(employee_id) === currentUserId)) {\n    sql += \" AND Users.role = ?\";\n    params.push(filterRole); // This should be employee_id, not filterRole\n  }\n  if (location_id && (role === 'super_admin' || role === 'location_admin' && parseInt(location_id) === currentUserLocationId)) {\n    sql += \" AND Schedules.location_id = ?\";\n    params.push(location_id);\n  }\n  if (start_date) {\n    sql += \" AND Schedules.start_time >= ?\";\n    params.push(start_date);\n  }\n  if (end_date) {\n    sql += \" AND Schedules.end_time <= ?\";\n    params.push(end_date);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching schedules:\", err);\n      return next(new Error('Database error fetching schedules.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp[\"delete\"]('/api/schedules/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user10 = req.user,\n    companyId = _req$user10.companyId,\n    role = _req$user10.role,\n    currentUserId = _req$user10.userId,\n    currentUserLocationId = _req$user10.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid schedule ID provided.'\n    });\n  }\n  if (role === 'employee') {\n    return res.status(403).json({\n      error: 'Access Denied: Employees cannot delete schedules.'\n    });\n  }\n  var sql = \"DELETE FROM Schedules WHERE schedule_id = ?\";\n  var params = [id];\n  if (role === 'location_admin') {\n    sql += \" AND employee_id IN (SELECT user_id FROM Users WHERE location_id = ? AND company_id = ?)\";\n    params.push(currentUserLocationId, companyId);\n  } else if (role === 'super_admin') {\n    sql += \" AND employee_id IN (SELECT user_id FROM Users WHERE company_id = ?)\";\n    params.push(companyId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting schedule:\", err);\n      return next(new Error('Failed to delete schedule.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Schedule not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// --- Hiring Routes ---\n\n/**\r\n * POST /api/job-postings\r\n * Creates a new job posting.\r\n * Requires super_admin or location_admin role.\r\n */\napp.post('/api/job-postings', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body8 = req.body,\n    title = _req$body8.title,\n    description = _req$body8.description,\n    requirements = _req$body8.requirements,\n    location_id = _req$body8.location_id;\n  var _req$user11 = req.user,\n    companyId = _req$user11.companyId,\n    role = _req$user11.role,\n    currentUserLocationId = _req$user11.locationId;\n  var created_date = new Date().toISOString(); // Current date/time for creation\n\n  // Input Validation for Create Job Posting\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can create job postings.'\n    });\n  }\n  if (!title || typeof title !== 'string' || title.trim() === '') {\n    return res.status(400).json({\n      error: \"Job title is required and must be a non-empty string.\"\n    });\n  }\n  if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\n    // Line 1009\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  } else if (description !== undefined) {\n    clauses.push('description = ?');\n    updateParams.push(description);\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  } else if (requirements !== undefined) {\n    clauses.push('requirements = ?');\n    updateParams.push(requirements);\n  }\n  if (status !== undefined) {\n    clauses.push('status = ?');\n    updateParams.push(status);\n  }\n\n  // super_admin can change location_id. location_admin cannot change location_id or change to different location\n  if (location_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    } else if (role === 'location_admin') {\n      if (location_id !== currentUserLocationId && location_id !== null) {\n        // location_id can be null (company-wide)\n        return res.status(403).json({\n          error: 'Access Denied: Location admin cannot change job posting location to another location.'\n        });\n      }\n      // If location admin updates job posting, and it's their location, or setting to null, it's allowed\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    }\n  }\n  if (clauses.length === 0) {\n    return res.status(400).json({\n      error: 'No fields provided for update.'\n    });\n  }\n  updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\n  updateParams.push(id, companyId);\n\n  // Additional security for location_admin: ensure they only update their own location's postings\n  if (role === 'location_admin') {\n    updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\n    params.push(currentUserLocationId);\n  }\n  db.run(updateSql, updateParams, function (err) {\n    if (err) {\n      console.error(\"Database error updating job posting:\", err);\n      return next(new Error('Failed to update job posting.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Job posting not found or not authorized to update.'\n      });\n    }\n    res.status(200).json({\n      message: 'Job posting updated successfully!'\n    });\n  });\n});\n\n/**\r\n * GET /api/job-postings\r\n * Retrieves job postings.\r\n * Can filter by location_id and status.\r\n * Requires super_admin or location_admin.\r\n */\napp.get('/api/job-postings', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query3 = req.query,\n    status = _req$query3.status,\n    location_id = _req$query3.location_id;\n  var _req$user12 = req.user,\n    companyId = _req$user12.companyId,\n    role = _req$user12.role,\n    currentUserLocationId = _req$user12.locationId;\n  var sql = 'SELECT * FROM JobPostings WHERE company_id = ?';\n  var params = [companyId];\n\n  // Authorization: super_admin sees all, location_admin sees their location's postings\n  if (role === 'location_admin') {\n    if (currentUserLocationId) {\n      sql += ' AND (location_id = ? OR location_id IS NULL)'; // Location admin sees their location's postings or company-wide\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    // Employees generally shouldn't see job postings list via this admin API\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view job postings.'\n    });\n  }\n\n  // Input validation for query parameters\n  var allowedStatuses = ['Open', 'Closed', 'Filled']; // Assuming these are your valid statuses\n  if (status && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid job posting status filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (status) {\n    sql += ' AND status = ?';\n    params.push(status);\n  }\n  // Only super admin can filter by any location_id beyond their own scope\n  if (location_id && role === 'super_admin') {\n    sql += \" AND location_id = ?\";\n    params.push(location_id);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching job postings:\", err);\n      return next(new Error('Database error fetching job postings.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * PUT /api/job-postings/:id\r\n * Updates a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\napp.put('/api/job-postings/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$body9 = req.body,\n    title = _req$body9.title,\n    description = _req$body9.description,\n    requirements = _req$body9.requirements,\n    status = _req$body9.status,\n    location_id = _req$body9.location_id;\n  var _req$user13 = req.user,\n    companyId = _req$user13.companyId,\n    role = _req$user13.role,\n    currentUserLocationId = _req$user13.locationId;\n\n  // Input Validation for Job Posting Update\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can update job postings.'\n    });\n  }\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID provided.'\n    });\n  }\n  if (title !== undefined && (typeof title !== 'string' || title.trim() === '')) {\n    return res.status(400).json({\n      error: 'Job title must be a non-empty string if provided.'\n    });\n  }\n  if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  }\n  var allowedStatuses = ['Open', 'Closed', 'Filled'];\n  if (status !== undefined && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid status provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n  var updateSql = 'UPDATE JobPostings SET ';\n  var updateParams = [];\n  var clauses = [];\n  if (title !== undefined) {\n    clauses.push('title = ?');\n    updateParams.push(title);\n  }\n  // Line 1009 fix: Ensure this line and surrounding logic is correct.\n  if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\n    // Line 1009\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  } else if (description !== undefined) {\n    clauses.push('description = ?');\n    updateParams.push(description);\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  } else if (requirements !== undefined) {\n    clauses.push('requirements = ?');\n    updateParams.push(requirements);\n  }\n  if (status !== undefined) {\n    clauses.push('status = ?');\n    updateParams.push(status);\n  }\n\n  // super_admin can change location_id. location_admin cannot change location_id or change to different location\n  if (location_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    } else if (role === 'location_admin') {\n      if (location_id !== currentUserLocationId && location_id !== null) {\n        // location_id can be null (company-wide)\n        return res.status(403).json({\n          error: 'Access Denied: Location admin cannot change job posting location to another location.'\n        });\n      }\n      // If location admin updates job posting, and it's their location, or setting to null, it's allowed\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    }\n  }\n  if (clauses.length === 0) {\n    return res.status(400).json({\n      error: 'No fields provided for update.'\n    });\n  }\n  updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\n  updateParams.push(id, companyId);\n\n  // Additional security for location_admin: ensure they only update their own location's postings\n  if (role === 'location_admin') {\n    updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\n    params.push(currentUserLocationId);\n  }\n  db.run(updateSql, updateParams, function (err) {\n    if (err) {\n      console.error(\"Database error updating job posting:\", err);\n      return next(new Error('Failed to update job posting.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Job posting not found or not authorized to update.'\n      });\n    }\n    res.status(200).json({\n      message: 'Job posting updated successfully!'\n    });\n  });\n});\n\n/**\r\n * DELETE /api/job-postings/:id\r\n * Deletes a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\napp[\"delete\"]('/api/job-postings/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user14 = req.user,\n    companyId = _req$user14.companyId,\n    role = _req$user14.role,\n    currentUserLocationId = _req$user14.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID provided.'\n    });\n  }\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can delete job postings.'\n    });\n  }\n  var sql = 'DELETE FROM JobPostings WHERE job_posting_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Additional security for location_admin: ensure they only delete their own location's postings\n  if (role === 'location_admin') {\n    sql += ' AND (location_id = ? OR location_id IS NULL)';\n    params.push(currentUserLocationId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting job posting:\", err);\n      return next(new Error('Failed to delete job posting.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Job posting not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// Update Applicant API endpoints to use job_posting_id\napp.post('/api/applicants', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body0 = req.body,\n    job_posting_id = _req$body0.job_posting_id,\n    full_name = _req$body0.full_name,\n    email = _req$body0.email,\n    notes = _req$body0.notes,\n    location_id = _req$body0.location_id,\n    phone_number = _req$body0.phone_number; // Added phone_number\n  var _req$user15 = req.user,\n    companyId = _req$user15.companyId,\n    role = _req$user15.role,\n    currentUserLocationId = _req$user15.locationId;\n  var application_date = new Date().toISOString(); // Current date/time for application\n\n  // Input Validation for Adding Applicant\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can add applicants.'\n    });\n  }\n  if (typeof job_posting_id !== 'number' || job_posting_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid job posting ID is required.'\n    });\n  }\n  if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\n    return res.status(400).json({\n      error: \"Full name is required and must be a non-empty string.\"\n    });\n  }\n  if (!email || !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address is required.\"\n    });\n  }\n  // Basic phone number validation (simple check for non-empty string, could be more complex with regex)\n  if (!phone_number || typeof phone_number !== 'string' || phone_number.trim() === '') {\n    return res.status(400).json({\n      error: \"Phone number is required.\"\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n\n  // Verify job_posting_id belongs to the company, and for location_admin, to their location\n  db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], function (err, jobPosting) {\n    if (err) {\n      console.error(\"Database error verifying job posting:\", err);\n      return next(new Error('Database error when verifying job posting.'));\n    } // Pass error\n    if (!jobPosting) {\n      return res.status(400).json({\n        error: 'Job Posting not found or does not belong to your company.'\n      });\n    }\n\n    // Location admin can only add applicants to jobs in their assigned location or unassigned jobs\n    if (role === 'location_admin' && jobPosting.location_id !== currentUserLocationId && jobPosting.location_id !== null) {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin cannot add applicants to jobs outside their assigned location.'\n      });\n    }\n    db.run('INSERT INTO Applicants (company_id, location_id, job_posting_id, full_name, email, phone_number, notes, application_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)', [companyId, location_id || jobPosting.location_id, job_posting_id, full_name, email, phone_number, notes, application_date],\n    // Use location_id from payload or job posting\n    function (insertErr) {\n      if (insertErr) {\n        console.error(\"Database error creating applicant:\", insertErr);\n        return next(new Error('Failed to create applicant.'));\n      } // Pass error\n      res.status(201).json({\n        message: 'Applicant added successfully!',\n        applicantId: this.lastID\n      });\n    });\n  });\n});\napp.get('/api/applicants', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query4 = req.query,\n    job_posting_id = _req$query4.job_posting_id,\n    status = _req$query4.status,\n    location_id = _req$query4.location_id; // Added job_posting_id, status, location_id filters\n  var _req$user16 = req.user,\n    companyId = _req$user16.companyId,\n    role = _req$user16.role,\n    currentUserId = _req$user16.userId,\n    currentUserLocationId = _req$user16.locationId;\n  var sql = \"SELECT Applicants.*, JobPostings.title AS job_title_name\\n               FROM Applicants\\n               LEFT JOIN JobPostings ON Applicants.job_posting_id = JobPostings.job_posting_id\\n               WHERE Applicants.company_id = ?\";\n  var params = [companyId];\n\n  // Input validation for query parameters\n  var allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired']; // Define valid statuses\n  if (status && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid applicant status filter provided.'\n    });\n  }\n  if (job_posting_id && isNaN(parseInt(job_posting_id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (status) {\n    sql += \" AND Applicants.status = ?\";\n    params.push(status);\n  }\n  if (role === 'location_admin') {\n    if (currentUserLocationId) {\n      sql += \" AND (Applicants.location_id = ? OR Applicants.location_id IS NULL)\"; // Location admin sees applicants for their location or unassigned\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Applicants.user_id = ?\";\n    params.push(currentUserId);\n  } else {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view applicants.'\n    });\n  }\n\n  // Apply job_posting_id filter if provided\n  if (job_posting_id) {\n    sql += \" AND Applicants.job_posting_id = ?\";\n    params.push(job_posting_id);\n  }\n  // Apply location filter from query params for super_admin\n  if (location_id && role === 'super_admin') {\n    sql += \" AND Applicants.location_id = ?\";\n    params.push(location_id);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching applicants:\", err);\n      return next(new Error('Database error fetching applicants.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * PUT /api/applicants/:id\r\n * Updates an applicant's details (e.g., status, notes).\r\n */\napp.put('/api/applicants/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$body1 = req.body,\n    full_name = _req$body1.full_name,\n    email = _req$body1.email,\n    status = _req$body1.status,\n    resume_url = _req$body1.resume_url,\n    notes = _req$body1.notes,\n    location_id = _req$body1.location_id,\n    job_posting_id = _req$body1.job_posting_id,\n    phone_number = _req$body1.phone_number;\n  var _req$user17 = req.user,\n    companyId = _req$user17.companyId,\n    role = _req$user17.role,\n    currentUserLocationId = _req$user17.locationId;\n\n  // Input Validation for Applicant Update\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can update applicant records.'\n    });\n  }\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid applicant ID provided.'\n    });\n  }\n  if (full_name !== undefined && (typeof full_name !== 'string' || full_name.trim() === '')) {\n    return res.status(400).json({\n      error: \"Full name must be a non-empty string if provided.\"\n    });\n  }\n  if (email !== undefined && !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address must be provided if changing email.\"\n    });\n  }\n  if (phone_number !== undefined && (typeof phone_number !== 'string' || phone_number.trim() === '')) {\n    return res.status(400).json({\n      error: \"Phone number must be a non-empty string if provided.\"\n    });\n  }\n  var allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired'];\n  if (status !== undefined && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid status provided.'\n    });\n  }\n  if (resume_url !== undefined && typeof resume_url !== 'string') {\n    // Assuming resume_url is a string URL\n    return res.status(400).json({\n      error: 'Resume URL must be a string if provided.'\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n  if (job_posting_id !== undefined && typeof job_posting_id !== 'number' && job_posting_id !== null) {\n    return res.status(400).json({\n      error: 'Job posting ID must be a number or null if provided.'\n    });\n  }\n  var updateSql = 'UPDATE Applicants SET ';\n  var updateParams = [];\n  var clauses = [];\n  if (full_name !== undefined) {\n    clauses.push('full_name = ?');\n    updateParams.push(full_name);\n  }\n  if (email !== undefined) {\n    clauses.push('email = ?');\n    updateParams.push(email);\n  }\n  if (phone_number !== undefined) {\n    clauses.push('phone_number = ?');\n    updateParams.push(phone_number);\n  }\n  if (status !== undefined) {\n    clauses.push('status = ?');\n    updateParams.push(status);\n  }\n  if (resume_url !== undefined) {\n    clauses.push('resume_url = ?');\n    updateParams.push(resume_url);\n  }\n  if (notes !== undefined) {\n    clauses.push('notes = ?');\n    updateParams.push(notes);\n  }\n\n  // Admins can update location_id or job_posting_id, with restrictions for location_admin\n  if (location_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    } else if (role === 'location_admin') {\n      if (location_id !== currentUserLocationId && location_id !== null) {\n        // location_id can be null (company-wide)\n        return res.status(403).json({\n          error: 'Access Denied: Location admin cannot assign applicants to another location.'\n        });\n      }\n      // If location admin updates applicant location, and it's their location, or setting to null, it's allowed\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    }\n  }\n  if (job_posting_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('job_posting_id = ?');\n      updateParams.push(job_posting_id);\n    } else if (role === 'location_admin') {\n      // Verify new job_posting_id belongs to the location admin's assigned location or is company-wide\n      db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], function (err, job) {\n        if (err) {\n          console.error(\"DB error verifying job posting for update:\", err);\n          return next(new Error('Database error verifying job posting.'));\n        } // Pass error\n        if (!job) {\n          return res.status(400).json({\n            error: 'Job Posting not found or does not belong to your company.'\n          });\n        }\n        if (job.location_id !== null && job.location_id !== currentUserLocationId) {\n          return res.status(403).json({\n            error: 'Access Denied: Location admin cannot assign applicants to jobs outside their assigned location.'\n          });\n        }\n      });\n      clauses.push('job_posting_id = ?');\n      updateParams.push(job_posting_id);\n    }\n  }\n  if (clauses.length === 0) {\n    return res.status(400).json({\n      error: 'No fields provided for update.'\n    });\n  }\n  updateSql += clauses.join(', ') + ' WHERE applicant_id = ? AND company_id = ?';\n  updateParams.push(id, companyId);\n\n  // For location_admin, ensure they can only update applicants within their assigned location\n  if (role === 'location_admin') {\n    updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned applicants too\n    params.push(currentUserLocationId);\n  }\n  db.run(updateSql, updateParams, function (err) {\n    if (err) {\n      console.error(\"Database error updating applicant:\", err);\n      return next(new Error('Failed to update applicant.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Applicant not found or not authorized to update.'\n      });\n    }\n    res.status(200).json({\n      message: 'Applicant updated successfully!'\n    });\n  });\n});\n\n/**\r\n * DELETE /api/applicants/:id\r\n * Deletes an applicant.\r\n * Requires super_admin or location_admin (for their location's applicants).\r\n */\napp[\"delete\"]('/api/applicants/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user18 = req.user,\n    companyId = _req$user18.companyId,\n    role = _req$user18.role,\n    currentUserLocationId = _req$user18.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid applicant ID provided.'\n    });\n  }\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can delete applicants.'\n    });\n  }\n  var sql = 'DELETE FROM Applicants WHERE applicant_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Additional security for location_admin: ensure they only delete applicants in their own location\n  if (role === 'location_admin') {\n    sql += ' AND (location_id = ? OR location_id IS NULL)';\n    params.push(currentUserLocationId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting applicant:\", err);\n      return next(new Error('Failed to delete applicant.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Applicant not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// --- Document Management Routes ---\n\n/**\r\n * POST /api/documents\r\n * Uploads (saves metadata for) a new document.\r\n * Requires authenticated user.\r\n * Note: Actual file storage is assumed to be handled by a separate service (e.g., S3).\r\n * This endpoint only stores the metadata and a URL.\r\n */\napp.post('/api/documents', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body10 = req.body,\n    title = _req$body10.title,\n    file_name = _req$body10.file_name,\n    file_type = _req$body10.file_type,\n    file_url = _req$body10.file_url,\n    description = _req$body10.description;\n  var _req$user19 = req.user,\n    companyId = _req$user19.companyId,\n    userId = _req$user19.userId;\n  var upload_date = new Date().toISOString();\n\n  // Input Validation for Document Upload\n  if (!title || typeof title !== 'string' || title.trim() === '') {\n    return res.status(400).json({\n      error: 'Document title is required and must be a non-empty string.'\n    });\n  }\n  if (!file_name || typeof file_name !== 'string' || file_name.trim() === '') {\n    return res.status(400).json({\n      error: 'File name is required and must be a non-empty string.'\n    });\n  }\n  if (!file_type || typeof file_type !== 'string' || file_type.trim() === '') {\n    return res.status(400).json({\n      error: 'File type is required and must be a non-empty string.'\n    });\n  }\n  // Basic URL validation: checks for http(s) protocol and some content. Can be more robust.\n  var urlRegex = /^https?:\\/\\/[^\\s$.?#].[^\\s]*$/i;\n  if (!file_url || typeof file_url !== 'string' || !urlRegex.test(file_url)) {\n    return res.status(400).json({\n      error: 'A valid file URL (starting with http or https) is required.'\n    });\n  }\n  if (description !== undefined && typeof description !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  db.run('INSERT INTO Documents (company_id, user_id, title, file_name, file_type, file_url, description, upload_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)', [companyId, userId, title, file_name, file_type, file_url, description, upload_date], function (err) {\n    if (err) {\n      console.error(\"Database error uploading document:\", err);\n      return next(new Error('Failed to upload document metadata.')); // Pass error\n    }\n    res.status(201).json({\n      message: 'Document metadata saved successfully!',\n      documentId: this.lastID\n    });\n  });\n});\n\n/**\r\n * GET /api/documents\r\n * Retrieves a list of documents for the company.\r\n * Filters can be added (e.g., by uploader, by type).\r\n * Requires authenticated user. Super admins can see all, others can see own documents.\r\n */\napp.get('/api/documents', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user20 = req.user,\n    companyId = _req$user20.companyId,\n    userId = _req$user20.userId,\n    role = _req$user20.role;\n  var sql = 'SELECT * FROM Documents WHERE company_id = ?';\n  var params = [companyId];\n\n  // Non-super-admins only see their own documents\n  if (role !== 'super_admin') {\n    sql += ' AND user_id = ?';\n    params.push(userId);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching documents:\", err);\n      return next(new Error('Database error fetching documents.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * DELETE /api/documents/:id\r\n * Deletes a document record.\r\n * Requires super_admin or the user who uploaded it.\r\n */\napp[\"delete\"]('/api/documents/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user21 = req.user,\n    companyId = _req$user21.companyId,\n    userId = _req$user21.userId,\n    role = _req$user21.role;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid document ID provided.'\n    });\n  }\n  var sql = 'DELETE FROM Documents WHERE document_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Only super_admin or the original uploader can delete\n  if (role !== 'super_admin') {\n    sql += ' AND user_id = ?';\n    params.push(userId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting document:\", err);\n      return next(new Error('Failed to delete document.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Document not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// Fallback for any other GET request not handled by an API route (serves index.html for SPA behavior)\n// This should always be the LAST route in your Express app\napp.get(/'*'/, function (req, res) {\n  // Correctly serve the index.html from the parent directory\n  res.sendFile(path.join(__dirname, '..', 'index.html'));\n});\n\n// --- Global Error Handling Middleware ---\n// This should be the very last middleware in your Express app\napp.use(function (err, req, res, next) {\n  console.error(\"Unhandled Error: \".concat(err.stack)); // Log the full stack trace for debugging\n  // Respond with a generic error message for the client\n  res.status(500).json({\n    error: 'An unexpected server error occurred. Please try again later.'\n    // In development, you might send more details:\n    // message: err.message,\n    // stack: process.env.NODE_ENV === 'development' ? err.stack : undefined\n  });\n});\n\n// --- Server Start ---\n// This conditional export allows the app to be imported for testing\n// without starting the server listener when the test runner requires it.\nif (require.main === module) {\n  // Only listen if this file is run directly (not required as a module)\n  app.listen(PORT, function () {\n    console.log(\"Server is running successfully on http://localhost:\".concat(PORT));\n  });\n} else {\n  // Export the app for testing purposes\n  module.exports = app;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiX2ludm9rZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsImV4cHJlc3MiLCJyZXF1aXJlIiwic3FsaXRlMyIsInZlcmJvc2UiLCJiY3J5cHQiLCJqd3QiLCJjb3JzIiwicGF0aCIsImNzdiIsIl9yZXF1aXJlIiwiUmVhZGFibGUiLCJyYXRlTGltaXQiLCJtb3JnYW4iLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJtYWluIiwibW9kdWxlIiwiY29uZmlnIiwic3RyaXBlSW5zdGFuY2UiLCJTVFJJUEVfU0VDUkVUX0tFWSIsImFwcCIsImFsbG93ZWRPcmlnaW5zIiwiQ09SU19PUklHSU4iLCJzcGxpdCIsInB1c2giLCJjb3JzT3B0aW9ucyIsIm9yaWdpbiIsImNhbGxiYWNrIiwiaW5jbHVkZXMiLCJtc2ciLCJFcnJvciIsImluZGV4T2YiLCJtZXRob2RzIiwiY3JlZGVudGlhbHMiLCJvcHRpb25zU3VjY2Vzc1N0YXR1cyIsInVzZSIsIlBPUlQiLCJTVFJJUEVfV0VCSE9PS19TRUNSRVQiLCJhdXRoTGltaXRlciIsIndpbmRvd01zIiwibWF4IiwibWVzc2FnZSIsInN0YW5kYXJkSGVhZGVycyIsImxlZ2FjeUhlYWRlcnMiLCJwb3N0IiwicmF3IiwidHlwZSIsIl9yZWYiLCJfY2FsbGVlIiwicmVxIiwicmVzIiwic2lnIiwiZXZlbnQiLCJzZXNzaW9uIiwidXNlcklkIiwicGxhbklkIiwic3Vic2NyaXB0aW9uVXBkYXRlZCIsInN1YnNjcmlwdGlvbkRlbGV0ZWQiLCJpbnZvaWNlU3VjY2VlZGVkIiwiaW52b2ljZUZhaWxlZCIsIl90IiwiX3QyIiwiX2NvbnRleHQiLCJoZWFkZXJzIiwid2ViaG9va3MiLCJjb25zdHJ1Y3RFdmVudCIsImJvZHkiLCJjb25zb2xlIiwiZXJyb3IiLCJjb25jYXQiLCJzdGF0dXMiLCJzZW5kIiwiZGF0YSIsIm9iamVjdCIsImxvZyIsImlkIiwibWV0YWRhdGEiLCJwYXltZW50X3N0YXR1cyIsImRiIiwicnVuIiwiY3VzdG9tZXIiLCJzdWJzY3JpcHRpb24iLCJlcnIiLCJwbGFuIiwianNvbiIsInJlY2VpdmVkIiwiX3giLCJfeDIiLCJKV1RfU0VDUkVUIiwiam9pbiIsIl9fZGlybmFtZSIsIm1heEFnZSIsImltbXV0YWJsZSIsIkRhdGFiYXNlIiwiZXhpdCIsImdldCIsInNlcmlhbGl6ZSIsImF1dGhlbnRpY2F0ZVRva2VuIiwibmV4dCIsImF1dGhIZWFkZXIiLCJ0b2tlbiIsInZlcmlmeSIsInVzZXIiLCJpc1ZhbGlkRW1haWwiLCJlbWFpbCIsInRlc3QiLCJfcmVmMiIsIl9jYWxsZWUyIiwiX3JlcSRib2R5IiwiY29tcGFueV9uYW1lIiwiZnVsbF9uYW1lIiwicGFzc3dvcmQiLCJwYXNzd29yZF9oYXNoIiwiX3QzIiwiX2NvbnRleHQyIiwidHJpbSIsImhhc2giLCJuZXdDb21wYW55SWQiLCJsYXN0SUQiLCJ1c2VySW5zZXJ0RXJyIiwiX3gzIiwiX3g0IiwiX3g1IiwiX3JlcSRib2R5MiIsIl9yZWYzIiwiX2NhbGxlZTMiLCJpc01hdGNoIiwicGF5bG9hZCIsIl9jb250ZXh0MyIsImNvbXBhcmUiLCJ1c2VyX2lkIiwicm9sZSIsImZ1bGxOYW1lIiwiY29tcGFueUlkIiwiY29tcGFueV9pZCIsImxvY2F0aW9uSWQiLCJsb2NhdGlvbl9pZCIsInN1YnNjcmlwdGlvblN0YXR1cyIsInN1YnNjcmlwdGlvbl9zdGF0dXMiLCJwbGFuX2lkIiwic2lnbiIsImV4cGlyZXNJbiIsIl94NiIsIl94NyIsIl9yZWY0IiwiX2NhbGxlZTQiLCJfcmVxJGJvZHkzIiwiX3JlcSR1c2VyIiwiX3Q0IiwiX2NvbnRleHQ0IiwibG9jYXRpb24iLCJfeDgiLCJfeDkiLCJfeDAiLCJfcmVmNSIsIl9jYWxsZWU1IiwiX3JlcSRib2R5NCIsInBvc2l0aW9uIiwiZW1wbG95ZWVfaWQiLCJfcmVxJHVzZXIyIiwiY3VycmVudFVzZXJMb2NhdGlvbklkIiwiaXNMb2NhdGlvbklkVmFsaWQiLCJsb2NhdGlvblZlcmlmaWNhdGlvbiIsIl90NSIsIl9jb250ZXh0NSIsImlzTmFOIiwidW5kZWZpbmVkIiwicmVqZWN0IiwiX3gxIiwiX3gxMCIsIl94MTEiLCJfcmVxJHVzZXIzIiwicHV0IiwiX3JlZjYiLCJfY2FsbGVlNyIsIl9yZXEkYm9keTUiLCJjdXJyZW50UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsIl9jb250ZXh0NyIsIl9yZWY3IiwiX2NhbGxlZTYiLCJ1cGRhdGVTcWwiLCJ1cGRhdGVQYXJhbXMiLCJjbGF1c2VzIiwiY2hhbmdlc01hZGUiLCJleGlzdGluZ1VzZXIiLCJuZXdQYXNzd29yZEhhc2giLCJfdDYiLCJfY29udGV4dDYiLCJyb3ciLCJ1cGRhdGVFcnIiLCJjaGFuZ2VzIiwiZmV0Y2hFcnIiLCJ1cGRhdGVkVXNlciIsIm5ld1BheWxvYWQiLCJuZXdUb2tlbiIsIl94MTUiLCJfeDE2IiwiX3gxMiIsIl94MTMiLCJfeDE0IiwiX3JlcSR1c2VyNCIsInNxbCIsInBhcmFtcyIsImFsbCIsInJvd3MiLCJfcmVxJGJvZHk2IiwibG9jYXRpb25fbmFtZSIsImxvY2F0aW9uX2FkZHJlc3MiLCJfcmVxJHVzZXI1IiwiX3JlcSR1c2VyNiIsInBhcnNlSW50IiwiX3JlcSR1c2VyNyIsImN1cnJlbnRVc2VySWQiLCJfcmVxJHF1ZXJ5IiwicXVlcnkiLCJmaWx0ZXJSb2xlIiwiZmlsdGVyTG9jYXRpb25JZCIsImFsbG93ZWRSb2xlcyIsIl9yZXEkdXNlcjgiLCJhdXRoZW50aWNhdGVkVXNlcklkIiwiX3JlZjgiLCJfY2FsbGVlOCIsIl9yZXEkdXNlcjkiLCJhbGxvd2VkUGxhbklkcyIsInByaWNlSWRNYXAiLCJzdHJpcGVQcmljZUlkIiwiY3VzdG9tZXJJZCIsInVzZXJSZWNvcmQiLCJfdDciLCJfY29udGV4dDgiLCJTVFJJUEVfUFJJQ0VfSURfUFJPIiwiU1RSSVBFX1BSSUNFX0lEX0VOVCIsInN0cmlwZV9jdXN0b21lcl9pZCIsImN1c3RvbWVycyIsImNoZWNrb3V0Iiwic2Vzc2lvbnMiLCJtb2RlIiwibGluZV9pdGVtcyIsInByaWNlIiwicXVhbnRpdHkiLCJzdWNjZXNzX3VybCIsIkZST05URU5EX1VSTCIsImNhbmNlbF91cmwiLCJ1cmwiLCJfeDE3IiwiX3gxOCIsIl94MTkiLCJfcmVxJGJvZHk3Iiwic3RhcnRfdGltZSIsImVuZF90aW1lIiwibm90ZXMiLCJfcmVxJHVzZXIwIiwiRGF0ZSIsImdldFRpbWUiLCJlbXBsb3llZSIsImluc2VydEVyciIsInNjaGVkdWxlSWQiLCJfcmVxJHF1ZXJ5MiIsInN0YXJ0X2RhdGUiLCJlbmRfZGF0ZSIsIl9yZXEkdXNlcjEiLCJfcmVxJHVzZXIxMCIsIl9yZXEkYm9keTgiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicmVxdWlyZW1lbnRzIiwiX3JlcSR1c2VyMTEiLCJjcmVhdGVkX2RhdGUiLCJ0b0lTT1N0cmluZyIsIl9yZXEkcXVlcnkzIiwiX3JlcSR1c2VyMTIiLCJhbGxvd2VkU3RhdHVzZXMiLCJfcmVxJGJvZHk5IiwiX3JlcSR1c2VyMTMiLCJfcmVxJHVzZXIxNCIsIl9yZXEkYm9keTAiLCJqb2JfcG9zdGluZ19pZCIsInBob25lX251bWJlciIsIl9yZXEkdXNlcjE1IiwiYXBwbGljYXRpb25fZGF0ZSIsImpvYlBvc3RpbmciLCJhcHBsaWNhbnRJZCIsIl9yZXEkcXVlcnk0IiwiX3JlcSR1c2VyMTYiLCJfcmVxJGJvZHkxIiwicmVzdW1lX3VybCIsIl9yZXEkdXNlcjE3Iiwiam9iIiwiX3JlcSR1c2VyMTgiLCJfcmVxJGJvZHkxMCIsImZpbGVfbmFtZSIsImZpbGVfdHlwZSIsImZpbGVfdXJsIiwiX3JlcSR1c2VyMTkiLCJ1cGxvYWRfZGF0ZSIsInVybFJlZ2V4IiwiZG9jdW1lbnRJZCIsIl9yZXEkdXNlcjIwIiwiX3JlcSR1c2VyMjEiLCJzZW5kRmlsZSIsInN0YWNrIiwibGlzdGVuIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFx4YXJjeVxcT25lRHJpdmVcXERlc2t0b3BcXG9uYm9hcmRmbG93XFxiYWNrZW5kXFx0ZXN0XFwiLCJzb3VyY2VzIjpbInNlcnZlci50ZXN0LmNqcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAtLS0gSW1wb3J0cyAtLS1cclxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3Qgc3FsaXRlMyA9IHJlcXVpcmUoJ3NxbGl0ZTMnKS52ZXJib3NlKCk7XHJcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7XHJcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xyXG5jb25zdCBjb3JzID0gcmVxdWlyZSgnY29ycycpOyAvLyBJbXBvcnQgY29yc1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5jb25zdCBjc3YgPSByZXF1aXJlKCdjc3YtcGFyc2VyJyk7IC8vIEZvciBDU1YgcGFyc2luZ1xyXG5jb25zdCB7IFJlYWRhYmxlIH0gPSByZXF1aXJlKCdzdHJlYW0nKTsgLy8gRm9yIGNyZWF0aW5nIGEgcmVhZGFibGUgc3RyZWFtIGZyb20gYSBzdHJpbmdcclxuY29uc3QgcmF0ZUxpbWl0ID0gcmVxdWlyZSgnZXhwcmVzcy1yYXRlLWxpbWl0Jyk7IC8vIEltcG9ydCByYXRlLWxpbWl0aW5nIG1pZGRsZXdhcmVcclxuY29uc3QgbW9yZ2FuID0gcmVxdWlyZSgnbW9yZ2FuJyk7IC8vIEltcG9ydCBtb3JnYW4gZm9yIHJlcXVlc3QgbG9nZ2luZ1xyXG5cclxuLy8gTG9hZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZnJvbSAuZW52IGZpbGUgaW4gZGV2ZWxvcG1lbnRcclxuLy8gSU1QT1JUQU5UOiBPbmx5IGxvYWQgLmVudiBpZiBzZXJ2ZXIuanMgaXMgcnVuIGRpcmVjdGx5LCBOT1Qgd2hlbiByZXF1aXJlZCBieSB0ZXN0cy5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgcmVxdWlyZS5tYWluID09PSBtb2R1bGUpIHtcclxuICAgIHJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xyXG59XHJcblxyXG4vLyBJbXBvcnQgdGhlIFN0cmlwZSBsaWJyYXJ5IGFuZCBpbml0aWFsaXplIGl0IHdpdGggeW91ciBzZWNyZXQga2V5XHJcbi8vIFVzZSBwcm9jZXNzLmVudi5TVFJJUEVfU0VDUkVUX0tFWSBmb3IgcHJvZHVjdGlvblxyXG5jb25zdCBzdHJpcGVJbnN0YW5jZSA9IHJlcXVpcmUoJ3N0cmlwZScpKHByb2Nlc3MuZW52LlNUUklQRV9TRUNSRVRfS0VZIHx8ICdza19saXZlXzUxUmE0UkpHMDZOSHJ3c1k5dVpySHBXeVRySm0yMXFlaDNXV0VDVXVwWDR6VTZiTmJqYTE1aEhFeDZOTGxEOWY3WXZ5YTZCNkI2OU5JSEF0VG1UZjhRT0g1MDBsOFo3enJIWScpO1xyXG5cclxuLy8gLS0tIEFwcCBJbml0aWFsaXphdGlvbiAtLS1cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuLy8gQ29uZmlndXJlIENPUlMgZm9yIHByb2R1Y3Rpb24gZW52aXJvbm1lbnRcclxuY29uc3QgYWxsb3dlZE9yaWdpbnMgPSBwcm9jZXNzLmVudi5DT1JTX09SSUdJTiA/IHByb2Nlc3MuZW52LkNPUlNfT1JJR0lOLnNwbGl0KCcsJykgOiBbJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCddOyAvLyBEZWZhdWx0IHRvIGxvY2FsaG9zdCBmb3IgZGV2ZWxvcG1lbnRcclxuXHJcbi8vIEFkZCAnbnVsbCcgdG8gYWxsb3dlZCBvcmlnaW5zIGlmIG5vdCBpbiBwcm9kdWN0aW9uIGFuZCBub3QgZXhwbGljaXRseSBzZXQgZm9yIGxvY2FsIGZpbGUgYWNjZXNzXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFwcm9jZXNzLmVudi5DT1JTX09SSUdJTikge1xyXG4gICAgYWxsb3dlZE9yaWdpbnMucHVzaCgnbnVsbCcpO1xyXG59XHJcblxyXG5jb25zdCBjb3JzT3B0aW9ucyA9IHtcclxuICAgIG9yaWdpbjogZnVuY3Rpb24gKG9yaWdpbiwgY2FsbGJhY2spIHtcclxuICAgICAgICAvLyBBbGxvdyByZXF1ZXN0cyB3aXRoIG5vIG9yaWdpbiAobGlrZSBtb2JpbGUgYXBwcywgY3VybCwgb3IgbG9jYWwgZmlsZSBhY2Nlc3MgaWYgJ251bGwnIGlzIGluIGFsbG93ZWRPcmlnaW5zKVxyXG4gICAgICAgIGlmICghb3JpZ2luKSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmICdudWxsJyBpcyBleHBsaWNpdGx5IGFsbG93ZWQgb3IgaWYgd2UncmUgaW4gZGV2IGFuZCBubyBDT1JTX09SSUdJTiBpcyBzZXRcclxuICAgICAgICAgICAgaWYgKGFsbG93ZWRPcmlnaW5zLmluY2x1ZGVzKCdudWxsJykgfHwgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXByb2Nlc3MuZW52LkNPUlNfT1JJR0lOKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9ICdUaGUgQ09SUyBwb2xpY3kgZm9yIHRoaXMgc2l0ZSBkb2VzIG5vdCBhbGxvdyBhY2Nlc3MgZnJvbSB0aGUgc3BlY2lmaWVkIE9yaWdpbi4nO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKG1zZyksIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhbGxvd2VkT3JpZ2lucy5pbmRleE9mKG9yaWdpbikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9ICdUaGUgQ09SUyBwb2xpY3kgZm9yIHRoaXMgc2l0ZSBkb2VzIG5vdCBhbGxvdyBhY2Nlc3MgZnJvbSB0aGUgc3BlY2lmaWVkIE9yaWdpbi4nO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKG1zZyksIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRydWUpO1xyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6ICdHRVQsSEVBRCxQVVQsUEFUQ0gsUE9TVCxERUxFVEUnLFxyXG4gICAgY3JlZGVudGlhbHM6IHRydWUsIC8vIEFsbG93IGNvb2tpZXMgdG8gYmUgc2VudFxyXG4gICAgb3B0aW9uc1N1Y2Nlc3NTdGF0dXM6IDIwNCAvLyBTb21lIGxlZ2FjeSBicm93c2VycyAoSUUxMSwgdmFyaW91cyBTbWFydFRWcykgY2hva2Ugb24gMjA0XHJcbn07XHJcbmFwcC51c2UoY29ycyhjb3JzT3B0aW9ucykpO1xyXG5cclxuXHJcbi8vIFVzZSBwcm9jZXNzLmVudi5QT1JUIGZvciBwcm9kdWN0aW9uLCBmYWxsYmFjayB0byAzMDAwIGZvciBsb2NhbCBkZXZlbG9wbWVudFxyXG5jb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwO1xyXG5cclxuLy8gRGVmaW5lIGEgd2ViaG9vayBzZWNyZXQgZm9yIFN0cmlwZS4gVGhpcyBzaG91bGQgYWxzbyBiZSBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZS5cclxuY29uc3QgU1RSSVBFX1dFQkhPT0tfU0VDUkVUID0gcHJvY2Vzcy5lbnYuU1RSSVBFX1dFQkhPT0tfU0VDUkVUIHx8ICd3aHNlY19ZT1VSX1dFQkhPT0tfU0VDUkVUJztcclxuXHJcbi8vIC0tLSBSYXRlIExpbWl0aW5nIENvbmZpZ3VyYXRpb24gLS0tXHJcbmNvbnN0IGF1dGhMaW1pdGVyID0gcmF0ZUxpbWl0KHtcclxuICAgIHdpbmRvd01zOiAxNSAqIDYwICogMTAwMCwgLy8gMTUgbWludXRlc1xyXG4gICAgbWF4OiAxMCwgLy8gTWF4IDEwIHJlcXVlc3RzIHBlciAxNSBtaW51dGVzIHBlciBJUFxyXG4gICAgbWVzc2FnZTogJ1RvbyBtYW55IGxvZ2luL3JlZ2lzdHJhdGlvbiBhdHRlbXB0cyBmcm9tIHRoaXMgSVAsIHBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgMTUgbWludXRlcycsXHJcbiAgICBzdGFuZGFyZEhlYWRlcnM6IHRydWUsIC8vIFJldHVybiByYXRlIGxpbWl0IGluZm8gaW4gdGhlIGBSYXRlTGltaXQtKmAgaGVhZGVyc1xyXG4gICAgbGVnYWN5SGVhZGVyczogZmFsc2UsIC8vIERpc2FibGUgdGhlIGBYLVJhdGVMaW1pdC0qYCBoZWFkZXJzXHJcbn0pO1xyXG5cclxuLy8gLS0tIE1pZGRsZXdhcmUgZm9yIFN0cmlwZSBXZWJob29rIChNVVNUIGJlIGJlZm9yZSBleHByZXNzLmpzb24oKSBmb3Igb3RoZXIgcm91dGVzKSAtLVxyXG4vLyBUaGlzIHJvdXRlIG5lZWRzIHRoZSByYXcgYm9keSBmb3Igc2lnbmF0dXJlIHZlcmlmaWNhdGlvbi5cclxuYXBwLnBvc3QoJy9hcGkvc3RyaXBlLXdlYmhvb2snLCBleHByZXNzLnJhdyh7dHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nfSksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgc2lnID0gcmVxLmhlYWRlcnNbJ3N0cmlwZS1zaWduYXR1cmUnXTtcclxuXHJcbiAgICBsZXQgZXZlbnQ7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBldmVudCA9IHN0cmlwZUluc3RhbmNlLndlYmhvb2tzLmNvbnN0cnVjdEV2ZW50KHJlcS5ib2R5LCBzaWcsIFNUUklQRV9XRUJIT09LX1NFQ1JFVCk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBXZWJob29rIEVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChgV2ViaG9vayBFcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBIYW5kbGUgdGhlIGV2ZW50XHJcbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcclxuICAgICAgICBjYXNlICdjaGVja291dC5zZXNzaW9uLmNvbXBsZXRlZCc6XHJcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBldmVudC5kYXRhLm9iamVjdDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NoZWNrb3V0IFNlc3Npb24gQ29tcGxldGVkOicsIHNlc3Npb24uaWQpO1xyXG4gICAgICAgICAgICBjb25zdCB1c2VySWQgPSBzZXNzaW9uLm1ldGFkYXRhLnVzZXJJZDtcclxuICAgICAgICAgICAgY29uc3QgcGxhbklkID0gc2Vzc2lvbi5tZXRhZGF0YS5wbGFuSWQ7XHJcbiAgICAgICAgICAgIGlmIChzZXNzaW9uLnBheW1lbnRfc3RhdHVzID09PSAncGFpZCcgJiYgdXNlcklkICYmIHBsYW5JZCkge1xyXG4gICAgICAgICAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAgICAgICAgICdVUERBVEUgVXNlcnMgU0VUIHN0cmlwZV9jdXN0b21lcl9pZCA9ID8sIHN0cmlwZV9zdWJzY3JpcHRpb25faWQgPSA/LCBzdWJzY3JpcHRpb25fc3RhdHVzID0gPywgcGxhbl9pZCA9ID8gV0hFUkUgdXNlcl9pZCA9ID8nLFxyXG4gICAgICAgICAgICAgICAgICAgIFtzZXNzaW9uLmN1c3RvbWVyLCBzZXNzaW9uLnN1YnNjcmlwdGlvbiwgJ2FjdGl2ZScsIHBsYW5JZCwgdXNlcklkXSxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgY29uc29sZS5lcnJvcignRGF0YWJhc2UgdXBkYXRlIGVycm9yIGZvciBjaGVja291dC5zZXNzaW9uLmNvbXBsZXRlZDonLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgY29uc29sZS5sb2coYFVzZXIgJHt1c2VySWR9IHN1YnNjcmlwdGlvbiB1cGRhdGVkIHRvICR7cGxhbklkfSAoYWN0aXZlKS5gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2N1c3RvbWVyLnN1YnNjcmlwdGlvbi51cGRhdGVkJzpcclxuICAgICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uVXBkYXRlZCA9IGV2ZW50LmRhdGEub2JqZWN0O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU3Vic2NyaXB0aW9uIFVwZGF0ZWQ6Jywgc3Vic2NyaXB0aW9uVXBkYXRlZC5pZCk7XHJcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25VcGRhdGVkLmN1c3RvbWVyICYmIHN1YnNjcmlwdGlvblVwZGF0ZWQuc3RhdHVzICYmIHN1YnNjcmlwdGlvblVwZGF0ZWQucGxhbiAmJiBzdWJzY3JpcHRpb25VcGRhdGVkLnBsYW4uaWQpIHtcclxuICAgICAgICAgICAgICAgIGRiLnJ1bihcclxuICAgICAgICAgICAgICAgICAgICAnVVBEQVRFIFVzZXJzIFNFVCBzdWJzY3JpcHRpb25fc3RhdHVzID0gPywgcGxhbl9pZCA9ID8gV0hFUkUgc3RyaXBlX2N1c3RvbWVyX2lkID0gPycsXHJcbiAgICAgICAgICAgICAgICAgICAgW3N1YnNjcmlwdGlvblVwZGF0ZWQuc3RhdHVzLCBzdWJzY3JpcHRpb25VcGRhdGVkLnBsYW4uaWQsIHN1YnNjcmlwdGlvblVwZGF0ZWQuY3VzdG9tZXJdLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSB1cGRhdGUgZXJyb3IgZm9yIGN1c3RvbWVyLnN1YnNjcmlwdGlvbi51cGRhdGVkOicsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBjb25zb2xlLmxvZyhgU3Vic2NyaXB0aW9uIGZvciBjdXN0b21lciAke3N1YnNjcmlwdGlvblVwZGF0ZWQuY3VzdG9tZXJ9IHN0YXR1cyB1cGRhdGVkIHRvICR7c3Vic2NyaXB0aW9uVXBkYXRlZC5zdGF0dXN9IGFuZCBwbGFuIHRvICR7c3Vic2NyaXB0aW9uVXBkYXRlZC5wbGFuLmlkfS5gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2N1c3RvbWVyLnN1YnNjcmlwdGlvbi5kZWxldGVkJzpcclxuICAgICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uRGVsZXRlZCA9IGV2ZW50LmRhdGEub2JqZWN0O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU3Vic2NyaXB0aW9uIERlbGV0ZWQ6Jywgc3Vic2NyaXB0aW9uRGVsZXRlZC5pZCk7XHJcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25EZWxldGVkLmN1c3RvbWVyKSB7XHJcbiAgICAgICAgICAgICAgICBkYi5ydW4oXHJcbiAgICAgICAgICAgICAgICAgICAgJ1VQREFURSBVc2VycyBTRVQgc3Vic2NyaXB0aW9uX3N0YXR1cyA9ID8sIHBsYW5faWQgPSA/LCBzdHJpcGVfc3Vic2NyaXB0aW9uX2lkID0gTlVMTCBXSEVSRSBzdHJpcGVfY3VzdG9tZXJfaWQgPSA/JyxcclxuICAgICAgICAgICAgICAgICAgICBbJ2NhbmNlbGxlZCcsICdmcmVlJywgc3Vic2NyaXB0aW9uRGVsZXRlZC5jdXN0b21lcl0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIHVwZGF0ZSBlcnJvciBmb3IgY3VzdG9tZXIuc3Vic2NyaXB0aW9uLmRlbGV0ZWQ6JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGNvbnNvbGUubG9nKGBTdWJzY3JpcHRpb24gZm9yIGN1c3RvbWVyICR7c3Vic2NyaXB0aW9uRGVsZXRlZC5jdXN0b21lcn0gbWFya2VkIGFzIGNhbmNlbGxlZCBhbmQgcmV2ZXJ0ZWQgdG8gZnJlZS5gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2ludm9pY2UucGF5bWVudF9zdWNjZWVkZWQnOlxyXG4gICAgICAgICAgICBjb25zdCBpbnZvaWNlU3VjY2VlZGVkID0gZXZlbnQuZGF0YS5vYmplY3Q7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbnZvaWNlIFBheW1lbnQgU3VjY2VlZGVkOicsIGludm9pY2VTdWNjZWVkZWQuaWQpO1xyXG4gICAgICAgICAgICBpZiAoaW52b2ljZVN1Y2NlZWRlZC5zdWJzY3JpcHRpb24gJiYgaW52b2ljZVN1Y2NlZWRlZC5jdXN0b21lcikge1xyXG4gICAgICAgICAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAgICAgICAgICdVUERBVEUgVXNlcnMgU0VUIHN1YnNjcmlwdGlvbl9zdGF0dXMgPSA/IFdIRVJFIHN0cmlwZV9zdWJzY3JpcHRpb25faWQgPSA/IEFORCBzdHJpcGVfY3VzdG9tZXJfaWQgPSA/JyxcclxuICAgICAgICAgICAgICAgICAgICBbJ2FjdGl2ZScsIGludm9pY2VTdWNjZWVkZWQuc3Vic2NyaXB0aW9uLCBpbnZvaWNlU3VjY2VlZGVkLmN1c3RvbWVyXSxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgY29uc29sZS5lcnJvcignRGF0YWJhc2UgdXBkYXRlIGVycm9yIGZvciBpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkOicsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBjb25zb2xlLmxvZyhgU3Vic2NyaXB0aW9uICR7aW52b2ljZVN1Y2NlZWRlZC5zdWJzY3JpcHRpb259IHN0YXR1cyBzZXQgdG8gYWN0aXZlLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnaW52b2ljZS5wYXltZW50X2ZhaWxlZCc6XHJcbiAgICAgICAgICAgIGNvbnN0IGludm9pY2VGYWlsZWQgPSBldmVudC5kYXRhLm9iamVjdDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ludm9pY2UgUGF5bWVudCBGYWlsZWQ6JywgaW52b2ljZUZhaWxlZC5pZCk7XHJcbiAgICAgICAgICAgIGlmIChpbnZvaWNlRmFpbGVkLnN1YnNjcmlwdGlvbiAmJiBpbnZvaWNlRmFpbGVkLmN1c3RvbWVyKSB7XHJcbiAgICAgICAgICAgICAgICBkYi5ydW4oXHJcbiAgICAgICAgICAgICAgICAgICAgJ1VQREFURSBVc2VycyBTRVQgc3Vic2NyaXB0aW9uX3N0YXR1cyA9ID8gV0hFUkUgc3RyaXBlX3N1YnNjcmlwdGlvbl9pZCA9ID8gQU5EIHN0cmlwZV9jdXN0b21lcl9pZCA9ID8nLFxyXG4gICAgICAgICAgICAgICAgICAgIFsncGFzdF9kdWUnLCBpbnZvaWNlRmFpbGVkLnN1YnNjcmlwdGlvbiwgaW52b2ljZUZhaWxlZC5jdXN0b21lcl0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIHVwZGF0ZSBlcnJvciBmb3IgaW52b2ljZS5wYXltZW50X2ZhaWxlZDonLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgY29uc29sZS5sb2coYFN1YnNjcmlwdGlvbiAke2ludm9pY2VGYWlsZWQuc3Vic2NyaXB0aW9ufSBzdGF0dXMgc2V0IHRvIHBhc3RfZHVlLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFVuaGFuZGxlZCBldmVudCB0eXBlICR7ZXZlbnQudHlwZX1gKTtcclxuICAgIH1cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcmVjZWl2ZWQ6IHRydWUgfSk7XHJcbn0pO1xyXG5cclxuLy8gSU1QT1JUQU5UOiBleHByZXNzLmpzb24oKSBmb3IgcGFyc2luZyBKU09OIHJlcXVlc3QgYm9kaWVzIE1VU1QgY29tZSBBRlRFUiB0aGUgd2ViaG9vayByb3V0ZVxyXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcclxuXHJcbi8vIC0tLSBKV1QgU2VjcmV0IC0tLVxyXG4vLyBDUlVDSUFMIEZPUiBURVNUSU5HOiBEaXJlY3RseSBhY2Nlc3MgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB3aXRob3V0IGZhbGxiYWNrLlxyXG4vLyBUaGlzIGVuc3VyZXMgdGVzdHMgY29udHJvbCB0aGUgc2VjcmV0IHVzZWQgYnkgdGhlIGFwcCBpbnN0YW5jZS5cclxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQ7IC8vIEVuc3VyZSBpdCAqbXVzdCogY29tZSBmcm9tIHByb2Nlc3MuZW52XHJcblxyXG4vLyAtLS0gUmVxdWVzdCBMb2dnaW5nICh1c2luZyBNb3JnYW4pIC0tLVxyXG4vLyAnZGV2JyBmb3JtYXQgaXMgZ29vZCBmb3IgZGV2ZWxvcG1lbnQsICdjb21iaW5lZCcgb3IgJ3RpbnknIGZvciBwcm9kdWN0aW9uIGxvZ3NcclxuYXBwLnVzZShtb3JnYW4oJ2RldicpKTtcclxuXHJcbi8vIC0tLSBTZXJ2ZSBTdGF0aWMgRmlsZXMgKEZyb250ZW5kKSB3aXRoIENhY2hpbmcgLS0tXHJcbi8vIFRoaXMgbWlkZGxld2FyZSBzZXJ2ZXMgc3RhdGljIGZpbGVzIGZyb20gdGhlICdvbmJvYXJkZmxvdycgcm9vdCBkaXJlY3RvcnlcclxuLy8gYW5kIHNldHMgQ2FjaGUtQ29udHJvbCBoZWFkZXJzIGZvciBicm93c2VyIGNhY2hpbmcuXHJcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJyksIHtcclxuICAgIG1heEFnZTogJzdkJywgLy8gQ2FjaGUgc3RhdGljIGFzc2V0cyBmb3IgNyBkYXlzIChlLmcuLCBDU1MsIEpTLCBpbWFnZXMsIGZhdmljb24pXHJcbiAgICBpbW11dGFibGU6IGZhbHNlIC8vIFNldCB0byB0cnVlIGlmIGFzc2V0IGZpbGVuYW1lcyBpbmNsdWRlIGNvbnRlbnQgaGFzaGVzIChlLmcuLCBhcHAubWluLmpzP3Y9aGFzaClcclxufSkpO1xyXG5cclxuLy8gLS0tIERhdGFiYXNlIFNldHVwIC0tLVxyXG5jb25zdCBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlKCcuL29uYm9hcmRmbG93LmRiJywgKGVycikgPT4ge1xyXG4gICAgaWYgKGVycikge1xyXG4gICAgICAgIC8vIExvZyBkYXRhYmFzZSBjb25uZWN0aW9uIGVycm9yIGFuZCBleGl0XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9wZW5pbmcgZGF0YWJhc2U6XCIsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7IC8vIEV4aXQgcHJvY2VzcyBpZiBkYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxzXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byB0aGUgZGF0YWJhc2UuXCIpO1xyXG4gICAgICAgIGRiLmdldChcIlBSQUdNQSBmb3JlaWduX2tleXMgPSBPTlwiKTtcclxuICAgICAgICBkYi5zZXJpYWxpemUoKCkgPT4ge1xyXG4gICAgICAgICAgICBkYi5ydW4oYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIENvbXBhbmllcyAoY29tcGFueV9pZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsIGNvbXBhbnlfbmFtZSBURVhUIE5PVCBOVUxMIFVOSVFVRSlgKTtcclxuICAgICAgICAgICAgZGIucnVuKGBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBMb2NhdGlvbnMgKGxvY2F0aW9uX2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCwgY29tcGFueV9pZCBJTlRFR0VSLCBsb2NhdGlvbl9uYW1lIFRFWFQgTk9UIE5VTEwsIGxvY2F0aW9uX2FkZHJlc3MgVEVYVCBOT1QgTlVMTCwgRk9SRUlHTiBLRVkgKGNvbXBhbnlfaWQpIFJFRkVSRU5DRVMgQ29tcGFuaWVzKGNvbXBhbnlfaWQpIE9OIERFTEVURSBDQVNDQURFKWApO1xyXG4gICAgICAgICAgICBkYi5ydW4oYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFVzZXJzIChcclxuICAgICAgICAgICAgICAgIHVzZXJfaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxyXG4gICAgICAgICAgICAgICAgY29tcGFueV9pZCBJTlRFR0VSLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25faWQgSU5URUdFUixcclxuICAgICAgICAgICAgICAgIGZ1bGxfbmFtZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgZW1haWwgVEVYVCBOT1QgTlVMTCBVTklRVUUsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZF9oYXNoIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiBURVhULFxyXG4gICAgICAgICAgICAgICAgZW1wbG95ZWVfaWQgVEVYVCxcclxuICAgICAgICAgICAgICAgIHJvbGUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIHN0cmlwZV9jdXN0b21lcl9pZCBURVhULFxyXG4gICAgICAgICAgICAgICAgc3RyaXBlX3N1YnNjcmlwdGlvbl9pZCBURVhULFxyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uX3N0YXR1cyBURVhULFxyXG4gICAgICAgICAgICAgICAgcGxhbl9pZCBURVhULFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGNvbXBhbnlfaWQpIFJFRkVSRU5DRVMgQ29tcGFuaWVzKGNvbXBhbnlfaWQpIE9OIERFTEVURSBDQVNDQURFLFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGxvY2F0aW9uX2lkKSBSRUZFUkVOQ0VTIExvY2F0aW9ucyhsb2NhdGlvbl9pZCkgT04gREVMRVRFIENBU0NBREVcclxuICAgICAgICAgICAgKWApO1xyXG4gICAgICAgICAgICBkYi5ydW4oYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFNjaGVkdWxlcyAoXHJcbiAgICAgICAgICAgICAgICBzY2hlZHVsZV9pZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXHJcbiAgICAgICAgICAgICAgICBlbXBsb3llZV9pZCBJTlRFR0VSIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25faWQgSU5URUdFUiBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGVuZF90aW1lIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBub3RlcyBURVhULFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGVtcGxveWVlX2lkKSBSRUZFUkVOQ0VTIFVzZXJzKHVzZXJfaWQpIE9OIERFTEVURSBDQVNDQURFLFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGxvY2F0aW9uX2lkKSBSRUZFUkVOQ0VTIExvY2F0aW9ucyhsb2NhdGlvbl9pZCkgT04gREVMRVRFIENBU0NBREVcclxuICAgICAgICAgICAgKWApO1xyXG4gICAgICAgICAgICAvLyBORVc6IENyZWF0ZSBKb2JQb3N0aW5ncyB0YWJsZVxyXG4gICAgICAgICAgICBkYi5ydW4oYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIEpvYlBvc3RpbmdzIChcclxuICAgICAgICAgICAgICAgIGpvYl9wb3N0aW5nX2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcclxuICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQgSU5URUdFUiBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkIElOVEVHRVIsIC0tIE9wdGlvbmFsOiBsaW5rIGpvYiBwb3N0aW5nIHRvIGEgc3BlY2lmaWMgbG9jYXRpb25cclxuICAgICAgICAgICAgICAgIHRpdGxlIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZW1lbnRzIFRFWFQsIC0tIE9wdGlvbmFsOiBqb2IgcmVxdWlyZW1lbnRzXHJcbiAgICAgICAgICAgICAgICBzdGF0dXMgVEVYVCBOT1QgTlVMTCBERUZBVUxUICdPcGVuJywgLS0gZS5nLiwgJ09wZW4nLCAnQ2xvc2VkJywgJ0ZpbGxlZCdcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfZGF0ZSBURVhUIE5PVCBOVUxMLCAtLSBJU08gODYwMSBmb3JtYXRcclxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZIChjb21wYW55X2lkKSBSRUZFUkVOQ0VTIENvbXBhbmllcyhjb21wYW55X2lkKSBPTiBERUxFVEUgQ0FTQ0FERSxcclxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZIChsb2NhdGlvbl9pZCkgUkVGRVJFTkNFUyBMb2NhdGlvbnMobG9jYXRpb25faWQpIE9OIERFTEVURSBDQVNDQURFXHJcbiAgICAgICAgICAgIClgKTtcclxuICAgICAgICAgICAgLy8gVXBkYXRlIEFwcGxpY2FudHMgdGFibGUgc2NoZW1hIHRvIGxpbmsgdG8gSm9iUG9zdGluZ3MgYW5kIGFkZCBwaG9uZV9udW1iZXJcclxuICAgICAgICAgICAgZGIucnVuKGBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBBcHBsaWNhbnRzIChcclxuICAgICAgICAgICAgICAgIGFwcGxpY2FudF9pZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXHJcbiAgICAgICAgICAgICAgICBjb21wYW55X2lkIElOVEVHRVIgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbl9pZCBJTlRFR0VSLCAtLSBPcHRpb25hbDogYXBwbGljYW50J3MgcHJlZmVycmVkIGxvY2F0aW9uIG9yIGxvY2F0aW9uIGFwcGxpZWQgZm9yXHJcbiAgICAgICAgICAgICAgICBqb2JfcG9zdGluZ19pZCBJTlRFR0VSLCAtLSBORVc6IExpbmsgdG8gSm9iUG9zdGluZ3MgdGFibGVcclxuICAgICAgICAgICAgICAgIGZ1bGxfbmFtZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgZW1haWwgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIHBob25lX251bWJlciBURVhULCAtLSBORVc6IFBob25lIG51bWJlciBmaWVsZFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzIFRFWFQgTk9UIE5VTEwgREVGQVVMVCAnQXBwbGllZCcsIC0tIGUuZy4sICdBcHBsaWVkJywgJ0ludGVydmlld2luZycsICdSZWplY3RlZCcsICdIaXJlZCdcclxuICAgICAgICAgICAgICAgIHJlc3VtZV91cmwgVEVYVCwgLS0gT3B0aW9uYWw6IFVSTCB0byBhIHJlc3VtZSBkb2N1bWVudCAoZS5nLiwgaG9zdGVkIG9uIGNsb3VkIHN0b3JhZ2UpXHJcbiAgICAgICAgICAgICAgICBub3RlcyBURVhULFxyXG4gICAgICAgICAgICAgICAgYXBwbGljYXRpb25fZGF0ZSBURVhUIE5PVCBOVUxMLCAtLSBJU08gODYwMSBmb3JtYXRcclxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZIChjb21wYW55X2lkKSBSRUZFUkVOQ0VTIENvbXBhbmllcyhjb21wYW55X2lkKSBPTiBERUxFVEUgQ0FTQ0FERSxcclxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZIChsb2NhdGlvbl9pZCkgUkVGRVJFTkNFUyBMb2NhdGlvbnMobG9jYXRpb25faWQpIE9OIERFTEVURSBDQVNDQURFLFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGpvYl9wb3N0aW5nX2lkKSBSRUZFUkVOQ0VTIEpvYlBvc3RpbmdzKGpvYl9wb3N0aW5nX2lkKSBPTiBERUxFVEUgU0VUIE5VTEwgLS0gSWYgam9iIHBvc3RpbmcgaXMgZGVsZXRlZCwgc2V0IHRoaXMgdG8gTlVMTFxyXG4gICAgICAgICAgICApYCk7XHJcbiAgICAgICAgICAgIC8vIE5FVzogQ3JlYXRlIERvY3VtZW50cyB0YWJsZSBmb3IgZmlsZS92aWRlbyB1cGxvYWRzXHJcbiAgICAgICAgICAgIGRiLnJ1bihgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgRG9jdW1lbnRzIChcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50X2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcclxuICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQgSU5URUdFUiBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIHVzZXJfaWQgSU5URUdFUiBOT1QgTlVMTCwgLS0gVXNlciB3aG8gdXBsb2FkZWQgdGhlIGRvY3VtZW50XHJcbiAgICAgICAgICAgICAgICB0aXRsZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgZmlsZV9uYW1lIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBmaWxlX3R5cGUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGZpbGVfdXJsIFRFWFQgTk9UIE5VTEwsIC0tIFVSTCB0byB0aGUgc3RvcmVkIGZpbGUgKGUuZy4sIFMzLCBHQ1MpXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiBURVhULFxyXG4gICAgICAgICAgICAgICAgdXBsb2FkX2RhdGUgVEVYVCBOT1QgTlVMTCwgLS0gSVNPIDg2MDEgZm9ybWF0XHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAoY29tcGFueV9pZCkgUkVGRVJFTkNFUyBDb21wYW5pZXMoY29tcGFueV9pZCkgT04gREVMRVRFIENBU0NBREUsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyBVc2Vycyh1c2VyX2lkKSBPTiBERUxFVEUgQ0FTQ0FERVxyXG4gICAgICAgICAgICApYCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy8gLS0tIEF1dGhlbnRpY2F0aW9uIE1pZGRsZXdhcmUgLS0tXHJcbmZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVRva2VuKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnNbJ2F1dGhvcml6YXRpb24nXTtcclxuICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlciAmJiBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV07XHJcbiAgICBpZiAodG9rZW4gPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkOiBObyB0b2tlbiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCwgKGVyciwgdXNlcikgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgLy8gTG9nIHRoZSBzcGVjaWZpYyBKV1QgZXJyb3IgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSldUIFZlcmlmaWNhdGlvbiBFcnJvcjpcIiwgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0ZvcmJpZGRlbjogSW52YWxpZCBvciBleHBpcmVkIHRva2VuLicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlcS51c2VyID0gdXNlcjtcclxuICAgICAgICBuZXh0KCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gLS0tIEhlbHBlciBmb3IgSW5wdXQgVmFsaWRhdGlvbiAtLS1cclxuY29uc3QgaXNWYWxpZEVtYWlsID0gKGVtYWlsKSA9PiB7XHJcbiAgICByZXR1cm4gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC8udGVzdChlbWFpbCk7XHJcbn07XHJcblxyXG4vLyAtLS0gQVBJIFJvdXRlcyAoQUxMIEFQSSBST1VURVMgU0hPVUxEIEJFIERFRklORUQgSEVSRSwgQkVGT1JFIFNUQVRJQyBGSUxFIFNFUlZJTkcpIC0tLVxyXG5cclxuLy8gQXBwbHkgcmF0ZSBsaW1pdGluZyB0byBhdXRoZW50aWNhdGlvbiByb3V0ZXNcclxuYXBwLnBvc3QoJy9hcGkvcmVnaXN0ZXInLCBhdXRoTGltaXRlciwgYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBjb21wYW55X25hbWUsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBSZWdpc3RyYXRpb25cclxuICAgIGlmICghY29tcGFueV9uYW1lIHx8IHR5cGVvZiBjb21wYW55X25hbWUgIT09ICdzdHJpbmcnIHx8IGNvbXBhbnlfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQ29tcGFueSBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZnVsbF9uYW1lIHx8IHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZW1haWwgfHwgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXBhc3N3b3JkIHx8IHR5cGVvZiBwYXNzd29yZCAhPT0gJ3N0cmluZycgfHwgcGFzc3dvcmQubGVuZ3RoIDwgNikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlBhc3N3b3JkIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycyBsb25nLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFzc3dvcmRfaGFzaCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMCk7XHJcbiAgICAgICAgZGIuc2VyaWFsaXplKCgpID0+IHtcclxuICAgICAgICAgICAgZGIucnVuKCdCRUdJTiBUUkFOU0FDVElPTicpO1xyXG4gICAgICAgICAgICBkYi5ydW4oJ0lOU0VSVCBJTlRPIENvbXBhbmllcyAoY29tcGFueV9uYW1lKSBWQUxVRVMgKD8pJywgW2NvbXBhbnlfbmFtZV0sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikgeyBcclxuICAgICAgICAgICAgICAgICAgICBkYi5ydW4oJ1JPTExCQUNLJyk7IFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBjcmVhdGluZyBjb21wYW55OlwiLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcihcIkNvdWxkIG5vdCBjcmVhdGUgY29tcGFueS5cIikpOyAvLyBQYXNzIGVycm9yIHRvIGVycm9yIGhhbmRsaW5nIG1pZGRsZXdhcmVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbXBhbnlJZCA9IHRoaXMubGFzdElEO1xyXG4gICAgICAgICAgICAgICAgZGIucnVuKGBJTlNFUlQgSU5UTyBVc2VycyAoY29tcGFueV9pZCwgbG9jYXRpb25faWQsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkX2hhc2gsIHJvbGUsIHN1YnNjcmlwdGlvbl9zdGF0dXMsIHBsYW5faWQpIFZBTFVFUyAoPywgPywgPywgPywgPywgJ3N1cGVyX2FkbWluJywgJ2FjdGl2ZScsICdmcmVlJylgLCBbbmV3Q29tcGFueUlkLCBudWxsLCBmdWxsX25hbWUsIGVtYWlsLCBwYXNzd29yZF9oYXNoXSwgZnVuY3Rpb24odXNlckluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VySW5zZXJ0RXJyKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5ydW4oJ1JPTExCQUNLJyk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgY3JlYXRpbmcgdXNlcjpcIiwgdXNlckluc2VydEVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VySW5zZXJ0RXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ1VOSVFVRSBjb25zdHJhaW50IGZhaWxlZDogVXNlcnMuZW1haWwnKSkgeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IGVycm9yOiAnRW1haWwgYWxyZWFkeSByZWdpc3RlcmVkLicgfSk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcihcIkNvdWxkIG5vdCBjcmVhdGUgdXNlci5cIikpOyAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRiLnJ1bignQ09NTUlUJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIkNvbXBhbnkgYW5kIHVzZXIgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHkhXCIsIHVzZXJJZDogdGhpcy5sYXN0SUQgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikgeyBcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiUmVnaXN0cmF0aW9uIGVycm9yOlwiLCBlcnJvcik7XHJcbiAgICAgICAgbmV4dChlcnJvcik7IC8vIFBhc3MgZXJyb3IgdG8gZXJyb3IgaGFuZGxpbmcgbWlkZGxld2FyZVxyXG4gICAgfVxyXG59KTtcclxuXHJcbmFwcC5wb3N0KCcvYXBpL2xvZ2luJywgYXV0aExpbWl0ZXIsIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBMb2dpblxyXG4gICAgaWYgKCFlbWFpbCB8fCAhaXNWYWxpZEVtYWlsKGVtYWlsKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkEgdmFsaWQgZW1haWwgYWRkcmVzcyBpcyByZXF1aXJlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghcGFzc3dvcmQgfHwgdHlwZW9mIHBhc3N3b3JkICE9PSAnc3RyaW5nJyB8fCBwYXNzd29yZC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJQYXNzd29yZCBpcyByZXF1aXJlZC5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5nZXQoXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIGVtYWlsID0gP1wiLCBbZW1haWxdLCBhc3luYyAoZXJyLCB1c2VyKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZHVyaW5nIGxvZ2luOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoXCJBIHNlcnZlciBlcnJvciBvY2N1cnJlZCBkdXJpbmcgbG9naW4uXCIpKTsgLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXVzZXIpIHsgXHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkludmFsaWQgY3JlZGVudGlhbHMuXCIgfSk7IFxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmRfaGFzaCk7XHJcbiAgICAgICAgaWYgKCFpc01hdGNoKSB7IFxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIGNyZWRlbnRpYWxzLlwiIH0pOyBcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHsgdXNlcklkOiB1c2VyLnVzZXJfaWQsIGVtYWlsOiB1c2VyLmVtYWlsLCByb2xlOiB1c2VyLnJvbGUsIGZ1bGxOYW1lOiB1c2VyLmZ1bGxfbmFtZSwgY29tcGFueUlkOiB1c2VyLmNvbXBhbnlfaWQsIGxvY2F0aW9uSWQ6IHVzZXIubG9jYXRpb25faWQsIHN1YnNjcmlwdGlvblN0YXR1czogdXNlci5zdWJzY3JpcHRpb25fc3RhdHVzLCBwbGFuSWQ6IHVzZXIucGxhbl9pZCB9O1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24ocGF5bG9hZCwgSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46ICcxaCcgfSk7XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIkxvZ2luIHN1Y2Nlc3NmdWwhXCIsIHRva2VuLCByb2xlOiB1c2VyLnJvbGUgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAucG9zdCgnL2FwaS9pbnZpdGUtYWRtaW4nLCBhdXRoZW50aWNhdGVUb2tlbiwgYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBmdWxsX25hbWUsIGVtYWlsLCBwYXNzd29yZCwgbG9jYXRpb25faWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIEludml0ZSBBZG1pblxyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IHN1cGVyIGFkbWlucyBjYW4gaW52aXRlIG90aGVyIGFkbWlucy4nIH0pOyB9XHJcbiAgICBpZiAoIWZ1bGxfbmFtZSB8fCB0eXBlb2YgZnVsbF9uYW1lICE9PSAnc3RyaW5nJyB8fCBmdWxsX25hbWUudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkZ1bGwgbmFtZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWVtYWlsIHx8ICFpc1ZhbGlkRW1haWwoZW1haWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBlbWFpbCBhZGRyZXNzIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwYXNzd29yZCB8fCB0eXBlb2YgcGFzc3dvcmQgIT09ICdzdHJpbmcnIHx8IHBhc3N3b3JkLmxlbmd0aCA8IDYpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJUZW1wb3JhcnkgcGFzc3dvcmQgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzIGxvbmcuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGxvY2F0aW9uX2lkICE9PSAnbnVtYmVyJyB8fCBsb2NhdGlvbl9pZCA8PSAwKSB7IC8vIEFzc3VtaW5nIGxvY2F0aW9uX2lkIGlzIGFuIGludGVnZXIgSURcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGxvY2F0aW9uIElEIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFzc3dvcmRfaGFzaCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMCk7XHJcbiAgICAgICAgZGIuZ2V0KCdTRUxFQ1QgKiBGUk9NIExvY2F0aW9ucyBXSEVSRSBsb2NhdGlvbl9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JywgW2xvY2F0aW9uX2lkLCBjb21wYW55SWRdLCAoZXJyLCBsb2NhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBjaGVja2luZyBsb2NhdGlvbjpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciB3aGVuIHZlcmlmeWluZyBsb2NhdGlvbi4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgICAgICBpZiAoIWxvY2F0aW9uKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnU2VsZWN0ZWQgbG9jYXRpb24gZG9lcyBub3QgZXhpc3Qgb3IgZG9lcyBub3QgYmVsb25nIHRvIHlvdXIgY29tcGFueS4nIH0pOyB9XHJcbiAgICAgICAgICAgIGRiLnJ1bihgSU5TRVJUIElOVE8gVXNlcnMgKGNvbXBhbnlfaWQsIGxvY2F0aW9uX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBwYXNzd29yZF9oYXNoLCByb2xlLCBzdWJzY3JpcHRpb25fc3RhdHVzLCBwbGFuX2lkKSBWQUxVRVMgKD8sID8sID8sID8sID8sICdsb2NhdGlvbl9hZG1pbicsICdhY3RpdmUnLCAnZnJlZScpYCwgW2NvbXBhbnlJZCwgbG9jYXRpb25faWQsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkX2hhc2hdLCBmdW5jdGlvbih1c2VySW5zZXJ0RXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlckluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBpbnZpdGluZyBhZG1pbjpcIiwgdXNlckluc2VydEVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJJbnNlcnRFcnIubWVzc2FnZS5pbmNsdWRlcygnVU5JUVVFIGNvbnN0cmFpbnQgZmFpbGVkOiBVc2Vycy5lbWFpbCcpKSB7IHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IGVycm9yOiAnRW1haWwgYWxyZWFkeSByZWdpc3RlcmVkLicgfSk7IH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBpbnZpdGUgYWRtaW4uJykpOyAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6IFwiTG9jYXRpb24gYWRtaW4gaW52aXRlZCBzdWNjZXNzZnVsbHkhXCIsIHVzZXJJZDogdGhpcy5sYXN0SUQgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHsgY29uc29sZS5lcnJvcihcIkludml0ZSBhZG1pbiBlcnJvcjpcIiwgZXJyb3IpOyBuZXh0KGVycm9yKTsgfSAvLyBQYXNzIGVycm9yXHJcbn0pO1xyXG5cclxuLy8gTkVXOiBBUEkgZW5kcG9pbnQgZm9yIGludml0aW5nIGVtcGxveWVlc1xyXG5hcHAucG9zdCgnL2FwaS9pbnZpdGUtZW1wbG95ZWUnLCBhdXRoZW50aWNhdGVUb2tlbiwgYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgICBjb25zdCB7IGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBwb3NpdGlvbiwgZW1wbG95ZWVfaWQsIGxvY2F0aW9uX2lkIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIEF1dGhvcml6YXRpb246IFN1cGVyIGFkbWluIGNhbiBpbnZpdGUgYW55b25lLCBMb2NhdGlvbiBhZG1pbiBjYW4gb25seSBpbnZpdGUgdG8gdGhlaXIgbG9jYXRpb24gb3IgdW5hc3NpZ25lZFxyXG4gICAgaWYgKCFbJ3N1cGVyX2FkbWluJywgJ2xvY2F0aW9uX2FkbWluJ10uaW5jbHVkZXMocm9sZSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgYWRtaW5zIGNhbiBpbnZpdGUgZW1wbG95ZWVzLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgSW52aXRlIEVtcGxveWVlXHJcbiAgICBpZiAoIWZ1bGxfbmFtZSB8fCB0eXBlb2YgZnVsbF9uYW1lICE9PSAnc3RyaW5nJyB8fCBmdWxsX25hbWUudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkZ1bGwgbmFtZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWVtYWlsIHx8ICFpc1ZhbGlkRW1haWwoZW1haWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBlbWFpbCBhZGRyZXNzIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwYXNzd29yZCB8fCB0eXBlb2YgcGFzc3dvcmQgIT09ICdzdHJpbmcnIHx8IHBhc3N3b3JkLmxlbmd0aCA8IDYpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJUZW1wb3JhcnkgcGFzc3dvcmQgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzIGxvbmcuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENvcnJlY3RlZCBsb2NhdGlvbl9pZCB2YWxpZGF0aW9uOiBNdXN0IGJlIGEgbnVtYmVyID4gMC5cclxuICAgIC8vIElmIGxvY2F0aW9uX2lkIGlzIG51bGwsIGl0IGluZGljYXRlcyBhbiB1bmFzc2lnbmVkIGxvY2F0aW9uLCB3aGljaCBpcyB2YWxpZCBmb3IgYSBzdXBlciBhZG1pbi5cclxuICAgIC8vIEZvciBsb2NhdGlvbl9hZG1pbiwgaXQgbXVzdCBtYXRjaCB0aGVpciBjdXJyZW50IGxvY2F0aW9uLlxyXG4gICAgLy8gVGhpcyByZXZpc2VkIGxvZ2ljIGNvcnJlY3RseSBjaGVja3MgZm9yIG51bGwgT1IgYSB2YWxpZCBwb3NpdGl2ZSBpbnRlZ2VyLlxyXG4gICAgY29uc3QgaXNMb2NhdGlvbklkVmFsaWQgPSBsb2NhdGlvbl9pZCA9PT0gbnVsbCB8fCAodHlwZW9mIGxvY2F0aW9uX2lkID09PSAnbnVtYmVyJyAmJiAhaXNOYU4obG9jYXRpb25faWQpICYmIGxvY2F0aW9uX2lkID4gMCk7XHJcbiAgICBpZiAoIWlzTG9jYXRpb25JZFZhbGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBsb2NhdGlvbiBJRCAocG9zaXRpdmUgbnVtYmVyKSBpcyByZXF1aXJlZCBmb3IgZW1wbG95ZWUsIG9yIG51bGwgZm9yIHVuYXNzaWduZWQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChwb3NpdGlvbiAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBwb3NpdGlvbiAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1Bvc2l0aW9uIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChlbXBsb3llZV9pZCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbXBsb3llZV9pZCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0VtcGxveWVlIElEIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb2NhdGlvbiBBZG1pbiBzcGVjaWZpYyBjaGVjazogZW5zdXJlIHRoZXkgYXJlIGludml0aW5nIHRvIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uIG9yIG51bGxcclxuICAgIC8vIElmIGxvY2F0aW9uX2FkbWluIHRyaWVzIHRvIHNldCBhIGxvY2F0aW9uIHRoYXQgaXMgTk9UIHRoZWlyIG93biwgYmxvY2sgaXQuXHJcbiAgICAvLyBBbGxvdyBsb2NhdGlvbl9hZG1pbiB0byBzZXQgdG8gbnVsbCBpZiB0aGVpciBjdXJyZW50IGxvY2F0aW9uIGlzIG51bGwuXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIC8vIEEgbG9jYXRpb24gYWRtaW4gY2FuIE9OTFkgYXNzaWduIGFuIGVtcGxveWVlIHRvIHRoZWlyIG93biBsb2NhdGlvbiBvciB0byBudWxsICh1bmFzc2lnbmVkKVxyXG4gICAgICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSB0YXJnZXQgbG9jYXRpb25faWQgaXMgbm90IHRoZSBjdXJyZW50IHVzZXIncyBsb2NhdGlvbiwgY2hlY2sgaWYgYm90aCBhcmUgbnVsbFxyXG4gICAgICAgICAgICBpZiAoIShsb2NhdGlvbl9pZCA9PT0gbnVsbCAmJiBjdXJyZW50VXNlckxvY2F0aW9uSWQgPT09IG51bGwpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIGNhbiBvbmx5IGludml0ZSBlbXBsb3llZXMgdG8gdGhlaXIgYXNzaWduZWQgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXNzd29yZF9oYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKTtcclxuXHJcbiAgICAgICAgLy8gVmVyaWZ5IHRoZSBsb2NhdGlvbl9pZCBiZWxvbmdzIHRvIHRoZSBjb21wYW55IGFuZCwgaWYgbG9jYXRpb25fYWRtaW4sIG1hdGNoZXMgdGhlaXIgYXNzaWduZWQgbG9jYXRpb25cclxuICAgICAgICAvLyBUaGlzIGNoZWNrIGlzIGNydWNpYWwgaWYgbG9jYXRpb25faWQgaXMgTk9UIG51bGxcclxuICAgICAgICBpZiAobG9jYXRpb25faWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3QgbG9jYXRpb25WZXJpZmljYXRpb24gPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkYi5nZXQoJ1NFTEVDVCBsb2NhdGlvbl9pZCBGUk9NIExvY2F0aW9ucyBXSEVSRSBsb2NhdGlvbl9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JywgW2xvY2F0aW9uX2lkLCBjb21wYW55SWRdLCAoZXJyLCBsb2NhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUobG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoIWxvY2F0aW9uVmVyaWZpY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1NlbGVjdGVkIGxvY2F0aW9uIGRvZXMgbm90IGV4aXN0IG9yIGRvZXMgbm90IGJlbG9uZyB0byB5b3VyIGNvbXBhbnkuJyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICBgSU5TRVJUIElOVE8gVXNlcnMgKGNvbXBhbnlfaWQsIGxvY2F0aW9uX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBwYXNzd29yZF9oYXNoLCBwb3NpdGlvbiwgZW1wbG95ZWVfaWQsIHJvbGUsIHN1YnNjcmlwdGlvbl9zdGF0dXMsIHBsYW5faWQpIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgJ2VtcGxveWVlJywgJ2FjdGl2ZScsICdmcmVlJylgLFxyXG4gICAgICAgICAgICBbY29tcGFueUlkLCBsb2NhdGlvbl9pZCwgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmRfaGFzaCwgcG9zaXRpb24sIGVtcGxveWVlX2lkLF0sIC8vIERlZmF1bHQgbmV3IGVtcGxveWVlcyB0byAnZW1wbG95ZWUnIHJvbGVcclxuICAgICAgICAgICAgZnVuY3Rpb24odXNlckluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJJbnNlcnRFcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgaW52aXRpbmcgZW1wbG95ZWU6XCIsIHVzZXJJbnNlcnRFcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VySW5zZXJ0RXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ1VOSVFVRSBjb25zdHJhaW50IGZhaWxlZDogVXNlcnMuZW1haWwnKSkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oeyBlcnJvcjogJ0VtYWlsIGFscmVhZHkgcmVnaXN0ZXJlZC4nIH0pOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gaW52aXRlIGVtcGxveWVlLicpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogXCJFbXBsb3llZSBpbnZpdGVkIHN1Y2Nlc3NmdWxseSFcIiwgdXNlcklkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbnZpdGUgZW1wbG95ZWUgZXJyb3I6XCIsIGVycm9yKTtcclxuICAgICAgICBuZXh0KGVycm9yKTtcclxuICAgIH1cclxufSk7XHJcblxyXG5cclxuYXBwLmdldCgnL2FwaS9wcm9maWxlJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyB1c2VySWQsIGZ1bGxOYW1lLCBlbWFpbCwgcm9sZSwgY29tcGFueUlkLCBsb2NhdGlvbklkLCBzdWJzY3JpcHRpb25TdGF0dXMsIHBsYW5JZCB9ID0gcmVxLnVzZXI7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVzZXJJZCwgZnVsbE5hbWUsIGVtYWlsLCByb2xlLCBjb21wYW55SWQsIGxvY2F0aW9uSWQsIHN1YnNjcmlwdGlvblN0YXR1cywgcGxhbklkIH0pO1xyXG59KTtcclxuXHJcbmFwcC5wdXQoJy9hcGkvcHJvZmlsZScsIGF1dGhlbnRpY2F0ZVRva2VuLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGZ1bGxOYW1lLCBlbWFpbCwgY3VycmVudFBhc3N3b3JkLCBuZXdQYXNzd29yZCB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgUHJvZmlsZSBVcGRhdGVcclxuICAgIGlmIChmdWxsTmFtZSA9PT0gdW5kZWZpbmVkICYmIGVtYWlsID09PSB1bmRlZmluZWQgJiYgKCFjdXJyZW50UGFzc3dvcmQgfHwgIW5ld1Bhc3N3b3JkKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm8gZGF0YSBwcm92aWRlZCBmb3IgdXBkYXRlLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZnVsbE5hbWUgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIGZ1bGxOYW1lICE9PSAnc3RyaW5nJyB8fCBmdWxsTmFtZS50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkZ1bGwgbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmIChlbWFpbCAhPT0gdW5kZWZpbmVkICYmICFpc1ZhbGlkRW1haWwoZW1haWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBlbWFpbCBhZGRyZXNzIG11c3QgYmUgcHJvdmlkZWQgaWYgY2hhbmdpbmcgZW1haWwuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobmV3UGFzc3dvcmQgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIG5ld1Bhc3N3b3JkICE9PSAnc3RyaW5nJyB8fCBuZXdQYXNzd29yZC5sZW5ndGggPCA2KSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIk5ldyBwYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycyBsb25nIGlmIGNoYW5naW5nIHBhc3N3b3JkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKChjdXJyZW50UGFzc3dvcmQgJiYgIW5ld1Bhc3N3b3JkKSB8fCAoIWN1cnJlbnRQYXNzd29yZCAmJiBuZXdQYXNzd29yZCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0JvdGggY3VycmVudCBwYXNzd29yZCBhbmQgbmV3IHBhc3N3b3JkIGFyZSByZXF1aXJlZCB0byBjaGFuZ2UgcGFzc3dvcmQuJyB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZGIuZ2V0KFwiU0VMRUNUICogRlJPTSBVc2VycyBXSEVSRSB1c2VyX2lkID0gP1wiLCBbdXNlcklkXSwgYXN5bmMgKGVyciwgdXNlcikgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGZldGNoaW5nIHVzZXIgZm9yIHByb2ZpbGUgdXBkYXRlOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoXCJTZXJ2ZXIgZXJyb3IgZHVyaW5nIHByb2ZpbGUgdXBkYXRlLlwiKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICghdXNlcikgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJVc2VyIG5vdCBmb3VuZC5cIiB9KTsgfVxyXG4gICAgICAgIGxldCB1cGRhdGVTcWwgPSAnVVBEQVRFIFVzZXJzIFNFVCAnO1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZVBhcmFtcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGNsYXVzZXMgPSBbXTtcclxuICAgICAgICBsZXQgY2hhbmdlc01hZGUgPSBmYWxzZTtcclxuICAgICAgICBpZiAoZnVsbE5hbWUgIT09IHVuZGVmaW5lZCAmJiBmdWxsTmFtZSAhPT0gdXNlci5mdWxsX25hbWUpIHtcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdmdWxsX25hbWUgPSA/Jyk7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBhcmFtcy5wdXNoKGZ1bGxOYW1lKTtcclxuICAgICAgICAgICAgY2hhbmdlc01hZGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZW1haWwgIT09IHVuZGVmaW5lZCAmJiBlbWFpbCAhPT0gdXNlci5lbWFpbCkge1xyXG4gICAgICAgICAgICB0cnkgeyAvLyBBZGRlZCB0cnktY2F0Y2ggZm9yIGFzeW5jIGF3YWl0IGluIGRiLmdldFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRiLmdldChcIlNFTEVDVCB1c2VyX2lkIEZST00gVXNlcnMgV0hFUkUgZW1haWwgPSA/IEFORCB1c2VyX2lkICE9ID9cIiwgW2VtYWlsLCB1c2VySWRdLCAoZXJyLCByb3cpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocm93KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nVXNlcikgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oeyBlcnJvcjogJ0VtYWlsIGFscmVhZHkgaW4gdXNlIGJ5IGFub3RoZXIgYWNjb3VudC4nIH0pOyB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGRiRXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgY2hlY2tpbmcgZXhpc3RpbmcgZW1haWw6XCIsIGRiRXJyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcihcIlNlcnZlciBlcnJvciB2ZXJpZnlpbmcgZW1haWwgYXZhaWxhYmlsaXR5LlwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdlbWFpbCA9ID8nKTtcclxuICAgICAgICAgICAgdXBkYXRlUGFyYW1zLnB1c2goZW1haWwpO1xyXG4gICAgICAgICAgICBjaGFuZ2VzTWFkZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjdXJyZW50UGFzc3dvcmQgJiYgbmV3UGFzc3dvcmQpIHtcclxuICAgICAgICAgICAgY29uc3QgaXNNYXRjaCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKGN1cnJlbnRQYXNzd29yZCwgdXNlci5wYXNzd29yZF9oYXNoKTtcclxuICAgICAgICAgICAgaWYgKCFpc01hdGNoKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkN1cnJlbnQgcGFzc3dvcmQgaW5jb3JyZWN0LlwiIH0pOyB9XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1Bhc3N3b3JkSGFzaCA9IGF3YWl0IGJjcnlwdC5oYXNoKG5ld1Bhc3N3b3JkLCAxMCk7XHJcbiAgICAgICAgICAgIGNsYXVzZXMucHVzaCgncGFzc3dvcmRfaGFzaCA9ID8nKTtcclxuICAgICAgICAgICAgdXBkYXRlUGFyYW1zLnB1c2gobmV3UGFzc3dvcmRIYXNoKTtcclxuICAgICAgICAgICAgY2hhbmdlc01hZGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWNoYW5nZXNNYWRlKSB7IHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdObyBjaGFuZ2VzIGRldGVjdGVkLiBQcm9maWxlIHJlbWFpbnMgdGhlIHNhbWUuJyB9KTsgfVxyXG4gICAgICAgIHVwZGF0ZVNxbCArPSBjbGF1c2VzLmpvaW4oJywgJykgKyAnIFdIRVJFIHVzZXJfaWQgPSA/JztcclxuICAgICAgICB1cGRhdGVQYXJhbXMucHVzaCh1c2VySWQpO1xyXG4gICAgICAgIGRiLnJ1bih1cGRhdGVTcWwsIHVwZGF0ZVBhcmFtcywgZnVuY3Rpb24odXBkYXRlRXJyKSB7XHJcbiAgICAgICAgICAgIGlmICh1cGRhdGVFcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHVwZGF0aW5nIHByb2ZpbGU6XCIsIHVwZGF0ZUVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBwcm9maWxlLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBkYi5nZXQoXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/XCIsIFt1c2VySWRdLCAoZmV0Y2hFcnIsIHVwZGF0ZWRVc2VyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZldGNoRXJyIHx8ICF1cGRhdGVkVXNlcikgeyBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdXBkYXRlZCB1c2VyIGZvciBuZXcgdG9rZW46XCIsIGZldGNoRXJyKTsgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1Byb2ZpbGUgdXBkYXRlZCBzdWNjZXNzZnVsbHksIGJ1dCB0b2tlbiBjb3VsZCBub3QgYmUgcmVmcmVzaGVkLicgfSk7IH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXlsb2FkID0geyB1c2VySWQ6IHVwZGF0ZWRVc2VyLnVzZXJfaWQsIGVtYWlsOiB1cGRhdGVkVXNlci5lbWFpbCwgcm9sZTogdXBkYXRlZFVzZXIucm9sZSwgZnVsbE5hbWU6IHVwZGF0ZWRVc2VyLmZ1bGxfbmFtZSwgY29tcGFueUlkOiB1cGRhdGVkVXNlci5jb21wYW55X2lkLCBsb2NhdGlvbklkOiB1cGRhdGVkVXNlci5sb2NhdGlvbl9pZCwgc3Vic2NyaXB0aW9uU3RhdHVzOiB1cGRhdGVkVXNlci5zdWJzY3JpcHRpb25fc3RhdHVzLCBwbGFuSWQ6IHVzZXIucGxhbl9pZCB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Rva2VuID0gand0LnNpZ24obmV3UGF5bG9hZCwgSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46ICcxaCcgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnUHJvZmlsZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseSEnLCB0b2tlbjogbmV3VG9rZW4gfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHsgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnTm8gY2hhbmdlcyBhcHBsaWVkIGFzIGRhdGEgd2FzIGlkZW50aWNhbC4nIH0pOyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAuZ2V0KCcvYXBpL2xvY2F0aW9ucycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcbiAgICBsZXQgc3FsID0gJ1NFTEVDVCBsb2NhdGlvbl9pZCwgbG9jYXRpb25fbmFtZSwgbG9jYXRpb25fYWRkcmVzcyBGUk9NIExvY2F0aW9ucyBXSEVSRSBjb21wYW55X2lkID0gPyc7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbY29tcGFueUlkXTtcclxuXHJcbiAgICAvLyBBbGxvd2luZyBzdXBlcl9hZG1pbiwgbG9jYXRpb25fYWRtaW4sIGFuZCBlbXBsb3llZSB0byB2aWV3IGFsbCBsb2NhdGlvbnMgaW4gdGhlaXIgY29tcGFueSBmb3IgZHJvcGRvd25zL3NlbGVjdGlvblxyXG4gICAgaWYgKCFbJ3N1cGVyX2FkbWluJywgJ2xvY2F0aW9uX2FkbWluJywgJ2VtcGxveWVlJ10uaW5jbHVkZXMocm9sZSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IEluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byB2aWV3IGxvY2F0aW9ucy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLmFsbChzcWwsIHBhcmFtcywgKGVyciwgcm93cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGZldGNoaW5nIGxvY2F0aW9uczpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBsb2NhdGlvbnMuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuanNvbihyb3dzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5wb3N0KCcvYXBpL2xvY2F0aW9ucycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGxvY2F0aW9uX25hbWUsIGxvY2F0aW9uX2FkZHJlc3MgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIENyZWF0ZSBMb2NhdGlvblxyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IHN1cGVyIGFkbWlucyBjYW4gY3JlYXRlIGxvY2F0aW9ucy4nIH0pOyB9XHJcbiAgICBpZiAoIWxvY2F0aW9uX25hbWUgfHwgdHlwZW9mIGxvY2F0aW9uX25hbWUgIT09ICdzdHJpbmcnIHx8IGxvY2F0aW9uX25hbWUudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkxvY2F0aW9uIG5hbWUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFsb2NhdGlvbl9hZGRyZXNzIHx8IHR5cGVvZiBsb2NhdGlvbl9hZGRyZXNzICE9PSAnc3RyaW5nJyB8fCBsb2NhdGlvbl9hZGRyZXNzLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJMb2NhdGlvbiBhZGRyZXNzIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4oJ0lOU0VSVCBJTlRPIExvY2F0aW9ucyAoY29tcGFueV9pZCwgbG9jYXRpb25fbmFtZSwgbG9jYXRpb25fYWRkcmVzcykgVkFMVUVTICg/LCA/LCA/KScsIFtjb21wYW55SWQsIGxvY2F0aW9uX25hbWUsIGxvY2F0aW9uX2FkZHJlc3NdLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBjcmVhdGluZyBsb2NhdGlvbjpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGxvY2F0aW9uLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiAnTG9jYXRpb24gY3JlYXRlZCEnLCBsb2NhdGlvbklkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5kZWxldGUoJy9hcGkvbG9jYXRpb25zLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUgfSA9IHJlcS51c2VyO1xyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IHN1cGVyIGFkbWlucyBjYW4gZGVsZXRlIGxvY2F0aW9ucy4nIH0pOyB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgSUQgcGFyYW1ldGVyXHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgbG9jYXRpb24gSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4oJ0RFTEVURSBGUk9NIExvY2F0aW9ucyBXSEVSRSBsb2NhdGlvbl9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JywgW2lkLCBjb21wYW55SWRdLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBkZWxldGluZyBsb2NhdGlvbjpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIGxvY2F0aW9uLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0xvY2F0aW9uIG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byBkZWxldGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjA0KS5zZW5kKCk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAuZ2V0KCcvYXBpL3VzZXJzJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCB1c2VySWQ6IGN1cnJlbnRVc2VySWQsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcbiAgICBjb25zdCB7IGZpbHRlclJvbGUsIGZpbHRlckxvY2F0aW9uSWQgfSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICBsZXQgc3FsID0gYFNFTEVDVCBVc2Vycy51c2VyX2lkLCBVc2Vycy5mdWxsX25hbWUsIFVzZXJzLmVtYWlsLCBVc2Vycy5yb2xlLCBMb2NhdGlvbnMubG9jYXRpb25fbmFtZVxyXG4gICAgICAgICAgICAgICBGUk9NIFVzZXJzXHJcbiAgICAgICAgICAgICAgIExFRlQgSk9JTiBMb2NhdGlvbnMgT04gVXNlcnMubG9jYXRpb25faWQgPSBMb2NhdGlvbnMubG9jYXRpb25faWRcclxuICAgICAgICAgICAgICAgV0hFUkUgVXNlcnMuY29tcGFueV9pZCA9ID9gO1xyXG4gICAgY29uc3QgcGFyYW1zID0gW2NvbXBhbnlJZF07XHJcblxyXG4gICAgaWYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICAvLyBTdXBlciBhZG1pbiBjYW4gdmlldyBhbGwgdXNlcnMgaW4gdGhlaXIgY29tcGFueS5cclxuICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIC8vIExvY2F0aW9uIGFkbWluIGNhbiB2aWV3IGFsbCB1c2VycyB3aXRoaW4gdGhlaXIgYXNzaWduZWQgbG9jYXRpb24sIHBsdXMgdW5hc3NpZ25lZCB1c2VycyBmb3IgdGhlaXIgY29tcGFueS5cclxuICAgICAgICBpZiAoY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIHNxbCArPSBgIEFORCAoVXNlcnMubG9jYXRpb25faWQgPSA/IE9SIFVzZXJzLmxvY2F0aW9uX2lkIElTIE5VTEwpYDsgLy8gQWRtaW5zIG1pZ2h0IG5lZWQgdG8gc2VlIHVuYXNzaWduZWQgdXNlcnNcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIG5vdCBhc3NpZ25lZCB0byBhIGxvY2F0aW9uLicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChyb2xlID09PSAnZW1wbG95ZWUnKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIFVzZXJzLnVzZXJfaWQgPSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlcklkKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgdG8gdmlldyB1c2Vycy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElucHV0IHZhbGlkYXRpb24gZm9yIGZpbHRlclJvbGUgYW5kIGZpbHRlckxvY2F0aW9uSWRcclxuICAgIGNvbnN0IGFsbG93ZWRSb2xlcyA9IFsnc3VwZXJfYWRtaW4nLCAnbG9jYXRpb25fYWRtaW4nLCAnZW1wbG95ZWUnXTtcclxuICAgIGlmIChmaWx0ZXJSb2xlICYmICghYWxsb3dlZFJvbGVzLmluY2x1ZGVzKGZpbHRlclJvbGUpIHx8IChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIGZpbHRlclJvbGUgPT09ICdzdXBlcl9hZG1pbicpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBmaWx0ZXIgcm9sZSBwcm92aWRlZCBvciBpbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgdG8gZmlsdGVyIGJ5IHRoaXMgcm9sZS4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlckxvY2F0aW9uSWQgJiYgaXNOYU4ocGFyc2VJbnQoZmlsdGVyTG9jYXRpb25JZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGZpbHRlciBsb2NhdGlvbiBJRCBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZiAoZmlsdGVyUm9sZSkge1xyXG4gICAgICAgIGlmIChyb2xlID09PSAnc3VwZXJfYWRtaW4nIHx8IChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIChmaWx0ZXJSb2xlID09PSAnZW1wbG95ZWUnIHx8IGZpbHRlclJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpKSB8fCAocm9sZSA9PT0gJ2VtcGxveWVlJyAmJiBmaWx0ZXJSb2xlID09PSAnZW1wbG95ZWUnKSkge1xyXG4gICAgICAgICAgICBzcWwgKz0gYCBBTkQgVXNlcnMucm9sZSA9ID9gO1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChmaWx0ZXJSb2xlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGNhc2Ugc2hvdWxkIGlkZWFsbHkgYmUgY2F1Z2h0IGJ5IHRoZSBlYXJsaWVyIHZhbGlkYXRpb24gZm9yIGFsbG93ZWRSb2xlcywgYnV0IGZvciBkZWZlbnNlLWluLWRlcHRoOlxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IEluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byBmaWx0ZXIgYnkgcm9sZS4nIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChmaWx0ZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgLy8gRW5zdXJlIGxvY2F0aW9uX2FkbWluIGNhbiBvbmx5IGZpbHRlciBieSB0aGVpciBvd24gbG9jYXRpb25cclxuICAgICAgICBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJyB8fCAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJyAmJiBwYXJzZUludChmaWx0ZXJMb2NhdGlvbklkKSA9PT0gY3VycmVudFVzZXJMb2NhdGlvbklkKSkge1xyXG4gICAgICAgICAgICBzcWwgKz0gYCBBTkQgVXNlcnMubG9jYXRpb25faWQgPSA/YDtcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goZmlsdGVyTG9jYXRpb25JZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgdG8gZmlsdGVyIGJ5IGxvY2F0aW9uLicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRiLmFsbChzcWwsIHBhcmFtcywgKGVyciwgcm93cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGZldGNoaW5nIHVzZXJzOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIHVzZXJzLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgcmVzLmpzb24ocm93cyk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAuZGVsZXRlKCcvYXBpL3VzZXJzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIHVzZXJJZDogYXV0aGVudGljYXRlZFVzZXJJZCB9ID0gcmVxLnVzZXI7XHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgc3VwZXIgYWRtaW5zIGNhbiBkZWxldGUgdXNlcnMuJyB9KTsgfVxyXG4gICAgaWYgKHBhcnNlSW50KGlkKSA9PT0gYXV0aGVudGljYXRlZFVzZXJJZCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0Nhbm5vdCBkZWxldGUgeW91ciBvd24gc3VwZXIgYWRtaW4gYWNjb3VudCB2aWEgdGhpcyBpbnRlcmZhY2UuJyB9KTsgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIElEIHBhcmFtZXRlclxyXG4gICAgaWYgKCFpZCB8fCBpc05hTihwYXJzZUludChpZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHVzZXIgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4oJ0RFTEVURSBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyBBTkQgcm9sZSAhPSBcXCdzdXBlcl9hZG1pblxcJycsIFtpZCwgY29tcGFueUlkXSwgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZGVsZXRpbmcgdXNlcjpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIHVzZXIuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwNCkuc2VuZCgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoJy9hcGkvY3JlYXRlLWNoZWNrb3V0LXNlc3Npb24nLCBhdXRoZW50aWNhdGVUb2tlbiwgYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBwbGFuSWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyB1c2VySWQsIGVtYWlsLCBjb21wYW55SWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIHBsYW5JZFxyXG4gICAgY29uc3QgYWxsb3dlZFBsYW5JZHMgPSBbJ3BybycsICdlbnRlcnByaXNlJ107XHJcbiAgICBpZiAoIXBsYW5JZCB8fCAhYWxsb3dlZFBsYW5JZHMuaW5jbHVkZXMocGxhbklkKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBwbGFuIElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcHJpY2VJZE1hcCA9IHtcclxuICAgICAgICAncHJvJzogcHJvY2Vzcy5lbnYuU1RSSVBFX1BSSUNFX0lEX1BSTywgICAgICAgLy8gVXNlIGVudmlyb25tZW50IHZhcmlhYmxlXHJcbiAgICAgICAgJ2VudGVycHJpc2UnOiBwcm9jZXNzLmVudi5TVFJJUEVfUFJJQ0VfSURfRU5UIC8vIFVzZSBlbnZpcm9ubWVudCB2YXJpYWJsZVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHN0cmlwZVByaWNlSWQgPSBwcmljZUlkTWFwW3BsYW5JZF07XHJcbiAgICBpZiAoIXN0cmlwZVByaWNlSWQpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdTdHJpcGUgcHJpY2UgSUQgbm90IGNvbmZpZ3VyZWQgZm9yIHRoaXMgcGxhbi4nIH0pOyB9IC8vIENoYW5nZWQgZnJvbSA0MDAgdG8gNTAwIGFzIHRoaXMgaXMgYSBzZXJ2ZXItc2lkZSBjb25maWcgaXNzdWVcclxuICAgIHRyeSB7XHJcbiAgICAgICAgbGV0IGN1c3RvbWVySWQ7XHJcbiAgICAgICAgY29uc3QgdXNlclJlY29yZCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgZGIuZ2V0KCdTRUxFQ1Qgc3RyaXBlX2N1c3RvbWVyX2lkIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID8nLCBbdXNlcklkXSwgKGVyciwgcm93KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocm93KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHVzZXJSZWNvcmQgJiYgdXNlclJlY29yZC5zdHJpcGVfY3VzdG9tZXJfaWQpIHtcclxuICAgICAgICAgICAgY3VzdG9tZXJJZCA9IHVzZXJSZWNvcmQuc3RyaXBlX2N1c3RvbWVyX2lkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbWVyID0gYXdhaXQgc3RyaXBlSW5zdGFuY2UuY3VzdG9tZXJzLmNyZWF0ZSh7IGVtYWlsOiBlbWFpbCwgbWV0YWRhdGE6IHsgdXNlcklkOiB1c2VySWQsIGNvbXBhbnlJZDogY29tcGFueUlkLCB9LCB9KTtcclxuICAgICAgICAgICAgY3VzdG9tZXJJZCA9IGN1c3RvbWVyLmlkO1xyXG4gICAgICAgICAgICBkYi5ydW4oJ1VQREFURSBVc2VycyBTRVQgc3RyaXBlX2N1c3RvbWVyX2lkID0gPyBXSEVSRSB1c2VyX2lkID0gPycsIFtjdXN0b21lcklkLCB1c2VySWRdLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBTdHJpcGUgY3VzdG9tZXIgSUQgdG8gREI6JywgZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBzdHJpcGVJbnN0YW5jZS5jaGVja291dC5zZXNzaW9ucy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBjdXN0b21lcjogY3VzdG9tZXJJZCxcclxuICAgICAgICAgICAgbW9kZTogJ3N1YnNjcmlwdGlvbicsXHJcbiAgICAgICAgICAgIGxpbmVfaXRlbXM6IFt7IHByaWNlOiBzdHJpcGVQcmljZUlkLCBxdWFudGl0eTogMSwgfSwgXSxcclxuICAgICAgICAgICAgLy8gVXNlIGVudmlyb25tZW50IHZhcmlhYmxlcyBmb3Igc3VjY2Vzcy9jYW5jZWwgVVJMcywgb3IgcmVsYXRpdmUgcGF0aHMgaWYgaGFuZGxlZCBjbGllbnQtc2lkZVxyXG4gICAgICAgICAgICBzdWNjZXNzX3VybDogYCR7cHJvY2Vzcy5lbnYuRlJPTlRFTkRfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjgwMDAnfS9zdWl0ZS1odWIuaHRtbD9wYXltZW50PXN1Y2Nlc3Mmc2Vzc2lvbl9pZD17Q0hFQ0tPVVRfU0VTU0lPTl9JRH1gLFxyXG4gICAgICAgICAgICBjYW5jZWxfdXJsOiBgJHtwcm9jZXNzLmVudi5GUk9OVEVORF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCd9L3ByaWNpbmcuaHRtbD9wYXltZW50PWNhbmNlbGxlZGAsXHJcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7IHVzZXJJZDogdXNlcklkLCBwbGFuSWQ6IHBsYW5JZCwgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVybDogc2Vzc2lvbi51cmwgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikgeyBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBTdHJpcGUgQ2hlY2tvdXQgU2Vzc2lvbjonLCBlcnJvcik7IG5leHQoZXJyb3IpOyB9IC8vIFBhc3MgZXJyb3JcclxufSk7XHJcblxyXG5hcHAucG9zdCgnL2FwaS9zY2hlZHVsZXMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBlbXBsb3llZV9pZCwgbG9jYXRpb25faWQsIHN0YXJ0X3RpbWUsIGVuZF90aW1lLCBub3RlcyB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgdXNlcklkOiBjdXJyZW50VXNlcklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBDcmVhdGUgU2NoZWR1bGVcclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nICYmIHJvbGUgIT09ICdsb2NhdGlvbl9hZG1pbicpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gY3JlYXRlIHNjaGVkdWxlcy4nIH0pOyB9XHJcbiAgICBpZiAodHlwZW9mIGVtcGxveWVlX2lkICE9PSAnbnVtYmVyJyB8fCBlbXBsb3llZV9pZCA8PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdBIHZhbGlkIGVtcGxveWVlIElEIGlzIHJlcXVpcmVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGxvY2F0aW9uX2lkICE9PSAnbnVtYmVyJyB8fCBsb2NhdGlvbl9pZCA8PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdBIHZhbGlkIGxvY2F0aW9uIElEIGlzIHJlcXVpcmVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXN0YXJ0X3RpbWUgfHwgIWVuZF90aW1lIHx8IGlzTmFOKG5ldyBEYXRlKHN0YXJ0X3RpbWUpLmdldFRpbWUoKSkgfHwgaXNOYU4obmV3IERhdGUoZW5kX3RpbWUpLmdldFRpbWUoKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1ZhbGlkIHN0YXJ0IGFuZCBlbmQgdGltZXMgYXJlIHJlcXVpcmVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobmV3IERhdGUoc3RhcnRfdGltZSkgPj0gbmV3IERhdGUoZW5kX3RpbWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdTdGFydCB0aW1lIG11c3QgYmUgYmVmb3JlIGVuZCB0aW1lLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobm90ZXMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygbm90ZXMgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdOb3RlcyBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIuZ2V0KCdTRUxFQ1QgdXNlcl9pZCBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPycsIFtlbXBsb3llZV9pZCwgY29tcGFueUlkXSwgKGVyciwgZW1wbG95ZWUpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciB2ZXJpZnlpbmcgZW1wbG95ZWU6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZHVyaW5nIGVtcGxveWVlIHZlcmlmaWNhdGlvbi4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICghZW1wbG95ZWUpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdFbXBsb3llZSBub3QgZm91bmQgaW4geW91ciBjb21wYW55LicgfSk7IH1cclxuICAgICAgICBkYi5nZXQoJ1NFTEVDVCBsb2NhdGlvbl9pZCBGUk9NIExvY2F0aW9ucyBXSEVSRSBsb2NhdGlvbl9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JywgW2xvY2F0aW9uX2lkLCBjb21wYW55SWRdLCAoZXJyLCBsb2NhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciB2ZXJpZnlpbmcgbG9jYXRpb246XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZHVyaW5nIGxvY2F0aW9uIHZlcmlmaWNhdGlvbi4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgICAgICBpZiAoIWxvY2F0aW9uKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTG9jYXRpb24gbm90IGZvdW5kIGluIHlvdXIgY29tcGFueS4nIH0pOyB9XHJcbiAgICAgICAgICAgIGRiLnJ1bihcclxuICAgICAgICAgICAgICAgICdJTlNFUlQgSU5UTyBTY2hlZHVsZXMgKGVtcGxveWVlX2lkLCBsb2NhdGlvbl9pZCwgc3RhcnRfdGltZSwgZW5kX3RpbWUsIG5vdGVzKSBWQUxVRVMgKD8sID8sID8sID8sID8pJywgW2VtcGxveWVlX2lkLCBsb2NhdGlvbl9pZCwgc3RhcnRfdGltZSwgZW5kX3RpbWUsIG5vdGVzXSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnNlcnRFcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGNyZWF0aW5nIHNjaGVkdWxlOlwiLCBpbnNlcnRFcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgc2NoZWR1bGUuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdTY2hlZHVsZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseSEnLCBzY2hlZHVsZUlkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5nZXQoJy9hcGkvc2NoZWR1bGVzJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgZW1wbG95ZWVfaWQsIGxvY2F0aW9uX2lkLCBzdGFydF9kYXRlLCBlbmRfZGF0ZSB9ID0gcmVxLnF1ZXJ5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIHVzZXJJZDogY3VycmVudFVzZXJJZCwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICBsZXQgc3FsID0gYFNFTEVDVCBTY2hlZHVsZXMuKiwgVXNlcnMuZnVsbF9uYW1lIEFTIGVtcGxveWVlX25hbWUsIFVzZXJzLmVtYWlsIEFTIGVtcGxveWVlX2VtYWlsLCBMb2NhdGlvbnMubG9jYXRpb25fbmFtZVxyXG4gICAgICAgICAgICAgICBGUk9NIFNjaGVkdWxlc1xyXG4gICAgICAgICAgICAgICBKT0lOIFVzZXJzIE9OIFNjaGVkdWxlcy5lbXBsb3llZV9pZCA9IFVzZXJzLnVzZXJfaWRcclxuICAgICAgICAgICAgICAgSk9JTiBMb2NhdGlvbnMgT04gU2NoZWR1bGVzLmxvY2F0aW9uX2lkID0gTG9jYXRpb25zLmxvY2F0aW9uX2lkXHJcbiAgICAgICAgICAgICAgIFdIRVJFIFVzZXJzLmNvbXBhbnlfaWQgPSA/YDtcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtjb21wYW55SWRdO1xyXG5cclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRVc2VyTG9jYXRpb25JZCkge1xyXG4gICAgICAgICAgICBzcWwgKz0gYCBBTkQgU2NoZWR1bGVzLmxvY2F0aW9uX2lkID0gP2A7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VyTG9jYXRpb25JZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBMb2NhdGlvbiBhZG1pbiBub3QgYXNzaWduZWQgdG8gYSBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ2VtcGxveWVlJykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBVc2Vycy51c2VyX2lkID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5wdXQgdmFsaWRhdGlvbiBmb3IgcXVlcnkgcGFyYW1ldGVyc1xyXG4gICAgaWYgKGVtcGxveWVlX2lkICYmIGlzTmFOKHBhcnNlSW50KGVtcGxveWVlX2lkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgZW1wbG95ZWUgSUQgZmlsdGVyIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25faWQgJiYgaXNOYU4ocGFyc2VJbnQobG9jYXRpb25faWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBsb2NhdGlvbiBJRCBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChzdGFydF9kYXRlICYmIGlzTmFOKG5ldyBEYXRlKHN0YXJ0X2RhdGUpLmdldFRpbWUoKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgc3RhcnQgZGF0ZSBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChlbmRfZGF0ZSAmJiBpc05hTihuZXcgRGF0ZShlbmRfZGF0ZSkuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBlbmQgZGF0ZSBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaWYgKGVtcGxveWVlX2lkICYmIChyb2xlID09PSAnc3VwZXJfYWRtaW4nIHx8IChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIHBhcnNlSW50KGVtcGxveWVlX2lkKSA9PT0gY3VycmVudFVzZXJJZCkgfHwgKHJvbGUgPT09ICdlbXBsb3llZScgJiYgcGFyc2VJbnQoZW1wbG95ZWVfaWQpID09PSBjdXJyZW50VXNlcklkKSkpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgVXNlcnMucm9sZSA9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGZpbHRlclJvbGUpOyAvLyBUaGlzIHNob3VsZCBiZSBlbXBsb3llZV9pZCwgbm90IGZpbHRlclJvbGVcclxuICAgIH1cclxuICAgIGlmIChsb2NhdGlvbl9pZCAmJiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJyB8fCAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJyAmJiBwYXJzZUludChsb2NhdGlvbl9pZCkgPT09IGN1cnJlbnRVc2VyTG9jYXRpb25JZCkpKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIFNjaGVkdWxlcy5sb2NhdGlvbl9pZCA9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGxvY2F0aW9uX2lkKTtcclxuICAgIH1cclxuICAgIGlmIChzdGFydF9kYXRlKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIFNjaGVkdWxlcy5zdGFydF90aW1lID49ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKHN0YXJ0X2RhdGUpO1xyXG4gICAgfVxyXG4gICAgaWYgKGVuZF9kYXRlKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIFNjaGVkdWxlcy5lbmRfdGltZSA8PSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChlbmRfZGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIuYWxsKHNxbCwgcGFyYW1zLCAoZXJyLCByb3dzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgc2NoZWR1bGVzOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIHNjaGVkdWxlcy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIHJlcy5qc29uKHJvd3MpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLmRlbGV0ZSgnL2FwaS9zY2hlZHVsZXMvOmlkJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgdXNlcklkOiBjdXJyZW50VXNlcklkLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIElEIHBhcmFtZXRlclxyXG4gICAgaWYgKCFpZCB8fCBpc05hTihwYXJzZUludChpZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHNjaGVkdWxlIElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvbGUgPT09ICdlbXBsb3llZScpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IEVtcGxveWVlcyBjYW5ub3QgZGVsZXRlIHNjaGVkdWxlcy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzcWwgPSBgREVMRVRFIEZST00gU2NoZWR1bGVzIFdIRVJFIHNjaGVkdWxlX2lkID0gP2A7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbaWRdO1xyXG5cclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIGVtcGxveWVlX2lkIElOIChTRUxFQ1QgdXNlcl9pZCBGUk9NIFVzZXJzIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8pYDtcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQsIGNvbXBhbnlJZCk7XHJcbiAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgZW1wbG95ZWVfaWQgSU4gKFNFTEVDVCB1c2VyX2lkIEZST00gVXNlcnMgV0hFUkUgY29tcGFueV9pZCA9ID8pYDtcclxuICAgICAgICBwYXJhbXMucHVzaChjb21wYW55SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bihzcWwsIHBhcmFtcywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZGVsZXRpbmcgc2NoZWR1bGU6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBzY2hlZHVsZS4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdTY2hlZHVsZSBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwNCkuc2VuZCgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLy8gLS0tIEhpcmluZyBSb3V0ZXMgLS0tXHJcblxyXG4vKipcclxuICogUE9TVCAvYXBpL2pvYi1wb3N0aW5nc1xyXG4gKiBDcmVhdGVzIGEgbmV3IGpvYiBwb3N0aW5nLlxyXG4gKiBSZXF1aXJlcyBzdXBlcl9hZG1pbiBvciBsb2NhdGlvbl9hZG1pbiByb2xlLlxyXG4gKi9cclxuYXBwLnBvc3QoJy9hcGkvam9iLXBvc3RpbmdzJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgdGl0bGUsIGRlc2NyaXB0aW9uLCByZXF1aXJlbWVudHMsIGxvY2F0aW9uX2lkIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG4gICAgY29uc3QgY3JlYXRlZF9kYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOyAvLyBDdXJyZW50IGRhdGUvdGltZSBmb3IgY3JlYXRpb25cclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBDcmVhdGUgSm9iIFBvc3RpbmdcclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nICYmIHJvbGUgIT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgYWRtaW5zIGNhbiBjcmVhdGUgam9iIHBvc3RpbmdzLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRpdGxlIHx8IHR5cGVvZiB0aXRsZSAhPT0gJ3N0cmluZycgfHwgdGl0bGUudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkpvYiB0aXRsZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIGRlc2NyaXB0aW9uICE9PSAnc3RyaW5nJyB8fCBkZXNjcmlwdGlvbi50cmltKCkgPT09ICcnKSkgeyAvLyBMaW5lIDEwMDlcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0Rlc2NyaXB0aW9uIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHsgXHJcbiAgICAgICAgY2xhdXNlcy5wdXNoKCdkZXNjcmlwdGlvbiA9ID8nKTsgXHJcbiAgICAgICAgdXBkYXRlUGFyYW1zLnB1c2goZGVzY3JpcHRpb24pOyBcclxuICAgIH1cclxuICAgIGlmIChyZXF1aXJlbWVudHMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcmVxdWlyZW1lbnRzICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUmVxdWlyZW1lbnRzIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH0gZWxzZSBpZiAocmVxdWlyZW1lbnRzICE9PSB1bmRlZmluZWQpIHsgXHJcbiAgICAgICAgY2xhdXNlcy5wdXNoKCdyZXF1aXJlbWVudHMgPSA/Jyk7XHJcbiAgICAgICAgdXBkYXRlUGFyYW1zLnB1c2gocmVxdWlyZW1lbnRzKTtcclxuICAgIH1cclxuICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ3N0YXR1cyA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2goc3RhdHVzKTsgfVxyXG4gICAgXHJcbiAgICAvLyBzdXBlcl9hZG1pbiBjYW4gY2hhbmdlIGxvY2F0aW9uX2lkLiBsb2NhdGlvbl9hZG1pbiBjYW5ub3QgY2hhbmdlIGxvY2F0aW9uX2lkIG9yIGNoYW5nZSB0byBkaWZmZXJlbnQgbG9jYXRpb25cclxuICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgaWYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdsb2NhdGlvbl9pZCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgICAgICBpZiAobG9jYXRpb25faWQgIT09IGN1cnJlbnRVc2VyTG9jYXRpb25JZCAmJiBsb2NhdGlvbl9pZCAhPT0gbnVsbCkgeyAvLyBsb2NhdGlvbl9pZCBjYW4gYmUgbnVsbCAoY29tcGFueS13aWRlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBMb2NhdGlvbiBhZG1pbiBjYW5ub3QgY2hhbmdlIGpvYiBwb3N0aW5nIGxvY2F0aW9uIHRvIGFub3RoZXIgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiBsb2NhdGlvbiBhZG1pbiB1cGRhdGVzIGpvYiBwb3N0aW5nLCBhbmQgaXQncyB0aGVpciBsb2NhdGlvbiwgb3Igc2V0dGluZyB0byBudWxsLCBpdCdzIGFsbG93ZWRcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdsb2NhdGlvbl9pZCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgaWYgKGNsYXVzZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm8gZmllbGRzIHByb3ZpZGVkIGZvciB1cGRhdGUuJyB9KTsgfVxyXG5cclxuICAgIHVwZGF0ZVNxbCArPSBjbGF1c2VzLmpvaW4oJywgJykgKyAnIFdIRVJFIGpvYl9wb3N0aW5nX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nO1xyXG4gICAgdXBkYXRlUGFyYW1zLnB1c2goaWQsIGNvbXBhbnlJZCk7XHJcblxyXG4gICAgLy8gQWRkaXRpb25hbCBzZWN1cml0eSBmb3IgbG9jYXRpb25fYWRtaW46IGVuc3VyZSB0aGV5IG9ubHkgdXBkYXRlIHRoZWlyIG93biBsb2NhdGlvbidzIHBvc3RpbmdzXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHVwZGF0ZVNxbCArPSAnIEFORCAobG9jYXRpb25faWQgPSA/IE9SIGxvY2F0aW9uX2lkIElTIE5VTEwpJzsgLy8gQWxsb3cgdXBkYXRpbmcgdW5hc3NpZ25lZCBqb2JzIHRvb1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VyTG9jYXRpb25JZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIucnVuKHVwZGF0ZVNxbCwgdXBkYXRlUGFyYW1zLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciB1cGRhdGluZyBqb2IgcG9zdGluZzpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIGpvYiBwb3N0aW5nLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0pvYiBwb3N0aW5nIG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byB1cGRhdGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0pvYiBwb3N0aW5nIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IScgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vKipcclxuICogR0VUIC9hcGkvam9iLXBvc3RpbmdzXHJcbiAqIFJldHJpZXZlcyBqb2IgcG9zdGluZ3MuXHJcbiAqIENhbiBmaWx0ZXIgYnkgbG9jYXRpb25faWQgYW5kIHN0YXR1cy5cclxuICogUmVxdWlyZXMgc3VwZXJfYWRtaW4gb3IgbG9jYXRpb25fYWRtaW4uXHJcbiAqL1xyXG5hcHAuZ2V0KCcvYXBpL2pvYi1wb3N0aW5ncycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IHN0YXR1cywgbG9jYXRpb25faWQgfSA9IHJlcS5xdWVyeTtcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIGxldCBzcWwgPSAnU0VMRUNUICogRlJPTSBKb2JQb3N0aW5ncyBXSEVSRSBjb21wYW55X2lkID0gPyc7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbY29tcGFueUlkXTtcclxuXHJcbiAgICAvLyBBdXRob3JpemF0aW9uOiBzdXBlcl9hZG1pbiBzZWVzIGFsbCwgbG9jYXRpb25fYWRtaW4gc2VlcyB0aGVpciBsb2NhdGlvbidzIHBvc3RpbmdzXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIGlmIChjdXJyZW50VXNlckxvY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgc3FsICs9ICcgQU5EIChsb2NhdGlvbl9pZCA9ID8gT1IgbG9jYXRpb25faWQgSVMgTlVMTCknOyAvLyBMb2NhdGlvbiBhZG1pbiBzZWVzIHRoZWlyIGxvY2F0aW9uJ3MgcG9zdGluZ3Mgb3IgY29tcGFueS13aWRlXHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VyTG9jYXRpb25JZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBMb2NhdGlvbiBhZG1pbiBub3QgYXNzaWduZWQgdG8gYSBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ2VtcGxveWVlJykge1xyXG4gICAgICAgIC8vIEVtcGxveWVlcyBnZW5lcmFsbHkgc2hvdWxkbid0IHNlZSBqb2IgcG9zdGluZ3MgbGlzdCB2aWEgdGhpcyBhZG1pbiBBUElcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IEluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byB2aWV3IGpvYiBwb3N0aW5ncy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElucHV0IHZhbGlkYXRpb24gZm9yIHF1ZXJ5IHBhcmFtZXRlcnNcclxuICAgIGNvbnN0IGFsbG93ZWRTdGF0dXNlcyA9IFsnT3BlbicsICdDbG9zZWQnLCAnRmlsbGVkJ107IC8vIEFzc3VtaW5nIHRoZXNlIGFyZSB5b3VyIHZhbGlkIHN0YXR1c2VzXHJcbiAgICBpZiAoc3RhdHVzICYmICFhbGxvd2VkU3RhdHVzZXMuaW5jbHVkZXMoc3RhdHVzKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBqb2IgcG9zdGluZyBzdGF0dXMgZmlsdGVyIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25faWQgJiYgaXNOYU4ocGFyc2VJbnQobG9jYXRpb25faWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBsb2NhdGlvbiBJRCBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaWYgKHN0YXR1cykge1xyXG4gICAgICAgIHNxbCArPSAnIEFORCBzdGF0dXMgPSA/JztcclxuICAgICAgICBwYXJhbXMucHVzaChzdGF0dXMpO1xyXG4gICAgfVxyXG4gICAgLy8gT25seSBzdXBlciBhZG1pbiBjYW4gZmlsdGVyIGJ5IGFueSBsb2NhdGlvbl9pZCBiZXlvbmQgdGhlaXIgb3duIHNjb3BlXHJcbiAgICBpZiAobG9jYXRpb25faWQgJiYgcm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBsb2NhdGlvbl9pZCA9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGxvY2F0aW9uX2lkKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5hbGwoc3FsLCBwYXJhbXMsIChlcnIsIHJvd3MpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBqb2IgcG9zdGluZ3M6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgam9iIHBvc3RpbmdzLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgcmVzLmpzb24ocm93cyk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vKipcclxuICogUFVUIC9hcGkvam9iLXBvc3RpbmdzLzppZFxyXG4gKiBVcGRhdGVzIGEgam9iIHBvc3RpbmcuXHJcbiAqIFJlcXVpcmVzIHN1cGVyX2FkbWluIG9yIGxvY2F0aW9uX2FkbWluIChmb3IgdGhlaXIgbG9jYXRpb24ncyBwb3N0aW5ncykuXHJcbiAqL1xyXG5hcHAucHV0KCcvYXBpL2pvYi1wb3N0aW5ncy86aWQnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgdGl0bGUsIGRlc2NyaXB0aW9uLCByZXF1aXJlbWVudHMsIHN0YXR1cywgbG9jYXRpb25faWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgSm9iIFBvc3RpbmcgVXBkYXRlXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gdXBkYXRlIGpvYiBwb3N0aW5ncy4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFpZCB8fCBpc05hTihwYXJzZUludChpZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGpvYiBwb3N0aW5nIElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGl0bGUgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIHRpdGxlICE9PSAnc3RyaW5nJyB8fCB0aXRsZS50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSm9iIHRpdGxlIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIGRlc2NyaXB0aW9uICE9PSAnc3RyaW5nJyB8fCBkZXNjcmlwdGlvbi50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRGVzY3JpcHRpb24gbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChyZXF1aXJlbWVudHMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcmVxdWlyZW1lbnRzICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUmVxdWlyZW1lbnRzIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFsbG93ZWRTdGF0dXNlcyA9IFsnT3BlbicsICdDbG9zZWQnLCAnRmlsbGVkJ107XHJcbiAgICBpZiAoc3RhdHVzICE9PSB1bmRlZmluZWQgJiYgIWFsbG93ZWRTdGF0dXNlcy5pbmNsdWRlcyhzdGF0dXMpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHN0YXR1cyBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGxvY2F0aW9uX2lkICE9PSAnbnVtYmVyJyAmJiBsb2NhdGlvbl9pZCAhPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTG9jYXRpb24gSUQgbXVzdCBiZSBhIG51bWJlciBvciBudWxsIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGxldCB1cGRhdGVTcWwgPSAnVVBEQVRFIEpvYlBvc3RpbmdzIFNFVCAnO1xyXG4gICAgY29uc3QgdXBkYXRlUGFyYW1zID0gW107XHJcbiAgICBjb25zdCBjbGF1c2VzID0gW107XHJcblxyXG4gICAgaWYgKHRpdGxlICE9PSB1bmRlZmluZWQpIHsgY2xhdXNlcy5wdXNoKCd0aXRsZSA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2godGl0bGUpOyB9XHJcbiAgICAvLyBMaW5lIDEwMDkgZml4OiBFbnN1cmUgdGhpcyBsaW5lIGFuZCBzdXJyb3VuZGluZyBsb2dpYyBpcyBjb3JyZWN0LlxyXG4gICAgaWYgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBkZXNjcmlwdGlvbiAhPT0gJ3N0cmluZycgfHwgZGVzY3JpcHRpb24udHJpbSgpID09PSAnJykpIHsgLy8gTGluZSAxMDA5XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdEZXNjcmlwdGlvbiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfSBlbHNlIGlmIChkZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7IFxyXG4gICAgICAgIGNsYXVzZXMucHVzaCgnZGVzY3JpcHRpb24gPSA/Jyk7IFxyXG4gICAgICAgIHVwZGF0ZVBhcmFtcy5wdXNoKGRlc2NyaXB0aW9uKTsgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChyZXF1aXJlbWVudHMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcmVxdWlyZW1lbnRzICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUmVxdWlyZW1lbnRzIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH0gZWxzZSBpZiAocmVxdWlyZW1lbnRzICE9PSB1bmRlZmluZWQpIHsgXHJcbiAgICAgICAgY2xhdXNlcy5wdXNoKCdyZXF1aXJlbWVudHMgPSA/Jyk7XHJcbiAgICAgICAgdXBkYXRlUGFyYW1zLnB1c2gocmVxdWlyZW1lbnRzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgnc3RhdHVzID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChzdGF0dXMpOyB9XHJcbiAgICBcclxuICAgIC8vIHN1cGVyX2FkbWluIGNhbiBjaGFuZ2UgbG9jYXRpb25faWQuIGxvY2F0aW9uX2FkbWluIGNhbm5vdCBjaGFuZ2UgbG9jYXRpb25faWQgb3IgY2hhbmdlIHRvIGRpZmZlcmVudCBsb2NhdGlvblxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2xvY2F0aW9uX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gY3VycmVudFVzZXJMb2NhdGlvbklkICYmIGxvY2F0aW9uX2lkICE9PSBudWxsKSB7IC8vIGxvY2F0aW9uX2lkIGNhbiBiZSBudWxsIChjb21wYW55LXdpZGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIGNhbm5vdCBjaGFuZ2Ugam9iIHBvc3RpbmcgbG9jYXRpb24gdG8gYW5vdGhlciBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIElmIGxvY2F0aW9uIGFkbWluIHVwZGF0ZXMgam9iIHBvc3RpbmcsIGFuZCBpdCdzIHRoZWlyIGxvY2F0aW9uLCBvciBzZXR0aW5nIHRvIG51bGwsIGl0J3MgYWxsb3dlZFxyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2xvY2F0aW9uX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZiAoY2xhdXNlcy5sZW5ndGggPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdObyBmaWVsZHMgcHJvdmlkZWQgZm9yIHVwZGF0ZS4nIH0pOyB9XHJcblxyXG4gICAgdXBkYXRlU3FsICs9IGNsYXVzZXMuam9pbignLCAnKSArICcgV0hFUkUgam9iX3Bvc3RpbmdfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyc7XHJcbiAgICB1cGRhdGVQYXJhbXMucHVzaChpZCwgY29tcGFueUlkKTtcclxuXHJcbiAgICAvLyBBZGRpdGlvbmFsIHNlY3VyaXR5IGZvciBsb2NhdGlvbl9hZG1pbjogZW5zdXJlIHRoZXkgb25seSB1cGRhdGUgdGhlaXIgb3duIGxvY2F0aW9uJ3MgcG9zdGluZ3NcclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgdXBkYXRlU3FsICs9ICcgQU5EIChsb2NhdGlvbl9pZCA9ID8gT1IgbG9jYXRpb25faWQgSVMgTlVMTCknOyAvLyBBbGxvdyB1cGRhdGluZyB1bmFzc2lnbmVkIGpvYnMgdG9vXHJcbiAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4odXBkYXRlU3FsLCB1cGRhdGVQYXJhbXMsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHVwZGF0aW5nIGpvYiBwb3N0aW5nOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgam9iIHBvc3RpbmcuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnSm9iIHBvc3Rpbmcgbm90IGZvdW5kIG9yIG5vdCBhdXRob3JpemVkIHRvIHVwZGF0ZS4nIH0pOyB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnSm9iIHBvc3RpbmcgdXBkYXRlZCBzdWNjZXNzZnVsbHkhJyB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBERUxFVEUgL2FwaS9qb2ItcG9zdGluZ3MvOmlkXHJcbiAqIERlbGV0ZXMgYSBqb2IgcG9zdGluZy5cclxuICogUmVxdWlyZXMgc3VwZXJfYWRtaW4gb3IgbG9jYXRpb25fYWRtaW4gKGZvciB0aGVpciBsb2NhdGlvbidzIHBvc3RpbmdzKS5cclxuICovXHJcbmFwcC5kZWxldGUoJy9hcGkvam9iLXBvc3RpbmdzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgSUQgcGFyYW1ldGVyXHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgam9iIHBvc3RpbmcgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gZGVsZXRlIGpvYiBwb3N0aW5ncy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzcWwgPSAnREVMRVRFIEZST00gSm9iUG9zdGluZ3MgV0hFUkUgam9iX3Bvc3RpbmdfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyc7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbaWQsIGNvbXBhbnlJZF07XHJcblxyXG4gICAgLy8gQWRkaXRpb25hbCBzZWN1cml0eSBmb3IgbG9jYXRpb25fYWRtaW46IGVuc3VyZSB0aGV5IG9ubHkgZGVsZXRlIHRoZWlyIG93biBsb2NhdGlvbidzIHBvc3RpbmdzXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSAnIEFORCAobG9jYXRpb25faWQgPSA/IE9SIGxvY2F0aW9uX2lkIElTIE5VTEwpJztcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bihzcWwsIHBhcmFtcywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZGVsZXRpbmcgam9iIHBvc3Rpbmc6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBqb2IgcG9zdGluZy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdKb2IgcG9zdGluZyBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwNCkuc2VuZCgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuXHJcbi8vIFVwZGF0ZSBBcHBsaWNhbnQgQVBJIGVuZHBvaW50cyB0byB1c2Ugam9iX3Bvc3RpbmdfaWRcclxuYXBwLnBvc3QoJy9hcGkvYXBwbGljYW50cycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGpvYl9wb3N0aW5nX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBub3RlcywgbG9jYXRpb25faWQsIHBob25lX251bWJlciB9ID0gcmVxLmJvZHk7IC8vIEFkZGVkIHBob25lX251bWJlclxyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcbiAgICBjb25zdCBhcHBsaWNhdGlvbl9kYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOyAvLyBDdXJyZW50IGRhdGUvdGltZSBmb3IgYXBwbGljYXRpb25cclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBBZGRpbmcgQXBwbGljYW50XHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gYWRkIGFwcGxpY2FudHMuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygam9iX3Bvc3RpbmdfaWQgIT09ICdudW1iZXInIHx8IGpvYl9wb3N0aW5nX2lkIDw9IDApIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0EgdmFsaWQgam9iIHBvc3RpbmcgSUQgaXMgcmVxdWlyZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICghZnVsbF9uYW1lIHx8IHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZW1haWwgfHwgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBCYXNpYyBwaG9uZSBudW1iZXIgdmFsaWRhdGlvbiAoc2ltcGxlIGNoZWNrIGZvciBub24tZW1wdHkgc3RyaW5nLCBjb3VsZCBiZSBtb3JlIGNvbXBsZXggd2l0aCByZWdleClcclxuICAgIGlmICghcGhvbmVfbnVtYmVyIHx8IHR5cGVvZiBwaG9uZV9udW1iZXIgIT09ICdzdHJpbmcnIHx8IHBob25lX251bWJlci50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiUGhvbmUgbnVtYmVyIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKG5vdGVzICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG5vdGVzICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm90ZXMgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGxvY2F0aW9uX2lkICE9PSAnbnVtYmVyJyAmJiBsb2NhdGlvbl9pZCAhPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTG9jYXRpb24gSUQgbXVzdCBiZSBhIG51bWJlciBvciBudWxsIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIFZlcmlmeSBqb2JfcG9zdGluZ19pZCBiZWxvbmdzIHRvIHRoZSBjb21wYW55LCBhbmQgZm9yIGxvY2F0aW9uX2FkbWluLCB0byB0aGVpciBsb2NhdGlvblxyXG4gICAgZGIuZ2V0KCdTRUxFQ1Qgam9iX3Bvc3RpbmdfaWQsIGxvY2F0aW9uX2lkIEZST00gSm9iUG9zdGluZ3MgV0hFUkUgam9iX3Bvc3RpbmdfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPycsIFtqb2JfcG9zdGluZ19pZCwgY29tcGFueUlkXSwgKGVyciwgam9iUG9zdGluZykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHZlcmlmeWluZyBqb2IgcG9zdGluZzpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciB3aGVuIHZlcmlmeWluZyBqb2IgcG9zdGluZy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICgham9iUG9zdGluZykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0pvYiBQb3N0aW5nIG5vdCBmb3VuZCBvciBkb2VzIG5vdCBiZWxvbmcgdG8geW91ciBjb21wYW55LicgfSk7IH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBMb2NhdGlvbiBhZG1pbiBjYW4gb25seSBhZGQgYXBwbGljYW50cyB0byBqb2JzIGluIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uIG9yIHVuYXNzaWduZWQgam9ic1xyXG4gICAgICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIGpvYlBvc3RpbmcubG9jYXRpb25faWQgIT09IGN1cnJlbnRVc2VyTG9jYXRpb25JZCAmJiBqb2JQb3N0aW5nLmxvY2F0aW9uX2lkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gY2Fubm90IGFkZCBhcHBsaWNhbnRzIHRvIGpvYnMgb3V0c2lkZSB0aGVpciBhc3NpZ25lZCBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAnSU5TRVJUIElOVE8gQXBwbGljYW50cyAoY29tcGFueV9pZCwgbG9jYXRpb25faWQsIGpvYl9wb3N0aW5nX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBwaG9uZV9udW1iZXIsIG5vdGVzLCBhcHBsaWNhdGlvbl9kYXRlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8pJyxcclxuICAgICAgICAgICAgW2NvbXBhbnlJZCwgbG9jYXRpb25faWQgfHwgam9iUG9zdGluZy5sb2NhdGlvbl9pZCwgam9iX3Bvc3RpbmdfaWQsIGZ1bGxfbmFtZSwgZW1haWwsIHBob25lX251bWJlciwgbm90ZXMsIGFwcGxpY2F0aW9uX2RhdGVdLCAvLyBVc2UgbG9jYXRpb25faWQgZnJvbSBwYXlsb2FkIG9yIGpvYiBwb3N0aW5nXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKGluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluc2VydEVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgY3JlYXRpbmcgYXBwbGljYW50OlwiLCBpbnNlcnRFcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgYXBwbGljYW50LicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdBcHBsaWNhbnQgYWRkZWQgc3VjY2Vzc2Z1bGx5IScsIGFwcGxpY2FudElkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAuZ2V0KCcvYXBpL2FwcGxpY2FudHMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBqb2JfcG9zdGluZ19pZCwgc3RhdHVzLCBsb2NhdGlvbl9pZCB9ID0gcmVxLnF1ZXJ5OyAvLyBBZGRlZCBqb2JfcG9zdGluZ19pZCwgc3RhdHVzLCBsb2NhdGlvbl9pZCBmaWx0ZXJzXHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgdXNlcklkOiBjdXJyZW50VXNlcklkLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIGxldCBzcWwgPSBgU0VMRUNUIEFwcGxpY2FudHMuKiwgSm9iUG9zdGluZ3MudGl0bGUgQVMgam9iX3RpdGxlX25hbWVcclxuICAgICAgICAgICAgICAgRlJPTSBBcHBsaWNhbnRzXHJcbiAgICAgICAgICAgICAgIExFRlQgSk9JTiBKb2JQb3N0aW5ncyBPTiBBcHBsaWNhbnRzLmpvYl9wb3N0aW5nX2lkID0gSm9iUG9zdGluZ3Muam9iX3Bvc3RpbmdfaWRcclxuICAgICAgICAgICAgICAgV0hFUkUgQXBwbGljYW50cy5jb21wYW55X2lkID0gP2A7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbY29tcGFueUlkXTtcclxuXHJcbiAgICAvLyBJbnB1dCB2YWxpZGF0aW9uIGZvciBxdWVyeSBwYXJhbWV0ZXJzXHJcbiAgICBjb25zdCBhbGxvd2VkU3RhdHVzZXMgPSBbJ0FwcGxpZWQnLCAnSW50ZXJ2aWV3aW5nJywgJ1JlamVjdGVkJywgJ0hpcmVkJ107IC8vIERlZmluZSB2YWxpZCBzdGF0dXNlc1xyXG4gICAgaWYgKHN0YXR1cyAmJiAhYWxsb3dlZFN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgYXBwbGljYW50IHN0YXR1cyBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChqb2JfcG9zdGluZ19pZCAmJiBpc05hTihwYXJzZUludChqb2JfcG9zdGluZ19pZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGpvYiBwb3N0aW5nIElEIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICYmIGlzTmFOKHBhcnNlSW50KGxvY2F0aW9uX2lkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgbG9jYXRpb24gSUQgZmlsdGVyIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHN0YXR1cykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBBcHBsaWNhbnRzLnN0YXR1cyA9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKHN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICBpZiAoY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIHNxbCArPSBgIEFORCAoQXBwbGljYW50cy5sb2NhdGlvbl9pZCA9ID8gT1IgQXBwbGljYW50cy5sb2NhdGlvbl9pZCBJUyBOVUxMKWA7IC8vIExvY2F0aW9uIGFkbWluIHNlZXMgYXBwbGljYW50cyBmb3IgdGhlaXIgbG9jYXRpb24gb3IgdW5hc3NpZ25lZFxyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gbm90IGFzc2lnbmVkIHRvIGEgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdlbXBsb3llZScpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgQXBwbGljYW50cy51c2VyX2lkID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJJZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zIHRvIHZpZXcgYXBwbGljYW50cy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFwcGx5IGpvYl9wb3N0aW5nX2lkIGZpbHRlciBpZiBwcm92aWRlZFxyXG4gICAgaWYgKGpvYl9wb3N0aW5nX2lkKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIEFwcGxpY2FudHMuam9iX3Bvc3RpbmdfaWQgPSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChqb2JfcG9zdGluZ19pZCk7XHJcbiAgICB9XHJcbiAgICAvLyBBcHBseSBsb2NhdGlvbiBmaWx0ZXIgZnJvbSBxdWVyeSBwYXJhbXMgZm9yIHN1cGVyX2FkbWluXHJcbiAgICBpZiAobG9jYXRpb25faWQgJiYgcm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBBcHBsaWNhbnRzLmxvY2F0aW9uX2lkID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkYi5hbGwoc3FsLCBwYXJhbXMsIChlcnIsIHJvd3MpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBhcHBsaWNhbnRzOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIGFwcGxpY2FudHMuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuanNvbihyb3dzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBQVVQgL2FwaS9hcHBsaWNhbnRzLzppZFxyXG4gKiBVcGRhdGVzIGFuIGFwcGxpY2FudCdzIGRldGFpbHMgKGUuZy4sIHN0YXR1cywgbm90ZXMpLlxyXG4gKi9cclxuYXBwLnB1dCgnL2FwaS9hcHBsaWNhbnRzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBmdWxsX25hbWUsIGVtYWlsLCBzdGF0dXMsIHJlc3VtZV91cmwsIG5vdGVzLCBsb2NhdGlvbl9pZCwgam9iX3Bvc3RpbmdfaWQsIHBob25lX251bWJlciB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBBcHBsaWNhbnQgVXBkYXRlXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gdXBkYXRlIGFwcGxpY2FudCByZWNvcmRzLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgYXBwbGljYW50IElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZnVsbF9uYW1lICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkZ1bGwgbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmIChlbWFpbCAhPT0gdW5kZWZpbmVkICYmICFpc1ZhbGlkRW1haWwoZW1haWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBlbWFpbCBhZGRyZXNzIG11c3QgYmUgcHJvdmlkZWQgaWYgY2hhbmdpbmcgZW1haWwuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocGhvbmVfbnVtYmVyICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBwaG9uZV9udW1iZXIgIT09ICdzdHJpbmcnIHx8IHBob25lX251bWJlci50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlBob25lIG51bWJlciBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFsbG93ZWRTdGF0dXNlcyA9IFsnQXBwbGllZCcsICdJbnRlcnZpZXdpbmcnLCAnUmVqZWN0ZWQnLCAnSGlyZWQnXTtcclxuICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCAmJiAhYWxsb3dlZFN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgc3RhdHVzIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocmVzdW1lX3VybCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXN1bWVfdXJsICE9PSAnc3RyaW5nJykgeyAvLyBBc3N1bWluZyByZXN1bWVfdXJsIGlzIGEgc3RyaW5nIFVSTFxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUmVzdW1lIFVSTCBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobm90ZXMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygbm90ZXMgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdOb3RlcyBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25faWQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbG9jYXRpb25faWQgIT09ICdudW1iZXInICYmIGxvY2F0aW9uX2lkICE9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdMb2NhdGlvbiBJRCBtdXN0IGJlIGEgbnVtYmVyIG9yIG51bGwgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChqb2JfcG9zdGluZ19pZCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBqb2JfcG9zdGluZ19pZCAhPT0gJ251bWJlcicgJiYgam9iX3Bvc3RpbmdfaWQgIT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0pvYiBwb3N0aW5nIElEIG11c3QgYmUgYSBudW1iZXIgb3IgbnVsbCBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBsZXQgdXBkYXRlU3FsID0gJ1VQREFURSBBcHBsaWNhbnRzIFNFVCAnO1xyXG4gICAgY29uc3QgdXBkYXRlUGFyYW1zID0gW107XHJcbiAgICBjb25zdCBjbGF1c2VzID0gW107XHJcblxyXG4gICAgaWYgKGZ1bGxfbmFtZSAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgnZnVsbF9uYW1lID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChmdWxsX25hbWUpOyB9XHJcbiAgICBpZiAoZW1haWwgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ2VtYWlsID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChlbWFpbCk7IH1cclxuICAgIGlmIChwaG9uZV9udW1iZXIgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ3Bob25lX251bWJlciA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2gocGhvbmVfbnVtYmVyKTsgfVxyXG4gICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgnc3RhdHVzID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChzdGF0dXMpOyB9XHJcbiAgICBpZiAocmVzdW1lX3VybCAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgncmVzdW1lX3VybCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2gocmVzdW1lX3VybCk7IH1cclxuICAgIGlmIChub3RlcyAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgnbm90ZXMgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKG5vdGVzKTsgfVxyXG4gICAgXHJcbiAgICAvLyBBZG1pbnMgY2FuIHVwZGF0ZSBsb2NhdGlvbl9pZCBvciBqb2JfcG9zdGluZ19pZCwgd2l0aCByZXN0cmljdGlvbnMgZm9yIGxvY2F0aW9uX2FkbWluXHJcbiAgICBpZiAobG9jYXRpb25faWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGlmIChyb2xlID09PSAnc3VwZXJfYWRtaW4nKSB7XHJcbiAgICAgICAgICAgIGNsYXVzZXMucHVzaCgnbG9jYXRpb25faWQgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKGxvY2F0aW9uX2lkKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICAgICAgaWYgKGxvY2F0aW9uX2lkICE9PSBjdXJyZW50VXNlckxvY2F0aW9uSWQgJiYgbG9jYXRpb25faWQgIT09IG51bGwpIHsgLy8gbG9jYXRpb25faWQgY2FuIGJlIG51bGwgKGNvbXBhbnktd2lkZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gY2Fubm90IGFzc2lnbiBhcHBsaWNhbnRzIHRvIGFub3RoZXIgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiBsb2NhdGlvbiBhZG1pbiB1cGRhdGVzIGFwcGxpY2FudCBsb2NhdGlvbiwgYW5kIGl0J3MgdGhlaXIgbG9jYXRpb24sIG9yIHNldHRpbmcgdG8gbnVsbCwgaXQncyBhbGxvd2VkXHJcbiAgICAgICAgICAgIGNsYXVzZXMucHVzaCgnbG9jYXRpb25faWQgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKGxvY2F0aW9uX2lkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoam9iX3Bvc3RpbmdfaWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2pvYl9wb3N0aW5nX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChqb2JfcG9zdGluZ19pZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgICAgIC8vIFZlcmlmeSBuZXcgam9iX3Bvc3RpbmdfaWQgYmVsb25ncyB0byB0aGUgbG9jYXRpb24gYWRtaW4ncyBhc3NpZ25lZCBsb2NhdGlvbiBvciBpcyBjb21wYW55LXdpZGVcclxuICAgICAgICAgICAgZGIuZ2V0KCdTRUxFQ1Qgam9iX3Bvc3RpbmdfaWQsIGxvY2F0aW9uX2lkIEZST00gSm9iUG9zdGluZ3MgV0hFUkUgam9iX3Bvc3RpbmdfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPycsIFtqb2JfcG9zdGluZ19pZCwgY29tcGFueUlkXSwgKGVyciwgam9iKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEQiBlcnJvciB2ZXJpZnlpbmcgam9iIHBvc3RpbmcgZm9yIHVwZGF0ZTpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciB2ZXJpZnlpbmcgam9iIHBvc3RpbmcuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgICAgIGlmICgham9iKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSm9iIFBvc3Rpbmcgbm90IGZvdW5kIG9yIGRvZXMgbm90IGJlbG9uZyB0byB5b3VyIGNvbXBhbnkuJyB9KTsgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGpvYi5sb2NhdGlvbl9pZCAhPT0gbnVsbCAmJiBqb2IubG9jYXRpb25faWQgIT09IGN1cnJlbnRVc2VyTG9jYXRpb25JZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gY2Fubm90IGFzc2lnbiBhcHBsaWNhbnRzIHRvIGpvYnMgb3V0c2lkZSB0aGVpciBhc3NpZ25lZCBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdqb2JfcG9zdGluZ19pZCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2goam9iX3Bvc3RpbmdfaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgaWYgKGNsYXVzZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm8gZmllbGRzIHByb3ZpZGVkIGZvciB1cGRhdGUuJyB9KTsgfVxyXG5cclxuICAgIHVwZGF0ZVNxbCArPSBjbGF1c2VzLmpvaW4oJywgJykgKyAnIFdIRVJFIGFwcGxpY2FudF9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JztcclxuICAgIHVwZGF0ZVBhcmFtcy5wdXNoKGlkLCBjb21wYW55SWQpO1xyXG5cclxuICAgIC8vIEZvciBsb2NhdGlvbl9hZG1pbiwgZW5zdXJlIHRoZXkgY2FuIG9ubHkgdXBkYXRlIGFwcGxpY2FudHMgd2l0aGluIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHVwZGF0ZVNxbCArPSAnIEFORCAobG9jYXRpb25faWQgPSA/IE9SIGxvY2F0aW9uX2lkIElTIE5VTEwpJzsgLy8gQWxsb3cgdXBkYXRpbmcgdW5hc3NpZ25lZCBhcHBsaWNhbnRzIHRvb1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VyTG9jYXRpb25JZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIucnVuKHVwZGF0ZVNxbCwgdXBkYXRlUGFyYW1zLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciB1cGRhdGluZyBhcHBsaWNhbnQ6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBhcHBsaWNhbnQuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnQXBwbGljYW50IG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byB1cGRhdGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0FwcGxpY2FudCB1cGRhdGVkIHN1Y2Nlc3NmdWxseSEnIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBERUxFVEUgL2FwaS9hcHBsaWNhbnRzLzppZFxyXG4gKiBEZWxldGVzIGFuIGFwcGxpY2FudC5cclxuICogUmVxdWlyZXMgc3VwZXJfYWRtaW4gb3IgbG9jYXRpb25fYWRtaW4gKGZvciB0aGVpciBsb2NhdGlvbidzIGFwcGxpY2FudHMpLlxyXG4gKi9cclxuYXBwLmRlbGV0ZSgnL2FwaS9hcHBsaWNhbnRzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgSUQgcGFyYW1ldGVyXHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgYXBwbGljYW50IElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicgJiYgcm9sZSAhPT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogT25seSBhZG1pbnMgY2FuIGRlbGV0ZSBhcHBsaWNhbnRzLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNxbCA9ICdERUxFVEUgRlJPTSBBcHBsaWNhbnRzIFdIRVJFIGFwcGxpY2FudF9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JztcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtpZCwgY29tcGFueUlkXTtcclxuXHJcbiAgICAvLyBBZGRpdGlvbmFsIHNlY3VyaXR5IGZvciBsb2NhdGlvbl9hZG1pbjogZW5zdXJlIHRoZXkgb25seSBkZWxldGUgYXBwbGljYW50cyBpbiB0aGVpciBvd24gbG9jYXRpb25cclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgc3FsICs9ICcgQU5EIChsb2NhdGlvbl9pZCA9ID8gT1IgbG9jYXRpb25faWQgSVMgTlVMTCknO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VyTG9jYXRpb25JZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIucnVuKHNxbCwgcGFyYW1zLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBkZWxldGluZyBhcHBsaWNhbnQ6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBhcHBsaWNhbnQuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnQXBwbGljYW50IG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byBkZWxldGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjA0KS5zZW5kKCk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyAtLS0gRG9jdW1lbnQgTWFuYWdlbWVudCBSb3V0ZXMgLS0tXHJcblxyXG4vKipcclxuICogUE9TVCAvYXBpL2RvY3VtZW50c1xyXG4gKiBVcGxvYWRzIChzYXZlcyBtZXRhZGF0YSBmb3IpIGEgbmV3IGRvY3VtZW50LlxyXG4gKiBSZXF1aXJlcyBhdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIE5vdGU6IEFjdHVhbCBmaWxlIHN0b3JhZ2UgaXMgYXNzdW1lZCB0byBiZSBoYW5kbGVkIGJ5IGEgc2VwYXJhdGUgc2VydmljZSAoZS5nLiwgUzMpLlxyXG4gKiBUaGlzIGVuZHBvaW50IG9ubHkgc3RvcmVzIHRoZSBtZXRhZGF0YSBhbmQgYSBVUkwuXHJcbiAqL1xyXG5hcHAucG9zdCgnL2FwaS9kb2N1bWVudHMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyB0aXRsZSwgZmlsZV9uYW1lLCBmaWxlX3R5cGUsIGZpbGVfdXJsLCBkZXNjcmlwdGlvbiB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgdXNlcklkIH0gPSByZXEudXNlcjtcclxuICAgIGNvbnN0IHVwbG9hZF9kYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIERvY3VtZW50IFVwbG9hZFxyXG4gICAgaWYgKCF0aXRsZSB8fCB0eXBlb2YgdGl0bGUgIT09ICdzdHJpbmcnIHx8IHRpdGxlLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0RvY3VtZW50IHRpdGxlIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFmaWxlX25hbWUgfHwgdHlwZW9mIGZpbGVfbmFtZSAhPT0gJ3N0cmluZycgfHwgZmlsZV9uYW1lLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ZpbGUgbmFtZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICghZmlsZV90eXBlIHx8IHR5cGVvZiBmaWxlX3R5cGUgIT09ICdzdHJpbmcnIHx8IGZpbGVfdHlwZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdGaWxlIHR5cGUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLicgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBCYXNpYyBVUkwgdmFsaWRhdGlvbjogY2hlY2tzIGZvciBodHRwKHMpIHByb3RvY29sIGFuZCBzb21lIGNvbnRlbnQuIENhbiBiZSBtb3JlIHJvYnVzdC5cclxuICAgIGNvbnN0IHVybFJlZ2V4ID0gL15odHRwcz86XFwvXFwvW15cXHMkLj8jXS5bXlxcc10qJC9pO1xyXG4gICAgaWYgKCFmaWxlX3VybCB8fCB0eXBlb2YgZmlsZV91cmwgIT09ICdzdHJpbmcnIHx8ICF1cmxSZWdleC50ZXN0KGZpbGVfdXJsKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnQSB2YWxpZCBmaWxlIFVSTCAoc3RhcnRpbmcgd2l0aCBodHRwIG9yIGh0dHBzKSBpcyByZXF1aXJlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGRlc2NyaXB0aW9uICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm90ZXMgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bihcclxuICAgICAgICAnSU5TRVJUIElOVE8gRG9jdW1lbnRzIChjb21wYW55X2lkLCB1c2VyX2lkLCB0aXRsZSwgZmlsZV9uYW1lLCBmaWxlX3R5cGUsIGZpbGVfdXJsLCBkZXNjcmlwdGlvbiwgdXBsb2FkX2RhdGUpIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPyknLFxyXG4gICAgICAgIFtjb21wYW55SWQsIHVzZXJJZCwgdGl0bGUsIGZpbGVfbmFtZSwgZmlsZV90eXBlLCBmaWxlX3VybCwgZGVzY3JpcHRpb24sIHVwbG9hZF9kYXRlXSxcclxuICAgICAgICBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHVwbG9hZGluZyBkb2N1bWVudDpcIiwgZXJyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIHVwbG9hZCBkb2N1bWVudCBtZXRhZGF0YS4nKSk7IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdEb2N1bWVudCBtZXRhZGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkhJywgZG9jdW1lbnRJZDogdGhpcy5sYXN0SUQgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxufSk7XHJcblxyXG4vKipcclxuICogR0VUIC9hcGkvZG9jdW1lbnRzXHJcbiAqIFJldHJpZXZlcyBhIGxpc3Qgb2YgZG9jdW1lbnRzIGZvciB0aGUgY29tcGFueS5cclxuICogRmlsdGVycyBjYW4gYmUgYWRkZWQgKGUuZy4sIGJ5IHVwbG9hZGVyLCBieSB0eXBlKS5cclxuICogUmVxdWlyZXMgYXV0aGVudGljYXRlZCB1c2VyLiBTdXBlciBhZG1pbnMgY2FuIHNlZSBhbGwsIG90aGVycyBjYW4gc2VlIG93biBkb2N1bWVudHMuXHJcbiAqL1xyXG5hcHAuZ2V0KCcvYXBpL2RvY3VtZW50cycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgdXNlcklkLCByb2xlIH0gPSByZXEudXNlcjtcclxuICAgIFxyXG4gICAgbGV0IHNxbCA9ICdTRUxFQ1QgKiBGUk9NIERvY3VtZW50cyBXSEVSRSBjb21wYW55X2lkID0gPyc7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbY29tcGFueUlkXTtcclxuXHJcbiAgICAvLyBOb24tc3VwZXItYWRtaW5zIG9ubHkgc2VlIHRoZWlyIG93biBkb2N1bWVudHNcclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nKSB7XHJcbiAgICAgICAgc3FsICs9ICcgQU5EIHVzZXJfaWQgPSA/JztcclxuICAgICAgICBwYXJhbXMucHVzaCh1c2VySWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLmFsbChzcWwsIHBhcmFtcywgKGVyciwgcm93cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGZldGNoaW5nIGRvY3VtZW50czpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBkb2N1bWVudHMuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuanNvbihyb3dzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBERUxFVEUgL2FwaS9kb2N1bWVudHMvOmlkXHJcbiAqIERlbGV0ZXMgYSBkb2N1bWVudCByZWNvcmQuXHJcbiAqIFJlcXVpcmVzIHN1cGVyX2FkbWluIG9yIHRoZSB1c2VyIHdobyB1cGxvYWRlZCBpdC5cclxuICovXHJcbmFwcC5kZWxldGUoJy9hcGkvZG9jdW1lbnRzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHVzZXJJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgSUQgcGFyYW1ldGVyXHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgZG9jdW1lbnQgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc3FsID0gJ0RFTEVURSBGUk9NIERvY3VtZW50cyBXSEVSRSBkb2N1bWVudF9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JztcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtpZCwgY29tcGFueUlkXTtcclxuXHJcbiAgICAvLyBPbmx5IHN1cGVyX2FkbWluIG9yIHRoZSBvcmlnaW5hbCB1cGxvYWRlciBjYW4gZGVsZXRlXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSAnIEFORCB1c2VyX2lkID0gPyc7XHJcbiAgICAgICAgcGFyYW1zLnB1c2godXNlcklkKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4oc3FsLCBwYXJhbXMsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGRlbGV0aW5nIGRvY3VtZW50OlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgZG9jdW1lbnQuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnRG9jdW1lbnQgbm90IGZvdW5kIG9yIG5vdCBhdXRob3JpemVkIHRvIGRlbGV0ZS4nIH0pOyB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDQpLnNlbmQoKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vIEZhbGxiYWNrIGZvciBhbnkgb3RoZXIgR0VUIHJlcXVlc3Qgbm90IGhhbmRsZWQgYnkgYW4gQVBJIHJvdXRlIChzZXJ2ZXMgaW5kZXguaHRtbCBmb3IgU1BBIGJlaGF2aW9yKVxyXG4vLyBUaGlzIHNob3VsZCBhbHdheXMgYmUgdGhlIExBU1Qgcm91dGUgaW4geW91ciBFeHByZXNzIGFwcFxyXG5hcHAuZ2V0KC8nKicvLCAocmVxLCByZXMpID0+IHtcclxuICAgIC8vIENvcnJlY3RseSBzZXJ2ZSB0aGUgaW5kZXguaHRtbCBmcm9tIHRoZSBwYXJlbnQgZGlyZWN0b3J5XHJcbiAgICByZXMuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJywgJ2luZGV4Lmh0bWwnKSk7XHJcbn0pO1xyXG5cclxuLy8gLS0tIEdsb2JhbCBFcnJvciBIYW5kbGluZyBNaWRkbGV3YXJlIC0tLVxyXG4vLyBUaGlzIHNob3VsZCBiZSB0aGUgdmVyeSBsYXN0IG1pZGRsZXdhcmUgaW4geW91ciBFeHByZXNzIGFwcFxyXG5hcHAudXNlKChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBVbmhhbmRsZWQgRXJyb3I6ICR7ZXJyLnN0YWNrfWApOyAvLyBMb2cgdGhlIGZ1bGwgc3RhY2sgdHJhY2UgZm9yIGRlYnVnZ2luZ1xyXG4gICAgLy8gUmVzcG9uZCB3aXRoIGEgZ2VuZXJpYyBlcnJvciBtZXNzYWdlIGZvciB0aGUgY2xpZW50XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdBbiB1bmV4cGVjdGVkIHNlcnZlciBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxyXG4gICAgICAgIC8vIEluIGRldmVsb3BtZW50LCB5b3UgbWlnaHQgc2VuZCBtb3JlIGRldGFpbHM6XHJcbiAgICAgICAgLy8gbWVzc2FnZTogZXJyLm1lc3NhZ2UsXHJcbiAgICAgICAgLy8gc3RhY2s6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyLnN0YWNrIDogdW5kZWZpbmVkXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyAtLS0gU2VydmVyIFN0YXJ0IC0tLVxyXG4vLyBUaGlzIGNvbmRpdGlvbmFsIGV4cG9ydCBhbGxvd3MgdGhlIGFwcCB0byBiZSBpbXBvcnRlZCBmb3IgdGVzdGluZ1xyXG4vLyB3aXRob3V0IHN0YXJ0aW5nIHRoZSBzZXJ2ZXIgbGlzdGVuZXIgd2hlbiB0aGUgdGVzdCBydW5uZXIgcmVxdWlyZXMgaXQuXHJcbmlmIChyZXF1aXJlLm1haW4gPT09IG1vZHVsZSkge1xyXG4gICAgLy8gT25seSBsaXN0ZW4gaWYgdGhpcyBmaWxlIGlzIHJ1biBkaXJlY3RseSAobm90IHJlcXVpcmVkIGFzIGEgbW9kdWxlKVxyXG4gICAgYXBwLmxpc3RlbihQT1JULCAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFNlcnZlciBpcyBydW5uaW5nIHN1Y2Nlc3NmdWxseSBvbiBodHRwOi8vbG9jYWxob3N0OiR7UE9SVH1gKTtcclxuICAgIH0pO1xyXG59IGVsc2Uge1xyXG4gICAgLy8gRXhwb3J0IHRoZSBhcHAgZm9yIHRlc3RpbmcgcHVycG9zZXNcclxuICAgIG1vZHVsZS5leHBvcnRzID0gYXBwO1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7MEJBQ0EsdUtBQUFBLENBQUEsRUFBQUMsQ0FBQSxFQUFBQyxDQUFBLHdCQUFBQyxNQUFBLEdBQUFBLE1BQUEsT0FBQUMsQ0FBQSxHQUFBRixDQUFBLENBQUFHLFFBQUEsa0JBQUFDLENBQUEsR0FBQUosQ0FBQSxDQUFBSyxXQUFBLDhCQUFBQyxFQUFBTixDQUFBLEVBQUFFLENBQUEsRUFBQUUsQ0FBQSxFQUFBRSxDQUFBLFFBQUFDLENBQUEsR0FBQUwsQ0FBQSxJQUFBQSxDQUFBLENBQUFNLFNBQUEsWUFBQUMsU0FBQSxHQUFBUCxDQUFBLEdBQUFPLFNBQUEsRUFBQUMsQ0FBQSxHQUFBQyxNQUFBLENBQUFDLE1BQUEsQ0FBQUwsQ0FBQSxDQUFBQyxTQUFBLFVBQUFLLG1CQUFBLENBQUFILENBQUEsdUJBQUFWLENBQUEsRUFBQUUsQ0FBQSxFQUFBRSxDQUFBLFFBQUFFLENBQUEsRUFBQUMsQ0FBQSxFQUFBRyxDQUFBLEVBQUFJLENBQUEsTUFBQUMsQ0FBQSxHQUFBWCxDQUFBLFFBQUFZLENBQUEsT0FBQUMsQ0FBQSxLQUFBRixDQUFBLEtBQUFiLENBQUEsS0FBQWdCLENBQUEsRUFBQXBCLENBQUEsRUFBQXFCLENBQUEsRUFBQUMsQ0FBQSxFQUFBTixDQUFBLEVBQUFNLENBQUEsQ0FBQUMsSUFBQSxDQUFBdkIsQ0FBQSxNQUFBc0IsQ0FBQSxXQUFBQSxFQUFBckIsQ0FBQSxFQUFBQyxDQUFBLFdBQUFNLENBQUEsR0FBQVAsQ0FBQSxFQUFBUSxDQUFBLE1BQUFHLENBQUEsR0FBQVosQ0FBQSxFQUFBbUIsQ0FBQSxDQUFBZixDQUFBLEdBQUFGLENBQUEsRUFBQW1CLENBQUEsZ0JBQUFDLEVBQUFwQixDQUFBLEVBQUFFLENBQUEsU0FBQUssQ0FBQSxHQUFBUCxDQUFBLEVBQUFVLENBQUEsR0FBQVIsQ0FBQSxFQUFBSCxDQUFBLE9BQUFpQixDQUFBLElBQUFG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RyxFQUFFO01BQUVmLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLG1DQUFtQyxFQUFFYyxHQUFHLENBQUM7TUFBRSxPQUFPZ0IsSUFBSSxDQUFDLElBQUlwRSxLQUFLLENBQUMsNEJBQTRCLENBQUMsQ0FBQztJQUFFLENBQUMsQ0FBQztJQUM1SCxJQUFJLElBQUksQ0FBQ2lLLE9BQU8sS0FBSyxDQUFDLEVBQUU7TUFBRSxPQUFPN0ksR0FBRyxDQUFDb0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDYyxJQUFJLENBQUM7UUFBRWhCLEtBQUssRUFBRTtNQUFrRCxDQUFDLENBQUM7SUFBRTtJQUNySGxCLEdBQUcsQ0FBQ29CLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUM7RUFDMUIsQ0FBQyxDQUFDO0FBQ04sQ0FBQyxDQUFDOztBQUVGO0FBQ0E7QUFDQW5ELEdBQUcsQ0FBQzJFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsVUFBQzlDLEdBQUcsRUFBRUMsR0FBRyxFQUFLO0VBQ3pCO0VBQ0FBLEdBQUcsQ0FBQzBQLFFBQVEsQ0FBQ3RTLElBQUksQ0FBQ21GLElBQUksQ0FBQ0MsU0FBUyxFQUFFLElBQUksRUFBRSxZQUFZLENBQUMsQ0FBQztBQUMxRCxDQUFDLENBQUM7O0FBRUY7QUFDQTtBQUNBdEUsR0FBRyxDQUFDZSxHQUFHLENBQUMsVUFBQytDLEdBQUcsRUFBRWpDLEdBQUcsRUFBRUMsR0FBRyxFQUFFZ0QsSUFBSSxFQUFLO0VBQzdCL0IsT0FBTyxDQUFDQyxLQUFLLHFCQUFBQyxNQUFBLENBQXFCYSxHQUFHLENBQUMyTixLQUFLLENBQUUsQ0FBQyxDQUFDLENBQUM7RUFDaEQ7RUFDQTNQLEdBQUcsQ0FBQ29CLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ2MsSUFBSSxDQUFDO0lBQ2pCaEIsS0FBSyxFQUFFO0lBQ1A7SUFDQTtJQUNBO0VBQ0osQ0FBQyxDQUFDO0FBQ04sQ0FBQyxDQUFDOztBQUVGO0FBQ0E7QUFDQTtBQUNBLElBQUlwRSxPQUFPLENBQUNlLElBQUksS0FBS0MsTUFBTSxFQUFFO0VBQ3pCO0VBQ0FJLEdBQUcsQ0FBQzBSLE1BQU0sQ0FBQzFRLElBQUksRUFBRSxZQUFNO0lBQ25CK0IsT0FBTyxDQUFDTyxHQUFHLHVEQUFBTCxNQUFBLENBQXVEakMsSUFBSSxDQUFFLENBQUM7RUFDN0UsQ0FBQyxDQUFDO0FBQ04sQ0FBQyxNQUFNO0VBQ0g7RUFDQXBCLE1BQU0sQ0FBQytSLE9BQU8sR0FBRzNSLEdBQUc7QUFDeEIiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","express","require","sqlite3","verbose","bcrypt","jwt","cors","path","csv","_require","Readable","rateLimit","morgan","process","env","NODE_ENV","main","module","config","stripeInstance","STRIPE_SECRET_KEY","app","allowedOrigins","CORS_ORIGIN","split","push","corsOptions","origin","callback","includes","msg","Error","indexOf","methods","credentials","optionsSuccessStatus","use","PORT","STRIPE_WEBHOOK_SECRET","authLimiter","windowMs","max","message","standardHeaders","legacyHeaders","post","raw","type","_ref","_callee","req","res","sig","event","session","userId","planId","subscriptionUpdated","subscriptionDeleted","invoiceSucceeded","invoiceFailed","_t","_t2","_context","headers","webhooks","constructEvent","body","console","error","concat","status","send","data","object","log","id","metadata","payment_status","db","run","customer","subscription","err","plan","json","received","_x","_x2","JWT_SECRET","join","__dirname","maxAge","immutable","Database","exit","get","serialize","authenticateToken","next","authHeader","token","verify","user","isValidEmail","email","test","_ref2","_callee2","_req$body","company_name","full_name","password","password_hash","_t3","_context2","trim","hash","newCompanyId","lastID","userInsertErr","_x3","_x4","_x5","_req$body2","_ref3","_callee3","isMatch","payload","_context3","compare","user_id","role","fullName","companyId","company_id","locationId","location_id","subscriptionStatus","subscription_status","plan_id","sign","expiresIn","_x6","_x7","_ref4","_callee4","_req$body3","_req$user","_t4","_context4","location","_x8","_x9","_x0","_ref5","_callee5","_req$body4","position","employee_id","_req$user2","currentUserLocationId","isLocationIdValid","locationVerification","_t5","_context5","isNaN","undefined","reject","_x1","_x10","_x11","_req$user3","put","_ref6","_callee7","_req$body5","currentPassword","newPassword","_context7","_ref7","_callee6","updateSql","updateParams","clauses","changesMade","existingUser","newPasswordHash","_t6","_context6","row","updateErr","changes","fetchErr","updatedUser","newPayload","newToken","_x15","_x16","_x12","_x13","_x14","_req$user4","sql","params","all","rows","_req$body6","location_name","location_address","_req$user5","_req$user6","parseInt","_req$user7","currentUserId","_req$query","query","filterRole","filterLocationId","allowedRoles","_req$user8","authenticatedUserId","_ref8","_callee8","_req$user9","allowedPlanIds","priceIdMap","stripePriceId","customerId","userRecord","_t7","_context8","STRIPE_PRICE_ID_PRO","STRIPE_PRICE_ID_ENT","stripe_customer_id","customers","checkout","sessions","mode","line_items","price","quantity","success_url","FRONTEND_URL","cancel_url","url","_x17","_x18","_x19","_req$body7","start_time","end_time","notes","_req$user0","Date","getTime","employee","insertErr","scheduleId","_req$query2","start_date","end_date","_req$user1","_req$user10","_req$body8","title","description","requirements","_req$user11","created_date","toISOString","_req$query3","_req$user12","allowedStatuses","_req$body9","_req$user13","_req$user14","_req$body0","job_posting_id","phone_number","_req$user15","application_date","jobPosting","applicantId","_req$query4","_req$user16","_req$body1","resume_url","_req$user17","job","_req$user18","_req$body10","file_name","file_type","file_url","_req$user19","upload_date","urlRegex","documentId","_req$user20","_req$user21","sendFile","stack","listen","exports"],"sourceRoot":"C:\\Users\\xarcy\\OneDrive\\Desktop\\onboardflow\\backend\\test\\","sources":["server.test.cjs"],"sourcesContent":["// --- Imports ---\r\nconst express = require('express');\r\nconst sqlite3 = require('sqlite3').verbose();\r\nconst bcrypt = require('bcryptjs');\r\nconst jwt = require('jsonwebtoken');\r\nconst cors = require('cors'); // Import cors\r\nconst path = require('path');\r\nconst csv = require('csv-parser'); // For CSV parsing\r\nconst { Readable } = require('stream'); // For creating a readable stream from a string\r\nconst rateLimit = require('express-rate-limit'); // Import rate-limiting middleware\r\nconst morgan = require('morgan'); // Import morgan for request logging\r\n\r\n// Load environment variables from .env file in development\r\n// IMPORTANT: Only load .env if server.js is run directly, NOT when required by tests.\r\nif (process.env.NODE_ENV !== 'production' && require.main === module) {\r\n    require('dotenv').config();\r\n}\r\n\r\n// Import the Stripe library and initialize it with your secret key\r\n// Use process.env.STRIPE_SECRET_KEY for production\r\nconst stripeInstance = require('stripe')(process.env.STRIPE_SECRET_KEY || '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');\r\n\r\n// --- App Initialization ---\r\nconst app = express();\r\n\r\n// Configure CORS for production environment\r\nconst allowedOrigins = process.env.CORS_ORIGIN ? process.env.CORS_ORIGIN.split(',') : ['http://localhost:8000']; // Default to localhost for development\r\n\r\n// Add 'null' to allowed origins if not in production and not explicitly set for local file access\r\nif (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\r\n    allowedOrigins.push('null');\r\n}\r\n\r\nconst corsOptions = {\r\n    origin: function (origin, callback) {\r\n        // Allow requests with no origin (like mobile apps, curl, or local file access if 'null' is in allowedOrigins)\r\n        if (!origin) {\r\n            // Check if 'null' is explicitly allowed or if we're in dev and no CORS_ORIGIN is set\r\n            if (allowedOrigins.includes('null') || (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN)) {\r\n                return callback(null, true);\r\n            }\r\n            const msg = 'The CORS policy for this site does not allow access from the specified Origin.';\r\n            return callback(new Error(msg), false);\r\n        }\r\n\r\n        if (allowedOrigins.indexOf(origin) === -1) {\r\n            const msg = 'The CORS policy for this site does not allow access from the specified Origin.';\r\n            return callback(new Error(msg), false);\r\n        }\r\n        return callback(null, true);\r\n    },\r\n    methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\r\n    credentials: true, // Allow cookies to be sent\r\n    optionsSuccessStatus: 204 // Some legacy browsers (IE11, various SmartTVs) choke on 204\r\n};\r\napp.use(cors(corsOptions));\r\n\r\n\r\n// Use process.env.PORT for production, fallback to 3000 for local development\r\nconst PORT = process.env.PORT || 3000;\r\n\r\n// Define a webhook secret for Stripe. This should also be an environment variable.\r\nconst STRIPE_WEBHOOK_SECRET = process.env.STRIPE_WEBHOOK_SECRET || 'whsec_YOUR_WEBHOOK_SECRET';\r\n\r\n// --- Rate Limiting Configuration ---\r\nconst authLimiter = rateLimit({\r\n    windowMs: 15 * 60 * 1000, // 15 minutes\r\n    max: 10, // Max 10 requests per 15 minutes per IP\r\n    message: 'Too many login/registration attempts from this IP, please try again after 15 minutes',\r\n    standardHeaders: true, // Return rate limit info in the `RateLimit-*` headers\r\n    legacyHeaders: false, // Disable the `X-RateLimit-*` headers\r\n});\r\n\r\n// --- Middleware for Stripe Webhook (MUST be before express.json() for other routes) --\r\n// This route needs the raw body for signature verification.\r\napp.post('/api/stripe-webhook', express.raw({type: 'application/json'}), async (req, res) => {\r\n    const sig = req.headers['stripe-signature'];\r\n\r\n    let event;\r\n\r\n    try {\r\n        event = stripeInstance.webhooks.constructEvent(req.body, sig, STRIPE_WEBHOOK_SECRET);\r\n    } catch (err) {\r\n        console.error(`Webhook Error: ${err.message}`);\r\n        return res.status(400).send(`Webhook Error: ${err.message}`);\r\n    }\r\n\r\n    // Handle the event\r\n    switch (event.type) {\r\n        case 'checkout.session.completed':\r\n            const session = event.data.object;\r\n            console.log('Checkout Session Completed:', session.id);\r\n            const userId = session.metadata.userId;\r\n            const planId = session.metadata.planId;\r\n            if (session.payment_status === 'paid' && userId && planId) {\r\n                db.run(\r\n                    'UPDATE Users SET stripe_customer_id = ?, stripe_subscription_id = ?, subscription_status = ?, plan_id = ? WHERE user_id = ?',\r\n                    [session.customer, session.subscription, 'active', planId, userId],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for checkout.session.completed:', err.message);\r\n                        else console.log(`User ${userId} subscription updated to ${planId} (active).`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'customer.subscription.updated':\r\n            const subscriptionUpdated = event.data.object;\r\n            console.log('Subscription Updated:', subscriptionUpdated.id);\r\n            if (subscriptionUpdated.customer && subscriptionUpdated.status && subscriptionUpdated.plan && subscriptionUpdated.plan.id) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ?, plan_id = ? WHERE stripe_customer_id = ?',\r\n                    [subscriptionUpdated.status, subscriptionUpdated.plan.id, subscriptionUpdated.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for customer.subscription.updated:', err.message);\r\n                        else console.log(`Subscription for customer ${subscriptionUpdated.customer} status updated to ${subscriptionUpdated.status} and plan to ${subscriptionUpdated.plan.id}.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'customer.subscription.deleted':\r\n            const subscriptionDeleted = event.data.object;\r\n            console.log('Subscription Deleted:', subscriptionDeleted.id);\r\n            if (subscriptionDeleted.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ?, plan_id = ?, stripe_subscription_id = NULL WHERE stripe_customer_id = ?',\r\n                    ['cancelled', 'free', subscriptionDeleted.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for customer.subscription.deleted:', err.message);\r\n                        else console.log(`Subscription for customer ${subscriptionDeleted.customer} marked as cancelled and reverted to free.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'invoice.payment_succeeded':\r\n            const invoiceSucceeded = event.data.object;\r\n            console.log('Invoice Payment Succeeded:', invoiceSucceeded.id);\r\n            if (invoiceSucceeded.subscription && invoiceSucceeded.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?',\r\n                    ['active', invoiceSucceeded.subscription, invoiceSucceeded.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for invoice.payment_succeeded:', err.message);\r\n                        else console.log(`Subscription ${invoiceSucceeded.subscription} status set to active.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'invoice.payment_failed':\r\n            const invoiceFailed = event.data.object;\r\n            console.log('Invoice Payment Failed:', invoiceFailed.id);\r\n            if (invoiceFailed.subscription && invoiceFailed.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?',\r\n                    ['past_due', invoiceFailed.subscription, invoiceFailed.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for invoice.payment_failed:', err.message);\r\n                        else console.log(`Subscription ${invoiceFailed.subscription} status set to past_due.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        default:\r\n            console.log(`Unhandled event type ${event.type}`);\r\n    }\r\n    res.status(200).json({ received: true });\r\n});\r\n\r\n// IMPORTANT: express.json() for parsing JSON request bodies MUST come AFTER the webhook route\r\napp.use(express.json());\r\n\r\n// --- JWT Secret ---\r\n// CRUCIAL FOR TESTING: Directly access process.env.JWT_SECRET without fallback.\r\n// This ensures tests control the secret used by the app instance.\r\nconst JWT_SECRET = process.env.JWT_SECRET; // Ensure it *must* come from process.env\r\n\r\n// --- Request Logging (using Morgan) ---\r\n// 'dev' format is good for development, 'combined' or 'tiny' for production logs\r\napp.use(morgan('dev'));\r\n\r\n// --- Serve Static Files (Frontend) with Caching ---\r\n// This middleware serves static files from the 'onboardflow' root directory\r\n// and sets Cache-Control headers for browser caching.\r\napp.use(express.static(path.join(__dirname, '..'), {\r\n    maxAge: '7d', // Cache static assets for 7 days (e.g., CSS, JS, images, favicon)\r\n    immutable: false // Set to true if asset filenames include content hashes (e.g., app.min.js?v=hash)\r\n}));\r\n\r\n// --- Database Setup ---\r\nconst db = new sqlite3.Database('./onboardflow.db', (err) => {\r\n    if (err) {\r\n        // Log database connection error and exit\r\n        console.error(\"Error opening database:\", err.message);\r\n        process.exit(1); // Exit process if database connection fails\r\n    } else {\r\n        console.log(\"Successfully connected to the database.\");\r\n        db.get(\"PRAGMA foreign_keys = ON\");\r\n        db.serialize(() => {\r\n            db.run(`CREATE TABLE IF NOT EXISTS Companies (company_id INTEGER PRIMARY KEY AUTOINCREMENT, company_name TEXT NOT NULL UNIQUE)`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Locations (location_id INTEGER PRIMARY KEY AUTOINCREMENT, company_id INTEGER, location_name TEXT NOT NULL, location_address TEXT NOT NULL, FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE)`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Users (\r\n                user_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER,\r\n                location_id INTEGER,\r\n                full_name TEXT NOT NULL,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                position TEXT,\r\n                employee_id TEXT,\r\n                role TEXT NOT NULL,\r\n                stripe_customer_id TEXT,\r\n                stripe_subscription_id TEXT,\r\n                subscription_status TEXT,\r\n                plan_id TEXT,\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Schedules (\r\n                schedule_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                employee_id INTEGER NOT NULL,\r\n                location_id INTEGER NOT NULL,\r\n                start_time TEXT NOT NULL,\r\n                end_time TEXT NOT NULL,\r\n                notes TEXT,\r\n                FOREIGN KEY (employee_id) REFERENCES Users(user_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            // NEW: Create JobPostings table\r\n            db.run(`CREATE TABLE IF NOT EXISTS JobPostings (\r\n                job_posting_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                location_id INTEGER, -- Optional: link job posting to a specific location\r\n                title TEXT NOT NULL,\r\n                description TEXT NOT NULL,\r\n                requirements TEXT, -- Optional: job requirements\r\n                status TEXT NOT NULL DEFAULT 'Open', -- e.g., 'Open', 'Closed', 'Filled'\r\n                created_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            // Update Applicants table schema to link to JobPostings and add phone_number\r\n            db.run(`CREATE TABLE IF NOT EXISTS Applicants (\r\n                applicant_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                location_id INTEGER, -- Optional: applicant's preferred location or location applied for\r\n                job_posting_id INTEGER, -- NEW: Link to JobPostings table\r\n                full_name TEXT NOT NULL,\r\n                email TEXT NOT NULL,\r\n                phone_number TEXT, -- NEW: Phone number field\r\n                status TEXT NOT NULL DEFAULT 'Applied', -- e.g., 'Applied', 'Interviewing', 'Rejected', 'Hired'\r\n                resume_url TEXT, -- Optional: URL to a resume document (e.g., hosted on cloud storage)\r\n                notes TEXT,\r\n                application_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (job_posting_id) REFERENCES JobPostings(job_posting_id) ON DELETE SET NULL -- If job posting is deleted, set this to NULL\r\n            )`);\r\n            // NEW: Create Documents table for file/video uploads\r\n            db.run(`CREATE TABLE IF NOT EXISTS Documents (\r\n                document_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL, -- User who uploaded the document\r\n                title TEXT NOT NULL,\r\n                file_name TEXT NOT NULL,\r\n                file_type TEXT NOT NULL,\r\n                file_url TEXT NOT NULL, -- URL to the stored file (e.g., S3, GCS)\r\n                description TEXT,\r\n                upload_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES Users(user_id) ON DELETE CASCADE\r\n            )`);\r\n        });\r\n    }\r\n});\r\n\r\n// --- Authentication Middleware ---\r\nfunction authenticateToken(req, res, next) {\r\n    const authHeader = req.headers['authorization'];\r\n    const token = authHeader && authHeader.split(' ')[1];\r\n    if (token == null) {\r\n        return res.status(401).json({ error: 'Unauthorized: No token provided.' });\r\n    }\r\n    jwt.verify(token, JWT_SECRET, (err, user) => {\r\n        if (err) {\r\n            // Log the specific JWT error for debugging\r\n            console.error(\"JWT Verification Error:\", err.message);\r\n            return res.status(403).json({ error: 'Forbidden: Invalid or expired token.' });\r\n        }\r\n        req.user = user;\r\n        next();\r\n    });\r\n}\r\n\r\n// --- Helper for Input Validation ---\r\nconst isValidEmail = (email) => {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\r\n};\r\n\r\n// --- API Routes (ALL API ROUTES SHOULD BE DEFINED HERE, BEFORE STATIC FILE SERVING) ---\r\n\r\n// Apply rate limiting to authentication routes\r\napp.post('/api/register', authLimiter, async (req, res, next) => { // Added 'next'\r\n    const { company_name, full_name, email, password } = req.body;\r\n\r\n    // Input Validation for Registration\r\n    if (!company_name || typeof company_name !== 'string' || company_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Company name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Password is required and must be at least 6 characters long.\" });\r\n    }\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n        db.serialize(() => {\r\n            db.run('BEGIN TRANSACTION');\r\n            db.run('INSERT INTO Companies (company_name) VALUES (?)', [company_name], function(err) {\r\n                if (err) { \r\n                    db.run('ROLLBACK'); \r\n                    console.error(\"Database error creating company:\", err);\r\n                    return next(new Error(\"Could not create company.\")); // Pass error to error handling middleware\r\n                }\r\n                const newCompanyId = this.lastID;\r\n                db.run(`INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'super_admin', 'active', 'free')`, [newCompanyId, null, full_name, email, password_hash], function(userInsertErr) {\r\n                    if (userInsertErr) { \r\n                        db.run('ROLLBACK'); \r\n                        console.error(\"Database error creating user:\", userInsertErr);\r\n                        if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { \r\n                            return res.status(409).json({ error: 'Email already registered.' }); \r\n                        }\r\n                        return next(new Error(\"Could not create user.\")); // Pass error\r\n                    }\r\n                    db.run('COMMIT');\r\n                    res.status(201).json({ message: \"Company and user registered successfully!\", userId: this.lastID });\r\n                });\r\n            });\r\n        });\r\n    } catch (error) { \r\n        console.error(\"Registration error:\", error);\r\n        next(error); // Pass error to error handling middleware\r\n    }\r\n});\r\n\r\napp.post('/api/login', authLimiter, (req, res, next) => { // Added 'next'\r\n    const { email, password } = req.body;\r\n\r\n    // Input Validation for Login\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length === 0) {\r\n        return res.status(400).json({ error: \"Password is required.\" });\r\n    }\r\n\r\n    db.get(\"SELECT * FROM Users WHERE email = ?\", [email], async (err, user) => {\r\n        if (err) {\r\n            console.error(\"Database error during login:\", err);\r\n            return next(new Error(\"A server error occurred during login.\")); // Pass error\r\n        }\r\n        if (!user) { \r\n            return res.status(401).json({ error: \"Invalid credentials.\" }); \r\n        }\r\n        const isMatch = await bcrypt.compare(password, user.password_hash);\r\n        if (!isMatch) { \r\n            return res.status(401).json({ error: \"Invalid credentials.\" }); \r\n        }\r\n        const payload = { userId: user.user_id, email: user.email, role: user.role, fullName: user.full_name, companyId: user.company_id, locationId: user.location_id, subscriptionStatus: user.subscription_status, planId: user.plan_id };\r\n        const token = jwt.sign(payload, JWT_SECRET, { expiresIn: '1h' });\r\n        res.status(200).json({ message: \"Login successful!\", token, role: user.role });\r\n    });\r\n});\r\n\r\napp.post('/api/invite-admin', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { full_name, email, password, location_id } = req.body;\r\n    const { companyId, role } = req.user;\r\n\r\n    // Input Validation for Invite Admin\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can invite other admins.' }); }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Temporary password is required and must be at least 6 characters long.\" });\r\n    }\r\n    if (typeof location_id !== 'number' || location_id <= 0) { // Assuming location_id is an integer ID\r\n        return res.status(400).json({ error: \"A valid location ID is required.\" });\r\n    }\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n        db.get('SELECT * FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n            if (err) { console.error(\"Database error checking location:\", err); return next(new Error('Database error when verifying location.')); } // Pass error\r\n            if (!location) { return res.status(400).json({ error: 'Selected location does not exist or does not belong to your company.' }); }\r\n            db.run(`INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'location_admin', 'active', 'free')`, [companyId, location_id, full_name, email, password_hash], function(userInsertErr) {\r\n                if (userInsertErr) {\r\n                    console.error(\"Database error inviting admin:\", userInsertErr);\r\n                    if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { return res.status(409).json({ error: 'Email already registered.' }); }\r\n                    return next(new Error('Failed to invite admin.')); // Pass error\r\n                }\r\n                res.status(201).json({ message: \"Location admin invited successfully!\", userId: this.lastID });\r\n            });\r\n        });\r\n    } catch (error) { console.error(\"Invite admin error:\", error); next(error); } // Pass error\r\n});\r\n\r\n// NEW: API endpoint for inviting employees\r\napp.post('/api/invite-employee', authenticateToken, async (req, res, next) => {\r\n    const { full_name, email, password, position, employee_id, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Authorization: Super admin can invite anyone, Location admin can only invite to their location or unassigned\r\n    if (!['super_admin', 'location_admin'].includes(role)) {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can invite employees.' });\r\n    }\r\n\r\n    // Input Validation for Invite Employee\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Temporary password is required and must be at least 6 characters long.\" });\r\n    }\r\n    \r\n    // Corrected location_id validation: Must be a number > 0.\r\n    // If location_id is null, it indicates an unassigned location, which is valid for a super admin.\r\n    // For location_admin, it must match their current location.\r\n    // This revised logic correctly checks for null OR a valid positive integer.\r\n    const isLocationIdValid = location_id === null || (typeof location_id === 'number' && !isNaN(location_id) && location_id > 0);\r\n    if (!isLocationIdValid) {\r\n        return res.status(400).json({ error: \"A valid location ID (positive number) is required for employee, or null for unassigned.\" });\r\n    }\r\n    \r\n    if (position !== undefined && typeof position !== 'string') {\r\n        return res.status(400).json({ error: 'Position must be a string if provided.' });\r\n    }\r\n    if (employee_id !== undefined && typeof employee_id !== 'string') {\r\n        return res.status(400).json({ error: 'Employee ID must be a string if provided.' });\r\n    }\r\n\r\n    // Location Admin specific check: ensure they are inviting to their assigned location or null\r\n    // If location_admin tries to set a location that is NOT their own, block it.\r\n    // Allow location_admin to set to null if their current location is null.\r\n    if (role === 'location_admin') {\r\n        // A location admin can ONLY assign an employee to their own location or to null (unassigned)\r\n        if (location_id !== currentUserLocationId) {\r\n            // If the target location_id is not the current user's location, check if both are null\r\n            if (!(location_id === null && currentUserLocationId === null)) {\r\n                return res.status(403).json({ error: 'Access Denied: Location admin can only invite employees to their assigned location.' });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n\r\n        // Verify the location_id belongs to the company and, if location_admin, matches their assigned location\r\n        // This check is crucial if location_id is NOT null\r\n        if (location_id !== null) {\r\n            const locationVerification = await new Promise((resolve, reject) => {\r\n                db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n                    if (err) reject(err);\r\n                    resolve(location);\r\n                });\r\n            });\r\n            if (!locationVerification) {\r\n                return res.status(400).json({ error: 'Selected location does not exist or does not belong to your company.' });\r\n            }\r\n        }\r\n\r\n        db.run(\r\n            `INSERT INTO Users (company_id, location_id, full_name, email, password_hash, position, employee_id, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, ?, ?, 'employee', 'active', 'free')`,\r\n            [companyId, location_id, full_name, email, password_hash, position, employee_id,], // Default new employees to 'employee' role\r\n            function(userInsertErr) {\r\n                if (userInsertErr) {\r\n                    console.error(\"Database error inviting employee:\", userInsertErr);\r\n                    if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { return res.status(409).json({ error: 'Email already registered.' }); }\r\n                    return next(new Error('Failed to invite employee.'));\r\n                }\r\n                res.status(201).json({ message: \"Employee invited successfully!\", userId: this.lastID });\r\n            }\r\n        );\r\n    } catch (error) {\r\n        console.error(\"Invite employee error:\", error);\r\n        next(error);\r\n    }\r\n});\r\n\r\n\r\napp.get('/api/profile', authenticateToken, (req, res) => {\r\n    const { userId, fullName, email, role, companyId, locationId, subscriptionStatus, planId } = req.user;\r\n    res.status(200).json({ userId, fullName, email, role, companyId, locationId, subscriptionStatus, planId });\r\n});\r\n\r\napp.put('/api/profile', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { fullName, email, currentPassword, newPassword } = req.body;\r\n    const { userId } = req.user;\r\n\r\n    // Input Validation for Profile Update\r\n    if (fullName === undefined && email === undefined && (!currentPassword || !newPassword)) {\r\n        return res.status(400).json({ error: 'No data provided for update.' });\r\n    }\r\n    if (fullName !== undefined && (typeof fullName !== 'string' || fullName.trim() === '')) {\r\n        return res.status(400).json({ error: \"Full name must be a non-empty string if provided.\" });\r\n    }\r\n    if (email !== undefined && !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address must be provided if changing email.\" });\r\n    }\r\n    if (newPassword !== undefined && (typeof newPassword !== 'string' || newPassword.length < 6)) {\r\n        return res.status(400).json({ error: \"New password must be at least 6 characters long if changing password.\" });\r\n    }\r\n    if ((currentPassword && !newPassword) || (!currentPassword && newPassword)) {\r\n        return res.status(400).json({ error: 'Both current password and new password are required to change password.' });\r\n    }\r\n\r\n\r\n    db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], async (err, user) => {\r\n        if (err) { console.error(\"Database error fetching user for profile update:\", err); return next(new Error(\"Server error during profile update.\")); } // Pass error\r\n        if (!user) { return res.status(404).json({ error: \"User not found.\" }); }\r\n        let updateSql = 'UPDATE Users SET ';\r\n        const updateParams = [];\r\n        const clauses = [];\r\n        let changesMade = false;\r\n        if (fullName !== undefined && fullName !== user.full_name) {\r\n            clauses.push('full_name = ?');\r\n            updateParams.push(fullName);\r\n            changesMade = true;\r\n        }\r\n        if (email !== undefined && email !== user.email) {\r\n            try { // Added try-catch for async await in db.get\r\n                const existingUser = await new Promise((resolve, reject) => {\r\n                    db.get(\"SELECT user_id FROM Users WHERE email = ? AND user_id != ?\", [email, userId], (err, row) => {\r\n                        if (err) reject(err);\r\n                        resolve(row);\r\n                    });\r\n                });\r\n                if (existingUser) { return res.status(409).json({ error: 'Email already in use by another account.' }); }\r\n            } catch (dbErr) {\r\n                console.error(\"Database error checking existing email:\", dbErr);\r\n                return next(new Error(\"Server error verifying email availability.\"));\r\n            }\r\n            clauses.push('email = ?');\r\n            updateParams.push(email);\r\n            changesMade = true;\r\n        }\r\n        if (currentPassword && newPassword) {\r\n            const isMatch = await bcrypt.compare(currentPassword, user.password_hash);\r\n            if (!isMatch) { return res.status(401).json({ error: \"Current password incorrect.\" }); }\r\n            const newPasswordHash = await bcrypt.hash(newPassword, 10);\r\n            clauses.push('password_hash = ?');\r\n            updateParams.push(newPasswordHash);\r\n            changesMade = true;\r\n        }\r\n        if (!changesMade) { return res.status(200).json({ message: 'No changes detected. Profile remains the same.' }); }\r\n        updateSql += clauses.join(', ') + ' WHERE user_id = ?';\r\n        updateParams.push(userId);\r\n        db.run(updateSql, updateParams, function(updateErr) {\r\n            if (updateErr) { console.error(\"Database error updating profile:\", updateErr); return next(new Error('Failed to update profile.')); } // Pass error\r\n            if (this.changes > 0) {\r\n                db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], (fetchErr, updatedUser) => {\r\n                    if (fetchErr || !updatedUser) { console.error(\"Error fetching updated user for new token:\", fetchErr); return res.status(200).json({ message: 'Profile updated successfully, but token could not be refreshed.' }); }\r\n                    const newPayload = { userId: updatedUser.user_id, email: updatedUser.email, role: updatedUser.role, fullName: updatedUser.full_name, companyId: updatedUser.company_id, locationId: updatedUser.location_id, subscriptionStatus: updatedUser.subscription_status, planId: user.plan_id };\r\n                    const newToken = jwt.sign(newPayload, JWT_SECRET, { expiresIn: '1h' });\r\n                    res.status(200).json({ message: 'Profile updated successfully!', token: newToken });\r\n                });\r\n            } else { res.status(200).json({ message: 'No changes applied as data was identical.' }); }\r\n        });\r\n    });\r\n});\r\n\r\napp.get('/api/locations', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, role } = req.user;\r\n    let sql = 'SELECT location_id, location_name, location_address FROM Locations WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Allowing super_admin, location_admin, and employee to view all locations in their company for dropdowns/selection\r\n    if (!['super_admin', 'location_admin', 'employee'].includes(role)) {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view locations.' });\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching locations:\", err); return next(new Error('Database error fetching locations.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.post('/api/locations', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { location_name, location_address } = req.body;\r\n    const { companyId, role } = req.user;\r\n\r\n    // Input Validation for Create Location\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can create locations.' }); }\r\n    if (!location_name || typeof location_name !== 'string' || location_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Location name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!location_address || typeof location_address !== 'string' || location_address.trim() === '') {\r\n        return res.status(400).json({ error: \"Location address is required and must be a non-empty string.\" });\r\n    }\r\n\r\n    db.run('INSERT INTO Locations (company_id, location_name, location_address) VALUES (?, ?, ?)', [companyId, location_name, location_address], function(err) {\r\n        if (err) { console.error(\"Database error creating location:\", err); return next(new Error('Failed to create location.')); } // Pass error\r\n        res.status(201).json({ message: 'Location created!', locationId: this.lastID });\r\n    });\r\n});\r\n\r\napp.delete('/api/locations/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role } = req.user;\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can delete locations.' }); }\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID provided.' });\r\n    }\r\n\r\n    db.run('DELETE FROM Locations WHERE location_id = ? AND company_id = ?', [id, companyId], function(err) {\r\n        if (err) { console.error(\"Database error deleting location:\", err); return next(new Error('Failed to delete location.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Location not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\napp.get('/api/users', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n    const { filterRole, filterLocationId } = req.query;\r\n\r\n    let sql = `SELECT Users.user_id, Users.full_name, Users.email, Users.role, Locations.location_name\r\n               FROM Users\r\n               LEFT JOIN Locations ON Users.location_id = Locations.location_id\r\n               WHERE Users.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    if (role === 'super_admin') {\r\n        // Super admin can view all users in their company.\r\n    } else if (role === 'location_admin') {\r\n        // Location admin can view all users within their assigned location, plus unassigned users for their company.\r\n        if (currentUserLocationId) {\r\n            sql += ` AND (Users.location_id = ? OR Users.location_id IS NULL)`; // Admins might need to see unassigned users\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Users.user_id = ?`;\r\n        params.push(currentUserId);\r\n    } else {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view users.' });\r\n    }\r\n\r\n    // Input validation for filterRole and filterLocationId\r\n    const allowedRoles = ['super_admin', 'location_admin', 'employee'];\r\n    if (filterRole && (!allowedRoles.includes(filterRole) || (role === 'location_admin' && filterRole === 'super_admin'))) {\r\n        return res.status(400).json({ error: 'Invalid filter role provided or insufficient permissions to filter by this role.' });\r\n    }\r\n    if (filterLocationId && isNaN(parseInt(filterLocationId))) {\r\n        return res.status(400).json({ error: 'Invalid filter location ID provided.' });\r\n    }\r\n\r\n\r\n    if (filterRole) {\r\n        if (role === 'super_admin' || (role === 'location_admin' && (filterRole === 'employee' || filterRole === 'location_admin')) || (role === 'employee' && filterRole === 'employee')) {\r\n            sql += ` AND Users.role = ?`;\r\n            params.push(filterRole);\r\n        } else {\r\n            // This case should ideally be caught by the earlier validation for allowedRoles, but for defense-in-depth:\r\n            return res.status(403).json({ error: 'Access Denied: Insufficient permissions to filter by role.' });\r\n        }\r\n    }\r\n    if (filterLocationId) {\r\n        // Ensure location_admin can only filter by their own location\r\n        if (role === 'super_admin' || (role === 'location_admin' && parseInt(filterLocationId) === currentUserLocationId)) {\r\n            sql += ` AND Users.location_id = ?`;\r\n            params.push(filterLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Insufficient permissions to filter by location.' });\r\n        }\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching users:\", err); return next(new Error('Database error fetching users.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.delete('/api/users/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, userId: authenticatedUserId } = req.user;\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can delete users.' }); }\r\n    if (parseInt(id) === authenticatedUserId) { return res.status(403).json({ error: 'Cannot delete your own super admin account via this interface.' }); }\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid user ID provided.' });\r\n    }\r\n\r\n    db.run('DELETE FROM Users WHERE user_id = ? AND company_id = ? AND role != \\'super_admin\\'', [id, companyId], function(err) {\r\n        if (err) { console.error(\"Database error deleting user:\", err); return next(new Error('Failed to delete user.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'User not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\napp.post('/api/create-checkout-session', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { planId } = req.body;\r\n    const { userId, email, companyId } = req.user;\r\n\r\n    // Input Validation for planId\r\n    const allowedPlanIds = ['pro', 'enterprise'];\r\n    if (!planId || !allowedPlanIds.includes(planId)) {\r\n        return res.status(400).json({ error: 'Invalid plan ID provided.' });\r\n    }\r\n\r\n    const priceIdMap = {\r\n        'pro': process.env.STRIPE_PRICE_ID_PRO,       // Use environment variable\r\n        'enterprise': process.env.STRIPE_PRICE_ID_ENT // Use environment variable\r\n    };\r\n    const stripePriceId = priceIdMap[planId];\r\n    if (!stripePriceId) { return res.status(500).json({ error: 'Stripe price ID not configured for this plan.' }); } // Changed from 400 to 500 as this is a server-side config issue\r\n    try {\r\n        let customerId;\r\n        const userRecord = await new Promise((resolve, reject) => {\r\n            db.get('SELECT stripe_customer_id FROM Users WHERE user_id = ?', [userId], (err, row) => {\r\n                if (err) reject(err);\r\n                resolve(row);\r\n            });\r\n        });\r\n        if (userRecord && userRecord.stripe_customer_id) {\r\n            customerId = userRecord.stripe_customer_id;\r\n        } else {\r\n            const customer = await stripeInstance.customers.create({ email: email, metadata: { userId: userId, companyId: companyId, }, });\r\n            customerId = customer.id;\r\n            db.run('UPDATE Users SET stripe_customer_id = ? WHERE user_id = ?', [customerId, userId], (err) => {\r\n                if (err) console.error('Failed to save Stripe customer ID to DB:', err);\r\n            });\r\n        }\r\n        const session = await stripeInstance.checkout.sessions.create({\r\n            customer: customerId,\r\n            mode: 'subscription',\r\n            line_items: [{ price: stripePriceId, quantity: 1, }, ],\r\n            // Use environment variables for success/cancel URLs, or relative paths if handled client-side\r\n            success_url: `${process.env.FRONTEND_URL || 'http://localhost:8000'}/suite-hub.html?payment=success&session_id={CHECKOUT_SESSION_ID}`,\r\n            cancel_url: `${process.env.FRONTEND_URL || 'http://localhost:8000'}/pricing.html?payment=cancelled`,\r\n            metadata: { userId: userId, planId: planId, },\r\n        });\r\n        res.status(200).json({ url: session.url });\r\n    } catch (error) { console.error('Error creating Stripe Checkout Session:', error); next(error); } // Pass error\r\n});\r\n\r\napp.post('/api/schedules', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { employee_id, location_id, start_time, end_time, notes } = req.body;\r\n    const { companyId, role, userId: currentUserId } = req.user;\r\n\r\n    // Input Validation for Create Schedule\r\n    if (role !== 'super_admin' && role !== 'location_admin') { return res.status(403).json({ error: 'Access Denied: Only admins can create schedules.' }); }\r\n    if (typeof employee_id !== 'number' || employee_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid employee ID is required.' });\r\n    }\r\n    if (typeof location_id !== 'number' || location_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid location ID is required.' });\r\n    }\r\n    if (!start_time || !end_time || isNaN(new Date(start_time).getTime()) || isNaN(new Date(end_time).getTime())) {\r\n        return res.status(400).json({ error: 'Valid start and end times are required.' });\r\n    }\r\n    if (new Date(start_time) >= new Date(end_time)) {\r\n        return res.status(400).json({ error: 'Start time must be before end time.' });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n\r\n    db.get('SELECT user_id FROM Users WHERE user_id = ? AND company_id = ?', [employee_id, companyId], (err, employee) => {\r\n        if (err) { console.error(\"Database error verifying employee:\", err); return next(new Error('Database error during employee verification.')); } // Pass error\r\n        if (!employee) { return res.status(400).json({ error: 'Employee not found in your company.' }); }\r\n        db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n            if (err) { console.error(\"Database error verifying location:\", err); return next(new Error('Database error during location verification.')); } // Pass error\r\n            if (!location) { return res.status(400).json({ error: 'Location not found in your company.' }); }\r\n            db.run(\r\n                'INSERT INTO Schedules (employee_id, location_id, start_time, end_time, notes) VALUES (?, ?, ?, ?, ?)', [employee_id, location_id, start_time, end_time, notes],\r\n                function(insertErr) {\r\n                    if (insertErr) { console.error(\"Database error creating schedule:\", insertErr); return next(new Error('Failed to create schedule.')); } // Pass error\r\n                    res.status(201).json({ message: 'Schedule created successfully!', scheduleId: this.lastID });\r\n                }\r\n            );\r\n        });\r\n    });\r\n});\r\n\r\napp.get('/api/schedules', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { employee_id, location_id, start_date, end_date } = req.query;\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = `SELECT Schedules.*, Users.full_name AS employee_name, Users.email AS employee_email, Locations.location_name\r\n               FROM Schedules\r\n               JOIN Users ON Schedules.employee_id = Users.user_id\r\n               JOIN Locations ON Schedules.location_id = Locations.location_id\r\n               WHERE Users.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    if (role === 'location_admin') {\r\n        if (currentUserLocationId) {\r\n            sql += ` AND Schedules.location_id = ?`;\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Users.user_id = ?`;\r\n        params.push(currentUserId);\r\n    }\r\n\r\n    // Input validation for query parameters\r\n    if (employee_id && isNaN(parseInt(employee_id))) {\r\n        return res.status(400).json({ error: 'Invalid employee ID filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n    if (start_date && isNaN(new Date(start_date).getTime())) {\r\n        return res.status(400).json({ error: 'Invalid start date filter provided.' });\r\n    }\r\n    if (end_date && isNaN(new Date(end_date).getTime())) {\r\n        return res.status(400).json({ error: 'Invalid end date filter provided.' });\r\n    }\r\n\r\n\r\n    if (employee_id && (role === 'super_admin' || (role === 'location_admin' && parseInt(employee_id) === currentUserId) || (role === 'employee' && parseInt(employee_id) === currentUserId))) {\r\n        sql += ` AND Users.role = ?`;\r\n        params.push(filterRole); // This should be employee_id, not filterRole\r\n    }\r\n    if (location_id && (role === 'super_admin' || (role === 'location_admin' && parseInt(location_id) === currentUserLocationId))) {\r\n        sql += ` AND Schedules.location_id = ?`;\r\n        params.push(location_id);\r\n    }\r\n    if (start_date) {\r\n        sql += ` AND Schedules.start_time >= ?`;\r\n        params.push(start_date);\r\n    }\r\n    if (end_date) {\r\n        sql += ` AND Schedules.end_time <= ?`;\r\n        params.push(end_date);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching schedules:\", err); return next(new Error('Database error fetching schedules.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.delete('/api/schedules/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid schedule ID provided.' });\r\n    }\r\n\r\n    if (role === 'employee') {\r\n        return res.status(403).json({ error: 'Access Denied: Employees cannot delete schedules.' });\r\n    }\r\n\r\n    let sql = `DELETE FROM Schedules WHERE schedule_id = ?`;\r\n    const params = [id];\r\n\r\n    if (role === 'location_admin') {\r\n        sql += ` AND employee_id IN (SELECT user_id FROM Users WHERE location_id = ? AND company_id = ?)`;\r\n        params.push(currentUserLocationId, companyId);\r\n    } else if (role === 'super_admin') {\r\n        sql += ` AND employee_id IN (SELECT user_id FROM Users WHERE company_id = ?)`;\r\n        params.push(companyId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting schedule:\", err); return next(new Error('Failed to delete schedule.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Schedule not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// --- Hiring Routes ---\r\n\r\n/**\r\n * POST /api/job-postings\r\n * Creates a new job posting.\r\n * Requires super_admin or location_admin role.\r\n */\r\napp.post('/api/job-postings', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { title, description, requirements, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n    const created_date = new Date().toISOString(); // Current date/time for creation\r\n\r\n    // Input Validation for Create Job Posting\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can create job postings.' });\r\n    }\r\n    if (!title || typeof title !== 'string' || title.trim() === '') {\r\n        return res.status(400).json({ error: \"Job title is required and must be a non-empty string.\" });\r\n    }\r\n    if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) { // Line 1009\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    } else if (description !== undefined) { \r\n        clauses.push('description = ?'); \r\n        updateParams.push(description); \r\n    }\r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    } else if (requirements !== undefined) { \r\n        clauses.push('requirements = ?');\r\n        updateParams.push(requirements);\r\n    }\r\n    if (status !== undefined) { clauses.push('status = ?'); updateParams.push(status); }\r\n    \r\n    // super_admin can change location_id. location_admin cannot change location_id or change to different location\r\n    if (location_id !== undefined) {\r\n        if (role === 'super_admin') {\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        } else if (role === 'location_admin') {\r\n            if (location_id !== currentUserLocationId && location_id !== null) { // location_id can be null (company-wide)\r\n                return res.status(403).json({ error: 'Access Denied: Location admin cannot change job posting location to another location.' });\r\n            }\r\n            // If location admin updates job posting, and it's their location, or setting to null, it's allowed\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        }\r\n    }\r\n\r\n\r\n    if (clauses.length === 0) { return res.status(400).json({ error: 'No fields provided for update.' }); }\r\n\r\n    updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\r\n    updateParams.push(id, companyId);\r\n\r\n    // Additional security for location_admin: ensure they only update their own location's postings\r\n    if (role === 'location_admin') {\r\n        updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(updateSql, updateParams, function(err) {\r\n        if (err) { console.error(\"Database error updating job posting:\", err); return next(new Error('Failed to update job posting.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Job posting not found or not authorized to update.' }); }\r\n        res.status(200).json({ message: 'Job posting updated successfully!' });\r\n    });\r\n});\r\n\r\n/**\r\n * GET /api/job-postings\r\n * Retrieves job postings.\r\n * Can filter by location_id and status.\r\n * Requires super_admin or location_admin.\r\n */\r\napp.get('/api/job-postings', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { status, location_id } = req.query;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = 'SELECT * FROM JobPostings WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Authorization: super_admin sees all, location_admin sees their location's postings\r\n    if (role === 'location_admin') {\r\n        if (currentUserLocationId) {\r\n            sql += ' AND (location_id = ? OR location_id IS NULL)'; // Location admin sees their location's postings or company-wide\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        // Employees generally shouldn't see job postings list via this admin API\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view job postings.' });\r\n    }\r\n\r\n    // Input validation for query parameters\r\n    const allowedStatuses = ['Open', 'Closed', 'Filled']; // Assuming these are your valid statuses\r\n    if (status && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid job posting status filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n\r\n\r\n    if (status) {\r\n        sql += ' AND status = ?';\r\n        params.push(status);\r\n    }\r\n    // Only super admin can filter by any location_id beyond their own scope\r\n    if (location_id && role === 'super_admin') {\r\n        sql += ` AND location_id = ?`;\r\n        params.push(location_id);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching job postings:\", err); return next(new Error('Database error fetching job postings.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * PUT /api/job-postings/:id\r\n * Updates a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\r\napp.put('/api/job-postings/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { title, description, requirements, status, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Input Validation for Job Posting Update\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can update job postings.' });\r\n    }\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID provided.' });\r\n    }\r\n    if (title !== undefined && (typeof title !== 'string' || title.trim() === '')) {\r\n        return res.status(400).json({ error: 'Job title must be a non-empty string if provided.' });\r\n    }\r\n    if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    }\r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    }\r\n    const allowedStatuses = ['Open', 'Closed', 'Filled'];\r\n    if (status !== undefined && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid status provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    let updateSql = 'UPDATE JobPostings SET ';\r\n    const updateParams = [];\r\n    const clauses = [];\r\n\r\n    if (title !== undefined) { clauses.push('title = ?'); updateParams.push(title); }\r\n    // Line 1009 fix: Ensure this line and surrounding logic is correct.\r\n    if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) { // Line 1009\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    } else if (description !== undefined) { \r\n        clauses.push('description = ?'); \r\n        updateParams.push(description); \r\n    }\r\n    \r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    } else if (requirements !== undefined) { \r\n        clauses.push('requirements = ?');\r\n        updateParams.push(requirements);\r\n    }\r\n    \r\n    if (status !== undefined) { clauses.push('status = ?'); updateParams.push(status); }\r\n    \r\n    // super_admin can change location_id. location_admin cannot change location_id or change to different location\r\n    if (location_id !== undefined) {\r\n        if (role === 'super_admin') {\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        } else if (role === 'location_admin') {\r\n            if (location_id !== currentUserLocationId && location_id !== null) { // location_id can be null (company-wide)\r\n                return res.status(403).json({ error: 'Access Denied: Location admin cannot change job posting location to another location.' });\r\n            }\r\n            // If location admin updates job posting, and it's their location, or setting to null, it's allowed\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        }\r\n    }\r\n\r\n\r\n    if (clauses.length === 0) { return res.status(400).json({ error: 'No fields provided for update.' }); }\r\n\r\n    updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\r\n    updateParams.push(id, companyId);\r\n\r\n    // Additional security for location_admin: ensure they only update their own location's postings\r\n    if (role === 'location_admin') {\r\n        updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(updateSql, updateParams, function(err) {\r\n        if (err) { console.error(\"Database error updating job posting:\", err); return next(new Error('Failed to update job posting.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Job posting not found or not authorized to update.' }); }\r\n        res.status(200).json({ message: 'Job posting updated successfully!' });\r\n    });\r\n});\r\n\r\n/**\r\n * DELETE /api/job-postings/:id\r\n * Deletes a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\r\napp.delete('/api/job-postings/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID provided.' });\r\n    }\r\n\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can delete job postings.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM JobPostings WHERE job_posting_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Additional security for location_admin: ensure they only delete their own location's postings\r\n    if (role === 'location_admin') {\r\n        sql += ' AND (location_id = ? OR location_id IS NULL)';\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting job posting:\", err); return next(new Error('Failed to delete job posting.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Job posting not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n\r\n// Update Applicant API endpoints to use job_posting_id\r\napp.post('/api/applicants', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { job_posting_id, full_name, email, notes, location_id, phone_number } = req.body; // Added phone_number\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n    const application_date = new Date().toISOString(); // Current date/time for application\r\n\r\n    // Input Validation for Adding Applicant\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can add applicants.' });\r\n    }\r\n    if (typeof job_posting_id !== 'number' || job_posting_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid job posting ID is required.' });\r\n    }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    // Basic phone number validation (simple check for non-empty string, could be more complex with regex)\r\n    if (!phone_number || typeof phone_number !== 'string' || phone_number.trim() === '') {\r\n        return res.status(400).json({ error: \"Phone number is required.\" });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    // Verify job_posting_id belongs to the company, and for location_admin, to their location\r\n    db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], (err, jobPosting) => {\r\n        if (err) { console.error(\"Database error verifying job posting:\", err); return next(new Error('Database error when verifying job posting.')); } // Pass error\r\n        if (!jobPosting) { return res.status(400).json({ error: 'Job Posting not found or does not belong to your company.' }); }\r\n        \r\n        // Location admin can only add applicants to jobs in their assigned location or unassigned jobs\r\n        if (role === 'location_admin' && jobPosting.location_id !== currentUserLocationId && jobPosting.location_id !== null) {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin cannot add applicants to jobs outside their assigned location.' });\r\n        }\r\n\r\n        db.run(\r\n            'INSERT INTO Applicants (company_id, location_id, job_posting_id, full_name, email, phone_number, notes, application_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)',\r\n            [companyId, location_id || jobPosting.location_id, job_posting_id, full_name, email, phone_number, notes, application_date], // Use location_id from payload or job posting\r\n            function(insertErr) {\r\n                if (insertErr) { console.error(\"Database error creating applicant:\", insertErr); return next(new Error('Failed to create applicant.')); } // Pass error\r\n                res.status(201).json({ message: 'Applicant added successfully!', applicantId: this.lastID });\r\n            }\r\n        );\r\n    });\r\n});\r\n\r\napp.get('/api/applicants', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { job_posting_id, status, location_id } = req.query; // Added job_posting_id, status, location_id filters\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = `SELECT Applicants.*, JobPostings.title AS job_title_name\r\n               FROM Applicants\r\n               LEFT JOIN JobPostings ON Applicants.job_posting_id = JobPostings.job_posting_id\r\n               WHERE Applicants.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    // Input validation for query parameters\r\n    const allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired']; // Define valid statuses\r\n    if (status && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid applicant status filter provided.' });\r\n    }\r\n    if (job_posting_id && isNaN(parseInt(job_posting_id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n\r\n    if (status) {\r\n        sql += ` AND Applicants.status = ?`;\r\n        params.push(status);\r\n    }\r\n\r\n    if (role === 'location_admin') {\r\n        if (currentUserLocationId) {\r\n            sql += ` AND (Applicants.location_id = ? OR Applicants.location_id IS NULL)`; // Location admin sees applicants for their location or unassigned\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Applicants.user_id = ?`;\r\n        params.push(currentUserId);\r\n    } else {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view applicants.' });\r\n    }\r\n\r\n    // Apply job_posting_id filter if provided\r\n    if (job_posting_id) {\r\n        sql += ` AND Applicants.job_posting_id = ?`;\r\n        params.push(job_posting_id);\r\n    }\r\n    // Apply location filter from query params for super_admin\r\n    if (location_id && role === 'super_admin') {\r\n        sql += ` AND Applicants.location_id = ?`;\r\n        params.push(location_id);\r\n    }\r\n\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching applicants:\", err); return next(new Error('Database error fetching applicants.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * PUT /api/applicants/:id\r\n * Updates an applicant's details (e.g., status, notes).\r\n */\r\napp.put('/api/applicants/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { full_name, email, status, resume_url, notes, location_id, job_posting_id, phone_number } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Input Validation for Applicant Update\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can update applicant records.' });\r\n    }\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid applicant ID provided.' });\r\n    }\r\n    if (full_name !== undefined && (typeof full_name !== 'string' || full_name.trim() === '')) {\r\n        return res.status(400).json({ error: \"Full name must be a non-empty string if provided.\" });\r\n    }\r\n    if (email !== undefined && !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address must be provided if changing email.\" });\r\n    }\r\n    if (phone_number !== undefined && (typeof phone_number !== 'string' || phone_number.trim() === '')) {\r\n        return res.status(400).json({ error: \"Phone number must be a non-empty string if provided.\" });\r\n    }\r\n    const allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired'];\r\n    if (status !== undefined && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid status provided.' });\r\n    }\r\n    if (resume_url !== undefined && typeof resume_url !== 'string') { // Assuming resume_url is a string URL\r\n        return res.status(400).json({ error: 'Resume URL must be a string if provided.' });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n    if (job_posting_id !== undefined && typeof job_posting_id !== 'number' && job_posting_id !== null) {\r\n        return res.status(400).json({ error: 'Job posting ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    let updateSql = 'UPDATE Applicants SET ';\r\n    const updateParams = [];\r\n    const clauses = [];\r\n\r\n    if (full_name !== undefined) { clauses.push('full_name = ?'); updateParams.push(full_name); }\r\n    if (email !== undefined) { clauses.push('email = ?'); updateParams.push(email); }\r\n    if (phone_number !== undefined) { clauses.push('phone_number = ?'); updateParams.push(phone_number); }\r\n    if (status !== undefined) { clauses.push('status = ?'); updateParams.push(status); }\r\n    if (resume_url !== undefined) { clauses.push('resume_url = ?'); updateParams.push(resume_url); }\r\n    if (notes !== undefined) { clauses.push('notes = ?'); updateParams.push(notes); }\r\n    \r\n    // Admins can update location_id or job_posting_id, with restrictions for location_admin\r\n    if (location_id !== undefined) {\r\n        if (role === 'super_admin') {\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        } else if (role === 'location_admin') {\r\n            if (location_id !== currentUserLocationId && location_id !== null) { // location_id can be null (company-wide)\r\n                return res.status(403).json({ error: 'Access Denied: Location admin cannot assign applicants to another location.' });\r\n            }\r\n            // If location admin updates applicant location, and it's their location, or setting to null, it's allowed\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        }\r\n    }\r\n    if (job_posting_id !== undefined) {\r\n         if (role === 'super_admin') {\r\n            clauses.push('job_posting_id = ?'); updateParams.push(job_posting_id);\r\n        } else if (role === 'location_admin') {\r\n            // Verify new job_posting_id belongs to the location admin's assigned location or is company-wide\r\n            db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], (err, job) => {\r\n                if (err) { console.error(\"DB error verifying job posting for update:\", err); return next(new Error('Database error verifying job posting.')); } // Pass error\r\n                if (!job) { return res.status(400).json({ error: 'Job Posting not found or does not belong to your company.' }); }\r\n                if (job.location_id !== null && job.location_id !== currentUserLocationId) {\r\n                    return res.status(403).json({ error: 'Access Denied: Location admin cannot assign applicants to jobs outside their assigned location.' });\r\n                }\r\n            });\r\n            clauses.push('job_posting_id = ?'); updateParams.push(job_posting_id);\r\n        }\r\n    }\r\n\r\n\r\n    if (clauses.length === 0) { return res.status(400).json({ error: 'No fields provided for update.' }); }\r\n\r\n    updateSql += clauses.join(', ') + ' WHERE applicant_id = ? AND company_id = ?';\r\n    updateParams.push(id, companyId);\r\n\r\n    // For location_admin, ensure they can only update applicants within their assigned location\r\n    if (role === 'location_admin') {\r\n        updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned applicants too\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(updateSql, updateParams, function(err) {\r\n        if (err) { console.error(\"Database error updating applicant:\", err); return next(new Error('Failed to update applicant.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Applicant not found or not authorized to update.' }); }\r\n        res.status(200).json({ message: 'Applicant updated successfully!' });\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * DELETE /api/applicants/:id\r\n * Deletes an applicant.\r\n * Requires super_admin or location_admin (for their location's applicants).\r\n */\r\napp.delete('/api/applicants/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid applicant ID provided.' });\r\n    }\r\n\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can delete applicants.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM Applicants WHERE applicant_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Additional security for location_admin: ensure they only delete applicants in their own location\r\n    if (role === 'location_admin') {\r\n        sql += ' AND (location_id = ? OR location_id IS NULL)';\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting applicant:\", err); return next(new Error('Failed to delete applicant.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Applicant not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// --- Document Management Routes ---\r\n\r\n/**\r\n * POST /api/documents\r\n * Uploads (saves metadata for) a new document.\r\n * Requires authenticated user.\r\n * Note: Actual file storage is assumed to be handled by a separate service (e.g., S3).\r\n * This endpoint only stores the metadata and a URL.\r\n */\r\napp.post('/api/documents', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { title, file_name, file_type, file_url, description } = req.body;\r\n    const { companyId, userId } = req.user;\r\n    const upload_date = new Date().toISOString();\r\n\r\n    // Input Validation for Document Upload\r\n    if (!title || typeof title !== 'string' || title.trim() === '') {\r\n        return res.status(400).json({ error: 'Document title is required and must be a non-empty string.' });\r\n    }\r\n    if (!file_name || typeof file_name !== 'string' || file_name.trim() === '') {\r\n        return res.status(400).json({ error: 'File name is required and must be a non-empty string.' });\r\n    }\r\n    if (!file_type || typeof file_type !== 'string' || file_type.trim() === '') {\r\n        return res.status(400).json({ error: 'File type is required and must be a non-empty string.' });\r\n    }\r\n    // Basic URL validation: checks for http(s) protocol and some content. Can be more robust.\r\n    const urlRegex = /^https?:\\/\\/[^\\s$.?#].[^\\s]*$/i;\r\n    if (!file_url || typeof file_url !== 'string' || !urlRegex.test(file_url)) {\r\n        return res.status(400).json({ error: 'A valid file URL (starting with http or https) is required.' });\r\n    }\r\n    if (description !== undefined && typeof description !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n\r\n    db.run(\r\n        'INSERT INTO Documents (company_id, user_id, title, file_name, file_type, file_url, description, upload_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)',\r\n        [companyId, userId, title, file_name, file_type, file_url, description, upload_date],\r\n        function(err) {\r\n            if (err) {\r\n                console.error(\"Database error uploading document:\", err);\r\n                return next(new Error('Failed to upload document metadata.')); // Pass error\r\n            }\r\n            res.status(201).json({ message: 'Document metadata saved successfully!', documentId: this.lastID });\r\n        }\r\n    );\r\n});\r\n\r\n/**\r\n * GET /api/documents\r\n * Retrieves a list of documents for the company.\r\n * Filters can be added (e.g., by uploader, by type).\r\n * Requires authenticated user. Super admins can see all, others can see own documents.\r\n */\r\napp.get('/api/documents', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, userId, role } = req.user;\r\n    \r\n    let sql = 'SELECT * FROM Documents WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Non-super-admins only see their own documents\r\n    if (role !== 'super_admin') {\r\n        sql += ' AND user_id = ?';\r\n        params.push(userId);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching documents:\", err); return next(new Error('Database error fetching documents.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * DELETE /api/documents/:id\r\n * Deletes a document record.\r\n * Requires super_admin or the user who uploaded it.\r\n */\r\napp.delete('/api/documents/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, userId, role } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid document ID provided.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM Documents WHERE document_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Only super_admin or the original uploader can delete\r\n    if (role !== 'super_admin') {\r\n        sql += ' AND user_id = ?';\r\n        params.push(userId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting document:\", err); return next(new Error('Failed to delete document.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Document not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// Fallback for any other GET request not handled by an API route (serves index.html for SPA behavior)\r\n// This should always be the LAST route in your Express app\r\napp.get(/'*'/, (req, res) => {\r\n    // Correctly serve the index.html from the parent directory\r\n    res.sendFile(path.join(__dirname, '..', 'index.html'));\r\n});\r\n\r\n// --- Global Error Handling Middleware ---\r\n// This should be the very last middleware in your Express app\r\napp.use((err, req, res, next) => {\r\n    console.error(`Unhandled Error: ${err.stack}`); // Log the full stack trace for debugging\r\n    // Respond with a generic error message for the client\r\n    res.status(500).json({\r\n        error: 'An unexpected server error occurred. Please try again later.',\r\n        // In development, you might send more details:\r\n        // message: err.message,\r\n        // stack: process.env.NODE_ENV === 'development' ? err.stack : undefined\r\n    });\r\n});\r\n\r\n// --- Server Start ---\r\n// This conditional export allows the app to be imported for testing\r\n// without starting the server listener when the test runner requires it.\r\nif (require.main === module) {\r\n    // Only listen if this file is run directly (not required as a module)\r\n    app.listen(PORT, () => {\r\n        console.log(`Server is running successfully on http://localhost:${PORT}`);\r\n    });\r\n} else {\r\n    // Export the app for testing purposes\r\n    module.exports = app;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1750333852455},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\",\"filename\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$47\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"C:\\\\Users\\\\xarcy\\\\OneDrive\\\\Desktop\\\\onboardflow\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.27.4:development":{"value":{"code":"\"use strict\";\n\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { if (r) i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n;else { var o = function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); }; o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2); } }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n// --- Imports ---\nvar express = require('express');\nvar sqlite3 = require('sqlite3').verbose();\nvar bcrypt = require('bcryptjs');\nvar jwt = require('jsonwebtoken');\nvar cors = require('cors'); // Import cors\nvar path = require('path');\nvar csv = require('csv-parser'); // For CSV parsing\nvar _require = require('stream'),\n  Readable = _require.Readable; // For creating a readable stream from a string\nvar rateLimit = require('express-rate-limit'); // Import rate-limiting middleware\nvar morgan = require('morgan'); // Import morgan for request logging\n\n// Load environment variables from .env file in development\nif (process.env.NODE_ENV !== 'production') {\n  require('dotenv').config();\n}\n\n// Import the Stripe library and initialize it with your secret key\n// Use process.env.STRIPE_SECRET_KEY for production\nvar stripeInstance = require('stripe')(process.env.STRIPE_SECRET_KEY || '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');\n\n// --- App Initialization ---\nvar app = express();\n\n// Configure CORS for production environment\nvar allowedOrigins = process.env.CORS_ORIGIN ? process.env.CORS_ORIGIN.split(',') : ['http://localhost:8000']; // Default to localhost for development\n\n// Add 'null' to allowed origins if not in production and not explicitly set for local file access\nif (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\n  allowedOrigins.push('null');\n}\nvar corsOptions = {\n  origin: function origin(_origin, callback) {\n    // Allow requests with no origin (like mobile apps, curl, or local file access if 'null' is in allowedOrigins)\n    if (!_origin) {\n      // Check if 'null' is explicitly allowed or if we're in dev and no CORS_ORIGIN is set\n      if (allowedOrigins.includes('null') || process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\n        return callback(null, true);\n      }\n      var msg = 'The CORS policy for this site does not allow access from the specified Origin.';\n      return callback(new Error(msg), false);\n    }\n    if (allowedOrigins.indexOf(_origin) === -1) {\n      var _msg = 'The CORS policy for this site does not allow access from the specified Origin.';\n      return callback(new Error(_msg), false);\n    }\n    return callback(null, true);\n  },\n  methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\n  credentials: true,\n  // Allow cookies to be sent\n  optionsSuccessStatus: 204 // Some legacy browsers (IE11, various SmartTVs) choke on 204\n};\napp.use(cors(corsOptions));\n\n// Use process.env.PORT for production, fallback to 3000 for local development\nvar PORT = process.env.PORT || 3000;\n\n// Define a webhook secret for Stripe. This should also be an environment variable.\nvar STRIPE_WEBHOOK_SECRET = process.env.STRIPE_WEBHOOK_SECRET || 'whsec_YOUR_WEBHOOK_SECRET';\n\n// --- Rate Limiting Configuration ---\nvar authLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000,\n  // 15 minutes\n  max: 10,\n  // Max 10 requests per 15 minutes per IP\n  message: 'Too many login/registration attempts from this IP, please try again after 15 minutes',\n  standardHeaders: true,\n  // Return rate limit info in the `RateLimit-*` headers\n  legacyHeaders: false // Disable the `X-RateLimit-*` headers\n});\n\n// --- Middleware for Stripe Webhook (MUST be before express.json() for other routes) ---\n// This route needs the raw body for signature verification.\napp.post('/api/stripe-webhook', express.raw({\n  type: 'application/json'\n}), /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(req, res) {\n    var sig, event, session, userId, planId, subscriptionUpdated, subscriptionDeleted, invoiceSucceeded, invoiceFailed, _t, _t2;\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          sig = req.headers['stripe-signature'];\n          _context.p = 1;\n          event = stripeInstance.webhooks.constructEvent(req.body, sig, STRIPE_WEBHOOK_SECRET);\n          _context.n = 3;\n          break;\n        case 2:\n          _context.p = 2;\n          _t = _context.v;\n          console.error(\"Webhook Error: \".concat(_t.message));\n          return _context.a(2, res.status(400).send(\"Webhook Error: \".concat(_t.message)));\n        case 3:\n          _t2 = event.type;\n          _context.n = _t2 === 'checkout.session.completed' ? 4 : _t2 === 'customer.subscription.updated' ? 5 : _t2 === 'customer.subscription.deleted' ? 6 : _t2 === 'invoice.payment_succeeded' ? 7 : _t2 === 'invoice.payment_failed' ? 8 : 9;\n          break;\n        case 4:\n          session = event.data.object;\n          console.log('Checkout Session Completed:', session.id);\n          userId = session.metadata.userId;\n          planId = session.metadata.planId;\n          if (session.payment_status === 'paid' && userId && planId) {\n            db.run('UPDATE Users SET stripe_customer_id = ?, stripe_subscription_id = ?, subscription_status = ?, plan_id = ? WHERE user_id = ?', [session.customer, session.subscription, 'active', planId, userId], function (err) {\n              if (err) console.error('Database update error for checkout.session.completed:', err.message);else console.log(\"User \".concat(userId, \" subscription updated to \").concat(planId, \" (active).\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 5:\n          subscriptionUpdated = event.data.object;\n          console.log('Subscription Updated:', subscriptionUpdated.id);\n          if (subscriptionUpdated.customer && subscriptionUpdated.status && subscriptionUpdated.plan && subscriptionUpdated.plan.id) {\n            db.run('UPDATE Users SET subscription_status = ?, plan_id = ? WHERE stripe_customer_id = ?', [subscriptionUpdated.status, subscriptionUpdated.plan.id, subscriptionUpdated.customer], function (err) {\n              if (err) console.error('Database update error for customer.subscription.updated:', err.message);else console.log(\"Subscription for customer \".concat(subscriptionUpdated.customer, \" status updated to \").concat(subscriptionUpdated.status, \" and plan to \").concat(subscriptionUpdated.plan.id, \".\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 6:\n          subscriptionDeleted = event.data.object;\n          console.log('Subscription Deleted:', subscriptionDeleted.id);\n          if (subscriptionDeleted.customer) {\n            db.run('UPDATE Users SET subscription_status = ?, plan_id = ?, stripe_subscription_id = NULL WHERE stripe_customer_id = ?', ['cancelled', 'free', subscriptionDeleted.customer], function (err) {\n              if (err) console.error('Database update error for customer.subscription.deleted:', err.message);else console.log(\"Subscription for customer \".concat(subscriptionDeleted.customer, \" marked as cancelled and reverted to free.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 7:\n          invoiceSucceeded = event.data.object;\n          console.log('Invoice Payment Succeeded:', invoiceSucceeded.id);\n          if (invoiceSucceeded.subscription && invoiceSucceeded.customer) {\n            db.run('UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?', ['active', invoiceSucceeded.subscription, invoiceSucceeded.customer], function (err) {\n              if (err) console.error('Database update error for invoice.payment_succeeded:', err.message);else console.log(\"Subscription \".concat(invoiceSucceeded.subscription, \" status set to active.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 8:\n          invoiceFailed = event.data.object;\n          console.log('Invoice Payment Failed:', invoiceFailed.id);\n          if (invoiceFailed.subscription && invoiceFailed.customer) {\n            db.run('UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?', ['past_due', invoiceFailed.subscription, invoiceFailed.customer], function (err) {\n              if (err) console.error('Database update error for invoice.payment_failed:', err.message);else console.log(\"Subscription \".concat(invoiceFailed.subscription, \" status set to past_due.\"));\n            });\n          }\n          return _context.a(3, 10);\n        case 9:\n          console.log(\"Unhandled event type \".concat(event.type));\n        case 10:\n          res.status(200).json({\n            received: true\n          });\n        case 11:\n          return _context.a(2);\n      }\n    }, _callee, null, [[1, 2]]);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\n\n// IMPORTANT: express.json() for parsing JSON request bodies MUST come AFTER the webhook route\napp.use(express.json());\n\n// --- JWT Secret ---\n// Use process.env.JWT_SECRET for production\nvar JWT_SECRET = process.env.JWT_SECRET || 'your-super-secret-and-long-string-for-jwt';\n\n// --- Request Logging (using Morgan) ---\n// 'dev' format is good for development, 'combined' or 'tiny' for production logs\napp.use(morgan('dev'));\n\n// --- Serve Static Files (Frontend) with Caching ---\n// This middleware serves static files from the 'onboardflow' root directory\n// and sets Cache-Control headers for browser caching.\napp.use(express[\"static\"](path.join(__dirname, '..'), {\n  maxAge: '7d',\n  // Cache static assets for 7 days (e.g., CSS, JS, images, favicon)\n  immutable: false // Set to true if asset filenames include content hashes (e.g., app.min.js?v=hash)\n}));\n\n// --- Database Setup ---\nvar db = new sqlite3.Database('./onboardflow.db', function (err) {\n  if (err) {\n    // Log database connection error and exit\n    console.error(\"Error opening database:\", err.message);\n    process.exit(1); // Exit process if database connection fails\n  } else {\n    console.log(\"Successfully connected to the database.\");\n    db.get(\"PRAGMA foreign_keys = ON\");\n    db.serialize(function () {\n      db.run(\"CREATE TABLE IF NOT EXISTS Companies (company_id INTEGER PRIMARY KEY AUTOINCREMENT, company_name TEXT NOT NULL UNIQUE)\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Locations (location_id INTEGER PRIMARY KEY AUTOINCREMENT, company_id INTEGER, location_name TEXT NOT NULL, location_address TEXT NOT NULL, FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE)\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Users (\\n                user_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER,\\n                location_id INTEGER,\\n                full_name TEXT NOT NULL,\\n                email TEXT NOT NULL UNIQUE,\\n                password_hash TEXT NOT NULL,\\n                position TEXT,\\n                employee_id TEXT,\\n                role TEXT NOT NULL,\\n                stripe_customer_id TEXT,\\n                stripe_subscription_id TEXT,\\n                subscription_status TEXT,\\n                plan_id TEXT,\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      db.run(\"CREATE TABLE IF NOT EXISTS Schedules (\\n                schedule_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                employee_id INTEGER NOT NULL,\\n                location_id INTEGER NOT NULL,\\n                start_time TEXT NOT NULL,\\n                end_time TEXT NOT NULL,\\n                notes TEXT,\\n                FOREIGN KEY (employee_id) REFERENCES Users(user_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      // NEW: Create JobPostings table\n      db.run(\"CREATE TABLE IF NOT EXISTS JobPostings (\\n                job_posting_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                location_id INTEGER, -- Optional: link job posting to a specific location\\n                title TEXT NOT NULL,\\n                description TEXT NOT NULL,\\n                requirements TEXT, -- Optional: job requirements\\n                status TEXT NOT NULL DEFAULT 'Open', -- e.g., 'Open', 'Closed', 'Filled'\\n                created_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\\n            )\");\n      // Update Applicants table schema to link to JobPostings and add phone_number\n      db.run(\"CREATE TABLE IF NOT EXISTS Applicants (\\n                applicant_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                location_id INTEGER, -- Optional: applicant's preferred location or location applied for\\n                job_posting_id INTEGER, -- NEW: Link to JobPostings table\\n                full_name TEXT NOT NULL,\\n                email TEXT NOT NULL,\\n                phone_number TEXT, -- NEW: Phone number field\\n                status TEXT NOT NULL DEFAULT 'Applied', -- e.g., 'Applied', 'Interviewing', 'Rejected', 'Hired'\\n                resume_url TEXT, -- Optional: URL to a resume document (e.g., hosted on cloud storage)\\n                notes TEXT,\\n                application_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE,\\n                FOREIGN KEY (job_posting_id) REFERENCES JobPostings(job_posting_id) ON DELETE SET NULL -- If job posting is deleted, set this to NULL\\n            )\");\n      // NEW: Create Documents table for file/video uploads\n      db.run(\"CREATE TABLE IF NOT EXISTS Documents (\\n                document_id INTEGER PRIMARY KEY AUTOINCREMENT,\\n                company_id INTEGER NOT NULL,\\n                user_id INTEGER NOT NULL, -- User who uploaded the document\\n                title TEXT NOT NULL,\\n                file_name TEXT NOT NULL,\\n                file_type TEXT NOT NULL,\\n                file_url TEXT NOT NULL, -- URL to the stored file (e.g., S3, GCS)\\n                description TEXT,\\n                upload_date TEXT NOT NULL, -- ISO 8601 format\\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\\n                FOREIGN KEY (user_id) REFERENCES Users(user_id) ON DELETE CASCADE\\n            )\");\n    });\n  }\n});\n\n// --- Authentication Middleware ---\nfunction authenticateToken(req, res, next) {\n  var authHeader = req.headers['authorization'];\n  var token = authHeader && authHeader.split(' ')[1];\n  if (token == null) {\n    return res.status(401).json({\n      error: 'Unauthorized: No token provided.'\n    });\n  }\n  jwt.verify(token, JWT_SECRET, function (err, user) {\n    if (err) {\n      // Log the specific JWT error for debugging\n      console.error(\"JWT Verification Error:\", err.message);\n      return res.status(403).json({\n        error: 'Forbidden: Invalid or expired token.'\n      });\n    }\n    req.user = user;\n    next();\n  });\n}\n\n// --- Helper for Input Validation ---\nvar isValidEmail = function isValidEmail(email) {\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n};\n\n// --- API Routes (ALL API ROUTES SHOULD BE DEFINED HERE, BEFORE STATIC FILE SERVING) ---\n\n// Apply rate limiting to authentication routes\napp.post('/api/register', authLimiter, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(req, res, next) {\n    var _req$body, company_name, full_name, email, password, password_hash, _t3;\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          // Added 'next'\n          _req$body = req.body, company_name = _req$body.company_name, full_name = _req$body.full_name, email = _req$body.email, password = _req$body.password; // Input Validation for Registration\n          if (!(!company_name || typeof company_name !== 'string' || company_name.trim() === '')) {\n            _context2.n = 1;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Company name is required and must be a non-empty string.\"\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context2.n = 2;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context2.n = 3;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context2.n = 4;\n            break;\n          }\n          return _context2.a(2, res.status(400).json({\n            error: \"Password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          _context2.p = 4;\n          _context2.n = 5;\n          return bcrypt.hash(password, 10);\n        case 5:\n          password_hash = _context2.v;\n          db.serialize(function () {\n            db.run('BEGIN TRANSACTION');\n            db.run('INSERT INTO Companies (company_name) VALUES (?)', [company_name], function (err) {\n              if (err) {\n                db.run('ROLLBACK');\n                console.error(\"Database error creating company:\", err);\n                return next(new Error(\"Could not create company.\")); // Pass error to error handling middleware\n              }\n              var newCompanyId = this.lastID;\n              db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'super_admin', 'active', 'free')\", [newCompanyId, null, full_name, email, password_hash], function (userInsertErr) {\n                if (userInsertErr) {\n                  db.run('ROLLBACK');\n                  console.error(\"Database error creating user:\", userInsertErr);\n                  if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                    return res.status(409).json({\n                      error: 'Email already registered.'\n                    });\n                  }\n                  return next(new Error(\"Could not create user.\")); // Pass error\n                }\n                db.run('COMMIT');\n                res.status(201).json({\n                  message: \"Company and user registered successfully!\",\n                  userId: this.lastID\n                });\n              });\n            });\n          });\n          _context2.n = 7;\n          break;\n        case 6:\n          _context2.p = 6;\n          _t3 = _context2.v;\n          console.error(\"Registration error:\", _t3);\n          next(_t3); // Pass error to error handling middleware\n        case 7:\n          return _context2.a(2);\n      }\n    }, _callee2, null, [[4, 6]]);\n  }));\n  return function (_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}());\napp.post('/api/login', authLimiter, function (req, res, next) {\n  // Added 'next'\n  var _req$body2 = req.body,\n    email = _req$body2.email,\n    password = _req$body2.password;\n\n  // Input Validation for Login\n  if (!email || !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address is required.\"\n    });\n  }\n  if (!password || typeof password !== 'string' || password.length === 0) {\n    return res.status(400).json({\n      error: \"Password is required.\"\n    });\n  }\n  db.get(\"SELECT * FROM Users WHERE email = ?\", [email], /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(err, user) {\n      var isMatch, payload, token;\n      return _regenerator().w(function (_context3) {\n        while (1) switch (_context3.n) {\n          case 0:\n            if (!err) {\n              _context3.n = 1;\n              break;\n            }\n            console.error(\"Database error during login:\", err);\n            return _context3.a(2, next(new Error(\"A server error occurred during login.\")));\n          case 1:\n            if (user) {\n              _context3.n = 2;\n              break;\n            }\n            return _context3.a(2, res.status(401).json({\n              error: \"Invalid credentials.\"\n            }));\n          case 2:\n            _context3.n = 3;\n            return bcrypt.compare(password, user.password_hash);\n          case 3:\n            isMatch = _context3.v;\n            if (isMatch) {\n              _context3.n = 4;\n              break;\n            }\n            return _context3.a(2, res.status(401).json({\n              error: \"Invalid credentials.\"\n            }));\n          case 4:\n            payload = {\n              userId: user.user_id,\n              email: user.email,\n              role: user.role,\n              fullName: user.full_name,\n              companyId: user.company_id,\n              locationId: user.location_id,\n              subscriptionStatus: user.subscription_status,\n              planId: user.plan_id\n            };\n            token = jwt.sign(payload, JWT_SECRET, {\n              expiresIn: '1h'\n            });\n            res.status(200).json({\n              message: \"Login successful!\",\n              token: token,\n              role: user.role\n            });\n          case 5:\n            return _context3.a(2);\n        }\n      }, _callee3);\n    }));\n    return function (_x6, _x7) {\n      return _ref3.apply(this, arguments);\n    };\n  }());\n});\napp.post('/api/invite-admin', authenticateToken, /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(req, res, next) {\n    var _req$body3, full_name, email, password, location_id, _req$user, companyId, role, password_hash, _t4;\n    return _regenerator().w(function (_context4) {\n      while (1) switch (_context4.n) {\n        case 0:\n          // Added 'next'\n          _req$body3 = req.body, full_name = _req$body3.full_name, email = _req$body3.email, password = _req$body3.password, location_id = _req$body3.location_id;\n          _req$user = req.user, companyId = _req$user.companyId, role = _req$user.role; // Input Validation for Invite Admin\n          if (!(role !== 'super_admin')) {\n            _context4.n = 1;\n            break;\n          }\n          return _context4.a(2, res.status(403).json({\n            error: 'Access Denied: Only super admins can invite other admins.'\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context4.n = 2;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context4.n = 3;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context4.n = 4;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"Temporary password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          if (!(typeof location_id !== 'number' || location_id <= 0)) {\n            _context4.n = 5;\n            break;\n          }\n          return _context4.a(2, res.status(400).json({\n            error: \"A valid location ID is required.\"\n          }));\n        case 5:\n          _context4.p = 5;\n          _context4.n = 6;\n          return bcrypt.hash(password, 10);\n        case 6:\n          password_hash = _context4.v;\n          db.get('SELECT * FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n            if (err) {\n              console.error(\"Database error checking location:\", err);\n              return next(new Error('Database error when verifying location.'));\n            } // Pass error\n            if (!location) {\n              return res.status(400).json({\n                error: 'Selected location does not exist or does not belong to your company.'\n              });\n            }\n            db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'location_admin', 'active', 'free')\", [companyId, location_id, full_name, email, password_hash], function (userInsertErr) {\n              if (userInsertErr) {\n                console.error(\"Database error inviting admin:\", userInsertErr);\n                if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                  return res.status(409).json({\n                    error: 'Email already registered.'\n                  });\n                }\n                return next(new Error('Failed to invite admin.')); // Pass error\n              }\n              res.status(201).json({\n                message: \"Location admin invited successfully!\",\n                userId: this.lastID\n              });\n            });\n          });\n          _context4.n = 8;\n          break;\n        case 7:\n          _context4.p = 7;\n          _t4 = _context4.v;\n          console.error(\"Invite admin error:\", _t4);\n          next(_t4);\n        case 8:\n          return _context4.a(2);\n      }\n    }, _callee4, null, [[5, 7]]);\n  }));\n  return function (_x8, _x9, _x0) {\n    return _ref4.apply(this, arguments);\n  };\n}());\n\n// NEW: API endpoint for inviting employees\napp.post('/api/invite-employee', authenticateToken, /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(req, res, next) {\n    var _req$body4, full_name, email, password, position, employee_id, location_id, _req$user2, companyId, role, currentUserLocationId, isLocationIdValid, password_hash, locationVerification, _t5;\n    return _regenerator().w(function (_context5) {\n      while (1) switch (_context5.n) {\n        case 0:\n          _req$body4 = req.body, full_name = _req$body4.full_name, email = _req$body4.email, password = _req$body4.password, position = _req$body4.position, employee_id = _req$body4.employee_id, location_id = _req$body4.location_id;\n          _req$user2 = req.user, companyId = _req$user2.companyId, role = _req$user2.role, currentUserLocationId = _req$user2.locationId; // Authorization: Super admin can invite anyone, Location admin can only invite to their location or unassigned\n          if (['super_admin', 'location_admin'].includes(role)) {\n            _context5.n = 1;\n            break;\n          }\n          return _context5.a(2, res.status(403).json({\n            error: 'Access Denied: Only admins can invite employees.'\n          }));\n        case 1:\n          if (!(!full_name || typeof full_name !== 'string' || full_name.trim() === '')) {\n            _context5.n = 2;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"Full name is required and must be a non-empty string.\"\n          }));\n        case 2:\n          if (!(!email || !isValidEmail(email))) {\n            _context5.n = 3;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"A valid email address is required.\"\n          }));\n        case 3:\n          if (!(!password || typeof password !== 'string' || password.length < 6)) {\n            _context5.n = 4;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"Temporary password is required and must be at least 6 characters long.\"\n          }));\n        case 4:\n          // Corrected location_id validation: Must be a number > 0.\n          // If location_id is null, it indicates an unassigned location, which is valid for a super admin.\n          // For location_admin, it must match their current location.\n          // This revised logic correctly checks for null OR a valid positive integer.\n          isLocationIdValid = location_id === null || typeof location_id === 'number' && !isNaN(location_id) && location_id > 0;\n          if (isLocationIdValid) {\n            _context5.n = 5;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: \"A valid location ID (positive number) is required for employee, or null for unassigned.\"\n          }));\n        case 5:\n          if (!(position !== undefined && typeof position !== 'string')) {\n            _context5.n = 6;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Position must be a string if provided.'\n          }));\n        case 6:\n          if (!(employee_id !== undefined && typeof employee_id !== 'string')) {\n            _context5.n = 7;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Employee ID must be a string if provided.'\n          }));\n        case 7:\n          if (!(role === 'location_admin')) {\n            _context5.n = 8;\n            break;\n          }\n          if (!(location_id !== currentUserLocationId)) {\n            _context5.n = 8;\n            break;\n          }\n          if (location_id === null && currentUserLocationId === null) {\n            _context5.n = 8;\n            break;\n          }\n          return _context5.a(2, res.status(403).json({\n            error: 'Access Denied: Location admin can only invite employees to their assigned location.'\n          }));\n        case 8:\n          _context5.p = 8;\n          _context5.n = 9;\n          return bcrypt.hash(password, 10);\n        case 9:\n          password_hash = _context5.v;\n          if (!(location_id !== null)) {\n            _context5.n = 11;\n            break;\n          }\n          _context5.n = 10;\n          return new Promise(function (resolve, reject) {\n            db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n              if (err) reject(err);\n              resolve(location);\n            });\n          });\n        case 10:\n          locationVerification = _context5.v;\n          if (locationVerification) {\n            _context5.n = 11;\n            break;\n          }\n          return _context5.a(2, res.status(400).json({\n            error: 'Selected location does not exist or does not belong to your company.'\n          }));\n        case 11:\n          db.run(\"INSERT INTO Users (company_id, location_id, full_name, email, password_hash, position, employee_id, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, ?, ?, 'employee', 'active', 'free')\", [companyId, location_id, full_name, email, password_hash, position, employee_id],\n          // Default new employees to 'employee' role\n          function (userInsertErr) {\n            if (userInsertErr) {\n              console.error(\"Database error inviting employee:\", userInsertErr);\n              if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) {\n                return res.status(409).json({\n                  error: 'Email already registered.'\n                });\n              }\n              return next(new Error('Failed to invite employee.'));\n            }\n            res.status(201).json({\n              message: \"Employee invited successfully!\",\n              userId: this.lastID\n            });\n          });\n          _context5.n = 13;\n          break;\n        case 12:\n          _context5.p = 12;\n          _t5 = _context5.v;\n          console.error(\"Invite employee error:\", _t5);\n          next(_t5);\n        case 13:\n          return _context5.a(2);\n      }\n    }, _callee5, null, [[8, 12]]);\n  }));\n  return function (_x1, _x10, _x11) {\n    return _ref5.apply(this, arguments);\n  };\n}());\napp.get('/api/profile', authenticateToken, function (req, res) {\n  var _req$user3 = req.user,\n    userId = _req$user3.userId,\n    fullName = _req$user3.fullName,\n    email = _req$user3.email,\n    role = _req$user3.role,\n    companyId = _req$user3.companyId,\n    locationId = _req$user3.locationId,\n    subscriptionStatus = _req$user3.subscriptionStatus,\n    planId = _req$user3.planId;\n  res.status(200).json({\n    userId: userId,\n    fullName: fullName,\n    email: email,\n    role: role,\n    companyId: companyId,\n    locationId: locationId,\n    subscriptionStatus: subscriptionStatus,\n    planId: planId\n  });\n});\napp.put('/api/profile', authenticateToken, /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7(req, res, next) {\n    var _req$body5, fullName, email, currentPassword, newPassword, userId;\n    return _regenerator().w(function (_context7) {\n      while (1) switch (_context7.n) {\n        case 0:\n          // Added 'next'\n          _req$body5 = req.body, fullName = _req$body5.fullName, email = _req$body5.email, currentPassword = _req$body5.currentPassword, newPassword = _req$body5.newPassword;\n          userId = req.user.userId; // Input Validation for Profile Update\n          if (!(fullName === undefined && email === undefined && (!currentPassword || !newPassword))) {\n            _context7.n = 1;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: 'No data provided for update.'\n          }));\n        case 1:\n          if (!(fullName !== undefined && (typeof fullName !== 'string' || fullName.trim() === ''))) {\n            _context7.n = 2;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"Full name must be a non-empty string if provided.\"\n          }));\n        case 2:\n          if (!(email !== undefined && !isValidEmail(email))) {\n            _context7.n = 3;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"A valid email address must be provided if changing email.\"\n          }));\n        case 3:\n          if (!(newPassword !== undefined && (typeof newPassword !== 'string' || newPassword.length < 6))) {\n            _context7.n = 4;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: \"New password must be at least 6 characters long if changing password.\"\n          }));\n        case 4:\n          if (!(currentPassword && !newPassword || !currentPassword && newPassword)) {\n            _context7.n = 5;\n            break;\n          }\n          return _context7.a(2, res.status(400).json({\n            error: 'Both current password and new password are required to change password.'\n          }));\n        case 5:\n          db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], /*#__PURE__*/function () {\n            var _ref7 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6(err, user) {\n              var updateSql, updateParams, clauses, changesMade, existingUser, isMatch, newPasswordHash, _t6;\n              return _regenerator().w(function (_context6) {\n                while (1) switch (_context6.n) {\n                  case 0:\n                    if (!err) {\n                      _context6.n = 1;\n                      break;\n                    }\n                    console.error(\"Database error fetching user for profile update:\", err);\n                    return _context6.a(2, next(new Error(\"Server error during profile update.\")));\n                  case 1:\n                    if (user) {\n                      _context6.n = 2;\n                      break;\n                    }\n                    return _context6.a(2, res.status(404).json({\n                      error: \"User not found.\"\n                    }));\n                  case 2:\n                    updateSql = 'UPDATE Users SET ';\n                    updateParams = [];\n                    clauses = [];\n                    changesMade = false;\n                    if (fullName !== undefined && fullName !== user.full_name) {\n                      clauses.push('full_name = ?');\n                      updateParams.push(fullName);\n                      changesMade = true;\n                    }\n                    if (!(email !== undefined && email !== user.email)) {\n                      _context6.n = 8;\n                      break;\n                    }\n                    _context6.p = 3;\n                    _context6.n = 4;\n                    return new Promise(function (resolve, reject) {\n                      db.get(\"SELECT user_id FROM Users WHERE email = ? AND user_id != ?\", [email, userId], function (err, row) {\n                        if (err) reject(err);\n                        resolve(row);\n                      });\n                    });\n                  case 4:\n                    existingUser = _context6.v;\n                    if (!existingUser) {\n                      _context6.n = 5;\n                      break;\n                    }\n                    return _context6.a(2, res.status(409).json({\n                      error: 'Email already in use by another account.'\n                    }));\n                  case 5:\n                    _context6.n = 7;\n                    break;\n                  case 6:\n                    _context6.p = 6;\n                    _t6 = _context6.v;\n                    console.error(\"Database error checking existing email:\", _t6);\n                    return _context6.a(2, next(new Error(\"Server error verifying email availability.\")));\n                  case 7:\n                    clauses.push('email = ?');\n                    updateParams.push(email);\n                    changesMade = true;\n                  case 8:\n                    if (!(currentPassword && newPassword)) {\n                      _context6.n = 12;\n                      break;\n                    }\n                    _context6.n = 9;\n                    return bcrypt.compare(currentPassword, user.password_hash);\n                  case 9:\n                    isMatch = _context6.v;\n                    if (isMatch) {\n                      _context6.n = 10;\n                      break;\n                    }\n                    return _context6.a(2, res.status(401).json({\n                      error: \"Current password incorrect.\"\n                    }));\n                  case 10:\n                    _context6.n = 11;\n                    return bcrypt.hash(newPassword, 10);\n                  case 11:\n                    newPasswordHash = _context6.v;\n                    clauses.push('password_hash = ?');\n                    updateParams.push(newPasswordHash);\n                    changesMade = true;\n                  case 12:\n                    if (changesMade) {\n                      _context6.n = 13;\n                      break;\n                    }\n                    return _context6.a(2, res.status(200).json({\n                      message: 'No changes detected. Profile remains the same.'\n                    }));\n                  case 13:\n                    updateSql += clauses.join(', ') + ' WHERE user_id = ?';\n                    updateParams.push(userId);\n                    db.run(updateSql, updateParams, function (updateErr) {\n                      if (updateErr) {\n                        console.error(\"Database error updating profile:\", updateErr);\n                        return next(new Error('Failed to update profile.'));\n                      } // Pass error\n                      if (this.changes > 0) {\n                        db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], function (fetchErr, updatedUser) {\n                          if (fetchErr || !updatedUser) {\n                            console.error(\"Error fetching updated user for new token:\", fetchErr);\n                            return res.status(200).json({\n                              message: 'Profile updated successfully, but token could not be refreshed.'\n                            });\n                          }\n                          var newPayload = {\n                            userId: updatedUser.user_id,\n                            email: updatedUser.email,\n                            role: updatedUser.role,\n                            fullName: updatedUser.full_name,\n                            companyId: updatedUser.company_id,\n                            locationId: updatedUser.location_id,\n                            subscriptionStatus: updatedUser.subscription_status,\n                            planId: user.plan_id\n                          };\n                          var newToken = jwt.sign(newPayload, JWT_SECRET, {\n                            expiresIn: '1h'\n                          });\n                          res.status(200).json({\n                            message: 'Profile updated successfully!',\n                            token: newToken\n                          });\n                        });\n                      } else {\n                        res.status(200).json({\n                          message: 'No changes applied as data was identical.'\n                        });\n                      }\n                    });\n                  case 14:\n                    return _context6.a(2);\n                }\n              }, _callee6, null, [[3, 6]]);\n            }));\n            return function (_x15, _x16) {\n              return _ref7.apply(this, arguments);\n            };\n          }());\n        case 6:\n          return _context7.a(2);\n      }\n    }, _callee7);\n  }));\n  return function (_x12, _x13, _x14) {\n    return _ref6.apply(this, arguments);\n  };\n}());\napp.get('/api/locations', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user4 = req.user,\n    companyId = _req$user4.companyId,\n    role = _req$user4.role;\n  var sql = 'SELECT location_id, location_name, location_address FROM Locations WHERE company_id = ?';\n  var params = [companyId];\n\n  // Allowing super_admin, location_admin, and employee to view all locations in their company for dropdowns/selection\n  if (!['super_admin', 'location_admin', 'employee'].includes(role)) {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view locations.'\n    });\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching locations:\", err);\n      return next(new Error('Database error fetching locations.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp.post('/api/locations', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body6 = req.body,\n    location_name = _req$body6.location_name,\n    location_address = _req$body6.location_address;\n  var _req$user5 = req.user,\n    companyId = _req$user5.companyId,\n    role = _req$user5.role;\n\n  // Input Validation for Create Location\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can create locations.'\n    });\n  }\n  if (!location_name || typeof location_name !== 'string' || location_name.trim() === '') {\n    return res.status(400).json({\n      error: \"Location name is required and must be a non-empty string.\"\n    });\n  }\n  if (!location_address || typeof location_address !== 'string' || location_address.trim() === '') {\n    return res.status(400).json({\n      error: \"Location address is required and must be a non-empty string.\"\n    });\n  }\n  db.run('INSERT INTO Locations (company_id, location_name, location_address) VALUES (?, ?, ?)', [companyId, location_name, location_address], function (err) {\n    if (err) {\n      console.error(\"Database error creating location:\", err);\n      return next(new Error('Failed to create location.'));\n    } // Pass error\n    res.status(201).json({\n      message: 'Location created!',\n      locationId: this.lastID\n    });\n  });\n});\napp[\"delete\"]('/api/locations/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user6 = req.user,\n    companyId = _req$user6.companyId,\n    role = _req$user6.role;\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can delete locations.'\n    });\n  }\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID provided.'\n    });\n  }\n  db.run('DELETE FROM Locations WHERE location_id = ? AND company_id = ?', [id, companyId], function (err) {\n    if (err) {\n      console.error(\"Database error deleting location:\", err);\n      return next(new Error('Failed to delete location.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Location not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\napp.get('/api/users', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user7 = req.user,\n    companyId = _req$user7.companyId,\n    role = _req$user7.role,\n    currentUserId = _req$user7.userId,\n    currentUserLocationId = _req$user7.locationId;\n  var _req$query = req.query,\n    filterRole = _req$query.filterRole,\n    filterLocationId = _req$query.filterLocationId;\n  var sql = \"SELECT Users.user_id, Users.full_name, Users.email, Users.role, Locations.location_name\\n               FROM Users\\n               LEFT JOIN Locations ON Users.location_id = Locations.location_id\\n               WHERE Users.company_id = ?\";\n  var params = [companyId];\n  if (role === 'super_admin') {\n    // Super admin can view all users in their company.\n  } else if (role === 'location_admin') {\n    // Location admin can view all users within their assigned location, plus unassigned users for their company.\n    if (currentUserLocationId) {\n      sql += \" AND (Users.location_id = ? OR Users.location_id IS NULL)\"; // Admins might need to see unassigned users\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Users.user_id = ?\";\n    params.push(currentUserId);\n  } else {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view users.'\n    });\n  }\n\n  // Input validation for filterRole and filterLocationId\n  var allowedRoles = ['super_admin', 'location_admin', 'employee'];\n  if (filterRole && (!allowedRoles.includes(filterRole) || role === 'location_admin' && filterRole === 'super_admin')) {\n    return res.status(400).json({\n      error: 'Invalid filter role provided or insufficient permissions to filter by this role.'\n    });\n  }\n  if (filterLocationId && isNaN(parseInt(filterLocationId))) {\n    return res.status(400).json({\n      error: 'Invalid filter location ID provided.'\n    });\n  }\n  if (filterRole) {\n    if (role === 'super_admin' || role === 'location_admin' && (filterRole === 'employee' || filterRole === 'location_admin') || role === 'employee' && filterRole === 'employee') {\n      sql += \" AND Users.role = ?\";\n      params.push(filterRole);\n    } else {\n      // This case should ideally be caught by the earlier validation for allowedRoles, but for defense-in-depth:\n      return res.status(403).json({\n        error: 'Access Denied: Insufficient permissions to filter by role.'\n      });\n    }\n  }\n  if (filterLocationId) {\n    // Ensure location_admin can only filter by their own location\n    if (role === 'super_admin' || role === 'location_admin' && parseInt(filterLocationId) === currentUserLocationId) {\n      sql += \" AND Users.location_id = ?\";\n      params.push(filterLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Insufficient permissions to filter by location.'\n      });\n    }\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching users:\", err);\n      return next(new Error('Database error fetching users.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp[\"delete\"]('/api/users/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user8 = req.user,\n    companyId = _req$user8.companyId,\n    role = _req$user8.role,\n    authenticatedUserId = _req$user8.userId;\n  if (role !== 'super_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only super admins can delete users.'\n    });\n  }\n  if (parseInt(id) === authenticatedUserId) {\n    return res.status(403).json({\n      error: 'Cannot delete your own super admin account via this interface.'\n    });\n  }\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid user ID provided.'\n    });\n  }\n  db.run('DELETE FROM Users WHERE user_id = ? AND company_id = ? AND role != \\'super_admin\\'', [id, companyId], function (err) {\n    if (err) {\n      console.error(\"Database error deleting user:\", err);\n      return next(new Error('Failed to delete user.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'User not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\napp.post('/api/create-checkout-session', authenticateToken, /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee8(req, res, next) {\n    var planId, _req$user9, userId, email, companyId, allowedPlanIds, priceIdMap, stripePriceId, customerId, userRecord, customer, session, _t7;\n    return _regenerator().w(function (_context8) {\n      while (1) switch (_context8.n) {\n        case 0:\n          // Added 'next'\n          planId = req.body.planId;\n          _req$user9 = req.user, userId = _req$user9.userId, email = _req$user9.email, companyId = _req$user9.companyId; // Input Validation for planId\n          allowedPlanIds = ['pro', 'enterprise'];\n          if (!(!planId || !allowedPlanIds.includes(planId))) {\n            _context8.n = 1;\n            break;\n          }\n          return _context8.a(2, res.status(400).json({\n            error: 'Invalid plan ID provided.'\n          }));\n        case 1:\n          priceIdMap = {\n            'pro': process.env.STRIPE_PRICE_ID_PRO,\n            // Use environment variable\n            'enterprise': process.env.STRIPE_PRICE_ID_ENT // Use environment variable\n          };\n          stripePriceId = priceIdMap[planId];\n          if (stripePriceId) {\n            _context8.n = 2;\n            break;\n          }\n          return _context8.a(2, res.status(500).json({\n            error: 'Stripe price ID not configured for this plan.'\n          }));\n        case 2:\n          _context8.p = 2;\n          _context8.n = 3;\n          return new Promise(function (resolve, reject) {\n            db.get('SELECT stripe_customer_id FROM Users WHERE user_id = ?', [userId], function (err, row) {\n              if (err) reject(err);\n              resolve(row);\n            });\n          });\n        case 3:\n          userRecord = _context8.v;\n          if (!(userRecord && userRecord.stripe_customer_id)) {\n            _context8.n = 4;\n            break;\n          }\n          customerId = userRecord.stripe_customer_id;\n          _context8.n = 6;\n          break;\n        case 4:\n          _context8.n = 5;\n          return stripeInstance.customers.create({\n            email: email,\n            metadata: {\n              userId: userId,\n              companyId: companyId\n            }\n          });\n        case 5:\n          customer = _context8.v;\n          customerId = customer.id;\n          db.run('UPDATE Users SET stripe_customer_id = ? WHERE user_id = ?', [customerId, userId], function (err) {\n            if (err) console.error('Failed to save Stripe customer ID to DB:', err);\n          });\n        case 6:\n          _context8.n = 7;\n          return stripeInstance.checkout.sessions.create({\n            customer: customerId,\n            mode: 'subscription',\n            line_items: [{\n              price: stripePriceId,\n              quantity: 1\n            }],\n            // Use environment variables for success/cancel URLs, or relative paths if handled client-side\n            success_url: \"\".concat(process.env.FRONTEND_URL || 'http://localhost:8000', \"/suite-hub.html?payment=success&session_id={CHECKOUT_SESSION_ID}\"),\n            cancel_url: \"\".concat(process.env.FRONTEND_URL || 'http://localhost:8000', \"/pricing.html?payment=cancelled\"),\n            metadata: {\n              userId: userId,\n              planId: planId\n            }\n          });\n        case 7:\n          session = _context8.v;\n          res.status(200).json({\n            url: session.url\n          });\n          _context8.n = 9;\n          break;\n        case 8:\n          _context8.p = 8;\n          _t7 = _context8.v;\n          console.error('Error creating Stripe Checkout Session:', _t7);\n          next(_t7);\n        case 9:\n          return _context8.a(2);\n      }\n    }, _callee8, null, [[2, 8]]);\n  }));\n  return function (_x17, _x18, _x19) {\n    return _ref8.apply(this, arguments);\n  };\n}());\napp.post('/api/schedules', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body7 = req.body,\n    employee_id = _req$body7.employee_id,\n    location_id = _req$body7.location_id,\n    start_time = _req$body7.start_time,\n    end_time = _req$body7.end_time,\n    notes = _req$body7.notes;\n  var _req$user0 = req.user,\n    companyId = _req$user0.companyId,\n    role = _req$user0.role,\n    currentUserId = _req$user0.userId;\n\n  // Input Validation for Create Schedule\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can create schedules.'\n    });\n  }\n  if (typeof employee_id !== 'number' || employee_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid employee ID is required.'\n    });\n  }\n  if (typeof location_id !== 'number' || location_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid location ID is required.'\n    });\n  }\n  if (!start_time || !end_time || isNaN(new Date(start_time).getTime()) || isNaN(new Date(end_time).getTime())) {\n    return res.status(400).json({\n      error: 'Valid start and end times are required.'\n    });\n  }\n  if (new Date(start_time) >= new Date(end_time)) {\n    return res.status(400).json({\n      error: 'Start time must be before end time.'\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  db.get('SELECT user_id FROM Users WHERE user_id = ? AND company_id = ?', [employee_id, companyId], function (err, employee) {\n    if (err) {\n      console.error(\"Database error verifying employee:\", err);\n      return next(new Error('Database error during employee verification.'));\n    } // Pass error\n    if (!employee) {\n      return res.status(400).json({\n        error: 'Employee not found in your company.'\n      });\n    }\n    db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], function (err, location) {\n      if (err) {\n        console.error(\"Database error verifying location:\", err);\n        return next(new Error('Database error during location verification.'));\n      } // Pass error\n      if (!location) {\n        return res.status(400).json({\n          error: 'Location not found in your company.'\n        });\n      }\n      db.run('INSERT INTO Schedules (employee_id, location_id, start_time, end_time, notes) VALUES (?, ?, ?, ?, ?)', [employee_id, location_id, start_time, end_time, notes], function (insertErr) {\n        if (insertErr) {\n          console.error(\"Database error creating schedule:\", insertErr);\n          return next(new Error('Failed to create schedule.'));\n        } // Pass error\n        res.status(201).json({\n          message: 'Schedule created successfully!',\n          scheduleId: this.lastID\n        });\n      });\n    });\n  });\n});\napp.get('/api/schedules', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query2 = req.query,\n    employee_id = _req$query2.employee_id,\n    location_id = _req$query2.location_id,\n    start_date = _req$query2.start_date,\n    end_date = _req$query2.end_date;\n  var _req$user1 = req.user,\n    companyId = _req$user1.companyId,\n    role = _req$user1.role,\n    currentUserId = _req$user1.userId,\n    currentUserLocationId = _req$user1.locationId;\n  var sql = \"SELECT Schedules.*, Users.full_name AS employee_name, Users.email AS employee_email, Locations.location_name\\n               FROM Schedules\\n               JOIN Users ON Schedules.employee_id = Users.user_id\\n               JOIN Locations ON Schedules.location_id = Locations.location_id\\n               WHERE Users.company_id = ?\";\n  var params = [companyId];\n  if (role === 'location_admin') {\n    if (currentUserLocationId) {\n      sql += \" AND Schedules.location_id = ?\";\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Users.user_id = ?\";\n    params.push(currentUserId);\n  }\n\n  // Input validation for query parameters\n  if (employee_id && isNaN(parseInt(employee_id))) {\n    return res.status(400).json({\n      error: 'Invalid employee ID filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (start_date && isNaN(new Date(start_date).getTime())) {\n    return res.status(400).json({\n      error: 'Invalid start date filter provided.'\n    });\n  }\n  if (end_date && isNaN(new Date(end_date).getTime())) {\n    return res.status(400).json({\n      error: 'Invalid end date filter provided.'\n    });\n  }\n  if (employee_id && (role === 'super_admin' || role === 'location_admin' && parseInt(employee_id) === currentUserId || role === 'employee' && parseInt(employee_id) === currentUserId)) {\n    sql += \" AND Users.role = ?\";\n    params.push(filterRole); // This should be employee_id, not filterRole\n  }\n  if (location_id && (role === 'super_admin' || role === 'location_admin' && parseInt(location_id) === currentUserLocationId)) {\n    sql += \" AND Schedules.location_id = ?\";\n    params.push(location_id);\n  }\n  if (start_date) {\n    sql += \" AND Schedules.start_time >= ?\";\n    params.push(start_date);\n  }\n  if (end_date) {\n    sql += \" AND Schedules.end_time <= ?\";\n    params.push(end_date);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching schedules:\", err);\n      return next(new Error('Database error fetching schedules.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\napp[\"delete\"]('/api/schedules/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user10 = req.user,\n    companyId = _req$user10.companyId,\n    role = _req$user10.role,\n    currentUserId = _req$user10.userId,\n    currentUserLocationId = _req$user10.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid schedule ID provided.'\n    });\n  }\n  if (role === 'employee') {\n    return res.status(403).json({\n      error: 'Access Denied: Employees cannot delete schedules.'\n    });\n  }\n  var sql = \"DELETE FROM Schedules WHERE schedule_id = ?\";\n  var params = [id];\n  if (role === 'location_admin') {\n    sql += \" AND employee_id IN (SELECT user_id FROM Users WHERE location_id = ? AND company_id = ?)\";\n    params.push(currentUserLocationId, companyId);\n  } else if (role === 'super_admin') {\n    sql += \" AND employee_id IN (SELECT user_id FROM Users WHERE company_id = ?)\";\n    params.push(companyId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting schedule:\", err);\n      return next(new Error('Failed to delete schedule.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Schedule not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// --- Hiring Routes ---\n\n/**\r\n * POST /api/job-postings\r\n * Creates a new job posting.\r\n * Requires super_admin or location_admin role.\r\n */\napp.post('/api/job-postings', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body8 = req.body,\n    title = _req$body8.title,\n    description = _req$body8.description,\n    requirements = _req$body8.requirements,\n    location_id = _req$body8.location_id;\n  var _req$user11 = req.user,\n    companyId = _req$user11.companyId,\n    role = _req$user11.role,\n    currentUserLocationId = _req$user11.locationId;\n  var created_date = new Date().toISOString(); // Current date/time for creation\n\n  // Input Validation for Create Job Posting\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can create job postings.'\n    });\n  }\n  if (!title || typeof title !== 'string' || title.trim() === '') {\n    return res.status(400).json({\n      error: \"Job title is required and must be a non-empty string.\"\n    });\n  }\n  if (!description || typeof description !== 'string' || description.trim() === '') {\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    // location_id can be null\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n\n  // If location_admin, ensure location_id matches their assigned location, or is null\n  // A location admin can only create job postings for their assigned location or company-wide if their location is null\n  if (role === 'location_admin' && location_id && location_id !== currentUserLocationId) {\n    return res.status(403).json({\n      error: 'Access Denied: Location admin can only post jobs for their assigned location.'\n    });\n  }\n  db.run('INSERT INTO JobPostings (company_id, location_id, title, description, requirements, status, created_date) VALUES (?, ?, ?, ?, ?, ?, ?)', [companyId, location_id, title, description, requirements, 'Open', created_date],\n  // Default status to 'Open'\n  function (err) {\n    if (err) {\n      console.error(\"Database error creating job posting:\", err);\n      return next(new Error('Failed to create job posting.')); // Pass error\n    }\n    res.status(201).json({\n      message: 'Job posting created successfully!',\n      jobPostingId: this.lastID\n    });\n  });\n});\n\n/**\r\n * GET /api/job-postings\r\n * Retrieves job postings.\r\n * Can filter by location_id and status.\r\n * Requires super_admin or location_admin.\r\n */\napp.get('/api/job-postings', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query3 = req.query,\n    status = _req$query3.status,\n    location_id = _req$query3.location_id;\n  var _req$user12 = req.user,\n    companyId = _req$user12.companyId,\n    role = _req$user12.role,\n    currentUserLocationId = _req$user12.locationId;\n  var sql = 'SELECT * FROM JobPostings WHERE company_id = ?';\n  var params = [companyId];\n\n  // Authorization: super_admin sees all, location_admin sees their location's postings\n  if (role === 'location_admin') {\n    if (currentUserLocationId) {\n      sql += ' AND (location_id = ? OR location_id IS NULL)'; // Location admin sees their location's postings or company-wide\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    // Employees generally shouldn't see job postings list via this admin API\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view job postings.'\n    });\n  }\n\n  // Input validation for query parameters\n  var allowedStatuses = ['Open', 'Closed', 'Filled']; // Assuming these are your valid statuses\n  if (status && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid job posting status filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (status) {\n    sql += ' AND status = ?';\n    params.push(status);\n  }\n  // Only super admin can filter by any location_id beyond their own scope\n  if (location_id && role === 'super_admin') {\n    sql += ' AND location_id = ?';\n    params.push(location_id);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching job postings:\", err);\n      return next(new Error('Database error fetching job postings.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * PUT /api/job-postings/:id\r\n * Updates a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\napp.put('/api/job-postings/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$body9 = req.body,\n    title = _req$body9.title,\n    description = _req$body9.description,\n    requirements = _req$body9.requirements,\n    status = _req$body9.status,\n    location_id = _req$body9.location_id;\n  var _req$user13 = req.user,\n    companyId = _req$user13.companyId,\n    role = _req$user13.role,\n    currentUserLocationId = _req$user13.locationId;\n\n  // Input Validation for Job Posting Update\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can update job postings.'\n    });\n  }\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID provided.'\n    });\n  }\n  if (title !== undefined && (typeof title !== 'string' || title.trim() === '')) {\n    return res.status(400).json({\n      error: 'Job title must be a non-empty string if provided.'\n    });\n  }\n  if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  }\n  var allowedStatuses = ['Open', 'Closed', 'Filled'];\n  if (status !== undefined && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid status provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n  var updateSql = 'UPDATE JobPostings SET ';\n  var updateParams = [];\n  var clauses = [];\n  if (title !== undefined) {\n    clauses.push('title = ?');\n    updateParams.push(title);\n  }\n  // Fix: Missing closing parenthesis for this condition\n  if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\n    // Line 1009\n    return res.status(400).json({\n      error: 'Description must be a non-empty string if provided.'\n    });\n  }\n  if (requirements !== undefined && typeof requirements !== 'string') {\n    return res.status(400).json({\n      error: 'Requirements must be a string if provided.'\n    });\n  }\n  if (status !== undefined) {\n    clauses.push('status = ?');\n    updateParams.push(status);\n  }\n\n  // super_admin can change location_id. location_admin cannot change location_id or change to different location\n  if (location_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    } else if (role === 'location_admin') {\n      if (location_id !== currentUserLocationId && location_id !== null) {\n        // location_id can be null (company-wide)\n        return res.status(403).json({\n          error: 'Access Denied: Location admin cannot change job posting location to another location.'\n        });\n      }\n      // If location admin updates job posting, and it's their location, or setting to null, it's allowed\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    }\n  }\n  if (clauses.length === 0) {\n    return res.status(400).json({\n      error: 'No fields provided for update.'\n    });\n  }\n  updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\n  updateParams.push(id, companyId);\n\n  // Additional security for location_admin: ensure they only update their own location's postings\n  if (role === 'location_admin') {\n    updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\n    params.push(currentUserLocationId);\n  }\n  db.run(updateSql, updateParams, function (err) {\n    if (err) {\n      console.error(\"Database error updating job posting:\", err);\n      return next(new Error('Failed to update job posting.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Job posting not found or not authorized to update.'\n      });\n    }\n    res.status(200).json({\n      message: 'Job posting updated successfully!'\n    });\n  });\n});\n\n/**\r\n * DELETE /api/job-postings/:id\r\n * Deletes a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\napp[\"delete\"]('/api/job-postings/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user14 = req.user,\n    companyId = _req$user14.companyId,\n    role = _req$user14.role,\n    currentUserLocationId = _req$user14.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID provided.'\n    });\n  }\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can delete job postings.'\n    });\n  }\n  var sql = 'DELETE FROM JobPostings WHERE job_posting_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Additional security for location_admin: ensure they only delete their own location's postings\n  if (role === 'location_admin') {\n    sql += ' AND (location_id = ? OR location_id IS NULL)';\n    params.push(currentUserLocationId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting job posting:\", err);\n      return next(new Error('Failed to delete job posting.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Job posting not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// Update Applicant API endpoints to use job_posting_id\napp.post('/api/applicants', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body0 = req.body,\n    job_posting_id = _req$body0.job_posting_id,\n    full_name = _req$body0.full_name,\n    email = _req$body0.email,\n    notes = _req$body0.notes,\n    location_id = _req$body0.location_id,\n    phone_number = _req$body0.phone_number; // Added phone_number\n  var _req$user15 = req.user,\n    companyId = _req$user15.companyId,\n    role = _req$user15.role,\n    currentUserLocationId = _req$user15.locationId;\n  var application_date = new Date().toISOString(); // Current date/time for application\n\n  // Input Validation for Adding Applicant\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can add applicants.'\n    });\n  }\n  if (typeof job_posting_id !== 'number' || job_posting_id <= 0) {\n    return res.status(400).json({\n      error: 'A valid job posting ID is required.'\n    });\n  }\n  if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\n    return res.status(400).json({\n      error: \"Full name is required and must be a non-empty string.\"\n    });\n  }\n  if (!email || !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address is required.\"\n    });\n  }\n  // Basic phone number validation (simple check for non-empty string, could be more complex with regex)\n  if (!phone_number || typeof phone_number !== 'string' || phone_number.trim() === '') {\n    return res.status(400).json({\n      error: \"Phone number is required.\"\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n\n  // Verify job_posting_id belongs to the company, and for location_admin, to their location\n  db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], function (err, jobPosting) {\n    if (err) {\n      console.error(\"Database error verifying job posting:\", err);\n      return next(new Error('Database error when verifying job posting.'));\n    } // Pass error\n    if (!jobPosting) {\n      return res.status(400).json({\n        error: 'Job Posting not found or does not belong to your company.'\n      });\n    }\n\n    // Location admin can only add applicants to jobs in their assigned location or unassigned jobs\n    if (role === 'location_admin' && jobPosting.location_id !== currentUserLocationId && jobPosting.location_id !== null) {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin cannot add applicants to jobs outside their assigned location.'\n      });\n    }\n    db.run('INSERT INTO Applicants (company_id, location_id, job_posting_id, full_name, email, phone_number, notes, application_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)', [companyId, location_id || jobPosting.location_id, job_posting_id, full_name, email, phone_number, notes, application_date],\n    // Use location_id from payload or job posting\n    function (insertErr) {\n      if (insertErr) {\n        console.error(\"Database error creating applicant:\", insertErr);\n        return next(new Error('Failed to create applicant.'));\n      } // Pass error\n      res.status(201).json({\n        message: 'Applicant added successfully!',\n        applicantId: this.lastID\n      });\n    });\n  });\n});\napp.get('/api/applicants', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$query4 = req.query,\n    job_posting_id = _req$query4.job_posting_id,\n    status = _req$query4.status,\n    location_id = _req$query4.location_id; // Added job_posting_id, status, location_id filters\n  var _req$user16 = req.user,\n    companyId = _req$user16.companyId,\n    role = _req$user16.role,\n    currentUserId = _req$user16.userId,\n    currentUserLocationId = _req$user16.locationId;\n  var sql = \"SELECT Applicants.*, JobPostings.title AS job_title_name\\n               FROM Applicants\\n               LEFT JOIN JobPostings ON Applicants.job_posting_id = JobPostings.job_posting_id\\n               WHERE Applicants.company_id = ?\";\n  var params = [companyId];\n\n  // Input validation for query parameters\n  var allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired']; // Define valid statuses\n  if (status && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid applicant status filter provided.'\n    });\n  }\n  if (job_posting_id && isNaN(parseInt(job_posting_id))) {\n    return res.status(400).json({\n      error: 'Invalid job posting ID filter provided.'\n    });\n  }\n  if (location_id && isNaN(parseInt(location_id))) {\n    return res.status(400).json({\n      error: 'Invalid location ID filter provided.'\n    });\n  }\n  if (status) {\n    sql += \" AND Applicants.status = ?\";\n    params.push(status);\n  }\n  if (role === 'location_admin') {\n    if (currentUserLocationId) {\n      sql += \" AND (Applicants.location_id = ? OR Applicants.location_id IS NULL)\"; // Location admin sees applicants for their location or unassigned\n      params.push(currentUserLocationId);\n    } else {\n      return res.status(403).json({\n        error: 'Access Denied: Location admin not assigned to a location.'\n      });\n    }\n  } else if (role === 'employee') {\n    sql += \" AND Applicants.user_id = ?\";\n    params.push(currentUserId);\n  } else {\n    return res.status(403).json({\n      error: 'Access Denied: Insufficient permissions to view applicants.'\n    });\n  }\n\n  // Apply job_posting_id filter if provided\n  if (job_posting_id) {\n    sql += \" AND Applicants.job_posting_id = ?\";\n    params.push(job_posting_id);\n  }\n  // Apply location filter from query params for super_admin\n  if (location_id && role === 'super_admin') {\n    sql += \" AND Applicants.location_id = ?\";\n    params.push(location_id);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching applicants:\", err);\n      return next(new Error('Database error fetching applicants.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * PUT /api/applicants/:id\r\n * Updates an applicant's details (e.g., status, notes).\r\n */\napp.put('/api/applicants/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$body1 = req.body,\n    full_name = _req$body1.full_name,\n    email = _req$body1.email,\n    status = _req$body1.status,\n    resume_url = _req$body1.resume_url,\n    notes = _req$body1.notes,\n    location_id = _req$body1.location_id,\n    job_posting_id = _req$body1.job_posting_id,\n    phone_number = _req$body1.phone_number;\n  var _req$user17 = req.user,\n    companyId = _req$user17.companyId,\n    role = _req$user17.role,\n    currentUserLocationId = _req$user17.locationId;\n\n  // Input Validation for Applicant Update\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can update applicant records.'\n    });\n  }\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid applicant ID provided.'\n    });\n  }\n  if (full_name !== undefined && (typeof full_name !== 'string' || full_name.trim() === '')) {\n    return res.status(400).json({\n      error: \"Full name must be a non-empty string if provided.\"\n    });\n  }\n  if (email !== undefined && !isValidEmail(email)) {\n    return res.status(400).json({\n      error: \"A valid email address must be provided if changing email.\"\n    });\n  }\n  if (phone_number !== undefined && (typeof phone_number !== 'string' || phone_number.trim() === '')) {\n    return res.status(400).json({\n      error: \"Phone number must be a non-empty string if provided.\"\n    });\n  }\n  var allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired'];\n  if (status !== undefined && !allowedStatuses.includes(status)) {\n    return res.status(400).json({\n      error: 'Invalid status provided.'\n    });\n  }\n  if (resume_url !== undefined && typeof resume_url !== 'string') {\n    // Assuming resume_url is a string URL\n    return res.status(400).json({\n      error: 'Resume URL must be a string if provided.'\n    });\n  }\n  if (notes !== undefined && typeof notes !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\n    return res.status(400).json({\n      error: 'Location ID must be a number or null if provided.'\n    });\n  }\n  if (job_posting_id !== undefined && typeof job_posting_id !== 'number' && job_posting_id !== null) {\n    return res.status(400).json({\n      error: 'Job posting ID must be a number or null if provided.'\n    });\n  }\n  var updateSql = 'UPDATE Applicants SET ';\n  var updateParams = [];\n  var clauses = [];\n\n  // Fields that can be updated\n  if (full_name !== undefined) {\n    clauses.push('full_name = ?');\n    updateParams.push(full_name);\n  }\n  if (email !== undefined) {\n    clauses.push('email = ?');\n    updateParams.push(email);\n  }\n  if (phone_number !== undefined) {\n    clauses.push('phone_number = ?');\n    updateParams.push(phone_number);\n  }\n  if (status !== undefined) {\n    clauses.push('status = ?');\n    updateParams.push(status);\n  }\n  if (resume_url !== undefined) {\n    clauses.push('resume_url = ?');\n    updateParams.push(resume_url);\n  }\n  if (notes !== undefined) {\n    clauses.push('notes = ?');\n    updateParams.push(notes);\n  }\n\n  // Admins can update location_id or job_posting_id, with restrictions for location_admin\n  if (location_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    } else if (role === 'location_admin') {\n      if (location_id !== currentUserLocationId && location_id !== null) {\n        // location_id can be null (company-wide)\n        return res.status(403).json({\n          error: 'Access Denied: Location admin cannot assign applicants to another location.'\n        });\n      }\n      // If location admin updates applicant location, and it's their location, or setting to null, it's allowed\n      clauses.push('location_id = ?');\n      updateParams.push(location_id);\n    }\n  }\n  if (job_posting_id !== undefined) {\n    if (role === 'super_admin') {\n      clauses.push('job_posting_id = ?');\n      updateParams.push(job_posting_id);\n    } else if (role === 'location_admin') {\n      // Verify new job_posting_id belongs to the location admin's assigned location or is company-wide\n      db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], function (err, job) {\n        if (err) {\n          console.error(\"DB error verifying job posting for update:\", err);\n          return next(new Error('Database error verifying job posting.'));\n        } // Pass error\n        if (!job) {\n          return res.status(400).json({\n            error: 'Job Posting not found or does not belong to your company.'\n          });\n        }\n        if (job.location_id !== null && job.location_id !== currentUserLocationId) {\n          return res.status(403).json({\n            error: 'Access Denied: Location admin cannot assign applicants to jobs outside their assigned location.'\n          });\n        }\n      });\n      clauses.push('job_posting_id = ?');\n      updateParams.push(job_posting_id);\n    }\n  }\n  if (clauses.length === 0) {\n    return res.status(400).json({\n      error: 'No fields provided for update.'\n    });\n  }\n  updateSql += clauses.join(', ') + ' WHERE applicant_id = ? AND company_id = ?';\n  updateParams.push(id, companyId);\n\n  // For location_admin, ensure they can only update applicants within their assigned location\n  if (role === 'location_admin') {\n    updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned applicants too\n    params.push(currentUserLocationId);\n  }\n  db.run(updateSql, updateParams, function (err) {\n    if (err) {\n      console.error(\"Database error updating applicant:\", err);\n      return next(new Error('Failed to update applicant.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Applicant not found or not authorized to update.'\n      });\n    }\n    res.status(200).json({\n      message: 'Applicant updated successfully!'\n    });\n  });\n});\n\n/**\r\n * DELETE /api/applicants/:id\r\n * Deletes an applicant.\r\n * Requires super_admin or location_admin (for their location's applicants).\r\n */\napp[\"delete\"]('/api/applicants/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user18 = req.user,\n    companyId = _req$user18.companyId,\n    role = _req$user18.role,\n    currentUserLocationId = _req$user18.locationId;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid applicant ID provided.'\n    });\n  }\n  if (role !== 'super_admin' && role !== 'location_admin') {\n    return res.status(403).json({\n      error: 'Access Denied: Only admins can delete applicants.'\n    });\n  }\n  var sql = 'DELETE FROM Applicants WHERE applicant_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Additional security for location_admin: ensure they only delete applicants in their own location\n  if (role === 'location_admin') {\n    sql += ' AND (location_id = ? OR location_id IS NULL)';\n    params.push(currentUserLocationId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting applicant:\", err);\n      return next(new Error('Failed to delete applicant.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Applicant not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// --- Document Management Routes ---\n\n/**\r\n * POST /api/documents\r\n * Uploads (saves metadata for) a new document.\r\n * Requires authenticated user.\r\n * Note: Actual file storage is assumed to be handled by a separate service (e.g., S3).\r\n * This endpoint only stores the metadata and a URL.\r\n */\napp.post('/api/documents', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$body10 = req.body,\n    title = _req$body10.title,\n    file_name = _req$body10.file_name,\n    file_type = _req$body10.file_type,\n    file_url = _req$body10.file_url,\n    description = _req$body10.description;\n  var _req$user19 = req.user,\n    companyId = _req$user19.companyId,\n    userId = _req$user19.userId;\n  var upload_date = new Date().toISOString();\n\n  // Input Validation for Document Upload\n  if (!title || typeof title !== 'string' || title.trim() === '') {\n    return res.status(400).json({\n      error: 'Document title is required and must be a non-empty string.'\n    });\n  }\n  if (!file_name || typeof file_name !== 'string' || file_name.trim() === '') {\n    return res.status(400).json({\n      error: 'File name is required and must be a non-empty string.'\n    });\n  }\n  if (!file_type || typeof file_type !== 'string' || file_type.trim() === '') {\n    return res.status(400).json({\n      error: 'File type is required and must be a non-empty string.'\n    });\n  }\n  // Basic URL validation: checks for http(s) protocol and some content. Can be more robust.\n  var urlRegex = /^https?:\\/\\/[^\\s$.?#].[^\\s]*$/i;\n  if (!file_url || typeof file_url !== 'string' || !urlRegex.test(file_url)) {\n    return res.status(400).json({\n      error: 'A valid file URL (starting with http or https) is required.'\n    });\n  }\n  if (description !== undefined && typeof description !== 'string') {\n    return res.status(400).json({\n      error: 'Notes must be a string if provided.'\n    });\n  }\n  db.run('INSERT INTO Documents (company_id, user_id, title, file_name, file_type, file_url, description, upload_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)', [companyId, userId, title, file_name, file_type, file_url, description, upload_date], function (err) {\n    if (err) {\n      console.error(\"Database error uploading document:\", err);\n      return next(new Error('Failed to upload document metadata.')); // Pass error\n    }\n    res.status(201).json({\n      message: 'Document metadata saved successfully!',\n      documentId: this.lastID\n    });\n  });\n});\n\n/**\r\n * GET /api/documents\r\n * Retrieves a list of documents for the company.\r\n * Filters can be added (e.g., by uploader, by type).\r\n * Requires authenticated user. Super admins can see all, others can see own documents.\r\n */\napp.get('/api/documents', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var _req$user20 = req.user,\n    companyId = _req$user20.companyId,\n    userId = _req$user20.userId,\n    role = _req$user20.role;\n  var sql = 'SELECT * FROM Documents WHERE company_id = ?';\n  var params = [companyId];\n\n  // Non-super-admins only see their own documents\n  if (role !== 'super_admin') {\n    sql += ' AND user_id = ?';\n    params.push(userId);\n  }\n  db.all(sql, params, function (err, rows) {\n    if (err) {\n      console.error(\"Database error fetching documents:\", err);\n      return next(new Error('Database error fetching documents.'));\n    } // Pass error\n    res.json(rows);\n  });\n});\n\n/**\r\n * DELETE /api/documents/:id\r\n * Deletes a document record.\r\n * Requires super_admin or the user who uploaded it.\r\n */\napp[\"delete\"]('/api/documents/:id', authenticateToken, function (req, res, next) {\n  // Added 'next'\n  var id = req.params.id;\n  var _req$user21 = req.user,\n    companyId = _req$user21.companyId,\n    userId = _req$user21.userId,\n    role = _req$user21.role;\n\n  // Validate ID parameter\n  if (!id || isNaN(parseInt(id))) {\n    return res.status(400).json({\n      error: 'Invalid document ID provided.'\n    });\n  }\n  var sql = 'DELETE FROM Documents WHERE document_id = ? AND company_id = ?';\n  var params = [id, companyId];\n\n  // Only super_admin or the original uploader can delete\n  if (role !== 'super_admin') {\n    sql += ' AND user_id = ?';\n    params.push(userId);\n  }\n  db.run(sql, params, function (err) {\n    if (err) {\n      console.error(\"Database error deleting document:\", err);\n      return next(new Error('Failed to delete document.'));\n    } // Pass error\n    if (this.changes === 0) {\n      return res.status(404).json({\n        error: 'Document not found or not authorized to delete.'\n      });\n    }\n    res.status(204).send();\n  });\n});\n\n// Fallback for any other GET request not handled by an API route (serves index.html for SPA behavior)\n// This should always be the LAST route in your Express app\napp.get(/'*'/, function (req, res) {\n  // Correctly serve the index.html from the parent directory\n  res.sendFile(path.join(__dirname, '..', 'index.html'));\n});\n\n// --- Global Error Handling Middleware ---\n// This should be the very last middleware in your Express app\napp.use(function (err, req, res, next) {\n  console.error(\"Unhandled Error: \".concat(err.stack)); // Log the full stack trace for debugging\n  // Respond with a generic error message for the client\n  res.status(500).json({\n    error: 'An unexpected server error occurred. Please try again later.'\n    // In development, you might send more details:\n    // message: err.message,\n    // stack: process.env.NODE_ENV === 'development' ? err.stack : undefined\n  });\n});\n\n// --- Server Start ---\n// This conditional export allows the app to be imported for testing\n// without starting the server listener when the test runner requires it.\nif (require.main === module) {\n  // Only listen if this file is run directly (not required as a module)\n  app.listen(PORT, function () {\n    console.log(\"Server is running successfully on http://localhost:\".concat(PORT));\n  });\n} else {\n  // Export the app for testing purposes\n  module.exports = app;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiX2ludm9rZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsImV4cHJlc3MiLCJyZXF1aXJlIiwic3FsaXRlMyIsInZlcmJvc2UiLCJiY3J5cHQiLCJqd3QiLCJjb3JzIiwicGF0aCIsImNzdiIsIl9yZXF1aXJlIiwiUmVhZGFibGUiLCJyYXRlTGltaXQiLCJtb3JnYW4iLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJjb25maWciLCJzdHJpcGVJbnN0YW5jZSIsIlNUUklQRV9TRUNSRVRfS0VZIiwiYXBwIiwiYWxsb3dlZE9yaWdpbnMiLCJDT1JTX09SSUdJTiIsInNwbGl0IiwicHVzaCIsImNvcnNPcHRpb25zIiwib3JpZ2luIiwiY2FsbGJhY2siLCJpbmNsdWRlcyIsIm1zZyIsIkVycm9yIiwiaW5kZXhPZiIsIm1ldGhvZHMiLCJjcmVkZW50aWFscyIsIm9wdGlvbnNTdWNjZXNzU3RhdHVzIiwidXNlIiwiUE9SVCIsIlNUUklQRV9XRUJIT09LX1NFQ1JFVCIsImF1dGhMaW1pdGVyIiwid2luZG93TXMiLCJtYXgiLCJtZXNzYWdlIiwic3RhbmRhcmRIZWFkZXJzIiwibGVnYWN5SGVhZGVycyIsInBvc3QiLCJyYXciLCJ0eXBlIiwiX3JlZiIsIl9jYWxsZWUiLCJyZXEiLCJyZXMiLCJzaWciLCJldmVudCIsInNlc3Npb24iLCJ1c2VySWQiLCJwbGFuSWQiLCJzdWJzY3JpcHRpb25VcGRhdGVkIiwic3Vic2NyaXB0aW9uRGVsZXRlZCIsImludm9pY2VTdWNjZWVkZWQiLCJpbnZvaWNlRmFpbGVkIiwiX3QiLCJfdDIiLCJfY29udGV4dCIsImhlYWRlcnMiLCJ3ZWJob29rcyIsImNvbnN0cnVjdEV2ZW50IiwiYm9keSIsImNvbnNvbGUiLCJlcnJvciIsImNvbmNhdCIsInN0YXR1cyIsInNlbmQiLCJkYXRhIiwib2JqZWN0IiwibG9nIiwiaWQiLCJtZXRhZGF0YSIsInBheW1lbnRfc3RhdHVzIiwiZGIiLCJydW4iLCJjdXN0b21lciIsInN1YnNjcmlwdGlvbiIsImVyciIsInBsYW4iLCJqc29uIiwicmVjZWl2ZWQiLCJfeCIsIl94MiIsIkpXVF9TRUNSRVQiLCJqb2luIiwiX19kaXJuYW1lIiwibWF4QWdlIiwiaW1tdXRhYmxlIiwiRGF0YWJhc2UiLCJleGl0IiwiZ2V0Iiwic2VyaWFsaXplIiwiYXV0aGVudGljYXRlVG9rZW4iLCJuZXh0IiwiYXV0aEhlYWRlciIsInRva2VuIiwidmVyaWZ5IiwidXNlciIsImlzVmFsaWRFbWFpbCIsImVtYWlsIiwidGVzdCIsIl9yZWYyIiwiX2NhbGxlZTIiLCJfcmVxJGJvZHkiLCJjb21wYW55X25hbWUiLCJmdWxsX25hbWUiLCJwYXNzd29yZCIsInBhc3N3b3JkX2hhc2giLCJfdDMiLCJfY29udGV4dDIiLCJ0cmltIiwiaGFzaCIsIm5ld0NvbXBhbnlJZCIsImxhc3RJRCIsInVzZXJJbnNlcnRFcnIiLCJfeDMiLCJfeDQiLCJfeDUiLCJfcmVxJGJvZHkyIiwiX3JlZjMiLCJfY2FsbGVlMyIsImlzTWF0Y2giLCJwYXlsb2FkIiwiX2NvbnRleHQzIiwiY29tcGFyZSIsInVzZXJfaWQiLCJyb2xlIiwiZnVsbE5hbWUiLCJjb21wYW55SWQiLCJjb21wYW55X2lkIiwibG9jYXRpb25JZCIsImxvY2F0aW9uX2lkIiwic3Vic2NyaXB0aW9uU3RhdHVzIiwic3Vic2NyaXB0aW9uX3N0YXR1cyIsInBsYW5faWQiLCJzaWduIiwiZXhwaXJlc0luIiwiX3g2IiwiX3g3IiwiX3JlZjQiLCJfY2FsbGVlNCIsIl9yZXEkYm9keTMiLCJfcmVxJHVzZXIiLCJfdDQiLCJfY29udGV4dDQiLCJsb2NhdGlvbiIsIl94OCIsIl94OSIsIl94MCIsIl9yZWY1IiwiX2NhbGxlZTUiLCJfcmVxJGJvZHk0IiwicG9zaXRpb24iLCJlbXBsb3llZV9pZCIsIl9yZXEkdXNlcjIiLCJjdXJyZW50VXNlckxvY2F0aW9uSWQiLCJpc0xvY2F0aW9uSWRWYWxpZCIsImxvY2F0aW9uVmVyaWZpY2F0aW9uIiwiX3Q1IiwiX2NvbnRleHQ1IiwiaXNOYU4iLCJ1bmRlZmluZWQiLCJyZWplY3QiLCJfeDEiLCJfeDEwIiwiX3gxMSIsIl9yZXEkdXNlcjMiLCJwdXQiLCJfcmVmNiIsIl9jYWxsZWU3IiwiX3JlcSRib2R5NSIsImN1cnJlbnRQYXNzd29yZCIsIm5ld1Bhc3N3b3JkIiwiX2NvbnRleHQ3IiwiX3JlZjciLCJfY2FsbGVlNiIsInVwZGF0ZVNxbCIsInVwZGF0ZVBhcmFtcyIsImNsYXVzZXMiLCJjaGFuZ2VzTWFkZSIsImV4aXN0aW5nVXNlciIsIm5ld1Bhc3N3b3JkSGFzaCIsIl90NiIsIl9jb250ZXh0NiIsInJvdyIsInVwZGF0ZUVyciIsImNoYW5nZXMiLCJmZXRjaEVyciIsInVwZGF0ZWRVc2VyIiwibmV3UGF5bG9hZCIsIm5ld1Rva2VuIiwiX3gxNSIsIl94MTYiLCJfeDEyIiwiX3gxMyIsIl94MTQiLCJfcmVxJHVzZXI0Iiwic3FsIiwicGFyYW1zIiwiYWxsIiwicm93cyIsIl9yZXEkYm9keTYiLCJsb2NhdGlvbl9uYW1lIiwibG9jYXRpb25fYWRkcmVzcyIsIl9yZXEkdXNlcjUiLCJfcmVxJHVzZXI2IiwicGFyc2VJbnQiLCJfcmVxJHVzZXI3IiwiY3VycmVudFVzZXJJZCIsIl9yZXEkcXVlcnkiLCJxdWVyeSIsImZpbHRlclJvbGUiLCJmaWx0ZXJMb2NhdGlvbklkIiwiYWxsb3dlZFJvbGVzIiwiX3JlcSR1c2VyOCIsImF1dGhlbnRpY2F0ZWRVc2VySWQiLCJfcmVmOCIsIl9jYWxsZWU4IiwiX3JlcSR1c2VyOSIsImFsbG93ZWRQbGFuSWRzIiwicHJpY2VJZE1hcCIsInN0cmlwZVByaWNlSWQiLCJjdXN0b21lcklkIiwidXNlclJlY29yZCIsIl90NyIsIl9jb250ZXh0OCIsIlNUUklQRV9QUklDRV9JRF9QUk8iLCJTVFJJUEVfUFJJQ0VfSURfRU5UIiwic3RyaXBlX2N1c3RvbWVyX2lkIiwiY3VzdG9tZXJzIiwiY2hlY2tvdXQiLCJzZXNzaW9ucyIsIm1vZGUiLCJsaW5lX2l0ZW1zIiwicHJpY2UiLCJxdWFudGl0eSIsInN1Y2Nlc3NfdXJsIiwiRlJPTlRFTkRfVVJMIiwiY2FuY2VsX3VybCIsInVybCIsIl94MTciLCJfeDE4IiwiX3gxOSIsIl9yZXEkYm9keTciLCJzdGFydF90aW1lIiwiZW5kX3RpbWUiLCJub3RlcyIsIl9yZXEkdXNlcjAiLCJEYXRlIiwiZ2V0VGltZSIsImVtcGxveWVlIiwiaW5zZXJ0RXJyIiwic2NoZWR1bGVJZCIsIl9yZXEkcXVlcnkyIiwic3RhcnRfZGF0ZSIsImVuZF9kYXRlIiwiX3JlcSR1c2VyMSIsIl9yZXEkdXNlcjEwIiwiX3JlcSRib2R5OCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJyZXF1aXJlbWVudHMiLCJfcmVxJHVzZXIxMSIsImNyZWF0ZWRfZGF0ZSIsInRvSVNPU3RyaW5nIiwiam9iUG9zdGluZ0lkIiwiX3JlcSRxdWVyeTMiLCJfcmVxJHVzZXIxMiIsImFsbG93ZWRTdGF0dXNlcyIsIl9yZXEkYm9keTkiLCJfcmVxJHVzZXIxMyIsIl9yZXEkdXNlcjE0IiwiX3JlcSRib2R5MCIsImpvYl9wb3N0aW5nX2lkIiwicGhvbmVfbnVtYmVyIiwiX3JlcSR1c2VyMTUiLCJhcHBsaWNhdGlvbl9kYXRlIiwiam9iUG9zdGluZyIsImFwcGxpY2FudElkIiwiX3JlcSRxdWVyeTQiLCJfcmVxJHVzZXIxNiIsIl9yZXEkYm9keTEiLCJyZXN1bWVfdXJsIiwiX3JlcSR1c2VyMTciLCJqb2IiLCJfcmVxJHVzZXIxOCIsIl9yZXEkYm9keTEwIiwiZmlsZV9uYW1lIiwiZmlsZV90eXBlIiwiZmlsZV91cmwiLCJfcmVxJHVzZXIxOSIsInVwbG9hZF9kYXRlIiwidXJsUmVnZXgiLCJkb2N1bWVudElkIiwiX3JlcSR1c2VyMjAiLCJfcmVxJHVzZXIyMSIsInNlbmRGaWxlIiwic3RhY2siLCJtYWluIiwibW9kdWxlIiwibGlzdGVuIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFx4YXJjeVxcT25lRHJpdmVcXERlc2t0b3BcXG9uYm9hcmRmbG93XFxiYWNrZW5kXFwiLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAtLS0gSW1wb3J0cyAtLS1cclxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3Qgc3FsaXRlMyA9IHJlcXVpcmUoJ3NxbGl0ZTMnKS52ZXJib3NlKCk7XHJcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7XHJcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xyXG5jb25zdCBjb3JzID0gcmVxdWlyZSgnY29ycycpOyAvLyBJbXBvcnQgY29yc1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5jb25zdCBjc3YgPSByZXF1aXJlKCdjc3YtcGFyc2VyJyk7IC8vIEZvciBDU1YgcGFyc2luZ1xyXG5jb25zdCB7IFJlYWRhYmxlIH0gPSByZXF1aXJlKCdzdHJlYW0nKTsgLy8gRm9yIGNyZWF0aW5nIGEgcmVhZGFibGUgc3RyZWFtIGZyb20gYSBzdHJpbmdcclxuY29uc3QgcmF0ZUxpbWl0ID0gcmVxdWlyZSgnZXhwcmVzcy1yYXRlLWxpbWl0Jyk7IC8vIEltcG9ydCByYXRlLWxpbWl0aW5nIG1pZGRsZXdhcmVcclxuY29uc3QgbW9yZ2FuID0gcmVxdWlyZSgnbW9yZ2FuJyk7IC8vIEltcG9ydCBtb3JnYW4gZm9yIHJlcXVlc3QgbG9nZ2luZ1xyXG5cclxuLy8gTG9hZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZnJvbSAuZW52IGZpbGUgaW4gZGV2ZWxvcG1lbnRcclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgIHJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xyXG59XHJcblxyXG4vLyBJbXBvcnQgdGhlIFN0cmlwZSBsaWJyYXJ5IGFuZCBpbml0aWFsaXplIGl0IHdpdGggeW91ciBzZWNyZXQga2V5XHJcbi8vIFVzZSBwcm9jZXNzLmVudi5TVFJJUEVfU0VDUkVUX0tFWSBmb3IgcHJvZHVjdGlvblxyXG5jb25zdCBzdHJpcGVJbnN0YW5jZSA9IHJlcXVpcmUoJ3N0cmlwZScpKHByb2Nlc3MuZW52LlNUUklQRV9TRUNSRVRfS0VZIHx8ICdza19saXZlXzUxUmE0UkpHMDZOSHJ3c1k5dVpySHBXeVRySm0yMXFlaDNXV0VDVXVwWDR6VTZiTmJqYTE1aEhFeDZOTGxEOWY3WXZ5YTZCNkI2OU5JSEF0VG1UZjhRT0g1MDBsOFo3enJIWScpO1xyXG5cclxuLy8gLS0tIEFwcCBJbml0aWFsaXphdGlvbiAtLS1cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuLy8gQ29uZmlndXJlIENPUlMgZm9yIHByb2R1Y3Rpb24gZW52aXJvbm1lbnRcclxuY29uc3QgYWxsb3dlZE9yaWdpbnMgPSBwcm9jZXNzLmVudi5DT1JTX09SSUdJTiA/IHByb2Nlc3MuZW52LkNPUlNfT1JJR0lOLnNwbGl0KCcsJykgOiBbJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCddOyAvLyBEZWZhdWx0IHRvIGxvY2FsaG9zdCBmb3IgZGV2ZWxvcG1lbnRcclxuXHJcbi8vIEFkZCAnbnVsbCcgdG8gYWxsb3dlZCBvcmlnaW5zIGlmIG5vdCBpbiBwcm9kdWN0aW9uIGFuZCBub3QgZXhwbGljaXRseSBzZXQgZm9yIGxvY2FsIGZpbGUgYWNjZXNzXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFwcm9jZXNzLmVudi5DT1JTX09SSUdJTikge1xyXG4gICAgYWxsb3dlZE9yaWdpbnMucHVzaCgnbnVsbCcpO1xyXG59XHJcblxyXG5jb25zdCBjb3JzT3B0aW9ucyA9IHtcclxuICAgIG9yaWdpbjogZnVuY3Rpb24gKG9yaWdpbiwgY2FsbGJhY2spIHtcclxuICAgICAgICAvLyBBbGxvdyByZXF1ZXN0cyB3aXRoIG5vIG9yaWdpbiAobGlrZSBtb2JpbGUgYXBwcywgY3VybCwgb3IgbG9jYWwgZmlsZSBhY2Nlc3MgaWYgJ251bGwnIGlzIGluIGFsbG93ZWRPcmlnaW5zKVxyXG4gICAgICAgIGlmICghb3JpZ2luKSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmICdudWxsJyBpcyBleHBsaWNpdGx5IGFsbG93ZWQgb3IgaWYgd2UncmUgaW4gZGV2IGFuZCBubyBDT1JTX09SSUdJTiBpcyBzZXRcclxuICAgICAgICAgICAgaWYgKGFsbG93ZWRPcmlnaW5zLmluY2x1ZGVzKCdudWxsJykgfHwgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXByb2Nlc3MuZW52LkNPUlNfT1JJR0lOKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9ICdUaGUgQ09SUyBwb2xpY3kgZm9yIHRoaXMgc2l0ZSBkb2VzIG5vdCBhbGxvdyBhY2Nlc3MgZnJvbSB0aGUgc3BlY2lmaWVkIE9yaWdpbi4nO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKG1zZyksIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhbGxvd2VkT3JpZ2lucy5pbmRleE9mKG9yaWdpbikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9ICdUaGUgQ09SUyBwb2xpY3kgZm9yIHRoaXMgc2l0ZSBkb2VzIG5vdCBhbGxvdyBhY2Nlc3MgZnJvbSB0aGUgc3BlY2lmaWVkIE9yaWdpbi4nO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKG1zZyksIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRydWUpO1xyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6ICdHRVQsSEVBRCxQVVQsUEFUQ0gsUE9TVCxERUxFVEUnLFxyXG4gICAgY3JlZGVudGlhbHM6IHRydWUsIC8vIEFsbG93IGNvb2tpZXMgdG8gYmUgc2VudFxyXG4gICAgb3B0aW9uc1N1Y2Nlc3NTdGF0dXM6IDIwNCAvLyBTb21lIGxlZ2FjeSBicm93c2VycyAoSUUxMSwgdmFyaW91cyBTbWFydFRWcykgY2hva2Ugb24gMjA0XHJcbn07XHJcbmFwcC51c2UoY29ycyhjb3JzT3B0aW9ucykpO1xyXG5cclxuXHJcbi8vIFVzZSBwcm9jZXNzLmVudi5QT1JUIGZvciBwcm9kdWN0aW9uLCBmYWxsYmFjayB0byAzMDAwIGZvciBsb2NhbCBkZXZlbG9wbWVudFxyXG5jb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwO1xyXG5cclxuLy8gRGVmaW5lIGEgd2ViaG9vayBzZWNyZXQgZm9yIFN0cmlwZS4gVGhpcyBzaG91bGQgYWxzbyBiZSBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZS5cclxuY29uc3QgU1RSSVBFX1dFQkhPT0tfU0VDUkVUID0gcHJvY2Vzcy5lbnYuU1RSSVBFX1dFQkhPT0tfU0VDUkVUIHx8ICd3aHNlY19ZT1VSX1dFQkhPT0tfU0VDUkVUJztcclxuXHJcbi8vIC0tLSBSYXRlIExpbWl0aW5nIENvbmZpZ3VyYXRpb24gLS0tXHJcbmNvbnN0IGF1dGhMaW1pdGVyID0gcmF0ZUxpbWl0KHtcclxuICAgIHdpbmRvd01zOiAxNSAqIDYwICogMTAwMCwgLy8gMTUgbWludXRlc1xyXG4gICAgbWF4OiAxMCwgLy8gTWF4IDEwIHJlcXVlc3RzIHBlciAxNSBtaW51dGVzIHBlciBJUFxyXG4gICAgbWVzc2FnZTogJ1RvbyBtYW55IGxvZ2luL3JlZ2lzdHJhdGlvbiBhdHRlbXB0cyBmcm9tIHRoaXMgSVAsIHBsZWFzZSB0cnkgYWdhaW4gYWZ0ZXIgMTUgbWludXRlcycsXHJcbiAgICBzdGFuZGFyZEhlYWRlcnM6IHRydWUsIC8vIFJldHVybiByYXRlIGxpbWl0IGluZm8gaW4gdGhlIGBSYXRlTGltaXQtKmAgaGVhZGVyc1xyXG4gICAgbGVnYWN5SGVhZGVyczogZmFsc2UsIC8vIERpc2FibGUgdGhlIGBYLVJhdGVMaW1pdC0qYCBoZWFkZXJzXHJcbn0pO1xyXG5cclxuLy8gLS0tIE1pZGRsZXdhcmUgZm9yIFN0cmlwZSBXZWJob29rIChNVVNUIGJlIGJlZm9yZSBleHByZXNzLmpzb24oKSBmb3Igb3RoZXIgcm91dGVzKSAtLS1cclxuLy8gVGhpcyByb3V0ZSBuZWVkcyB0aGUgcmF3IGJvZHkgZm9yIHNpZ25hdHVyZSB2ZXJpZmljYXRpb24uXHJcbmFwcC5wb3N0KCcvYXBpL3N0cmlwZS13ZWJob29rJywgZXhwcmVzcy5yYXcoe3R5cGU6ICdhcHBsaWNhdGlvbi9qc29uJ30pLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHNpZyA9IHJlcS5oZWFkZXJzWydzdHJpcGUtc2lnbmF0dXJlJ107XHJcblxyXG4gICAgbGV0IGV2ZW50O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgZXZlbnQgPSBzdHJpcGVJbnN0YW5jZS53ZWJob29rcy5jb25zdHJ1Y3RFdmVudChyZXEuYm9keSwgc2lnLCBTVFJJUEVfV0VCSE9PS19TRUNSRVQpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgV2ViaG9vayBFcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoYFdlYmhvb2sgRXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGFuZGxlIHRoZSBldmVudFxyXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XHJcbiAgICAgICAgY2FzZSAnY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQnOlxyXG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gZXZlbnQuZGF0YS5vYmplY3Q7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDaGVja291dCBTZXNzaW9uIENvbXBsZXRlZDonLCBzZXNzaW9uLmlkKTtcclxuICAgICAgICAgICAgY29uc3QgdXNlcklkID0gc2Vzc2lvbi5tZXRhZGF0YS51c2VySWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYW5JZCA9IHNlc3Npb24ubWV0YWRhdGEucGxhbklkO1xyXG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5wYXltZW50X3N0YXR1cyA9PT0gJ3BhaWQnICYmIHVzZXJJZCAmJiBwbGFuSWQpIHtcclxuICAgICAgICAgICAgICAgIGRiLnJ1bihcclxuICAgICAgICAgICAgICAgICAgICAnVVBEQVRFIFVzZXJzIFNFVCBzdHJpcGVfY3VzdG9tZXJfaWQgPSA/LCBzdHJpcGVfc3Vic2NyaXB0aW9uX2lkID0gPywgc3Vic2NyaXB0aW9uX3N0YXR1cyA9ID8sIHBsYW5faWQgPSA/IFdIRVJFIHVzZXJfaWQgPSA/JyxcclxuICAgICAgICAgICAgICAgICAgICBbc2Vzc2lvbi5jdXN0b21lciwgc2Vzc2lvbi5zdWJzY3JpcHRpb24sICdhY3RpdmUnLCBwbGFuSWQsIHVzZXJJZF0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIHVwZGF0ZSBlcnJvciBmb3IgY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQ6JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGNvbnNvbGUubG9nKGBVc2VyICR7dXNlcklkfSBzdWJzY3JpcHRpb24gdXBkYXRlZCB0byAke3BsYW5JZH0gKGFjdGl2ZSkuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdjdXN0b21lci5zdWJzY3JpcHRpb24udXBkYXRlZCc6XHJcbiAgICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvblVwZGF0ZWQgPSBldmVudC5kYXRhLm9iamVjdDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1YnNjcmlwdGlvbiBVcGRhdGVkOicsIHN1YnNjcmlwdGlvblVwZGF0ZWQuaWQpO1xyXG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uVXBkYXRlZC5jdXN0b21lciAmJiBzdWJzY3JpcHRpb25VcGRhdGVkLnN0YXR1cyAmJiBzdWJzY3JpcHRpb25VcGRhdGVkLnBsYW4gJiYgc3Vic2NyaXB0aW9uVXBkYXRlZC5wbGFuLmlkKSB7XHJcbiAgICAgICAgICAgICAgICBkYi5ydW4oXHJcbiAgICAgICAgICAgICAgICAgICAgJ1VQREFURSBVc2VycyBTRVQgc3Vic2NyaXB0aW9uX3N0YXR1cyA9ID8sIHBsYW5faWQgPSA/IFdIRVJFIHN0cmlwZV9jdXN0b21lcl9pZCA9ID8nLFxyXG4gICAgICAgICAgICAgICAgICAgIFtzdWJzY3JpcHRpb25VcGRhdGVkLnN0YXR1cywgc3Vic2NyaXB0aW9uVXBkYXRlZC5wbGFuLmlkLCBzdWJzY3JpcHRpb25VcGRhdGVkLmN1c3RvbWVyXSxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgY29uc29sZS5lcnJvcignRGF0YWJhc2UgdXBkYXRlIGVycm9yIGZvciBjdXN0b21lci5zdWJzY3JpcHRpb24udXBkYXRlZDonLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgY29uc29sZS5sb2coYFN1YnNjcmlwdGlvbiBmb3IgY3VzdG9tZXIgJHtzdWJzY3JpcHRpb25VcGRhdGVkLmN1c3RvbWVyfSBzdGF0dXMgdXBkYXRlZCB0byAke3N1YnNjcmlwdGlvblVwZGF0ZWQuc3RhdHVzfSBhbmQgcGxhbiB0byAke3N1YnNjcmlwdGlvblVwZGF0ZWQucGxhbi5pZH0uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdjdXN0b21lci5zdWJzY3JpcHRpb24uZGVsZXRlZCc6XHJcbiAgICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbkRlbGV0ZWQgPSBldmVudC5kYXRhLm9iamVjdDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1YnNjcmlwdGlvbiBEZWxldGVkOicsIHN1YnNjcmlwdGlvbkRlbGV0ZWQuaWQpO1xyXG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uRGVsZXRlZC5jdXN0b21lcikge1xyXG4gICAgICAgICAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAgICAgICAgICdVUERBVEUgVXNlcnMgU0VUIHN1YnNjcmlwdGlvbl9zdGF0dXMgPSA/LCBwbGFuX2lkID0gPywgc3RyaXBlX3N1YnNjcmlwdGlvbl9pZCA9IE5VTEwgV0hFUkUgc3RyaXBlX2N1c3RvbWVyX2lkID0gPycsXHJcbiAgICAgICAgICAgICAgICAgICAgWydjYW5jZWxsZWQnLCAnZnJlZScsIHN1YnNjcmlwdGlvbkRlbGV0ZWQuY3VzdG9tZXJdLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSB1cGRhdGUgZXJyb3IgZm9yIGN1c3RvbWVyLnN1YnNjcmlwdGlvbi5kZWxldGVkOicsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBjb25zb2xlLmxvZyhgU3Vic2NyaXB0aW9uIGZvciBjdXN0b21lciAke3N1YnNjcmlwdGlvbkRlbGV0ZWQuY3VzdG9tZXJ9IG1hcmtlZCBhcyBjYW5jZWxsZWQgYW5kIHJldmVydGVkIHRvIGZyZWUuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkJzpcclxuICAgICAgICAgICAgY29uc3QgaW52b2ljZVN1Y2NlZWRlZCA9IGV2ZW50LmRhdGEub2JqZWN0O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSW52b2ljZSBQYXltZW50IFN1Y2NlZWRlZDonLCBpbnZvaWNlU3VjY2VlZGVkLmlkKTtcclxuICAgICAgICAgICAgaWYgKGludm9pY2VTdWNjZWVkZWQuc3Vic2NyaXB0aW9uICYmIGludm9pY2VTdWNjZWVkZWQuY3VzdG9tZXIpIHtcclxuICAgICAgICAgICAgICAgIGRiLnJ1bihcclxuICAgICAgICAgICAgICAgICAgICAnVVBEQVRFIFVzZXJzIFNFVCBzdWJzY3JpcHRpb25fc3RhdHVzID0gPyBXSEVSRSBzdHJpcGVfc3Vic2NyaXB0aW9uX2lkID0gPyBBTkQgc3RyaXBlX2N1c3RvbWVyX2lkID0gPycsXHJcbiAgICAgICAgICAgICAgICAgICAgWydhY3RpdmUnLCBpbnZvaWNlU3VjY2VlZGVkLnN1YnNjcmlwdGlvbiwgaW52b2ljZVN1Y2NlZWRlZC5jdXN0b21lcl0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIHVwZGF0ZSBlcnJvciBmb3IgaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZDonLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgY29uc29sZS5sb2coYFN1YnNjcmlwdGlvbiAke2ludm9pY2VTdWNjZWVkZWQuc3Vic2NyaXB0aW9ufSBzdGF0dXMgc2V0IHRvIGFjdGl2ZS5gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2ludm9pY2UucGF5bWVudF9mYWlsZWQnOlxyXG4gICAgICAgICAgICBjb25zdCBpbnZvaWNlRmFpbGVkID0gZXZlbnQuZGF0YS5vYmplY3Q7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbnZvaWNlIFBheW1lbnQgRmFpbGVkOicsIGludm9pY2VGYWlsZWQuaWQpO1xyXG4gICAgICAgICAgICBpZiAoaW52b2ljZUZhaWxlZC5zdWJzY3JpcHRpb24gJiYgaW52b2ljZUZhaWxlZC5jdXN0b21lcikge1xyXG4gICAgICAgICAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAgICAgICAgICdVUERBVEUgVXNlcnMgU0VUIHN1YnNjcmlwdGlvbl9zdGF0dXMgPSA/IFdIRVJFIHN0cmlwZV9zdWJzY3JpcHRpb25faWQgPSA/IEFORCBzdHJpcGVfY3VzdG9tZXJfaWQgPSA/JyxcclxuICAgICAgICAgICAgICAgICAgICBbJ3Bhc3RfZHVlJywgaW52b2ljZUZhaWxlZC5zdWJzY3JpcHRpb24sIGludm9pY2VGYWlsZWQuY3VzdG9tZXJdLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSB1cGRhdGUgZXJyb3IgZm9yIGludm9pY2UucGF5bWVudF9mYWlsZWQ6JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGNvbnNvbGUubG9nKGBTdWJzY3JpcHRpb24gJHtpbnZvaWNlRmFpbGVkLnN1YnNjcmlwdGlvbn0gc3RhdHVzIHNldCB0byBwYXN0X2R1ZS5gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBVbmhhbmRsZWQgZXZlbnQgdHlwZSAke2V2ZW50LnR5cGV9YCk7XHJcbiAgICB9XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHJlY2VpdmVkOiB0cnVlIH0pO1xyXG59KTtcclxuXHJcbi8vIElNUE9SVEFOVDogZXhwcmVzcy5qc29uKCkgZm9yIHBhcnNpbmcgSlNPTiByZXF1ZXN0IGJvZGllcyBNVVNUIGNvbWUgQUZURVIgdGhlIHdlYmhvb2sgcm91dGVcclxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XHJcblxyXG4vLyAtLS0gSldUIFNlY3JldCAtLS1cclxuLy8gVXNlIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgZm9yIHByb2R1Y3Rpb25cclxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ3lvdXItc3VwZXItc2VjcmV0LWFuZC1sb25nLXN0cmluZy1mb3Itand0JztcclxuXHJcbi8vIC0tLSBSZXF1ZXN0IExvZ2dpbmcgKHVzaW5nIE1vcmdhbikgLS0tXHJcbi8vICdkZXYnIGZvcm1hdCBpcyBnb29kIGZvciBkZXZlbG9wbWVudCwgJ2NvbWJpbmVkJyBvciAndGlueScgZm9yIHByb2R1Y3Rpb24gbG9nc1xyXG5hcHAudXNlKG1vcmdhbignZGV2JykpO1xyXG5cclxuLy8gLS0tIFNlcnZlIFN0YXRpYyBGaWxlcyAoRnJvbnRlbmQpIHdpdGggQ2FjaGluZyAtLS1cclxuLy8gVGhpcyBtaWRkbGV3YXJlIHNlcnZlcyBzdGF0aWMgZmlsZXMgZnJvbSB0aGUgJ29uYm9hcmRmbG93JyByb290IGRpcmVjdG9yeVxyXG4vLyBhbmQgc2V0cyBDYWNoZS1Db250cm9sIGhlYWRlcnMgZm9yIGJyb3dzZXIgY2FjaGluZy5cclxuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4nKSwge1xyXG4gICAgbWF4QWdlOiAnN2QnLCAvLyBDYWNoZSBzdGF0aWMgYXNzZXRzIGZvciA3IGRheXMgKGUuZy4sIENTUywgSlMsIGltYWdlcywgZmF2aWNvbilcclxuICAgIGltbXV0YWJsZTogZmFsc2UgLy8gU2V0IHRvIHRydWUgaWYgYXNzZXQgZmlsZW5hbWVzIGluY2x1ZGUgY29udGVudCBoYXNoZXMgKGUuZy4sIGFwcC5taW4uanM/dj1oYXNoKVxyXG59KSk7XHJcblxyXG4vLyAtLS0gRGF0YWJhc2UgU2V0dXAgLS0tXHJcbmNvbnN0IGRiID0gbmV3IHNxbGl0ZTMuRGF0YWJhc2UoJy4vb25ib2FyZGZsb3cuZGInLCAoZXJyKSA9PiB7XHJcbiAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgLy8gTG9nIGRhdGFiYXNlIGNvbm5lY3Rpb24gZXJyb3IgYW5kIGV4aXRcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igb3BlbmluZyBkYXRhYmFzZTpcIiwgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTsgLy8gRXhpdCBwcm9jZXNzIGlmIGRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbHNcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIHRoZSBkYXRhYmFzZS5cIik7XHJcbiAgICAgICAgZGIuZ2V0KFwiUFJBR01BIGZvcmVpZ25fa2V5cyA9IE9OXCIpO1xyXG4gICAgICAgIGRiLnNlcmlhbGl6ZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGRiLnJ1bihgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgQ29tcGFuaWVzIChjb21wYW55X2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCwgY29tcGFueV9uYW1lIFRFWFQgTk9UIE5VTEwgVU5JUVVFKWApO1xyXG4gICAgICAgICAgICBkYi5ydW4oYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIExvY2F0aW9ucyAobG9jYXRpb25faWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULCBjb21wYW55X2lkIElOVEVHRVIsIGxvY2F0aW9uX25hbWUgVEVYVCBOT1QgTlVMTCwgbG9jYXRpb25fYWRkcmVzcyBURVhUIE5PVCBOVUxMLCBGT1JFSUdOIEtFWSAoY29tcGFueV9pZCkgUkVGRVJFTkNFUyBDb21wYW5pZXMoY29tcGFueV9pZCkgT04gREVMRVRFIENBU0NBREUpYCk7XHJcbiAgICAgICAgICAgIGRiLnJ1bihgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgVXNlcnMgKFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXHJcbiAgICAgICAgICAgICAgICBjb21wYW55X2lkIElOVEVHRVIsXHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbl9pZCBJTlRFR0VSLFxyXG4gICAgICAgICAgICAgICAgZnVsbF9uYW1lIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBlbWFpbCBURVhUIE5PVCBOVUxMIFVOSVFVRSxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkX2hhc2ggVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBlbXBsb3llZV9pZCBURVhULFxyXG4gICAgICAgICAgICAgICAgcm9sZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgc3RyaXBlX2N1c3RvbWVyX2lkIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBzdHJpcGVfc3Vic2NyaXB0aW9uX2lkIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25fc3RhdHVzIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBwbGFuX2lkIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAoY29tcGFueV9pZCkgUkVGRVJFTkNFUyBDb21wYW5pZXMoY29tcGFueV9pZCkgT04gREVMRVRFIENBU0NBREUsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAobG9jYXRpb25faWQpIFJFRkVSRU5DRVMgTG9jYXRpb25zKGxvY2F0aW9uX2lkKSBPTiBERUxFVEUgQ0FTQ0FERVxyXG4gICAgICAgICAgICApYCk7XHJcbiAgICAgICAgICAgIGRiLnJ1bihgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgU2NoZWR1bGVzIChcclxuICAgICAgICAgICAgICAgIHNjaGVkdWxlX2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcclxuICAgICAgICAgICAgICAgIGVtcGxveWVlX2lkIElOVEVHRVIgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbl9pZCBJTlRFR0VSIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRfdGltZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgZW5kX3RpbWUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIG5vdGVzIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAoZW1wbG95ZWVfaWQpIFJFRkVSRU5DRVMgVXNlcnModXNlcl9pZCkgT04gREVMRVRFIENBU0NBREUsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAobG9jYXRpb25faWQpIFJFRkVSRU5DRVMgTG9jYXRpb25zKGxvY2F0aW9uX2lkKSBPTiBERUxFVEUgQ0FTQ0FERVxyXG4gICAgICAgICAgICApYCk7XHJcbiAgICAgICAgICAgIC8vIE5FVzogQ3JlYXRlIEpvYlBvc3RpbmdzIHRhYmxlXHJcbiAgICAgICAgICAgIGRiLnJ1bihgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgSm9iUG9zdGluZ3MgKFxyXG4gICAgICAgICAgICAgICAgam9iX3Bvc3RpbmdfaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxyXG4gICAgICAgICAgICAgICAgY29tcGFueV9pZCBJTlRFR0VSIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25faWQgSU5URUdFUiwgLS0gT3B0aW9uYWw6IGxpbmsgam9iIHBvc3RpbmcgdG8gYSBzcGVjaWZpYyBsb2NhdGlvblxyXG4gICAgICAgICAgICAgICAgdGl0bGUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICByZXF1aXJlbWVudHMgVEVYVCwgLS0gT3B0aW9uYWw6IGpvYiByZXF1aXJlbWVudHNcclxuICAgICAgICAgICAgICAgIHN0YXR1cyBURVhUIE5PVCBOVUxMIERFRkFVTFQgJ09wZW4nLCAtLSBlLmcuLCAnT3BlbicsICdDbG9zZWQnLCAnRmlsbGVkJ1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9kYXRlIFRFWFQgTk9UIE5VTEwsIC0tIElTTyA4NjAxIGZvcm1hdFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGNvbXBhbnlfaWQpIFJFRkVSRU5DRVMgQ29tcGFuaWVzKGNvbXBhbnlfaWQpIE9OIERFTEVURSBDQVNDQURFLFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGxvY2F0aW9uX2lkKSBSRUZFUkVOQ0VTIExvY2F0aW9ucyhsb2NhdGlvbl9pZCkgT04gREVMRVRFIENBU0NBREVcclxuICAgICAgICAgICAgKWApO1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgQXBwbGljYW50cyB0YWJsZSBzY2hlbWEgdG8gbGluayB0byBKb2JQb3N0aW5ncyBhbmQgYWRkIHBob25lX251bWJlclxyXG4gICAgICAgICAgICBkYi5ydW4oYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIEFwcGxpY2FudHMgKFxyXG4gICAgICAgICAgICAgICAgYXBwbGljYW50X2lkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcclxuICAgICAgICAgICAgICAgIGNvbXBhbnlfaWQgSU5URUdFUiBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkIElOVEVHRVIsIC0tIE9wdGlvbmFsOiBhcHBsaWNhbnQncyBwcmVmZXJyZWQgbG9jYXRpb24gb3IgbG9jYXRpb24gYXBwbGllZCBmb3JcclxuICAgICAgICAgICAgICAgIGpvYl9wb3N0aW5nX2lkIElOVEVHRVIsIC0tIE5FVzogTGluayB0byBKb2JQb3N0aW5ncyB0YWJsZVxyXG4gICAgICAgICAgICAgICAgZnVsbF9uYW1lIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBlbWFpbCBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgcGhvbmVfbnVtYmVyIFRFWFQsIC0tIE5FVzogUGhvbmUgbnVtYmVyIGZpZWxkXHJcbiAgICAgICAgICAgICAgICBzdGF0dXMgVEVYVCBOT1QgTlVMTCBERUZBVUxUICdBcHBsaWVkJywgLS0gZS5nLiwgJ0FwcGxpZWQnLCAnSW50ZXJ2aWV3aW5nJywgJ1JlamVjdGVkJywgJ0hpcmVkJ1xyXG4gICAgICAgICAgICAgICAgcmVzdW1lX3VybCBURVhULCAtLSBPcHRpb25hbDogVVJMIHRvIGEgcmVzdW1lIGRvY3VtZW50IChlLmcuLCBob3N0ZWQgb24gY2xvdWQgc3RvcmFnZSlcclxuICAgICAgICAgICAgICAgIG5vdGVzIFRFWFQsXHJcbiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbl9kYXRlIFRFWFQgTk9UIE5VTEwsIC0tIElTTyA4NjAxIGZvcm1hdFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGNvbXBhbnlfaWQpIFJFRkVSRU5DRVMgQ29tcGFuaWVzKGNvbXBhbnlfaWQpIE9OIERFTEVURSBDQVNDQURFLFxyXG4gICAgICAgICAgICAgICAgRk9SRUlHTiBLRVkgKGxvY2F0aW9uX2lkKSBSRUZFUkVOQ0VTIExvY2F0aW9ucyhsb2NhdGlvbl9pZCkgT04gREVMRVRFIENBU0NBREUsXHJcbiAgICAgICAgICAgICAgICBGT1JFSUdOIEtFWSAoam9iX3Bvc3RpbmdfaWQpIFJFRkVSRU5DRVMgSm9iUG9zdGluZ3Moam9iX3Bvc3RpbmdfaWQpIE9OIERFTEVURSBTRVQgTlVMTCAtLSBJZiBqb2IgcG9zdGluZyBpcyBkZWxldGVkLCBzZXQgdGhpcyB0byBOVUxMXHJcbiAgICAgICAgICAgIClgKTtcclxuICAgICAgICAgICAgLy8gTkVXOiBDcmVhdGUgRG9jdW1lbnRzIHRhYmxlIGZvciBmaWxlL3ZpZGVvIHVwbG9hZHNcclxuICAgICAgICAgICAgZGIucnVuKGBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBEb2N1bWVudHMgKFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRfaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxyXG4gICAgICAgICAgICAgICAgY29tcGFueV9pZCBJTlRFR0VSIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgdXNlcl9pZCBJTlRFR0VSIE5PVCBOVUxMLCAtLSBVc2VyIHdobyB1cGxvYWRlZCB0aGUgZG9jdW1lbnRcclxuICAgICAgICAgICAgICAgIHRpdGxlIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgICAgICAgICBmaWxlX25hbWUgVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgICAgIGZpbGVfdHlwZSBURVhUIE5PVCBOVUxMLFxyXG4gICAgICAgICAgICAgICAgZmlsZV91cmwgVEVYVCBOT1QgTlVMTCwgLS0gVVJMIHRvIHRoZSBzdG9yZWQgZmlsZSAoZS5nLiwgUzMsIEdDUylcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uIFRFWFQsXHJcbiAgICAgICAgICAgICAgICB1cGxvYWRfZGF0ZSBURVhUIE5PVCBOVUxMLCAtLSBJU08gODYwMSBmb3JtYXRcclxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZIChjb21wYW55X2lkKSBSRUZFUkVOQ0VTIENvbXBhbmllcyhjb21wYW55X2lkKSBPTiBERUxFVEUgQ0FTQ0FERSxcclxuICAgICAgICAgICAgICAgIEZPUkVJR04gS0VZICh1c2VyX2lkKSBSRUZFUkVOQ0VTIFVzZXJzKHVzZXJfaWQpIE9OIERFTEVURSBDQVNDQURFXHJcbiAgICAgICAgICAgIClgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG4vLyAtLS0gQXV0aGVudGljYXRpb24gTWlkZGxld2FyZSAtLS1cclxuZnVuY3Rpb24gYXV0aGVudGljYXRlVG9rZW4ocmVxLCByZXMsIG5leHQpIHtcclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddO1xyXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyICYmIGF1dGhIZWFkZXIuc3BsaXQoJyAnKVsxXTtcclxuICAgIGlmICh0b2tlbiA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQ6IE5vIHRva2VuIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVULCAoZXJyLCB1c2VyKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAvLyBMb2cgdGhlIHNwZWNpZmljIEpXVCBlcnJvciBmb3IgZGVidWdnaW5nXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJKV1QgVmVyaWZpY2F0aW9uIEVycm9yOlwiLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnRm9yYmlkZGVuOiBJbnZhbGlkIG9yIGV4cGlyZWQgdG9rZW4uJyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVxLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIG5leHQoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyAtLS0gSGVscGVyIGZvciBJbnB1dCBWYWxpZGF0aW9uIC0tLVxyXG5jb25zdCBpc1ZhbGlkRW1haWwgPSAoZW1haWwpID0+IHtcclxuICAgIHJldHVybiAvXlteXFxzQF0rQFteXFxzQF0rXFwuW15cXHNAXSskLy50ZXN0KGVtYWlsKTtcclxufTtcclxuXHJcbi8vIC0tLSBBUEkgUm91dGVzIChBTEwgQVBJIFJPVVRFUyBTSE9VTEQgQkUgREVGSU5FRCBIRVJFLCBCRUZPUkUgU1RBVElDIEZJTEUgU0VSVklORykgLS0tXHJcblxyXG4vLyBBcHBseSByYXRlIGxpbWl0aW5nIHRvIGF1dGhlbnRpY2F0aW9uIHJvdXRlc1xyXG5hcHAucG9zdCgnL2FwaS9yZWdpc3RlcicsIGF1dGhMaW1pdGVyLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGNvbXBhbnlfbmFtZSwgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIFJlZ2lzdHJhdGlvblxyXG4gICAgaWYgKCFjb21wYW55X25hbWUgfHwgdHlwZW9mIGNvbXBhbnlfbmFtZSAhPT0gJ3N0cmluZycgfHwgY29tcGFueV9uYW1lLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJDb21wYW55IG5hbWUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFmdWxsX25hbWUgfHwgdHlwZW9mIGZ1bGxfbmFtZSAhPT0gJ3N0cmluZycgfHwgZnVsbF9uYW1lLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJGdWxsIG5hbWUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFlbWFpbCB8fCAhaXNWYWxpZEVtYWlsKGVtYWlsKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkEgdmFsaWQgZW1haWwgYWRkcmVzcyBpcyByZXF1aXJlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghcGFzc3dvcmQgfHwgdHlwZW9mIHBhc3N3b3JkICE9PSAnc3RyaW5nJyB8fCBwYXNzd29yZC5sZW5ndGggPCA2KSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiUGFzc3dvcmQgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzIGxvbmcuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXNzd29yZF9oYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKTtcclxuICAgICAgICBkYi5zZXJpYWxpemUoKCkgPT4ge1xyXG4gICAgICAgICAgICBkYi5ydW4oJ0JFR0lOIFRSQU5TQUNUSU9OJyk7XHJcbiAgICAgICAgICAgIGRiLnJ1bignSU5TRVJUIElOVE8gQ29tcGFuaWVzIChjb21wYW55X25hbWUpIFZBTFVFUyAoPyknLCBbY29tcGFueV9uYW1lXSwgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGRiLnJ1bignUk9MTEJBQ0snKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGNyZWF0aW5nIGNvbXBhbnk6XCIsIGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKFwiQ291bGQgbm90IGNyZWF0ZSBjb21wYW55LlwiKSk7IC8vIFBhc3MgZXJyb3IgdG8gZXJyb3IgaGFuZGxpbmcgbWlkZGxld2FyZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q29tcGFueUlkID0gdGhpcy5sYXN0SUQ7XHJcbiAgICAgICAgICAgICAgICBkYi5ydW4oYElOU0VSVCBJTlRPIFVzZXJzIChjb21wYW55X2lkLCBsb2NhdGlvbl9pZCwgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmRfaGFzaCwgcm9sZSwgc3Vic2NyaXB0aW9uX3N0YXR1cywgcGxhbl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCAnc3VwZXJfYWRtaW4nLCAnYWN0aXZlJywgJ2ZyZWUnKWAsIFtuZXdDb21wYW55SWQsIG51bGwsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkX2hhc2hdLCBmdW5jdGlvbih1c2VySW5zZXJ0RXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJJbnNlcnRFcnIpIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLnJ1bignUk9MTEJBQ0snKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBjcmVhdGluZyB1c2VyOlwiLCB1c2VySW5zZXJ0RXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJJbnNlcnRFcnIubWVzc2FnZS5pbmNsdWRlcygnVU5JUVVFIGNvbnN0cmFpbnQgZmFpbGVkOiBVc2Vycy5lbWFpbCcpKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHsgZXJyb3I6ICdFbWFpbCBhbHJlYWR5IHJlZ2lzdGVyZWQuJyB9KTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKFwiQ291bGQgbm90IGNyZWF0ZSB1c2VyLlwiKSk7IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGIucnVuKCdDT01NSVQnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6IFwiQ29tcGFueSBhbmQgdXNlciByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseSFcIiwgdXNlcklkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7IFxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWdpc3RyYXRpb24gZXJyb3I6XCIsIGVycm9yKTtcclxuICAgICAgICBuZXh0KGVycm9yKTsgLy8gUGFzcyBlcnJvciB0byBlcnJvciBoYW5kbGluZyBtaWRkbGV3YXJlXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoJy9hcGkvbG9naW4nLCBhdXRoTGltaXRlciwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIExvZ2luXHJcbiAgICBpZiAoIWVtYWlsIHx8ICFpc1ZhbGlkRW1haWwoZW1haWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBlbWFpbCBhZGRyZXNzIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwYXNzd29yZCB8fCB0eXBlb2YgcGFzc3dvcmQgIT09ICdzdHJpbmcnIHx8IHBhc3N3b3JkLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlBhc3N3b3JkIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLmdldChcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgZW1haWwgPSA/XCIsIFtlbWFpbF0sIGFzeW5jIChlcnIsIHVzZXIpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBkdXJpbmcgbG9naW46XCIsIGVycik7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcihcIkEgc2VydmVyIGVycm9yIG9jY3VycmVkIGR1cmluZyBsb2dpbi5cIikpOyAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdXNlcikgeyBcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBjcmVkZW50aWFscy5cIiB9KTsgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGlzTWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZF9oYXNoKTtcclxuICAgICAgICBpZiAoIWlzTWF0Y2gpIHsgXHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIkludmFsaWQgY3JlZGVudGlhbHMuXCIgfSk7IFxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwYXlsb2FkID0geyB1c2VySWQ6IHVzZXIudXNlcl9pZCwgZW1haWw6IHVzZXIuZW1haWwsIHJvbGU6IHVzZXIucm9sZSwgZnVsbE5hbWU6IHVzZXIuZnVsbF9uYW1lLCBjb21wYW55SWQ6IHVzZXIuY29tcGFueV9pZCwgbG9jYXRpb25JZDogdXNlci5sb2NhdGlvbl9pZCwgc3Vic2NyaXB0aW9uU3RhdHVzOiB1c2VyLnN1YnNjcmlwdGlvbl9zdGF0dXMsIHBsYW5JZDogdXNlci5wbGFuX2lkIH07XHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihwYXlsb2FkLCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogJzFoJyB9KTtcclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiTG9naW4gc3VjY2Vzc2Z1bCFcIiwgdG9rZW4sIHJvbGU6IHVzZXIucm9sZSB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5wb3N0KCcvYXBpL2ludml0ZS1hZG1pbicsIGF1dGhlbnRpY2F0ZVRva2VuLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBsb2NhdGlvbl9pZCB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgSW52aXRlIEFkbWluXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgc3VwZXIgYWRtaW5zIGNhbiBpbnZpdGUgb3RoZXIgYWRtaW5zLicgfSk7IH1cclxuICAgIGlmICghZnVsbF9uYW1lIHx8IHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZW1haWwgfHwgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXBhc3N3b3JkIHx8IHR5cGVvZiBwYXNzd29yZCAhPT0gJ3N0cmluZycgfHwgcGFzc3dvcmQubGVuZ3RoIDwgNikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlRlbXBvcmFyeSBwYXNzd29yZCBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhdCBsZWFzdCA2IGNoYXJhY3RlcnMgbG9uZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbG9jYXRpb25faWQgIT09ICdudW1iZXInIHx8IGxvY2F0aW9uX2lkIDw9IDApIHsgLy8gQXNzdW1pbmcgbG9jYXRpb25faWQgaXMgYW4gaW50ZWdlciBJRFxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkEgdmFsaWQgbG9jYXRpb24gSUQgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXNzd29yZF9oYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKTtcclxuICAgICAgICBkYi5nZXQoJ1NFTEVDVCAqIEZST00gTG9jYXRpb25zIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nLCBbbG9jYXRpb25faWQsIGNvbXBhbnlJZF0sIChlcnIsIGxvY2F0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGNoZWNraW5nIGxvY2F0aW9uOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIHdoZW4gdmVyaWZ5aW5nIGxvY2F0aW9uLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgIGlmICghbG9jYXRpb24pIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdTZWxlY3RlZCBsb2NhdGlvbiBkb2VzIG5vdCBleGlzdCBvciBkb2VzIG5vdCBiZWxvbmcgdG8geW91ciBjb21wYW55LicgfSk7IH1cclxuICAgICAgICAgICAgZGIucnVuKGBJTlNFUlQgSU5UTyBVc2VycyAoY29tcGFueV9pZCwgbG9jYXRpb25faWQsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkX2hhc2gsIHJvbGUsIHN1YnNjcmlwdGlvbl9zdGF0dXMsIHBsYW5faWQpIFZBTFVFUyAoPywgPywgPywgPywgPywgJ2xvY2F0aW9uX2FkbWluJywgJ2FjdGl2ZScsICdmcmVlJylgLCBbY29tcGFueUlkLCBsb2NhdGlvbl9pZCwgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmRfaGFzaF0sIGZ1bmN0aW9uKHVzZXJJbnNlcnRFcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VySW5zZXJ0RXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGludml0aW5nIGFkbWluOlwiLCB1c2VySW5zZXJ0RXJyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlckluc2VydEVyci5tZXNzYWdlLmluY2x1ZGVzKCdVTklRVUUgY29uc3RyYWludCBmYWlsZWQ6IFVzZXJzLmVtYWlsJykpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHsgZXJyb3I6ICdFbWFpbCBhbHJlYWR5IHJlZ2lzdGVyZWQuJyB9KTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIGludml0ZSBhZG1pbi4nKSk7IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogXCJMb2NhdGlvbiBhZG1pbiBpbnZpdGVkIHN1Y2Nlc3NmdWxseSFcIiwgdXNlcklkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikgeyBjb25zb2xlLmVycm9yKFwiSW52aXRlIGFkbWluIGVycm9yOlwiLCBlcnJvcik7IG5leHQoZXJyb3IpOyB9IC8vIFBhc3MgZXJyb3JcclxufSk7XHJcblxyXG4vLyBORVc6IEFQSSBlbmRwb2ludCBmb3IgaW52aXRpbmcgZW1wbG95ZWVzXHJcbmFwcC5wb3N0KCcvYXBpL2ludml0ZS1lbXBsb3llZScsIGF1dGhlbnRpY2F0ZVRva2VuLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICAgIGNvbnN0IHsgZnVsbF9uYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHBvc2l0aW9uLCBlbXBsb3llZV9pZCwgbG9jYXRpb25faWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gQXV0aG9yaXphdGlvbjogU3VwZXIgYWRtaW4gY2FuIGludml0ZSBhbnlvbmUsIExvY2F0aW9uIGFkbWluIGNhbiBvbmx5IGludml0ZSB0byB0aGVpciBsb2NhdGlvbiBvciB1bmFzc2lnbmVkXHJcbiAgICBpZiAoIVsnc3VwZXJfYWRtaW4nLCAnbG9jYXRpb25fYWRtaW4nXS5pbmNsdWRlcyhyb2xlKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogT25seSBhZG1pbnMgY2FuIGludml0ZSBlbXBsb3llZXMuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBJbnZpdGUgRW1wbG95ZWVcclxuICAgIGlmICghZnVsbF9uYW1lIHx8IHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZW1haWwgfHwgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXBhc3N3b3JkIHx8IHR5cGVvZiBwYXNzd29yZCAhPT0gJ3N0cmluZycgfHwgcGFzc3dvcmQubGVuZ3RoIDwgNikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlRlbXBvcmFyeSBwYXNzd29yZCBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhdCBsZWFzdCA2IGNoYXJhY3RlcnMgbG9uZy5cIiB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ29ycmVjdGVkIGxvY2F0aW9uX2lkIHZhbGlkYXRpb246IE11c3QgYmUgYSBudW1iZXIgPiAwLlxyXG4gICAgLy8gSWYgbG9jYXRpb25faWQgaXMgbnVsbCwgaXQgaW5kaWNhdGVzIGFuIHVuYXNzaWduZWQgbG9jYXRpb24sIHdoaWNoIGlzIHZhbGlkIGZvciBhIHN1cGVyIGFkbWluLlxyXG4gICAgLy8gRm9yIGxvY2F0aW9uX2FkbWluLCBpdCBtdXN0IG1hdGNoIHRoZWlyIGN1cnJlbnQgbG9jYXRpb24uXHJcbiAgICAvLyBUaGlzIHJldmlzZWQgbG9naWMgY29ycmVjdGx5IGNoZWNrcyBmb3IgbnVsbCBPUiBhIHZhbGlkIHBvc2l0aXZlIGludGVnZXIuXHJcbiAgICBjb25zdCBpc0xvY2F0aW9uSWRWYWxpZCA9IGxvY2F0aW9uX2lkID09PSBudWxsIHx8ICh0eXBlb2YgbG9jYXRpb25faWQgPT09ICdudW1iZXInICYmICFpc05hTihsb2NhdGlvbl9pZCkgJiYgbG9jYXRpb25faWQgPiAwKTtcclxuICAgIGlmICghaXNMb2NhdGlvbklkVmFsaWQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGxvY2F0aW9uIElEIChwb3NpdGl2ZSBudW1iZXIpIGlzIHJlcXVpcmVkIGZvciBlbXBsb3llZSwgb3IgbnVsbCBmb3IgdW5hc3NpZ25lZC5cIiB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHBvc2l0aW9uICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHBvc2l0aW9uICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUG9zaXRpb24gbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGVtcGxveWVlX2lkICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVtcGxveWVlX2lkICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRW1wbG95ZWUgSUQgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvY2F0aW9uIEFkbWluIHNwZWNpZmljIGNoZWNrOiBlbnN1cmUgdGhleSBhcmUgaW52aXRpbmcgdG8gdGhlaXIgYXNzaWduZWQgbG9jYXRpb24gb3IgbnVsbFxyXG4gICAgLy8gSWYgbG9jYXRpb25fYWRtaW4gdHJpZXMgdG8gc2V0IGEgbG9jYXRpb24gdGhhdCBpcyBOT1QgdGhlaXIgb3duLCBibG9jayBpdC5cclxuICAgIC8vIEFsbG93IGxvY2F0aW9uX2FkbWluIHRvIHNldCB0byBudWxsIGlmIHRoZWlyIGN1cnJlbnQgbG9jYXRpb24gaXMgbnVsbC5cclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgLy8gQSBsb2NhdGlvbiBhZG1pbiBjYW4gT05MWSBhc3NpZ24gYW4gZW1wbG95ZWUgdG8gdGhlaXIgb3duIGxvY2F0aW9uIG9yIHRvIG51bGwgKHVuYXNzaWduZWQpXHJcbiAgICAgICAgaWYgKGxvY2F0aW9uX2lkICE9PSBjdXJyZW50VXNlckxvY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHRhcmdldCBsb2NhdGlvbl9pZCBpcyBub3QgdGhlIGN1cnJlbnQgdXNlcidzIGxvY2F0aW9uLCBjaGVjayBpZiBib3RoIGFyZSBudWxsXHJcbiAgICAgICAgICAgIGlmICghKGxvY2F0aW9uX2lkID09PSBudWxsICYmIGN1cnJlbnRVc2VyTG9jYXRpb25JZCA9PT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gY2FuIG9ubHkgaW52aXRlIGVtcGxveWVlcyB0byB0aGVpciBhc3NpZ25lZCBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBhc3N3b3JkX2hhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApO1xyXG5cclxuICAgICAgICAvLyBWZXJpZnkgdGhlIGxvY2F0aW9uX2lkIGJlbG9uZ3MgdG8gdGhlIGNvbXBhbnkgYW5kLCBpZiBsb2NhdGlvbl9hZG1pbiwgbWF0Y2hlcyB0aGVpciBhc3NpZ25lZCBsb2NhdGlvblxyXG4gICAgICAgIC8vIFRoaXMgY2hlY2sgaXMgY3J1Y2lhbCBpZiBsb2NhdGlvbl9pZCBpcyBOT1QgbnVsbFxyXG4gICAgICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvblZlcmlmaWNhdGlvbiA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGRiLmdldCgnU0VMRUNUIGxvY2F0aW9uX2lkIEZST00gTG9jYXRpb25zIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nLCBbbG9jYXRpb25faWQsIGNvbXBhbnlJZF0sIChlcnIsIGxvY2F0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShsb2NhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICghbG9jYXRpb25WZXJpZmljYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnU2VsZWN0ZWQgbG9jYXRpb24gZG9lcyBub3QgZXhpc3Qgb3IgZG9lcyBub3QgYmVsb25nIHRvIHlvdXIgY29tcGFueS4nIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYi5ydW4oXHJcbiAgICAgICAgICAgIGBJTlNFUlQgSU5UTyBVc2VycyAoY29tcGFueV9pZCwgbG9jYXRpb25faWQsIGZ1bGxfbmFtZSwgZW1haWwsIHBhc3N3b3JkX2hhc2gsIHBvc2l0aW9uLCBlbXBsb3llZV9pZCwgcm9sZSwgc3Vic2NyaXB0aW9uX3N0YXR1cywgcGxhbl9pZCkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCAnZW1wbG95ZWUnLCAnYWN0aXZlJywgJ2ZyZWUnKWAsXHJcbiAgICAgICAgICAgIFtjb21wYW55SWQsIGxvY2F0aW9uX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBwYXNzd29yZF9oYXNoLCBwb3NpdGlvbiwgZW1wbG95ZWVfaWQsXSwgLy8gRGVmYXVsdCBuZXcgZW1wbG95ZWVzIHRvICdlbXBsb3llZScgcm9sZVxyXG4gICAgICAgICAgICBmdW5jdGlvbih1c2VySW5zZXJ0RXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlckluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBpbnZpdGluZyBlbXBsb3llZTpcIiwgdXNlckluc2VydEVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJJbnNlcnRFcnIubWVzc2FnZS5pbmNsdWRlcygnVU5JUVVFIGNvbnN0cmFpbnQgZmFpbGVkOiBVc2Vycy5lbWFpbCcpKSB7IHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IGVycm9yOiAnRW1haWwgYWxyZWFkeSByZWdpc3RlcmVkLicgfSk7IH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBpbnZpdGUgZW1wbG95ZWUuJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIkVtcGxveWVlIGludml0ZWQgc3VjY2Vzc2Z1bGx5IVwiLCB1c2VySWQ6IHRoaXMubGFzdElEIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkludml0ZSBlbXBsb3llZSBlcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgICAgIG5leHQoZXJyb3IpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcblxyXG5hcHAuZ2V0KCcvYXBpL3Byb2ZpbGUnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHVzZXJJZCwgZnVsbE5hbWUsIGVtYWlsLCByb2xlLCBjb21wYW55SWQsIGxvY2F0aW9uSWQsIHN1YnNjcmlwdGlvblN0YXR1cywgcGxhbklkIH0gPSByZXEudXNlcjtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXNlcklkLCBmdWxsTmFtZSwgZW1haWwsIHJvbGUsIGNvbXBhbnlJZCwgbG9jYXRpb25JZCwgc3Vic2NyaXB0aW9uU3RhdHVzLCBwbGFuSWQgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnB1dCgnL2FwaS9wcm9maWxlJywgYXV0aGVudGljYXRlVG9rZW4sIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgZnVsbE5hbWUsIGVtYWlsLCBjdXJyZW50UGFzc3dvcmQsIG5ld1Bhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBQcm9maWxlIFVwZGF0ZVxyXG4gICAgaWYgKGZ1bGxOYW1lID09PSB1bmRlZmluZWQgJiYgZW1haWwgPT09IHVuZGVmaW5lZCAmJiAoIWN1cnJlbnRQYXNzd29yZCB8fCAhbmV3UGFzc3dvcmQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdObyBkYXRhIHByb3ZpZGVkIGZvciB1cGRhdGUuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChmdWxsTmFtZSAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgZnVsbE5hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxOYW1lLnRyaW0oKSA9PT0gJycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nIGlmIHByb3ZpZGVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGVtYWlsICE9PSB1bmRlZmluZWQgJiYgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgbXVzdCBiZSBwcm92aWRlZCBpZiBjaGFuZ2luZyBlbWFpbC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmIChuZXdQYXNzd29yZCAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgbmV3UGFzc3dvcmQgIT09ICdzdHJpbmcnIHx8IG5ld1Bhc3N3b3JkLmxlbmd0aCA8IDYpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiTmV3IHBhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzIGxvbmcgaWYgY2hhbmdpbmcgcGFzc3dvcmQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoKGN1cnJlbnRQYXNzd29yZCAmJiAhbmV3UGFzc3dvcmQpIHx8ICghY3VycmVudFBhc3N3b3JkICYmIG5ld1Bhc3N3b3JkKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnQm90aCBjdXJyZW50IHBhc3N3b3JkIGFuZCBuZXcgcGFzc3dvcmQgYXJlIHJlcXVpcmVkIHRvIGNoYW5nZSBwYXNzd29yZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkYi5nZXQoXCJTRUxFQ1QgKiBGUk9NIFVzZXJzIFdIRVJFIHVzZXJfaWQgPSA/XCIsIFt1c2VySWRdLCBhc3luYyAoZXJyLCB1c2VyKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgdXNlciBmb3IgcHJvZmlsZSB1cGRhdGU6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcihcIlNlcnZlciBlcnJvciBkdXJpbmcgcHJvZmlsZSB1cGRhdGUuXCIpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKCF1c2VyKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIlVzZXIgbm90IGZvdW5kLlwiIH0pOyB9XHJcbiAgICAgICAgbGV0IHVwZGF0ZVNxbCA9ICdVUERBVEUgVXNlcnMgU0VUICc7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlUGFyYW1zID0gW107XHJcbiAgICAgICAgY29uc3QgY2xhdXNlcyA9IFtdO1xyXG4gICAgICAgIGxldCBjaGFuZ2VzTWFkZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChmdWxsTmFtZSAhPT0gdW5kZWZpbmVkICYmIGZ1bGxOYW1lICE9PSB1c2VyLmZ1bGxfbmFtZSkge1xyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2Z1bGxfbmFtZSA9ID8nKTtcclxuICAgICAgICAgICAgdXBkYXRlUGFyYW1zLnB1c2goZnVsbE5hbWUpO1xyXG4gICAgICAgICAgICBjaGFuZ2VzTWFkZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbWFpbCAhPT0gdW5kZWZpbmVkICYmIGVtYWlsICE9PSB1c2VyLmVtYWlsKSB7XHJcbiAgICAgICAgICAgIHRyeSB7IC8vIEFkZGVkIHRyeS1jYXRjaCBmb3IgYXN5bmMgYXdhaXQgaW4gZGIuZ2V0XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGIuZ2V0KFwiU0VMRUNUIHVzZXJfaWQgRlJPTSBVc2VycyBXSEVSRSBlbWFpbCA9ID8gQU5EIHVzZXJfaWQgIT0gP1wiLCBbZW1haWwsIHVzZXJJZF0sIChlcnIsIHJvdykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdVc2VyKSB7IHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IGVycm9yOiAnRW1haWwgYWxyZWFkeSBpbiB1c2UgYnkgYW5vdGhlciBhY2NvdW50LicgfSk7IH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZGJFcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBjaGVja2luZyBleGlzdGluZyBlbWFpbDpcIiwgZGJFcnIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHQobmV3IEVycm9yKFwiU2VydmVyIGVycm9yIHZlcmlmeWluZyBlbWFpbCBhdmFpbGFiaWxpdHkuXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2VtYWlsID0gPycpO1xyXG4gICAgICAgICAgICB1cGRhdGVQYXJhbXMucHVzaChlbWFpbCk7XHJcbiAgICAgICAgICAgIGNoYW5nZXNNYWRlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGN1cnJlbnRQYXNzd29yZCAmJiBuZXdQYXNzd29yZCkge1xyXG4gICAgICAgICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUoY3VycmVudFBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkX2hhc2gpO1xyXG4gICAgICAgICAgICBpZiAoIWlzTWF0Y2gpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwiQ3VycmVudCBwYXNzd29yZCBpbmNvcnJlY3QuXCIgfSk7IH1cclxuICAgICAgICAgICAgY29uc3QgbmV3UGFzc3dvcmRIYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2gobmV3UGFzc3dvcmQsIDEwKTtcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdwYXNzd29yZF9oYXNoID0gPycpO1xyXG4gICAgICAgICAgICB1cGRhdGVQYXJhbXMucHVzaChuZXdQYXNzd29yZEhhc2gpO1xyXG4gICAgICAgICAgICBjaGFuZ2VzTWFkZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghY2hhbmdlc01hZGUpIHsgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ05vIGNoYW5nZXMgZGV0ZWN0ZWQuIFByb2ZpbGUgcmVtYWlucyB0aGUgc2FtZS4nIH0pOyB9XHJcbiAgICAgICAgdXBkYXRlU3FsICs9IGNsYXVzZXMuam9pbignLCAnKSArICcgV0hFUkUgdXNlcl9pZCA9ID8nO1xyXG4gICAgICAgIHVwZGF0ZVBhcmFtcy5wdXNoKHVzZXJJZCk7XHJcbiAgICAgICAgZGIucnVuKHVwZGF0ZVNxbCwgdXBkYXRlUGFyYW1zLCBmdW5jdGlvbih1cGRhdGVFcnIpIHtcclxuICAgICAgICAgICAgaWYgKHVwZGF0ZUVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgdXBkYXRpbmcgcHJvZmlsZTpcIiwgdXBkYXRlRXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHByb2ZpbGUuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA+IDApIHtcclxuICAgICAgICAgICAgICAgIGRiLmdldChcIlNFTEVDVCAqIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID9cIiwgW3VzZXJJZF0sIChmZXRjaEVyciwgdXBkYXRlZFVzZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmV0Y2hFcnIgfHwgIXVwZGF0ZWRVc2VyKSB7IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyB1cGRhdGVkIHVzZXIgZm9yIG5ldyB0b2tlbjpcIiwgZmV0Y2hFcnIpOyByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnUHJvZmlsZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseSwgYnV0IHRva2VuIGNvdWxkIG5vdCBiZSByZWZyZXNoZWQuJyB9KTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BheWxvYWQgPSB7IHVzZXJJZDogdXBkYXRlZFVzZXIudXNlcl9pZCwgZW1haWw6IHVwZGF0ZWRVc2VyLmVtYWlsLCByb2xlOiB1cGRhdGVkVXNlci5yb2xlLCBmdWxsTmFtZTogdXBkYXRlZFVzZXIuZnVsbF9uYW1lLCBjb21wYW55SWQ6IHVwZGF0ZWRVc2VyLmNvbXBhbnlfaWQsIGxvY2F0aW9uSWQ6IHVwZGF0ZWRVc2VyLmxvY2F0aW9uX2lkLCBzdWJzY3JpcHRpb25TdGF0dXM6IHVwZGF0ZWRVc2VyLnN1YnNjcmlwdGlvbl9zdGF0dXMsIHBsYW5JZDogdXNlci5wbGFuX2lkIH07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VG9rZW4gPSBqd3Quc2lnbihuZXdQYXlsb2FkLCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogJzFoJyB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdQcm9maWxlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IScsIHRva2VuOiBuZXdUb2tlbiB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgeyByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdObyBjaGFuZ2VzIGFwcGxpZWQgYXMgZGF0YSB3YXMgaWRlbnRpY2FsLicgfSk7IH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5nZXQoJy9hcGkvbG9jYXRpb25zJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlIH0gPSByZXEudXNlcjtcclxuICAgIGxldCBzcWwgPSAnU0VMRUNUIGxvY2F0aW9uX2lkLCBsb2NhdGlvbl9uYW1lLCBsb2NhdGlvbl9hZGRyZXNzIEZST00gTG9jYXRpb25zIFdIRVJFIGNvbXBhbnlfaWQgPSA/JztcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtjb21wYW55SWRdO1xyXG5cclxuICAgIC8vIEFsbG93aW5nIHN1cGVyX2FkbWluLCBsb2NhdGlvbl9hZG1pbiwgYW5kIGVtcGxveWVlIHRvIHZpZXcgYWxsIGxvY2F0aW9ucyBpbiB0aGVpciBjb21wYW55IGZvciBkcm9wZG93bnMvc2VsZWN0aW9uXHJcbiAgICBpZiAoIVsnc3VwZXJfYWRtaW4nLCAnbG9jYXRpb25fYWRtaW4nLCAnZW1wbG95ZWUnXS5pbmNsdWRlcyhyb2xlKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zIHRvIHZpZXcgbG9jYXRpb25zLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIuYWxsKHNxbCwgcGFyYW1zLCAoZXJyLCByb3dzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgbG9jYXRpb25zOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIGxvY2F0aW9ucy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIHJlcy5qc29uKHJvd3MpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoJy9hcGkvbG9jYXRpb25zJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgbG9jYXRpb25fbmFtZSwgbG9jYXRpb25fYWRkcmVzcyB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgQ3JlYXRlIExvY2F0aW9uXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgc3VwZXIgYWRtaW5zIGNhbiBjcmVhdGUgbG9jYXRpb25zLicgfSk7IH1cclxuICAgIGlmICghbG9jYXRpb25fbmFtZSB8fCB0eXBlb2YgbG9jYXRpb25fbmFtZSAhPT0gJ3N0cmluZycgfHwgbG9jYXRpb25fbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiTG9jYXRpb24gbmFtZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWxvY2F0aW9uX2FkZHJlc3MgfHwgdHlwZW9mIGxvY2F0aW9uX2FkZHJlc3MgIT09ICdzdHJpbmcnIHx8IGxvY2F0aW9uX2FkZHJlc3MudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkxvY2F0aW9uIGFkZHJlc3MgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bignSU5TRVJUIElOVE8gTG9jYXRpb25zIChjb21wYW55X2lkLCBsb2NhdGlvbl9uYW1lLCBsb2NhdGlvbl9hZGRyZXNzKSBWQUxVRVMgKD8sID8sID8pJywgW2NvbXBhbnlJZCwgbG9jYXRpb25fbmFtZSwgbG9jYXRpb25fYWRkcmVzc10sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGNyZWF0aW5nIGxvY2F0aW9uOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgbG9jYXRpb24uJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdMb2NhdGlvbiBjcmVhdGVkIScsIGxvY2F0aW9uSWQ6IHRoaXMubGFzdElEIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLmRlbGV0ZSgnL2FwaS9sb2NhdGlvbnMvOmlkJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgc3VwZXIgYWRtaW5zIGNhbiBkZWxldGUgbG9jYXRpb25zLicgfSk7IH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBJRCBwYXJhbWV0ZXJcclxuICAgIGlmICghaWQgfHwgaXNOYU4ocGFyc2VJbnQoaWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBsb2NhdGlvbiBJRCBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bignREVMRVRFIEZST00gTG9jYXRpb25zIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nLCBbaWQsIGNvbXBhbnlJZF0sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGRlbGV0aW5nIGxvY2F0aW9uOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgbG9jYXRpb24uJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnTG9jYXRpb24gbm90IGZvdW5kIG9yIG5vdCBhdXRob3JpemVkIHRvIGRlbGV0ZS4nIH0pOyB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDQpLnNlbmQoKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5nZXQoJy9hcGkvdXNlcnMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIHVzZXJJZDogY3VycmVudFVzZXJJZCwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuICAgIGNvbnN0IHsgZmlsdGVyUm9sZSwgZmlsdGVyTG9jYXRpb25JZCB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICAgIGxldCBzcWwgPSBgU0VMRUNUIFVzZXJzLnVzZXJfaWQsIFVzZXJzLmZ1bGxfbmFtZSwgVXNlcnMuZW1haWwsIFVzZXJzLnJvbGUsIExvY2F0aW9ucy5sb2NhdGlvbl9uYW1lXHJcbiAgICAgICAgICAgICAgIEZST00gVXNlcnNcclxuICAgICAgICAgICAgICAgTEVGVCBKT0lOIExvY2F0aW9ucyBPTiBVc2Vycy5sb2NhdGlvbl9pZCA9IExvY2F0aW9ucy5sb2NhdGlvbl9pZFxyXG4gICAgICAgICAgICAgICBXSEVSRSBVc2Vycy5jb21wYW55X2lkID0gP2A7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbY29tcGFueUlkXTtcclxuXHJcbiAgICBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIC8vIFN1cGVyIGFkbWluIGNhbiB2aWV3IGFsbCB1c2VycyBpbiB0aGVpciBjb21wYW55LlxyXG4gICAgfSBlbHNlIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgLy8gTG9jYXRpb24gYWRtaW4gY2FuIHZpZXcgYWxsIHVzZXJzIHdpdGhpbiB0aGVpciBhc3NpZ25lZCBsb2NhdGlvbiwgcGx1cyB1bmFzc2lnbmVkIHVzZXJzIGZvciB0aGVpciBjb21wYW55LlxyXG4gICAgICAgIGlmIChjdXJyZW50VXNlckxvY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgc3FsICs9IGAgQU5EIChVc2Vycy5sb2NhdGlvbl9pZCA9ID8gT1IgVXNlcnMubG9jYXRpb25faWQgSVMgTlVMTClgOyAvLyBBZG1pbnMgbWlnaHQgbmVlZCB0byBzZWUgdW5hc3NpZ25lZCB1c2Vyc1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gbm90IGFzc2lnbmVkIHRvIGEgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdlbXBsb3llZScpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgVXNlcnMudXNlcl9pZCA9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VySWQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IEluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byB2aWV3IHVzZXJzLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5wdXQgdmFsaWRhdGlvbiBmb3IgZmlsdGVyUm9sZSBhbmQgZmlsdGVyTG9jYXRpb25JZFxyXG4gICAgY29uc3QgYWxsb3dlZFJvbGVzID0gWydzdXBlcl9hZG1pbicsICdsb2NhdGlvbl9hZG1pbicsICdlbXBsb3llZSddO1xyXG4gICAgaWYgKGZpbHRlclJvbGUgJiYgKCFhbGxvd2VkUm9sZXMuaW5jbHVkZXMoZmlsdGVyUm9sZSkgfHwgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicgJiYgZmlsdGVyUm9sZSA9PT0gJ3N1cGVyX2FkbWluJykpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGZpbHRlciByb2xlIHByb3ZpZGVkIG9yIGluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byBmaWx0ZXIgYnkgdGhpcyByb2xlLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZmlsdGVyTG9jYXRpb25JZCAmJiBpc05hTihwYXJzZUludChmaWx0ZXJMb2NhdGlvbklkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgZmlsdGVyIGxvY2F0aW9uIElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlmIChmaWx0ZXJSb2xlKSB7XHJcbiAgICAgICAgaWYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicgfHwgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicgJiYgKGZpbHRlclJvbGUgPT09ICdlbXBsb3llZScgfHwgZmlsdGVyUm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykpIHx8IChyb2xlID09PSAnZW1wbG95ZWUnICYmIGZpbHRlclJvbGUgPT09ICdlbXBsb3llZScpKSB7XHJcbiAgICAgICAgICAgIHNxbCArPSBgIEFORCBVc2Vycy5yb2xlID0gP2A7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGZpbHRlclJvbGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgY2FzZSBzaG91bGQgaWRlYWxseSBiZSBjYXVnaHQgYnkgdGhlIGVhcmxpZXIgdmFsaWRhdGlvbiBmb3IgYWxsb3dlZFJvbGVzLCBidXQgZm9yIGRlZmVuc2UtaW4tZGVwdGg6XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zIHRvIGZpbHRlciBieSByb2xlLicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlckxvY2F0aW9uSWQpIHtcclxuICAgICAgICAvLyBFbnN1cmUgbG9jYXRpb25fYWRtaW4gY2FuIG9ubHkgZmlsdGVyIGJ5IHRoZWlyIG93biBsb2NhdGlvblxyXG4gICAgICAgIGlmIChyb2xlID09PSAnc3VwZXJfYWRtaW4nIHx8IChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIHBhcnNlSW50KGZpbHRlckxvY2F0aW9uSWQpID09PSBjdXJyZW50VXNlckxvY2F0aW9uSWQpKSB7XHJcbiAgICAgICAgICAgIHNxbCArPSBgIEFORCBVc2Vycy5sb2NhdGlvbl9pZCA9ID9gO1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChmaWx0ZXJMb2NhdGlvbklkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IEluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byBmaWx0ZXIgYnkgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGIuYWxsKHNxbCwgcGFyYW1zLCAoZXJyLCByb3dzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgdXNlcnM6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgdXNlcnMuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuanNvbihyb3dzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5kZWxldGUoJy9hcGkvdXNlcnMvOmlkJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgdXNlcklkOiBhdXRoZW50aWNhdGVkVXNlcklkIH0gPSByZXEudXNlcjtcclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogT25seSBzdXBlciBhZG1pbnMgY2FuIGRlbGV0ZSB1c2Vycy4nIH0pOyB9XHJcbiAgICBpZiAocGFyc2VJbnQoaWQpID09PSBhdXRoZW50aWNhdGVkVXNlcklkKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQ2Fubm90IGRlbGV0ZSB5b3VyIG93biBzdXBlciBhZG1pbiBhY2NvdW50IHZpYSB0aGlzIGludGVyZmFjZS4nIH0pOyB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgSUQgcGFyYW1ldGVyXHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgdXNlciBJRCBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bignREVMRVRFIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/IEFORCByb2xlICE9IFxcJ3N1cGVyX2FkbWluXFwnJywgW2lkLCBjb21wYW55SWRdLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBkZWxldGluZyB1c2VyOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgdXNlci4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byBkZWxldGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjA0KS5zZW5kKCk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAucG9zdCgnL2FwaS9jcmVhdGUtY2hlY2tvdXQtc2Vzc2lvbicsIGF1dGhlbnRpY2F0ZVRva2VuLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IHBsYW5JZCB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IHVzZXJJZCwgZW1haWwsIGNvbXBhbnlJZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gSW5wdXQgVmFsaWRhdGlvbiBmb3IgcGxhbklkXHJcbiAgICBjb25zdCBhbGxvd2VkUGxhbklkcyA9IFsncHJvJywgJ2VudGVycHJpc2UnXTtcclxuICAgIGlmICghcGxhbklkIHx8ICFhbGxvd2VkUGxhbklkcy5pbmNsdWRlcyhwbGFuSWQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHBsYW4gSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwcmljZUlkTWFwID0ge1xyXG4gICAgICAgICdwcm8nOiBwcm9jZXNzLmVudi5TVFJJUEVfUFJJQ0VfSURfUFJPLCAgICAgICAvLyBVc2UgZW52aXJvbm1lbnQgdmFyaWFibGVcclxuICAgICAgICAnZW50ZXJwcmlzZSc6IHByb2Nlc3MuZW52LlNUUklQRV9QUklDRV9JRF9FTlQgLy8gVXNlIGVudmlyb25tZW50IHZhcmlhYmxlXHJcbiAgICB9O1xyXG4gICAgY29uc3Qgc3RyaXBlUHJpY2VJZCA9IHByaWNlSWRNYXBbcGxhbklkXTtcclxuICAgIGlmICghc3RyaXBlUHJpY2VJZCkgeyByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ1N0cmlwZSBwcmljZSBJRCBub3QgY29uZmlndXJlZCBmb3IgdGhpcyBwbGFuLicgfSk7IH0gLy8gQ2hhbmdlZCBmcm9tIDQwMCB0byA1MDAgYXMgdGhpcyBpcyBhIHNlcnZlci1zaWRlIGNvbmZpZyBpc3N1ZVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBsZXQgY3VzdG9tZXJJZDtcclxuICAgICAgICBjb25zdCB1c2VyUmVjb3JkID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBkYi5nZXQoJ1NFTEVDVCBzdHJpcGVfY3VzdG9tZXJfaWQgRlJPTSBVc2VycyBXSEVSRSB1c2VyX2lkID0gPycsIFt1c2VySWRdLCAoZXJyLCByb3cpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyb3cpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodXNlclJlY29yZCAmJiB1c2VyUmVjb3JkLnN0cmlwZV9jdXN0b21lcl9pZCkge1xyXG4gICAgICAgICAgICBjdXN0b21lcklkID0gdXNlclJlY29yZC5zdHJpcGVfY3VzdG9tZXJfaWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBhd2FpdCBzdHJpcGVJbnN0YW5jZS5jdXN0b21lcnMuY3JlYXRlKHsgZW1haWw6IGVtYWlsLCBtZXRhZGF0YTogeyB1c2VySWQ6IHVzZXJJZCwgY29tcGFueUlkOiBjb21wYW55SWQsIH0sIH0pO1xyXG4gICAgICAgICAgICBjdXN0b21lcklkID0gY3VzdG9tZXIuaWQ7XHJcbiAgICAgICAgICAgIGRiLnJ1bignVVBEQVRFIFVzZXJzIFNFVCBzdHJpcGVfY3VzdG9tZXJfaWQgPSA/IFdIRVJFIHVzZXJfaWQgPSA/JywgW2N1c3RvbWVySWQsIHVzZXJJZF0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIFN0cmlwZSBjdXN0b21lciBJRCB0byBEQjonLCBlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHN0cmlwZUluc3RhbmNlLmNoZWNrb3V0LnNlc3Npb25zLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGN1c3RvbWVyOiBjdXN0b21lcklkLFxyXG4gICAgICAgICAgICBtb2RlOiAnc3Vic2NyaXB0aW9uJyxcclxuICAgICAgICAgICAgbGluZV9pdGVtczogW3sgcHJpY2U6IHN0cmlwZVByaWNlSWQsIHF1YW50aXR5OiAxLCB9LCBdLFxyXG4gICAgICAgICAgICAvLyBVc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciBzdWNjZXNzL2NhbmNlbCBVUkxzLCBvciByZWxhdGl2ZSBwYXRocyBpZiBoYW5kbGVkIGNsaWVudC1zaWRlXHJcbiAgICAgICAgICAgIHN1Y2Nlc3NfdXJsOiBgJHtwcm9jZXNzLmVudi5GUk9OVEVORF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCd9L3N1aXRlLWh1Yi5odG1sP3BheW1lbnQ9c3VjY2VzcyZzZXNzaW9uX2lkPXtDSEVDS09VVF9TRVNTSU9OX0lEfWAsXHJcbiAgICAgICAgICAgIGNhbmNlbF91cmw6IGAke3Byb2Nlc3MuZW52LkZST05URU5EX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo4MDAwJ30vcHJpY2luZy5odG1sP3BheW1lbnQ9Y2FuY2VsbGVkYCxcclxuICAgICAgICAgICAgbWV0YWRhdGE6IHsgdXNlcklkOiB1c2VySWQsIHBsYW5JZDogcGxhbklkLCB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXJsOiBzZXNzaW9uLnVybCB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7IGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIFN0cmlwZSBDaGVja291dCBTZXNzaW9uOicsIGVycm9yKTsgbmV4dChlcnJvcik7IH0gLy8gUGFzcyBlcnJvclxyXG59KTtcclxuXHJcbmFwcC5wb3N0KCcvYXBpL3NjaGVkdWxlcycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGVtcGxveWVlX2lkLCBsb2NhdGlvbl9pZCwgc3RhcnRfdGltZSwgZW5kX3RpbWUsIG5vdGVzIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCB1c2VySWQ6IGN1cnJlbnRVc2VySWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIENyZWF0ZSBTY2hlZHVsZVxyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicgJiYgcm9sZSAhPT0gJ2xvY2F0aW9uX2FkbWluJykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgYWRtaW5zIGNhbiBjcmVhdGUgc2NoZWR1bGVzLicgfSk7IH1cclxuICAgIGlmICh0eXBlb2YgZW1wbG95ZWVfaWQgIT09ICdudW1iZXInIHx8IGVtcGxveWVlX2lkIDw9IDApIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0EgdmFsaWQgZW1wbG95ZWUgSUQgaXMgcmVxdWlyZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbG9jYXRpb25faWQgIT09ICdudW1iZXInIHx8IGxvY2F0aW9uX2lkIDw9IDApIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0EgdmFsaWQgbG9jYXRpb24gSUQgaXMgcmVxdWlyZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICghc3RhcnRfdGltZSB8fCAhZW5kX3RpbWUgfHwgaXNOYU4obmV3IERhdGUoc3RhcnRfdGltZSkuZ2V0VGltZSgpKSB8fCBpc05hTihuZXcgRGF0ZShlbmRfdGltZSkuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVmFsaWQgc3RhcnQgYW5kIGVuZCB0aW1lcyBhcmUgcmVxdWlyZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChuZXcgRGF0ZShzdGFydF90aW1lKSA+PSBuZXcgRGF0ZShlbmRfdGltZSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1N0YXJ0IHRpbWUgbXVzdCBiZSBiZWZvcmUgZW5kIHRpbWUuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChub3RlcyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBub3RlcyAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ05vdGVzIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5nZXQoJ1NFTEVDVCB1c2VyX2lkIEZST00gVXNlcnMgV0hFUkUgdXNlcl9pZCA9ID8gQU5EIGNvbXBhbnlfaWQgPSA/JywgW2VtcGxveWVlX2lkLCBjb21wYW55SWRdLCAoZXJyLCBlbXBsb3llZSkgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHZlcmlmeWluZyBlbXBsb3llZTpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciBkdXJpbmcgZW1wbG95ZWUgdmVyaWZpY2F0aW9uLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKCFlbXBsb3llZSkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0VtcGxveWVlIG5vdCBmb3VuZCBpbiB5b3VyIGNvbXBhbnkuJyB9KTsgfVxyXG4gICAgICAgIGRiLmdldCgnU0VMRUNUIGxvY2F0aW9uX2lkIEZST00gTG9jYXRpb25zIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nLCBbbG9jYXRpb25faWQsIGNvbXBhbnlJZF0sIChlcnIsIGxvY2F0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHZlcmlmeWluZyBsb2NhdGlvbjpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciBkdXJpbmcgbG9jYXRpb24gdmVyaWZpY2F0aW9uLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgIGlmICghbG9jYXRpb24pIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdMb2NhdGlvbiBub3QgZm91bmQgaW4geW91ciBjb21wYW55LicgfSk7IH1cclxuICAgICAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAgICAgJ0lOU0VSVCBJTlRPIFNjaGVkdWxlcyAoZW1wbG95ZWVfaWQsIGxvY2F0aW9uX2lkLCBzdGFydF90aW1lLCBlbmRfdGltZSwgbm90ZXMpIFZBTFVFUyAoPywgPywgPywgPywgPyknLCBbZW1wbG95ZWVfaWQsIGxvY2F0aW9uX2lkLCBzdGFydF90aW1lLCBlbmRfdGltZSwgbm90ZXNdLFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oaW5zZXJ0RXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc2VydEVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgY3JlYXRpbmcgc2NoZWR1bGU6XCIsIGluc2VydEVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBzY2hlZHVsZS4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogJ1NjaGVkdWxlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IScsIHNjaGVkdWxlSWQ6IHRoaXMubGFzdElEIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLmdldCgnL2FwaS9zY2hlZHVsZXMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBlbXBsb3llZV9pZCwgbG9jYXRpb25faWQsIHN0YXJ0X2RhdGUsIGVuZF9kYXRlIH0gPSByZXEucXVlcnk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgdXNlcklkOiBjdXJyZW50VXNlcklkLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIGxldCBzcWwgPSBgU0VMRUNUIFNjaGVkdWxlcy4qLCBVc2Vycy5mdWxsX25hbWUgQVMgZW1wbG95ZWVfbmFtZSwgVXNlcnMuZW1haWwgQVMgZW1wbG95ZWVfZW1haWwsIExvY2F0aW9ucy5sb2NhdGlvbl9uYW1lXHJcbiAgICAgICAgICAgICAgIEZST00gU2NoZWR1bGVzXHJcbiAgICAgICAgICAgICAgIEpPSU4gVXNlcnMgT04gU2NoZWR1bGVzLmVtcGxveWVlX2lkID0gVXNlcnMudXNlcl9pZFxyXG4gICAgICAgICAgICAgICBKT0lOIExvY2F0aW9ucyBPTiBTY2hlZHVsZXMubG9jYXRpb25faWQgPSBMb2NhdGlvbnMubG9jYXRpb25faWRcclxuICAgICAgICAgICAgICAgV0hFUkUgVXNlcnMuY29tcGFueV9pZCA9ID9gO1xyXG4gICAgY29uc3QgcGFyYW1zID0gW2NvbXBhbnlJZF07XHJcblxyXG4gICAgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICBpZiAoY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIHNxbCArPSBgIEFORCBTY2hlZHVsZXMubG9jYXRpb25faWQgPSA/YDtcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIG5vdCBhc3NpZ25lZCB0byBhIGxvY2F0aW9uLicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChyb2xlID09PSAnZW1wbG95ZWUnKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIFVzZXJzLnVzZXJfaWQgPSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlcklkKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbnB1dCB2YWxpZGF0aW9uIGZvciBxdWVyeSBwYXJhbWV0ZXJzXHJcbiAgICBpZiAoZW1wbG95ZWVfaWQgJiYgaXNOYU4ocGFyc2VJbnQoZW1wbG95ZWVfaWQpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBlbXBsb3llZSBJRCBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChsb2NhdGlvbl9pZCAmJiBpc05hTihwYXJzZUludChsb2NhdGlvbl9pZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGxvY2F0aW9uIElEIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHN0YXJ0X2RhdGUgJiYgaXNOYU4obmV3IERhdGUoc3RhcnRfZGF0ZSkuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBzdGFydCBkYXRlIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGVuZF9kYXRlICYmIGlzTmFOKG5ldyBEYXRlKGVuZF9kYXRlKS5nZXRUaW1lKCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGVuZCBkYXRlIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZiAoZW1wbG95ZWVfaWQgJiYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicgfHwgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicgJiYgcGFyc2VJbnQoZW1wbG95ZWVfaWQpID09PSBjdXJyZW50VXNlcklkKSB8fCAocm9sZSA9PT0gJ2VtcGxveWVlJyAmJiBwYXJzZUludChlbXBsb3llZV9pZCkgPT09IGN1cnJlbnRVc2VySWQpKSkge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBVc2Vycy5yb2xlID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goZmlsdGVyUm9sZSk7IC8vIFRoaXMgc2hvdWxkIGJlIGVtcGxveWVlX2lkLCBub3QgZmlsdGVyUm9sZVxyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICYmIChyb2xlID09PSAnc3VwZXJfYWRtaW4nIHx8IChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIHBhcnNlSW50KGxvY2F0aW9uX2lkKSA9PT0gY3VycmVudFVzZXJMb2NhdGlvbklkKSkpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgU2NoZWR1bGVzLmxvY2F0aW9uX2lkID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgfVxyXG4gICAgaWYgKHN0YXJ0X2RhdGUpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgU2NoZWR1bGVzLnN0YXJ0X3RpbWUgPj0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goc3RhcnRfZGF0ZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZW5kX2RhdGUpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgU2NoZWR1bGVzLmVuZF90aW1lIDw9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGVuZF9kYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5hbGwoc3FsLCBwYXJhbXMsIChlcnIsIHJvd3MpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBzY2hlZHVsZXM6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgc2NoZWR1bGVzLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgcmVzLmpzb24ocm93cyk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAuZGVsZXRlKCcvYXBpL3NjaGVkdWxlcy86aWQnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCB1c2VySWQ6IGN1cnJlbnRVc2VySWQsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgSUQgcGFyYW1ldGVyXHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgc2NoZWR1bGUgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm9sZSA9PT0gJ2VtcGxveWVlJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogRW1wbG95ZWVzIGNhbm5vdCBkZWxldGUgc2NoZWR1bGVzLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNxbCA9IGBERUxFVEUgRlJPTSBTY2hlZHVsZXMgV0hFUkUgc2NoZWR1bGVfaWQgPSA/YDtcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtpZF07XHJcblxyXG4gICAgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgZW1wbG95ZWVfaWQgSU4gKFNFTEVDVCB1c2VyX2lkIEZST00gVXNlcnMgV0hFUkUgbG9jYXRpb25faWQgPSA/IEFORCBjb21wYW55X2lkID0gPylgO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGN1cnJlbnRVc2VyTG9jYXRpb25JZCwgY29tcGFueUlkKTtcclxuICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBlbXBsb3llZV9pZCBJTiAoU0VMRUNUIHVzZXJfaWQgRlJPTSBVc2VycyBXSEVSRSBjb21wYW55X2lkID0gPylgO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKGNvbXBhbnlJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIucnVuKHNxbCwgcGFyYW1zLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBkZWxldGluZyBzY2hlZHVsZTpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIHNjaGVkdWxlLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1NjaGVkdWxlIG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byBkZWxldGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjA0KS5zZW5kKCk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyAtLS0gSGlyaW5nIFJvdXRlcyAtLS1cclxuXHJcbi8qKlxyXG4gKiBQT1NUIC9hcGkvam9iLXBvc3RpbmdzXHJcbiAqIENyZWF0ZXMgYSBuZXcgam9iIHBvc3RpbmcuXHJcbiAqIFJlcXVpcmVzIHN1cGVyX2FkbWluIG9yIGxvY2F0aW9uX2FkbWluIHJvbGUuXHJcbiAqL1xyXG5hcHAucG9zdCgnL2FwaS9qb2ItcG9zdGluZ3MnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIHJlcXVpcmVtZW50cywgbG9jYXRpb25faWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcbiAgICBjb25zdCBjcmVhdGVkX2RhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7IC8vIEN1cnJlbnQgZGF0ZS90aW1lIGZvciBjcmVhdGlvblxyXG5cclxuICAgIC8vIElucHV0IFZhbGlkYXRpb24gZm9yIENyZWF0ZSBKb2IgUG9zdGluZ1xyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicgJiYgcm9sZSAhPT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogT25seSBhZG1pbnMgY2FuIGNyZWF0ZSBqb2IgcG9zdGluZ3MuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICghdGl0bGUgfHwgdHlwZW9mIHRpdGxlICE9PSAnc3RyaW5nJyB8fCB0aXRsZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiSm9iIHRpdGxlIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZGVzY3JpcHRpb24gfHwgdHlwZW9mIGRlc2NyaXB0aW9uICE9PSAnc3RyaW5nJyB8fCBkZXNjcmlwdGlvbi50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdEZXNjcmlwdGlvbiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcXVpcmVtZW50cyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlbWVudHMgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdSZXF1aXJlbWVudHMgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGxvY2F0aW9uX2lkICE9PSAnbnVtYmVyJyAmJiBsb2NhdGlvbl9pZCAhPT0gbnVsbCkgeyAvLyBsb2NhdGlvbl9pZCBjYW4gYmUgbnVsbFxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTG9jYXRpb24gSUQgbXVzdCBiZSBhIG51bWJlciBvciBudWxsIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgbG9jYXRpb25fYWRtaW4sIGVuc3VyZSBsb2NhdGlvbl9pZCBtYXRjaGVzIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uLCBvciBpcyBudWxsXHJcbiAgICAvLyBBIGxvY2F0aW9uIGFkbWluIGNhbiBvbmx5IGNyZWF0ZSBqb2IgcG9zdGluZ3MgZm9yIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uIG9yIGNvbXBhbnktd2lkZSBpZiB0aGVpciBsb2NhdGlvbiBpcyBudWxsXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJyAmJiBsb2NhdGlvbl9pZCAmJiBsb2NhdGlvbl9pZCAhPT0gY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBMb2NhdGlvbiBhZG1pbiBjYW4gb25seSBwb3N0IGpvYnMgZm9yIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIucnVuKFxyXG4gICAgICAgICdJTlNFUlQgSU5UTyBKb2JQb3N0aW5ncyAoY29tcGFueV9pZCwgbG9jYXRpb25faWQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgcmVxdWlyZW1lbnRzLCBzdGF0dXMsIGNyZWF0ZWRfZGF0ZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/KScsXHJcbiAgICAgICAgW2NvbXBhbnlJZCwgbG9jYXRpb25faWQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgcmVxdWlyZW1lbnRzLCAnT3BlbicsIGNyZWF0ZWRfZGF0ZV0sIC8vIERlZmF1bHQgc3RhdHVzIHRvICdPcGVuJ1xyXG4gICAgICAgIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgY3JlYXRpbmcgam9iIHBvc3Rpbmc6XCIsIGVycik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgam9iIHBvc3RpbmcuJykpOyAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiAnSm9iIHBvc3RpbmcgY3JlYXRlZCBzdWNjZXNzZnVsbHkhJywgam9iUG9zdGluZ0lkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBHRVQgL2FwaS9qb2ItcG9zdGluZ3NcclxuICogUmV0cmlldmVzIGpvYiBwb3N0aW5ncy5cclxuICogQ2FuIGZpbHRlciBieSBsb2NhdGlvbl9pZCBhbmQgc3RhdHVzLlxyXG4gKiBSZXF1aXJlcyBzdXBlcl9hZG1pbiBvciBsb2NhdGlvbl9hZG1pbi5cclxuICovXHJcbmFwcC5nZXQoJy9hcGkvam9iLXBvc3RpbmdzJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgc3RhdHVzLCBsb2NhdGlvbl9pZCB9ID0gcmVxLnF1ZXJ5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgbGV0IHNxbCA9ICdTRUxFQ1QgKiBGUk9NIEpvYlBvc3RpbmdzIFdIRVJFIGNvbXBhbnlfaWQgPSA/JztcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtjb21wYW55SWRdO1xyXG5cclxuICAgIC8vIEF1dGhvcml6YXRpb246IHN1cGVyX2FkbWluIHNlZXMgYWxsLCBsb2NhdGlvbl9hZG1pbiBzZWVzIHRoZWlyIGxvY2F0aW9uJ3MgcG9zdGluZ3NcclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRVc2VyTG9jYXRpb25JZCkge1xyXG4gICAgICAgICAgICBzcWwgKz0gJyBBTkQgKGxvY2F0aW9uX2lkID0gPyBPUiBsb2NhdGlvbl9pZCBJUyBOVUxMKSc7IC8vIExvY2F0aW9uIGFkbWluIHNlZXMgdGhlaXIgbG9jYXRpb24ncyBwb3N0aW5ncyBvciBjb21wYW55LXdpZGVcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIG5vdCBhc3NpZ25lZCB0byBhIGxvY2F0aW9uLicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChyb2xlID09PSAnZW1wbG95ZWUnKSB7XHJcbiAgICAgICAgLy8gRW1wbG95ZWVzIGdlbmVyYWxseSBzaG91bGRuJ3Qgc2VlIGpvYiBwb3N0aW5ncyBsaXN0IHZpYSB0aGlzIGFkbWluIEFQSVxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zIHRvIHZpZXcgam9iIHBvc3RpbmdzLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5wdXQgdmFsaWRhdGlvbiBmb3IgcXVlcnkgcGFyYW1ldGVyc1xyXG4gICAgY29uc3QgYWxsb3dlZFN0YXR1c2VzID0gWydPcGVuJywgJ0Nsb3NlZCcsICdGaWxsZWQnXTsgLy8gQXNzdW1pbmcgdGhlc2UgYXJlIHlvdXIgdmFsaWQgc3RhdHVzZXNcclxuICAgIGlmIChzdGF0dXMgJiYgIWFsbG93ZWRTdGF0dXNlcy5pbmNsdWRlcyhzdGF0dXMpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGpvYiBwb3N0aW5nIHN0YXR1cyBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChsb2NhdGlvbl9pZCAmJiBpc05hTihwYXJzZUludChsb2NhdGlvbl9pZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGxvY2F0aW9uIElEIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZiAoc3RhdHVzKSB7XHJcbiAgICAgICAgc3FsICs9ICcgQU5EIHN0YXR1cyA9ID8nO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKHN0YXR1cyk7XHJcbiAgICB9XHJcbiAgICAvLyBPbmx5IHN1cGVyIGFkbWluIGNhbiBmaWx0ZXIgYnkgYW55IGxvY2F0aW9uX2lkIGJleW9uZCB0aGVpciBvd24gc2NvcGVcclxuICAgIGlmIChsb2NhdGlvbl9pZCAmJiByb2xlID09PSAnc3VwZXJfYWRtaW4nKSB7XHJcbiAgICAgICAgc3FsICs9ICcgQU5EIGxvY2F0aW9uX2lkID0gPyc7XHJcbiAgICAgICAgcGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLmFsbChzcWwsIHBhcmFtcywgKGVyciwgcm93cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGZldGNoaW5nIGpvYiBwb3N0aW5nczpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBqb2IgcG9zdGluZ3MuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuanNvbihyb3dzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBQVVQgL2FwaS9qb2ItcG9zdGluZ3MvOmlkXHJcbiAqIFVwZGF0ZXMgYSBqb2IgcG9zdGluZy5cclxuICogUmVxdWlyZXMgc3VwZXJfYWRtaW4gb3IgbG9jYXRpb25fYWRtaW4gKGZvciB0aGVpciBsb2NhdGlvbidzIHBvc3RpbmdzKS5cclxuICovXHJcbmFwcC5wdXQoJy9hcGkvam9iLXBvc3RpbmdzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIHJlcXVpcmVtZW50cywgc3RhdHVzLCBsb2NhdGlvbl9pZCB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBKb2IgUG9zdGluZyBVcGRhdGVcclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nICYmIHJvbGUgIT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgYWRtaW5zIGNhbiB1cGRhdGUgam9iIHBvc3RpbmdzLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgam9iIHBvc3RpbmcgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgdGl0bGUgIT09ICdzdHJpbmcnIHx8IHRpdGxlLnRyaW0oKSA9PT0gJycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdKb2IgdGl0bGUgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChkZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgZGVzY3JpcHRpb24gIT09ICdzdHJpbmcnIHx8IGRlc2NyaXB0aW9uLnRyaW0oKSA9PT0gJycpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdEZXNjcmlwdGlvbiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcXVpcmVtZW50cyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlbWVudHMgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdSZXF1aXJlbWVudHMgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYWxsb3dlZFN0YXR1c2VzID0gWydPcGVuJywgJ0Nsb3NlZCcsICdGaWxsZWQnXTtcclxuICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCAmJiAhYWxsb3dlZFN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgc3RhdHVzIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25faWQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbG9jYXRpb25faWQgIT09ICdudW1iZXInICYmIGxvY2F0aW9uX2lkICE9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdMb2NhdGlvbiBJRCBtdXN0IGJlIGEgbnVtYmVyIG9yIG51bGwgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgbGV0IHVwZGF0ZVNxbCA9ICdVUERBVEUgSm9iUG9zdGluZ3MgU0VUICc7XHJcbiAgICBjb25zdCB1cGRhdGVQYXJhbXMgPSBbXTtcclxuICAgIGNvbnN0IGNsYXVzZXMgPSBbXTtcclxuXHJcbiAgICBpZiAodGl0bGUgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ3RpdGxlID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaCh0aXRsZSk7IH1cclxuICAgIC8vIEZpeDogTWlzc2luZyBjbG9zaW5nIHBhcmVudGhlc2lzIGZvciB0aGlzIGNvbmRpdGlvblxyXG4gICAgaWYgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBkZXNjcmlwdGlvbiAhPT0gJ3N0cmluZycgfHwgZGVzY3JpcHRpb24udHJpbSgpID09PSAnJykpIHsgLy8gTGluZSAxMDA5XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdEZXNjcmlwdGlvbiBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcXVpcmVtZW50cyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlbWVudHMgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdSZXF1aXJlbWVudHMgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7IGNsYXVzZXMucHVzaCgnc3RhdHVzID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChzdGF0dXMpOyB9XHJcbiAgICBcclxuICAgIC8vIHN1cGVyX2FkbWluIGNhbiBjaGFuZ2UgbG9jYXRpb25faWQuIGxvY2F0aW9uX2FkbWluIGNhbm5vdCBjaGFuZ2UgbG9jYXRpb25faWQgb3IgY2hhbmdlIHRvIGRpZmZlcmVudCBsb2NhdGlvblxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2xvY2F0aW9uX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gY3VycmVudFVzZXJMb2NhdGlvbklkICYmIGxvY2F0aW9uX2lkICE9PSBudWxsKSB7IC8vIGxvY2F0aW9uX2lkIGNhbiBiZSBudWxsIChjb21wYW55LXdpZGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIGNhbm5vdCBjaGFuZ2Ugam9iIHBvc3RpbmcgbG9jYXRpb24gdG8gYW5vdGhlciBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIElmIGxvY2F0aW9uIGFkbWluIHVwZGF0ZXMgam9iIHBvc3RpbmcsIGFuZCBpdCdzIHRoZWlyIGxvY2F0aW9uLCBvciBzZXR0aW5nIHRvIG51bGwsIGl0J3MgYWxsb3dlZFxyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2xvY2F0aW9uX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZiAoY2xhdXNlcy5sZW5ndGggPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdObyBmaWVsZHMgcHJvdmlkZWQgZm9yIHVwZGF0ZS4nIH0pOyB9XHJcblxyXG4gICAgdXBkYXRlU3FsICs9IGNsYXVzZXMuam9pbignLCAnKSArICcgV0hFUkUgam9iX3Bvc3RpbmdfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyc7XHJcbiAgICB1cGRhdGVQYXJhbXMucHVzaChpZCwgY29tcGFueUlkKTtcclxuXHJcbiAgICAvLyBBZGRpdGlvbmFsIHNlY3VyaXR5IGZvciBsb2NhdGlvbl9hZG1pbjogZW5zdXJlIHRoZXkgb25seSB1cGRhdGUgdGhlaXIgb3duIGxvY2F0aW9uJ3MgcG9zdGluZ3NcclxuICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgdXBkYXRlU3FsICs9ICcgQU5EIChsb2NhdGlvbl9pZCA9ID8gT1IgbG9jYXRpb25faWQgSVMgTlVMTCknOyAvLyBBbGxvdyB1cGRhdGluZyB1bmFzc2lnbmVkIGpvYnMgdG9vXHJcbiAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJMb2NhdGlvbklkKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4odXBkYXRlU3FsLCB1cGRhdGVQYXJhbXMsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHVwZGF0aW5nIGpvYiBwb3N0aW5nOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgam9iIHBvc3RpbmcuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzID09PSAwKSB7IHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnSm9iIHBvc3Rpbmcgbm90IGZvdW5kIG9yIG5vdCBhdXRob3JpemVkIHRvIHVwZGF0ZS4nIH0pOyB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnSm9iIHBvc3RpbmcgdXBkYXRlZCBzdWNjZXNzZnVsbHkhJyB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBERUxFVEUgL2FwaS9qb2ItcG9zdGluZ3MvOmlkXHJcbiAqIERlbGV0ZXMgYSBqb2IgcG9zdGluZy5cclxuICogUmVxdWlyZXMgc3VwZXJfYWRtaW4gb3IgbG9jYXRpb25fYWRtaW4gKGZvciB0aGVpciBsb2NhdGlvbidzIHBvc3RpbmdzKS5cclxuICovXHJcbmFwcC5kZWxldGUoJy9hcGkvam9iLXBvc3RpbmdzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgSUQgcGFyYW1ldGVyXHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgam9iIHBvc3RpbmcgSUQgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gZGVsZXRlIGpvYiBwb3N0aW5ncy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzcWwgPSAnREVMRVRFIEZST00gSm9iUG9zdGluZ3MgV0hFUkUgam9iX3Bvc3RpbmdfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyc7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbaWQsIGNvbXBhbnlJZF07XHJcblxyXG4gICAgLy8gQWRkaXRpb25hbCBzZWN1cml0eSBmb3IgbG9jYXRpb25fYWRtaW46IGVuc3VyZSB0aGV5IG9ubHkgZGVsZXRlIHRoZWlyIG93biBsb2NhdGlvbidzIHBvc3RpbmdzXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSAnIEFORCAobG9jYXRpb25faWQgPSA/IE9SIGxvY2F0aW9uX2lkIElTIE5VTEwpJztcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bihzcWwsIHBhcmFtcywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZGVsZXRpbmcgam9iIHBvc3Rpbmc6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBqb2IgcG9zdGluZy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXMgPT09IDApIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdKb2IgcG9zdGluZyBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwNCkuc2VuZCgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuXHJcbi8vIFVwZGF0ZSBBcHBsaWNhbnQgQVBJIGVuZHBvaW50cyB0byB1c2Ugam9iX3Bvc3RpbmdfaWRcclxuYXBwLnBvc3QoJy9hcGkvYXBwbGljYW50cycsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGpvYl9wb3N0aW5nX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBub3RlcywgbG9jYXRpb25faWQsIHBob25lX251bWJlciB9ID0gcmVxLmJvZHk7IC8vIEFkZGVkIHBob25lX251bWJlclxyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHJvbGUsIGxvY2F0aW9uSWQ6IGN1cnJlbnRVc2VyTG9jYXRpb25JZCB9ID0gcmVxLnVzZXI7XHJcbiAgICBjb25zdCBhcHBsaWNhdGlvbl9kYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOyAvLyBDdXJyZW50IGRhdGUvdGltZSBmb3IgYXBwbGljYXRpb25cclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBBZGRpbmcgQXBwbGljYW50XHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gYWRkIGFwcGxpY2FudHMuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygam9iX3Bvc3RpbmdfaWQgIT09ICdudW1iZXInIHx8IGpvYl9wb3N0aW5nX2lkIDw9IDApIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0EgdmFsaWQgam9iIHBvc3RpbmcgSUQgaXMgcmVxdWlyZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICghZnVsbF9uYW1lIHx8IHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiRnVsbCBuYW1lIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmICghZW1haWwgfHwgIWlzVmFsaWRFbWFpbChlbWFpbCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBIHZhbGlkIGVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBCYXNpYyBwaG9uZSBudW1iZXIgdmFsaWRhdGlvbiAoc2ltcGxlIGNoZWNrIGZvciBub24tZW1wdHkgc3RyaW5nLCBjb3VsZCBiZSBtb3JlIGNvbXBsZXggd2l0aCByZWdleClcclxuICAgIGlmICghcGhvbmVfbnVtYmVyIHx8IHR5cGVvZiBwaG9uZV9udW1iZXIgIT09ICdzdHJpbmcnIHx8IHBob25lX251bWJlci50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiUGhvbmUgbnVtYmVyIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKG5vdGVzICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG5vdGVzICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm90ZXMgbXVzdCBiZSBhIHN0cmluZyBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGxvY2F0aW9uX2lkICE9PSAnbnVtYmVyJyAmJiBsb2NhdGlvbl9pZCAhPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTG9jYXRpb24gSUQgbXVzdCBiZSBhIG51bWJlciBvciBudWxsIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIFZlcmlmeSBqb2JfcG9zdGluZ19pZCBiZWxvbmdzIHRvIHRoZSBjb21wYW55LCBhbmQgZm9yIGxvY2F0aW9uX2FkbWluLCB0byB0aGVpciBsb2NhdGlvblxyXG4gICAgZGIuZ2V0KCdTRUxFQ1Qgam9iX3Bvc3RpbmdfaWQsIGxvY2F0aW9uX2lkIEZST00gSm9iUG9zdGluZ3MgV0hFUkUgam9iX3Bvc3RpbmdfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPycsIFtqb2JfcG9zdGluZ19pZCwgY29tcGFueUlkXSwgKGVyciwgam9iUG9zdGluZykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIHZlcmlmeWluZyBqb2IgcG9zdGluZzpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvciB3aGVuIHZlcmlmeWluZyBqb2IgcG9zdGluZy4nKSk7IH0gLy8gUGFzcyBlcnJvclxyXG4gICAgICAgIGlmICgham9iUG9zdGluZykgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0pvYiBQb3N0aW5nIG5vdCBmb3VuZCBvciBkb2VzIG5vdCBiZWxvbmcgdG8geW91ciBjb21wYW55LicgfSk7IH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBMb2NhdGlvbiBhZG1pbiBjYW4gb25seSBhZGQgYXBwbGljYW50cyB0byBqb2JzIGluIHRoZWlyIGFzc2lnbmVkIGxvY2F0aW9uIG9yIHVuYXNzaWduZWQgam9ic1xyXG4gICAgICAgIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nICYmIGpvYlBvc3RpbmcubG9jYXRpb25faWQgIT09IGN1cnJlbnRVc2VyTG9jYXRpb25JZCAmJiBqb2JQb3N0aW5nLmxvY2F0aW9uX2lkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gY2Fubm90IGFkZCBhcHBsaWNhbnRzIHRvIGpvYnMgb3V0c2lkZSB0aGVpciBhc3NpZ25lZCBsb2NhdGlvbi4nIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGIucnVuKFxyXG4gICAgICAgICAgICAnSU5TRVJUIElOVE8gQXBwbGljYW50cyAoY29tcGFueV9pZCwgbG9jYXRpb25faWQsIGpvYl9wb3N0aW5nX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBwaG9uZV9udW1iZXIsIG5vdGVzLCBhcHBsaWNhdGlvbl9kYXRlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8pJyxcclxuICAgICAgICAgICAgW2NvbXBhbnlJZCwgbG9jYXRpb25faWQgfHwgam9iUG9zdGluZy5sb2NhdGlvbl9pZCwgam9iX3Bvc3RpbmdfaWQsIGZ1bGxfbmFtZSwgZW1haWwsIHBob25lX251bWJlciwgbm90ZXMsIGFwcGxpY2F0aW9uX2RhdGVdLCAvLyBVc2UgbG9jYXRpb25faWQgZnJvbSBwYXlsb2FkIG9yIGpvYiBwb3N0aW5nXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKGluc2VydEVycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluc2VydEVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgY3JlYXRpbmcgYXBwbGljYW50OlwiLCBpbnNlcnRFcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgYXBwbGljYW50LicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdBcHBsaWNhbnQgYWRkZWQgc3VjY2Vzc2Z1bGx5IScsIGFwcGxpY2FudElkOiB0aGlzLmxhc3RJRCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAuZ2V0KCcvYXBpL2FwcGxpY2FudHMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBqb2JfcG9zdGluZ19pZCwgc3RhdHVzLCBsb2NhdGlvbl9pZCB9ID0gcmVxLnF1ZXJ5OyAvLyBBZGRlZCBqb2JfcG9zdGluZ19pZCwgc3RhdHVzLCBsb2NhdGlvbl9pZCBmaWx0ZXJzXHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgdXNlcklkOiBjdXJyZW50VXNlcklkLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIGxldCBzcWwgPSBgU0VMRUNUIEFwcGxpY2FudHMuKiwgSm9iUG9zdGluZ3MudGl0bGUgQVMgam9iX3RpdGxlX25hbWVcclxuICAgICAgICAgICAgICAgRlJPTSBBcHBsaWNhbnRzXHJcbiAgICAgICAgICAgICAgIExFRlQgSk9JTiBKb2JQb3N0aW5ncyBPTiBBcHBsaWNhbnRzLmpvYl9wb3N0aW5nX2lkID0gSm9iUG9zdGluZ3Muam9iX3Bvc3RpbmdfaWRcclxuICAgICAgICAgICAgICAgV0hFUkUgQXBwbGljYW50cy5jb21wYW55X2lkID0gP2A7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbY29tcGFueUlkXTtcclxuXHJcbiAgICAvLyBJbnB1dCB2YWxpZGF0aW9uIGZvciBxdWVyeSBwYXJhbWV0ZXJzXHJcbiAgICBjb25zdCBhbGxvd2VkU3RhdHVzZXMgPSBbJ0FwcGxpZWQnLCAnSW50ZXJ2aWV3aW5nJywgJ1JlamVjdGVkJywgJ0hpcmVkJ107IC8vIERlZmluZSB2YWxpZCBzdGF0dXNlc1xyXG4gICAgaWYgKHN0YXR1cyAmJiAhYWxsb3dlZFN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgYXBwbGljYW50IHN0YXR1cyBmaWx0ZXIgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChqb2JfcG9zdGluZ19pZCAmJiBpc05hTihwYXJzZUludChqb2JfcG9zdGluZ19pZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGpvYiBwb3N0aW5nIElEIGZpbHRlciBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICYmIGlzTmFOKHBhcnNlSW50KGxvY2F0aW9uX2lkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgbG9jYXRpb24gSUQgZmlsdGVyIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHN0YXR1cykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBBcHBsaWNhbnRzLnN0YXR1cyA9ID9gO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKHN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICBpZiAoY3VycmVudFVzZXJMb2NhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIHNxbCArPSBgIEFORCAoQXBwbGljYW50cy5sb2NhdGlvbl9pZCA9ID8gT1IgQXBwbGljYW50cy5sb2NhdGlvbl9pZCBJUyBOVUxMKWA7IC8vIExvY2F0aW9uIGFkbWluIHNlZXMgYXBwbGljYW50cyBmb3IgdGhlaXIgbG9jYXRpb24gb3IgdW5hc3NpZ25lZFxyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogTG9jYXRpb24gYWRtaW4gbm90IGFzc2lnbmVkIHRvIGEgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHJvbGUgPT09ICdlbXBsb3llZScpIHtcclxuICAgICAgICBzcWwgKz0gYCBBTkQgQXBwbGljYW50cy51c2VyX2lkID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFVzZXJJZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIERlbmllZDogSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zIHRvIHZpZXcgYXBwbGljYW50cy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFwcGx5IGpvYl9wb3N0aW5nX2lkIGZpbHRlciBpZiBwcm92aWRlZFxyXG4gICAgaWYgKGpvYl9wb3N0aW5nX2lkKSB7XHJcbiAgICAgICAgc3FsICs9IGAgQU5EIEFwcGxpY2FudHMuam9iX3Bvc3RpbmdfaWQgPSA/YDtcclxuICAgICAgICBwYXJhbXMucHVzaChqb2JfcG9zdGluZ19pZCk7XHJcbiAgICB9XHJcbiAgICAvLyBBcHBseSBsb2NhdGlvbiBmaWx0ZXIgZnJvbSBxdWVyeSBwYXJhbXMgZm9yIHN1cGVyX2FkbWluXHJcbiAgICBpZiAobG9jYXRpb25faWQgJiYgcm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSBgIEFORCBBcHBsaWNhbnRzLmxvY2F0aW9uX2lkID0gP2A7XHJcbiAgICAgICAgcGFyYW1zLnB1c2gobG9jYXRpb25faWQpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkYi5hbGwoc3FsLCBwYXJhbXMsIChlcnIsIHJvd3MpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBhcHBsaWNhbnRzOlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIGFwcGxpY2FudHMuJykpOyB9IC8vIFBhc3MgZXJyb3JcclxuICAgICAgICByZXMuanNvbihyb3dzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBQVVQgL2FwaS9hcHBsaWNhbnRzLzppZFxyXG4gKiBVcGRhdGVzIGFuIGFwcGxpY2FudCdzIGRldGFpbHMgKGUuZy4sIHN0YXR1cywgbm90ZXMpLlxyXG4gKi9cclxuYXBwLnB1dCgnL2FwaS9hcHBsaWNhbnRzLzppZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCAocmVxLCByZXMsIG5leHQpID0+IHsgLy8gQWRkZWQgJ25leHQnXHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBmdWxsX25hbWUsIGVtYWlsLCBzdGF0dXMsIHJlc3VtZV91cmwsIG5vdGVzLCBsb2NhdGlvbl9pZCwgam9iX3Bvc3RpbmdfaWQsIHBob25lX251bWJlciB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB7IGNvbXBhbnlJZCwgcm9sZSwgbG9jYXRpb25JZDogY3VycmVudFVzZXJMb2NhdGlvbklkIH0gPSByZXEudXNlcjtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBBcHBsaWNhbnQgVXBkYXRlXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJyAmJiByb2xlICE9PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgRGVuaWVkOiBPbmx5IGFkbWlucyBjYW4gdXBkYXRlIGFwcGxpY2FudCByZWNvcmRzLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWlkIHx8IGlzTmFOKHBhcnNlSW50KGlkKSkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgYXBwbGljYW50IElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZnVsbF9uYW1lICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBmdWxsX25hbWUgIT09ICdzdHJpbmcnIHx8IGZ1bGxfbmFtZS50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkZ1bGwgbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGlmIChlbWFpbCAhPT0gdW5kZWZpbmVkICYmICFpc1ZhbGlkRW1haWwoZW1haWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSB2YWxpZCBlbWFpbCBhZGRyZXNzIG11c3QgYmUgcHJvdmlkZWQgaWYgY2hhbmdpbmcgZW1haWwuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocGhvbmVfbnVtYmVyICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBwaG9uZV9udW1iZXIgIT09ICdzdHJpbmcnIHx8IHBob25lX251bWJlci50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIlBob25lIG51bWJlciBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBpZiBwcm92aWRlZC5cIiB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFsbG93ZWRTdGF0dXNlcyA9IFsnQXBwbGllZCcsICdJbnRlcnZpZXdpbmcnLCAnUmVqZWN0ZWQnLCAnSGlyZWQnXTtcclxuICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCAmJiAhYWxsb3dlZFN0YXR1c2VzLmluY2x1ZGVzKHN0YXR1cykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgc3RhdHVzIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocmVzdW1lX3VybCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXN1bWVfdXJsICE9PSAnc3RyaW5nJykgeyAvLyBBc3N1bWluZyByZXN1bWVfdXJsIGlzIGEgc3RyaW5nIFVSTFxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUmVzdW1lIFVSTCBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobm90ZXMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygbm90ZXMgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdOb3RlcyBtdXN0IGJlIGEgc3RyaW5nIGlmIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25faWQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbG9jYXRpb25faWQgIT09ICdudW1iZXInICYmIGxvY2F0aW9uX2lkICE9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdMb2NhdGlvbiBJRCBtdXN0IGJlIGEgbnVtYmVyIG9yIG51bGwgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChqb2JfcG9zdGluZ19pZCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBqb2JfcG9zdGluZ19pZCAhPT0gJ251bWJlcicgJiYgam9iX3Bvc3RpbmdfaWQgIT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0pvYiBwb3N0aW5nIElEIG11c3QgYmUgYSBudW1iZXIgb3IgbnVsbCBpZiBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBsZXQgdXBkYXRlU3FsID0gJ1VQREFURSBBcHBsaWNhbnRzIFNFVCAnO1xyXG4gICAgY29uc3QgdXBkYXRlUGFyYW1zID0gW107XHJcbiAgICBjb25zdCBjbGF1c2VzID0gW107XHJcblxyXG4gICAgLy8gRmllbGRzIHRoYXQgY2FuIGJlIHVwZGF0ZWRcclxuICAgIGlmIChmdWxsX25hbWUgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ2Z1bGxfbmFtZSA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2goZnVsbF9uYW1lKTsgfVxyXG4gICAgaWYgKGVtYWlsICE9PSB1bmRlZmluZWQpIHsgY2xhdXNlcy5wdXNoKCdlbWFpbCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2goZW1haWwpOyB9XHJcbiAgICBpZiAocGhvbmVfbnVtYmVyICE9PSB1bmRlZmluZWQpIHsgY2xhdXNlcy5wdXNoKCdwaG9uZV9udW1iZXIgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKHBob25lX251bWJlcik7IH1cclxuICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ3N0YXR1cyA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2goc3RhdHVzKTsgfVxyXG4gICAgaWYgKHJlc3VtZV91cmwgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ3Jlc3VtZV91cmwgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKHJlc3VtZV91cmwpOyB9XHJcbiAgICBpZiAobm90ZXMgIT09IHVuZGVmaW5lZCkgeyBjbGF1c2VzLnB1c2goJ25vdGVzID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChub3Rlcyk7IH1cclxuICAgIFxyXG4gICAgLy8gQWRtaW5zIGNhbiB1cGRhdGUgbG9jYXRpb25faWQgb3Igam9iX3Bvc3RpbmdfaWQsIHdpdGggcmVzdHJpY3Rpb25zIGZvciBsb2NhdGlvbl9hZG1pblxyXG4gICAgaWYgKGxvY2F0aW9uX2lkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAocm9sZSA9PT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2xvY2F0aW9uX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlID09PSAnbG9jYXRpb25fYWRtaW4nKSB7XHJcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbl9pZCAhPT0gY3VycmVudFVzZXJMb2NhdGlvbklkICYmIGxvY2F0aW9uX2lkICE9PSBudWxsKSB7IC8vIGxvY2F0aW9uX2lkIGNhbiBiZSBudWxsIChjb21wYW55LXdpZGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIGNhbm5vdCBhc3NpZ24gYXBwbGljYW50cyB0byBhbm90aGVyIGxvY2F0aW9uLicgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWYgbG9jYXRpb24gYWRtaW4gdXBkYXRlcyBhcHBsaWNhbnQgbG9jYXRpb24sIGFuZCBpdCdzIHRoZWlyIGxvY2F0aW9uLCBvciBzZXR0aW5nIHRvIG51bGwsIGl0J3MgYWxsb3dlZFxyXG4gICAgICAgICAgICBjbGF1c2VzLnB1c2goJ2xvY2F0aW9uX2lkID0gPycpOyB1cGRhdGVQYXJhbXMucHVzaChsb2NhdGlvbl9pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGpvYl9wb3N0aW5nX2lkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgaWYgKHJvbGUgPT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICAgICAgY2xhdXNlcy5wdXNoKCdqb2JfcG9zdGluZ19pZCA9ID8nKTsgdXBkYXRlUGFyYW1zLnB1c2goam9iX3Bvc3RpbmdfaWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgICAgICAvLyBWZXJpZnkgbmV3IGpvYl9wb3N0aW5nX2lkIGJlbG9uZ3MgdG8gdGhlIGxvY2F0aW9uIGFkbWluJ3MgYXNzaWduZWQgbG9jYXRpb24gb3IgaXMgY29tcGFueS13aWRlXHJcbiAgICAgICAgICAgIGRiLmdldCgnU0VMRUNUIGpvYl9wb3N0aW5nX2lkLCBsb2NhdGlvbl9pZCBGUk9NIEpvYlBvc3RpbmdzIFdIRVJFIGpvYl9wb3N0aW5nX2lkID0gPyBBTkQgY29tcGFueV9pZCA9ID8nLCBbam9iX3Bvc3RpbmdfaWQsIGNvbXBhbnlJZF0sIChlcnIsIGpvYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiREIgZXJyb3IgdmVyaWZ5aW5nIGpvYiBwb3N0aW5nIGZvciB1cGRhdGU6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgdmVyaWZ5aW5nIGpvYiBwb3N0aW5nLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgICAgICBpZiAoIWpvYikgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0pvYiBQb3N0aW5nIG5vdCBmb3VuZCBvciBkb2VzIG5vdCBiZWxvbmcgdG8geW91ciBjb21wYW55LicgfSk7IH1cclxuICAgICAgICAgICAgICAgIGlmIChqb2IubG9jYXRpb25faWQgIT09IG51bGwgJiYgam9iLmxvY2F0aW9uX2lkICE9PSBjdXJyZW50VXNlckxvY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IExvY2F0aW9uIGFkbWluIGNhbm5vdCBhc3NpZ24gYXBwbGljYW50cyB0byBqb2JzIG91dHNpZGUgdGhlaXIgYXNzaWduZWQgbG9jYXRpb24uJyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNsYXVzZXMucHVzaCgnam9iX3Bvc3RpbmdfaWQgPSA/Jyk7IHVwZGF0ZVBhcmFtcy5wdXNoKGpvYl9wb3N0aW5nX2lkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlmIChjbGF1c2VzLmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ05vIGZpZWxkcyBwcm92aWRlZCBmb3IgdXBkYXRlLicgfSk7IH1cclxuXHJcbiAgICB1cGRhdGVTcWwgKz0gY2xhdXNlcy5qb2luKCcsICcpICsgJyBXSEVSRSBhcHBsaWNhbnRfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyc7XHJcbiAgICB1cGRhdGVQYXJhbXMucHVzaChpZCwgY29tcGFueUlkKTtcclxuXHJcbiAgICAvLyBGb3IgbG9jYXRpb25fYWRtaW4sIGVuc3VyZSB0aGV5IGNhbiBvbmx5IHVwZGF0ZSBhcHBsaWNhbnRzIHdpdGhpbiB0aGVpciBhc3NpZ25lZCBsb2NhdGlvblxyXG4gICAgaWYgKHJvbGUgPT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICB1cGRhdGVTcWwgKz0gJyBBTkQgKGxvY2F0aW9uX2lkID0gPyBPUiBsb2NhdGlvbl9pZCBJUyBOVUxMKSc7IC8vIEFsbG93IHVwZGF0aW5nIHVuYXNzaWduZWQgYXBwbGljYW50cyB0b29cclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bih1cGRhdGVTcWwsIHVwZGF0ZVBhcmFtcywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgdXBkYXRpbmcgYXBwbGljYW50OlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgYXBwbGljYW50LicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0FwcGxpY2FudCBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gdXBkYXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdBcHBsaWNhbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHkhJyB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcblxyXG4vKipcclxuICogREVMRVRFIC9hcGkvYXBwbGljYW50cy86aWRcclxuICogRGVsZXRlcyBhbiBhcHBsaWNhbnQuXHJcbiAqIFJlcXVpcmVzIHN1cGVyX2FkbWluIG9yIGxvY2F0aW9uX2FkbWluIChmb3IgdGhlaXIgbG9jYXRpb24ncyBhcHBsaWNhbnRzKS5cclxuICovXHJcbmFwcC5kZWxldGUoJy9hcGkvYXBwbGljYW50cy86aWQnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCByb2xlLCBsb2NhdGlvbklkOiBjdXJyZW50VXNlckxvY2F0aW9uSWQgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIElEIHBhcmFtZXRlclxyXG4gICAgaWYgKCFpZCB8fCBpc05hTihwYXJzZUludChpZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGFwcGxpY2FudCBJRCBwcm92aWRlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyb2xlICE9PSAnc3VwZXJfYWRtaW4nICYmIHJvbGUgIT09ICdsb2NhdGlvbl9hZG1pbicpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBEZW5pZWQ6IE9ubHkgYWRtaW5zIGNhbiBkZWxldGUgYXBwbGljYW50cy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzcWwgPSAnREVMRVRFIEZST00gQXBwbGljYW50cyBXSEVSRSBhcHBsaWNhbnRfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyc7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbaWQsIGNvbXBhbnlJZF07XHJcblxyXG4gICAgLy8gQWRkaXRpb25hbCBzZWN1cml0eSBmb3IgbG9jYXRpb25fYWRtaW46IGVuc3VyZSB0aGV5IG9ubHkgZGVsZXRlIGFwcGxpY2FudHMgaW4gdGhlaXIgb3duIGxvY2F0aW9uXHJcbiAgICBpZiAocm9sZSA9PT0gJ2xvY2F0aW9uX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSAnIEFORCAobG9jYXRpb25faWQgPSA/IE9SIGxvY2F0aW9uX2lkIElTIE5VTEwpJztcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50VXNlckxvY2F0aW9uSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRiLnJ1bihzcWwsIHBhcmFtcywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgZXJyb3IgZGVsZXRpbmcgYXBwbGljYW50OlwiLCBlcnIpOyByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgYXBwbGljYW50LicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0FwcGxpY2FudCBub3QgZm91bmQgb3Igbm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlLicgfSk7IH1cclxuICAgICAgICByZXMuc3RhdHVzKDIwNCkuc2VuZCgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLy8gLS0tIERvY3VtZW50IE1hbmFnZW1lbnQgUm91dGVzIC0tLVxyXG5cclxuLyoqXHJcbiAqIFBPU1QgL2FwaS9kb2N1bWVudHNcclxuICogVXBsb2FkcyAoc2F2ZXMgbWV0YWRhdGEgZm9yKSBhIG5ldyBkb2N1bWVudC5cclxuICogUmVxdWlyZXMgYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBOb3RlOiBBY3R1YWwgZmlsZSBzdG9yYWdlIGlzIGFzc3VtZWQgdG8gYmUgaGFuZGxlZCBieSBhIHNlcGFyYXRlIHNlcnZpY2UgKGUuZy4sIFMzKS5cclxuICogVGhpcyBlbmRwb2ludCBvbmx5IHN0b3JlcyB0aGUgbWV0YWRhdGEgYW5kIGEgVVJMLlxyXG4gKi9cclxuYXBwLnBvc3QoJy9hcGkvZG9jdW1lbnRzJywgYXV0aGVudGljYXRlVG9rZW4sIChyZXEsIHJlcywgbmV4dCkgPT4geyAvLyBBZGRlZCAnbmV4dCdcclxuICAgIGNvbnN0IHsgdGl0bGUsIGZpbGVfbmFtZSwgZmlsZV90eXBlLCBmaWxlX3VybCwgZGVzY3JpcHRpb24gfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHVzZXJJZCB9ID0gcmVxLnVzZXI7XHJcbiAgICBjb25zdCB1cGxvYWRfZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuXHJcbiAgICAvLyBJbnB1dCBWYWxpZGF0aW9uIGZvciBEb2N1bWVudCBVcGxvYWRcclxuICAgIGlmICghdGl0bGUgfHwgdHlwZW9mIHRpdGxlICE9PSAnc3RyaW5nJyB8fCB0aXRsZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdEb2N1bWVudCB0aXRsZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcuJyB9KTtcclxuICAgIH1cclxuICAgIGlmICghZmlsZV9uYW1lIHx8IHR5cGVvZiBmaWxlX25hbWUgIT09ICdzdHJpbmcnIHx8IGZpbGVfbmFtZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdGaWxlIG5hbWUgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLicgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWZpbGVfdHlwZSB8fCB0eXBlb2YgZmlsZV90eXBlICE9PSAnc3RyaW5nJyB8fCBmaWxlX3R5cGUudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRmlsZSB0eXBlIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy4nIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gQmFzaWMgVVJMIHZhbGlkYXRpb246IGNoZWNrcyBmb3IgaHR0cChzKSBwcm90b2NvbCBhbmQgc29tZSBjb250ZW50LiBDYW4gYmUgbW9yZSByb2J1c3QuXHJcbiAgICBjb25zdCB1cmxSZWdleCA9IC9eaHR0cHM/OlxcL1xcL1teXFxzJC4/I10uW15cXHNdKiQvaTtcclxuICAgIGlmICghZmlsZV91cmwgfHwgdHlwZW9mIGZpbGVfdXJsICE9PSAnc3RyaW5nJyB8fCAhdXJsUmVnZXgudGVzdChmaWxlX3VybCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0EgdmFsaWQgZmlsZSBVUkwgKHN0YXJ0aW5nIHdpdGggaHR0cCBvciBodHRwcykgaXMgcmVxdWlyZWQuJyB9KTtcclxuICAgIH1cclxuICAgIGlmIChkZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBkZXNjcmlwdGlvbiAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ05vdGVzIG11c3QgYmUgYSBzdHJpbmcgaWYgcHJvdmlkZWQuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5ydW4oXHJcbiAgICAgICAgJ0lOU0VSVCBJTlRPIERvY3VtZW50cyAoY29tcGFueV9pZCwgdXNlcl9pZCwgdGl0bGUsIGZpbGVfbmFtZSwgZmlsZV90eXBlLCBmaWxlX3VybCwgZGVzY3JpcHRpb24sIHVwbG9hZF9kYXRlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8pJyxcclxuICAgICAgICBbY29tcGFueUlkLCB1c2VySWQsIHRpdGxlLCBmaWxlX25hbWUsIGZpbGVfdHlwZSwgZmlsZV91cmwsIGRlc2NyaXB0aW9uLCB1cGxvYWRfZGF0ZV0sXHJcbiAgICAgICAgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciB1cGxvYWRpbmcgZG9jdW1lbnQ6XCIsIGVycik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGxvYWQgZG9jdW1lbnQgbWV0YWRhdGEuJykpOyAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiAnRG9jdW1lbnQgbWV0YWRhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5IScsIGRvY3VtZW50SWQ6IHRoaXMubGFzdElEIH0pO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEdFVCAvYXBpL2RvY3VtZW50c1xyXG4gKiBSZXRyaWV2ZXMgYSBsaXN0IG9mIGRvY3VtZW50cyBmb3IgdGhlIGNvbXBhbnkuXHJcbiAqIEZpbHRlcnMgY2FuIGJlIGFkZGVkIChlLmcuLCBieSB1cGxvYWRlciwgYnkgdHlwZSkuXHJcbiAqIFJlcXVpcmVzIGF1dGhlbnRpY2F0ZWQgdXNlci4gU3VwZXIgYWRtaW5zIGNhbiBzZWUgYWxsLCBvdGhlcnMgY2FuIHNlZSBvd24gZG9jdW1lbnRzLlxyXG4gKi9cclxuYXBwLmdldCgnL2FwaS9kb2N1bWVudHMnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBjb21wYW55SWQsIHVzZXJJZCwgcm9sZSB9ID0gcmVxLnVzZXI7XHJcbiAgICBcclxuICAgIGxldCBzcWwgPSAnU0VMRUNUICogRlJPTSBEb2N1bWVudHMgV0hFUkUgY29tcGFueV9pZCA9ID8nO1xyXG4gICAgY29uc3QgcGFyYW1zID0gW2NvbXBhbnlJZF07XHJcblxyXG4gICAgLy8gTm9uLXN1cGVyLWFkbWlucyBvbmx5IHNlZSB0aGVpciBvd24gZG9jdW1lbnRzXHJcbiAgICBpZiAocm9sZSAhPT0gJ3N1cGVyX2FkbWluJykge1xyXG4gICAgICAgIHNxbCArPSAnIEFORCB1c2VyX2lkID0gPyc7XHJcbiAgICAgICAgcGFyYW1zLnB1c2godXNlcklkKTtcclxuICAgIH1cclxuXHJcbiAgICBkYi5hbGwoc3FsLCBwYXJhbXMsIChlcnIsIHJvd3MpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBmZXRjaGluZyBkb2N1bWVudHM6XCIsIGVycik7IHJldHVybiBuZXh0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3IgZmV0Y2hpbmcgZG9jdW1lbnRzLicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgcmVzLmpzb24ocm93cyk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vKipcclxuICogREVMRVRFIC9hcGkvZG9jdW1lbnRzLzppZFxyXG4gKiBEZWxldGVzIGEgZG9jdW1lbnQgcmVjb3JkLlxyXG4gKiBSZXF1aXJlcyBzdXBlcl9hZG1pbiBvciB0aGUgdXNlciB3aG8gdXBsb2FkZWQgaXQuXHJcbiAqL1xyXG5hcHAuZGVsZXRlKCcvYXBpL2RvY3VtZW50cy86aWQnLCBhdXRoZW50aWNhdGVUb2tlbiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7IC8vIEFkZGVkICduZXh0J1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgY29tcGFueUlkLCB1c2VySWQsIHJvbGUgfSA9IHJlcS51c2VyO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIElEIHBhcmFtZXRlclxyXG4gICAgaWYgKCFpZCB8fCBpc05hTihwYXJzZUludChpZCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGRvY3VtZW50IElEIHByb3ZpZGVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNxbCA9ICdERUxFVEUgRlJPTSBEb2N1bWVudHMgV0hFUkUgZG9jdW1lbnRfaWQgPSA/IEFORCBjb21wYW55X2lkID0gPyc7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbaWQsIGNvbXBhbnlJZF07XHJcblxyXG4gICAgLy8gT25seSBzdXBlcl9hZG1pbiBvciB0aGUgb3JpZ2luYWwgdXBsb2FkZXIgY2FuIGRlbGV0ZVxyXG4gICAgaWYgKHJvbGUgIT09ICdzdXBlcl9hZG1pbicpIHtcclxuICAgICAgICBzcWwgKz0gJyBBTkQgdXNlcl9pZCA9ID8nO1xyXG4gICAgICAgIHBhcmFtcy5wdXNoKHVzZXJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGIucnVuKHNxbCwgcGFyYW1zLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBkZWxldGluZyBkb2N1bWVudDpcIiwgZXJyKTsgcmV0dXJuIG5leHQobmV3IEVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIGRvY3VtZW50LicpKTsgfSAvLyBQYXNzIGVycm9yXHJcbiAgICAgICAgaWYgKHRoaXMuY2hhbmdlcyA9PT0gMCkgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0RvY3VtZW50IG5vdCBmb3VuZCBvciBub3QgYXV0aG9yaXplZCB0byBkZWxldGUuJyB9KTsgfVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjA0KS5zZW5kKCk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyBGYWxsYmFjayBmb3IgYW55IG90aGVyIEdFVCByZXF1ZXN0IG5vdCBoYW5kbGVkIGJ5IGFuIEFQSSByb3V0ZSAoc2VydmVzIGluZGV4Lmh0bWwgZm9yIFNQQSBiZWhhdmlvcilcclxuLy8gVGhpcyBzaG91bGQgYWx3YXlzIGJlIHRoZSBMQVNUIHJvdXRlIGluIHlvdXIgRXhwcmVzcyBhcHBcclxuYXBwLmdldCgvJyonLywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAvLyBDb3JyZWN0bHkgc2VydmUgdGhlIGluZGV4Lmh0bWwgZnJvbSB0aGUgcGFyZW50IGRpcmVjdG9yeVxyXG4gICAgcmVzLnNlbmRGaWxlKHBhdGguam9pbihfX2Rpcm5hbWUsICcuLicsICdpbmRleC5odG1sJykpO1xyXG59KTtcclxuXHJcbi8vIC0tLSBHbG9iYWwgRXJyb3IgSGFuZGxpbmcgTWlkZGxld2FyZSAtLS1cclxuLy8gVGhpcyBzaG91bGQgYmUgdGhlIHZlcnkgbGFzdCBtaWRkbGV3YXJlIGluIHlvdXIgRXhwcmVzcyBhcHBcclxuYXBwLnVzZSgoZXJyLCByZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihgVW5oYW5kbGVkIEVycm9yOiAke2Vyci5zdGFja31gKTsgLy8gTG9nIHRoZSBmdWxsIHN0YWNrIHRyYWNlIGZvciBkZWJ1Z2dpbmdcclxuICAgIC8vIFJlc3BvbmQgd2l0aCBhIGdlbmVyaWMgZXJyb3IgbWVzc2FnZSBmb3IgdGhlIGNsaWVudFxyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnQW4gdW5leHBlY3RlZCBzZXJ2ZXIgZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcclxuICAgICAgICAvLyBJbiBkZXZlbG9wbWVudCwgeW91IG1pZ2h0IHNlbmQgbW9yZSBkZXRhaWxzOlxyXG4gICAgICAgIC8vIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxyXG4gICAgICAgIC8vIHN0YWNrOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVyci5zdGFjayA6IHVuZGVmaW5lZFxyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLy8gLS0tIFNlcnZlciBTdGFydCAtLS1cclxuLy8gVGhpcyBjb25kaXRpb25hbCBleHBvcnQgYWxsb3dzIHRoZSBhcHAgdG8gYmUgaW1wb3J0ZWQgZm9yIHRlc3RpbmdcclxuLy8gd2l0aG91dCBzdGFydGluZyB0aGUgc2VydmVyIGxpc3RlbmVyIHdoZW4gdGhlIHRlc3QgcnVubmVyIHJlcXVpcmVzIGl0LlxyXG5pZiAocmVxdWlyZS5tYWluID09PSBtb2R1bGUpIHtcclxuICAgIC8vIE9ubHkgbGlzdGVuIGlmIHRoaXMgZmlsZSBpcyBydW4gZGlyZWN0bHkgKG5vdCByZXF1aXJlZCBhcyBhIG1vZHVsZSlcclxuICAgIGFwcC5saXN0ZW4oUE9SVCwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBTZXJ2ZXIgaXMgcnVubmluZyBzdWNjZXNzZnVsbHkgb24gaHR0cDovL2xvY2FsaG9zdDoke1BPUlR9YCk7XHJcbiAgICB9KTtcclxufSBlbHNlIHtcclxuICAgIC8vIEV4cG9ydCB0aGUgYXBwIGZvciB0ZXN0aW5nIHB1cnBvc2VzXHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGFwcDtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7OzBCQUNBLHVLQUFBQSxDQUFBLEVBQUFDLENBQUEsRUFBQUMsQ0FBQSx3QkFBQUMsTUFBQSxHQUFBQSxNQUFBLE9BQUFDLENBQUEsR0FBQUYsQ0FBQSxDQUFBRyxRQUFBLGtCQUFBQyxDQUFBLEdBQUFKLENBQUEsQ0FBQUssV0FBQSw4QkFBQUMsRUFBQU4sQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsRUFBQUUsQ0FBQSxRQUFBQyxDQUFBLEdBQUFMLENBQUEsSUFBQUEsQ0FBQSxDQUFBTSxTQUFBLFlBQUFDLFNBQUEsR0FBQVAsQ0FBQSxHQUFBTyxTQUFBLEVBQUFDLENBQUEsR0FBQUMsTUFBQSxDQUFBQyxNQUFBLENBQUFMLENBQUEsQ0FBQUMsU0FBQSxVQUFBSyxtQkFBQSxDQUFBSCxDQUFBLHVCQUFBVixDQUFBLEVBQUFFLENBQUEsRUFBQUUsQ0FBQSxRQUFBRSxDQUFBLEVBQUFD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","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","express","require","sqlite3","verbose","bcrypt","jwt","cors","path","csv","_require","Readable","rateLimit","morgan","process","env","NODE_ENV","config","stripeInstance","STRIPE_SECRET_KEY","app","allowedOrigins","CORS_ORIGIN","split","push","corsOptions","origin","callback","includes","msg","Error","indexOf","methods","credentials","optionsSuccessStatus","use","PORT","STRIPE_WEBHOOK_SECRET","authLimiter","windowMs","max","message","standardHeaders","legacyHeaders","post","raw","type","_ref","_callee","req","res","sig","event","session","userId","planId","subscriptionUpdated","subscriptionDeleted","invoiceSucceeded","invoiceFailed","_t","_t2","_context","headers","webhooks","constructEvent","body","console","error","concat","status","send","data","object","log","id","metadata","payment_status","db","run","customer","subscription","err","plan","json","received","_x","_x2","JWT_SECRET","join","__dirname","maxAge","immutable","Database","exit","get","serialize","authenticateToken","next","authHeader","token","verify","user","isValidEmail","email","test","_ref2","_callee2","_req$body","company_name","full_name","password","password_hash","_t3","_context2","trim","hash","newCompanyId","lastID","userInsertErr","_x3","_x4","_x5","_req$body2","_ref3","_callee3","isMatch","payload","_context3","compare","user_id","role","fullName","companyId","company_id","locationId","location_id","subscriptionStatus","subscription_status","plan_id","sign","expiresIn","_x6","_x7","_ref4","_callee4","_req$body3","_req$user","_t4","_context4","location","_x8","_x9","_x0","_ref5","_callee5","_req$body4","position","employee_id","_req$user2","currentUserLocationId","isLocationIdValid","locationVerification","_t5","_context5","isNaN","undefined","reject","_x1","_x10","_x11","_req$user3","put","_ref6","_callee7","_req$body5","currentPassword","newPassword","_context7","_ref7","_callee6","updateSql","updateParams","clauses","changesMade","existingUser","newPasswordHash","_t6","_context6","row","updateErr","changes","fetchErr","updatedUser","newPayload","newToken","_x15","_x16","_x12","_x13","_x14","_req$user4","sql","params","all","rows","_req$body6","location_name","location_address","_req$user5","_req$user6","parseInt","_req$user7","currentUserId","_req$query","query","filterRole","filterLocationId","allowedRoles","_req$user8","authenticatedUserId","_ref8","_callee8","_req$user9","allowedPlanIds","priceIdMap","stripePriceId","customerId","userRecord","_t7","_context8","STRIPE_PRICE_ID_PRO","STRIPE_PRICE_ID_ENT","stripe_customer_id","customers","checkout","sessions","mode","line_items","price","quantity","success_url","FRONTEND_URL","cancel_url","url","_x17","_x18","_x19","_req$body7","start_time","end_time","notes","_req$user0","Date","getTime","employee","insertErr","scheduleId","_req$query2","start_date","end_date","_req$user1","_req$user10","_req$body8","title","description","requirements","_req$user11","created_date","toISOString","jobPostingId","_req$query3","_req$user12","allowedStatuses","_req$body9","_req$user13","_req$user14","_req$body0","job_posting_id","phone_number","_req$user15","application_date","jobPosting","applicantId","_req$query4","_req$user16","_req$body1","resume_url","_req$user17","job","_req$user18","_req$body10","file_name","file_type","file_url","_req$user19","upload_date","urlRegex","documentId","_req$user20","_req$user21","sendFile","stack","main","module","listen","exports"],"sourceRoot":"C:\\Users\\xarcy\\OneDrive\\Desktop\\onboardflow\\backend\\","sources":["server.js"],"sourcesContent":["// --- Imports ---\r\nconst express = require('express');\r\nconst sqlite3 = require('sqlite3').verbose();\r\nconst bcrypt = require('bcryptjs');\r\nconst jwt = require('jsonwebtoken');\r\nconst cors = require('cors'); // Import cors\r\nconst path = require('path');\r\nconst csv = require('csv-parser'); // For CSV parsing\r\nconst { Readable } = require('stream'); // For creating a readable stream from a string\r\nconst rateLimit = require('express-rate-limit'); // Import rate-limiting middleware\r\nconst morgan = require('morgan'); // Import morgan for request logging\r\n\r\n// Load environment variables from .env file in development\r\nif (process.env.NODE_ENV !== 'production') {\r\n    require('dotenv').config();\r\n}\r\n\r\n// Import the Stripe library and initialize it with your secret key\r\n// Use process.env.STRIPE_SECRET_KEY for production\r\nconst stripeInstance = require('stripe')(process.env.STRIPE_SECRET_KEY || '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');\r\n\r\n// --- App Initialization ---\r\nconst app = express();\r\n\r\n// Configure CORS for production environment\r\nconst allowedOrigins = process.env.CORS_ORIGIN ? process.env.CORS_ORIGIN.split(',') : ['http://localhost:8000']; // Default to localhost for development\r\n\r\n// Add 'null' to allowed origins if not in production and not explicitly set for local file access\r\nif (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN) {\r\n    allowedOrigins.push('null');\r\n}\r\n\r\nconst corsOptions = {\r\n    origin: function (origin, callback) {\r\n        // Allow requests with no origin (like mobile apps, curl, or local file access if 'null' is in allowedOrigins)\r\n        if (!origin) {\r\n            // Check if 'null' is explicitly allowed or if we're in dev and no CORS_ORIGIN is set\r\n            if (allowedOrigins.includes('null') || (process.env.NODE_ENV !== 'production' && !process.env.CORS_ORIGIN)) {\r\n                return callback(null, true);\r\n            }\r\n            const msg = 'The CORS policy for this site does not allow access from the specified Origin.';\r\n            return callback(new Error(msg), false);\r\n        }\r\n\r\n        if (allowedOrigins.indexOf(origin) === -1) {\r\n            const msg = 'The CORS policy for this site does not allow access from the specified Origin.';\r\n            return callback(new Error(msg), false);\r\n        }\r\n        return callback(null, true);\r\n    },\r\n    methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\r\n    credentials: true, // Allow cookies to be sent\r\n    optionsSuccessStatus: 204 // Some legacy browsers (IE11, various SmartTVs) choke on 204\r\n};\r\napp.use(cors(corsOptions));\r\n\r\n\r\n// Use process.env.PORT for production, fallback to 3000 for local development\r\nconst PORT = process.env.PORT || 3000;\r\n\r\n// Define a webhook secret for Stripe. This should also be an environment variable.\r\nconst STRIPE_WEBHOOK_SECRET = process.env.STRIPE_WEBHOOK_SECRET || 'whsec_YOUR_WEBHOOK_SECRET';\r\n\r\n// --- Rate Limiting Configuration ---\r\nconst authLimiter = rateLimit({\r\n    windowMs: 15 * 60 * 1000, // 15 minutes\r\n    max: 10, // Max 10 requests per 15 minutes per IP\r\n    message: 'Too many login/registration attempts from this IP, please try again after 15 minutes',\r\n    standardHeaders: true, // Return rate limit info in the `RateLimit-*` headers\r\n    legacyHeaders: false, // Disable the `X-RateLimit-*` headers\r\n});\r\n\r\n// --- Middleware for Stripe Webhook (MUST be before express.json() for other routes) ---\r\n// This route needs the raw body for signature verification.\r\napp.post('/api/stripe-webhook', express.raw({type: 'application/json'}), async (req, res) => {\r\n    const sig = req.headers['stripe-signature'];\r\n\r\n    let event;\r\n\r\n    try {\r\n        event = stripeInstance.webhooks.constructEvent(req.body, sig, STRIPE_WEBHOOK_SECRET);\r\n    } catch (err) {\r\n        console.error(`Webhook Error: ${err.message}`);\r\n        return res.status(400).send(`Webhook Error: ${err.message}`);\r\n    }\r\n\r\n    // Handle the event\r\n    switch (event.type) {\r\n        case 'checkout.session.completed':\r\n            const session = event.data.object;\r\n            console.log('Checkout Session Completed:', session.id);\r\n            const userId = session.metadata.userId;\r\n            const planId = session.metadata.planId;\r\n            if (session.payment_status === 'paid' && userId && planId) {\r\n                db.run(\r\n                    'UPDATE Users SET stripe_customer_id = ?, stripe_subscription_id = ?, subscription_status = ?, plan_id = ? WHERE user_id = ?',\r\n                    [session.customer, session.subscription, 'active', planId, userId],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for checkout.session.completed:', err.message);\r\n                        else console.log(`User ${userId} subscription updated to ${planId} (active).`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'customer.subscription.updated':\r\n            const subscriptionUpdated = event.data.object;\r\n            console.log('Subscription Updated:', subscriptionUpdated.id);\r\n            if (subscriptionUpdated.customer && subscriptionUpdated.status && subscriptionUpdated.plan && subscriptionUpdated.plan.id) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ?, plan_id = ? WHERE stripe_customer_id = ?',\r\n                    [subscriptionUpdated.status, subscriptionUpdated.plan.id, subscriptionUpdated.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for customer.subscription.updated:', err.message);\r\n                        else console.log(`Subscription for customer ${subscriptionUpdated.customer} status updated to ${subscriptionUpdated.status} and plan to ${subscriptionUpdated.plan.id}.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'customer.subscription.deleted':\r\n            const subscriptionDeleted = event.data.object;\r\n            console.log('Subscription Deleted:', subscriptionDeleted.id);\r\n            if (subscriptionDeleted.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ?, plan_id = ?, stripe_subscription_id = NULL WHERE stripe_customer_id = ?',\r\n                    ['cancelled', 'free', subscriptionDeleted.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for customer.subscription.deleted:', err.message);\r\n                        else console.log(`Subscription for customer ${subscriptionDeleted.customer} marked as cancelled and reverted to free.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'invoice.payment_succeeded':\r\n            const invoiceSucceeded = event.data.object;\r\n            console.log('Invoice Payment Succeeded:', invoiceSucceeded.id);\r\n            if (invoiceSucceeded.subscription && invoiceSucceeded.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?',\r\n                    ['active', invoiceSucceeded.subscription, invoiceSucceeded.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for invoice.payment_succeeded:', err.message);\r\n                        else console.log(`Subscription ${invoiceSucceeded.subscription} status set to active.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        case 'invoice.payment_failed':\r\n            const invoiceFailed = event.data.object;\r\n            console.log('Invoice Payment Failed:', invoiceFailed.id);\r\n            if (invoiceFailed.subscription && invoiceFailed.customer) {\r\n                db.run(\r\n                    'UPDATE Users SET subscription_status = ? WHERE stripe_subscription_id = ? AND stripe_customer_id = ?',\r\n                    ['past_due', invoiceFailed.subscription, invoiceFailed.customer],\r\n                    function(err) {\r\n                        if (err) console.error('Database update error for invoice.payment_failed:', err.message);\r\n                        else console.log(`Subscription ${invoiceFailed.subscription} status set to past_due.`);\r\n                    }\r\n                );\r\n            }\r\n            break;\r\n        default:\r\n            console.log(`Unhandled event type ${event.type}`);\r\n    }\r\n    res.status(200).json({ received: true });\r\n});\r\n\r\n// IMPORTANT: express.json() for parsing JSON request bodies MUST come AFTER the webhook route\r\napp.use(express.json());\r\n\r\n// --- JWT Secret ---\r\n// Use process.env.JWT_SECRET for production\r\nconst JWT_SECRET = process.env.JWT_SECRET || 'your-super-secret-and-long-string-for-jwt';\r\n\r\n// --- Request Logging (using Morgan) ---\r\n// 'dev' format is good for development, 'combined' or 'tiny' for production logs\r\napp.use(morgan('dev'));\r\n\r\n// --- Serve Static Files (Frontend) with Caching ---\r\n// This middleware serves static files from the 'onboardflow' root directory\r\n// and sets Cache-Control headers for browser caching.\r\napp.use(express.static(path.join(__dirname, '..'), {\r\n    maxAge: '7d', // Cache static assets for 7 days (e.g., CSS, JS, images, favicon)\r\n    immutable: false // Set to true if asset filenames include content hashes (e.g., app.min.js?v=hash)\r\n}));\r\n\r\n// --- Database Setup ---\r\nconst db = new sqlite3.Database('./onboardflow.db', (err) => {\r\n    if (err) {\r\n        // Log database connection error and exit\r\n        console.error(\"Error opening database:\", err.message);\r\n        process.exit(1); // Exit process if database connection fails\r\n    } else {\r\n        console.log(\"Successfully connected to the database.\");\r\n        db.get(\"PRAGMA foreign_keys = ON\");\r\n        db.serialize(() => {\r\n            db.run(`CREATE TABLE IF NOT EXISTS Companies (company_id INTEGER PRIMARY KEY AUTOINCREMENT, company_name TEXT NOT NULL UNIQUE)`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Locations (location_id INTEGER PRIMARY KEY AUTOINCREMENT, company_id INTEGER, location_name TEXT NOT NULL, location_address TEXT NOT NULL, FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE)`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Users (\r\n                user_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER,\r\n                location_id INTEGER,\r\n                full_name TEXT NOT NULL,\r\n                email TEXT NOT NULL UNIQUE,\r\n                password_hash TEXT NOT NULL,\r\n                position TEXT,\r\n                employee_id TEXT,\r\n                role TEXT NOT NULL,\r\n                stripe_customer_id TEXT,\r\n                stripe_subscription_id TEXT,\r\n                subscription_status TEXT,\r\n                plan_id TEXT,\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            db.run(`CREATE TABLE IF NOT EXISTS Schedules (\r\n                schedule_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                employee_id INTEGER NOT NULL,\r\n                location_id INTEGER NOT NULL,\r\n                start_time TEXT NOT NULL,\r\n                end_time TEXT NOT NULL,\r\n                notes TEXT,\r\n                FOREIGN KEY (employee_id) REFERENCES Users(user_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            // NEW: Create JobPostings table\r\n            db.run(`CREATE TABLE IF NOT EXISTS JobPostings (\r\n                job_posting_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                location_id INTEGER, -- Optional: link job posting to a specific location\r\n                title TEXT NOT NULL,\r\n                description TEXT NOT NULL,\r\n                requirements TEXT, -- Optional: job requirements\r\n                status TEXT NOT NULL DEFAULT 'Open', -- e.g., 'Open', 'Closed', 'Filled'\r\n                created_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE\r\n            )`);\r\n            // Update Applicants table schema to link to JobPostings and add phone_number\r\n            db.run(`CREATE TABLE IF NOT EXISTS Applicants (\r\n                applicant_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                location_id INTEGER, -- Optional: applicant's preferred location or location applied for\r\n                job_posting_id INTEGER, -- NEW: Link to JobPostings table\r\n                full_name TEXT NOT NULL,\r\n                email TEXT NOT NULL,\r\n                phone_number TEXT, -- NEW: Phone number field\r\n                status TEXT NOT NULL DEFAULT 'Applied', -- e.g., 'Applied', 'Interviewing', 'Rejected', 'Hired'\r\n                resume_url TEXT, -- Optional: URL to a resume document (e.g., hosted on cloud storage)\r\n                notes TEXT,\r\n                application_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (location_id) REFERENCES Locations(location_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (job_posting_id) REFERENCES JobPostings(job_posting_id) ON DELETE SET NULL -- If job posting is deleted, set this to NULL\r\n            )`);\r\n            // NEW: Create Documents table for file/video uploads\r\n            db.run(`CREATE TABLE IF NOT EXISTS Documents (\r\n                document_id INTEGER PRIMARY KEY AUTOINCREMENT,\r\n                company_id INTEGER NOT NULL,\r\n                user_id INTEGER NOT NULL, -- User who uploaded the document\r\n                title TEXT NOT NULL,\r\n                file_name TEXT NOT NULL,\r\n                file_type TEXT NOT NULL,\r\n                file_url TEXT NOT NULL, -- URL to the stored file (e.g., S3, GCS)\r\n                description TEXT,\r\n                upload_date TEXT NOT NULL, -- ISO 8601 format\r\n                FOREIGN KEY (company_id) REFERENCES Companies(company_id) ON DELETE CASCADE,\r\n                FOREIGN KEY (user_id) REFERENCES Users(user_id) ON DELETE CASCADE\r\n            )`);\r\n        });\r\n    }\r\n});\r\n\r\n// --- Authentication Middleware ---\r\nfunction authenticateToken(req, res, next) {\r\n    const authHeader = req.headers['authorization'];\r\n    const token = authHeader && authHeader.split(' ')[1];\r\n    if (token == null) {\r\n        return res.status(401).json({ error: 'Unauthorized: No token provided.' });\r\n    }\r\n    jwt.verify(token, JWT_SECRET, (err, user) => {\r\n        if (err) {\r\n            // Log the specific JWT error for debugging\r\n            console.error(\"JWT Verification Error:\", err.message);\r\n            return res.status(403).json({ error: 'Forbidden: Invalid or expired token.' });\r\n        }\r\n        req.user = user;\r\n        next();\r\n    });\r\n}\r\n\r\n// --- Helper for Input Validation ---\r\nconst isValidEmail = (email) => {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\r\n};\r\n\r\n// --- API Routes (ALL API ROUTES SHOULD BE DEFINED HERE, BEFORE STATIC FILE SERVING) ---\r\n\r\n// Apply rate limiting to authentication routes\r\napp.post('/api/register', authLimiter, async (req, res, next) => { // Added 'next'\r\n    const { company_name, full_name, email, password } = req.body;\r\n\r\n    // Input Validation for Registration\r\n    if (!company_name || typeof company_name !== 'string' || company_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Company name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Password is required and must be at least 6 characters long.\" });\r\n    }\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n        db.serialize(() => {\r\n            db.run('BEGIN TRANSACTION');\r\n            db.run('INSERT INTO Companies (company_name) VALUES (?)', [company_name], function(err) {\r\n                if (err) { \r\n                    db.run('ROLLBACK'); \r\n                    console.error(\"Database error creating company:\", err);\r\n                    return next(new Error(\"Could not create company.\")); // Pass error to error handling middleware\r\n                }\r\n                const newCompanyId = this.lastID;\r\n                db.run(`INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'super_admin', 'active', 'free')`, [newCompanyId, null, full_name, email, password_hash], function(userInsertErr) {\r\n                    if (userInsertErr) { \r\n                        db.run('ROLLBACK'); \r\n                        console.error(\"Database error creating user:\", userInsertErr);\r\n                        if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { \r\n                            return res.status(409).json({ error: 'Email already registered.' }); \r\n                        }\r\n                        return next(new Error(\"Could not create user.\")); // Pass error\r\n                    }\r\n                    db.run('COMMIT');\r\n                    res.status(201).json({ message: \"Company and user registered successfully!\", userId: this.lastID });\r\n                });\r\n            });\r\n        });\r\n    } catch (error) { \r\n        console.error(\"Registration error:\", error);\r\n        next(error); // Pass error to error handling middleware\r\n    }\r\n});\r\n\r\napp.post('/api/login', authLimiter, (req, res, next) => { // Added 'next'\r\n    const { email, password } = req.body;\r\n\r\n    // Input Validation for Login\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length === 0) {\r\n        return res.status(400).json({ error: \"Password is required.\" });\r\n    }\r\n\r\n    db.get(\"SELECT * FROM Users WHERE email = ?\", [email], async (err, user) => {\r\n        if (err) {\r\n            console.error(\"Database error during login:\", err);\r\n            return next(new Error(\"A server error occurred during login.\")); // Pass error\r\n        }\r\n        if (!user) { \r\n            return res.status(401).json({ error: \"Invalid credentials.\" }); \r\n        }\r\n        const isMatch = await bcrypt.compare(password, user.password_hash);\r\n        if (!isMatch) { \r\n            return res.status(401).json({ error: \"Invalid credentials.\" }); \r\n        }\r\n        const payload = { userId: user.user_id, email: user.email, role: user.role, fullName: user.full_name, companyId: user.company_id, locationId: user.location_id, subscriptionStatus: user.subscription_status, planId: user.plan_id };\r\n        const token = jwt.sign(payload, JWT_SECRET, { expiresIn: '1h' });\r\n        res.status(200).json({ message: \"Login successful!\", token, role: user.role });\r\n    });\r\n});\r\n\r\napp.post('/api/invite-admin', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { full_name, email, password, location_id } = req.body;\r\n    const { companyId, role } = req.user;\r\n\r\n    // Input Validation for Invite Admin\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can invite other admins.' }); }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Temporary password is required and must be at least 6 characters long.\" });\r\n    }\r\n    if (typeof location_id !== 'number' || location_id <= 0) { // Assuming location_id is an integer ID\r\n        return res.status(400).json({ error: \"A valid location ID is required.\" });\r\n    }\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n        db.get('SELECT * FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n            if (err) { console.error(\"Database error checking location:\", err); return next(new Error('Database error when verifying location.')); } // Pass error\r\n            if (!location) { return res.status(400).json({ error: 'Selected location does not exist or does not belong to your company.' }); }\r\n            db.run(`INSERT INTO Users (company_id, location_id, full_name, email, password_hash, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, 'location_admin', 'active', 'free')`, [companyId, location_id, full_name, email, password_hash], function(userInsertErr) {\r\n                if (userInsertErr) {\r\n                    console.error(\"Database error inviting admin:\", userInsertErr);\r\n                    if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { return res.status(409).json({ error: 'Email already registered.' }); }\r\n                    return next(new Error('Failed to invite admin.')); // Pass error\r\n                }\r\n                res.status(201).json({ message: \"Location admin invited successfully!\", userId: this.lastID });\r\n            });\r\n        });\r\n    } catch (error) { console.error(\"Invite admin error:\", error); next(error); } // Pass error\r\n});\r\n\r\n// NEW: API endpoint for inviting employees\r\napp.post('/api/invite-employee', authenticateToken, async (req, res, next) => {\r\n    const { full_name, email, password, position, employee_id, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Authorization: Super admin can invite anyone, Location admin can only invite to their location or unassigned\r\n    if (!['super_admin', 'location_admin'].includes(role)) {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can invite employees.' });\r\n    }\r\n\r\n    // Input Validation for Invite Employee\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    if (!password || typeof password !== 'string' || password.length < 6) {\r\n        return res.status(400).json({ error: \"Temporary password is required and must be at least 6 characters long.\" });\r\n    }\r\n    \r\n    // Corrected location_id validation: Must be a number > 0.\r\n    // If location_id is null, it indicates an unassigned location, which is valid for a super admin.\r\n    // For location_admin, it must match their current location.\r\n    // This revised logic correctly checks for null OR a valid positive integer.\r\n    const isLocationIdValid = location_id === null || (typeof location_id === 'number' && !isNaN(location_id) && location_id > 0);\r\n    if (!isLocationIdValid) {\r\n        return res.status(400).json({ error: \"A valid location ID (positive number) is required for employee, or null for unassigned.\" });\r\n    }\r\n    \r\n    if (position !== undefined && typeof position !== 'string') {\r\n        return res.status(400).json({ error: 'Position must be a string if provided.' });\r\n    }\r\n    if (employee_id !== undefined && typeof employee_id !== 'string') {\r\n        return res.status(400).json({ error: 'Employee ID must be a string if provided.' });\r\n    }\r\n\r\n    // Location Admin specific check: ensure they are inviting to their assigned location or null\r\n    // If location_admin tries to set a location that is NOT their own, block it.\r\n    // Allow location_admin to set to null if their current location is null.\r\n    if (role === 'location_admin') {\r\n        // A location admin can ONLY assign an employee to their own location or to null (unassigned)\r\n        if (location_id !== currentUserLocationId) {\r\n            // If the target location_id is not the current user's location, check if both are null\r\n            if (!(location_id === null && currentUserLocationId === null)) {\r\n                return res.status(403).json({ error: 'Access Denied: Location admin can only invite employees to their assigned location.' });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    try {\r\n        const password_hash = await bcrypt.hash(password, 10);\r\n\r\n        // Verify the location_id belongs to the company and, if location_admin, matches their assigned location\r\n        // This check is crucial if location_id is NOT null\r\n        if (location_id !== null) {\r\n            const locationVerification = await new Promise((resolve, reject) => {\r\n                db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n                    if (err) reject(err);\r\n                    resolve(location);\r\n                });\r\n            });\r\n            if (!locationVerification) {\r\n                return res.status(400).json({ error: 'Selected location does not exist or does not belong to your company.' });\r\n            }\r\n        }\r\n\r\n        db.run(\r\n            `INSERT INTO Users (company_id, location_id, full_name, email, password_hash, position, employee_id, role, subscription_status, plan_id) VALUES (?, ?, ?, ?, ?, ?, ?, 'employee', 'active', 'free')`,\r\n            [companyId, location_id, full_name, email, password_hash, position, employee_id,], // Default new employees to 'employee' role\r\n            function(userInsertErr) {\r\n                if (userInsertErr) {\r\n                    console.error(\"Database error inviting employee:\", userInsertErr);\r\n                    if (userInsertErr.message.includes('UNIQUE constraint failed: Users.email')) { return res.status(409).json({ error: 'Email already registered.' }); }\r\n                    return next(new Error('Failed to invite employee.'));\r\n                }\r\n                res.status(201).json({ message: \"Employee invited successfully!\", userId: this.lastID });\r\n            }\r\n        );\r\n    } catch (error) {\r\n        console.error(\"Invite employee error:\", error);\r\n        next(error);\r\n    }\r\n});\r\n\r\n\r\napp.get('/api/profile', authenticateToken, (req, res) => {\r\n    const { userId, fullName, email, role, companyId, locationId, subscriptionStatus, planId } = req.user;\r\n    res.status(200).json({ userId, fullName, email, role, companyId, locationId, subscriptionStatus, planId });\r\n});\r\n\r\napp.put('/api/profile', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { fullName, email, currentPassword, newPassword } = req.body;\r\n    const { userId } = req.user;\r\n\r\n    // Input Validation for Profile Update\r\n    if (fullName === undefined && email === undefined && (!currentPassword || !newPassword)) {\r\n        return res.status(400).json({ error: 'No data provided for update.' });\r\n    }\r\n    if (fullName !== undefined && (typeof fullName !== 'string' || fullName.trim() === '')) {\r\n        return res.status(400).json({ error: \"Full name must be a non-empty string if provided.\" });\r\n    }\r\n    if (email !== undefined && !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address must be provided if changing email.\" });\r\n    }\r\n    if (newPassword !== undefined && (typeof newPassword !== 'string' || newPassword.length < 6)) {\r\n        return res.status(400).json({ error: \"New password must be at least 6 characters long if changing password.\" });\r\n    }\r\n    if ((currentPassword && !newPassword) || (!currentPassword && newPassword)) {\r\n        return res.status(400).json({ error: 'Both current password and new password are required to change password.' });\r\n    }\r\n\r\n\r\n    db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], async (err, user) => {\r\n        if (err) { console.error(\"Database error fetching user for profile update:\", err); return next(new Error(\"Server error during profile update.\")); } // Pass error\r\n        if (!user) { return res.status(404).json({ error: \"User not found.\" }); }\r\n        let updateSql = 'UPDATE Users SET ';\r\n        const updateParams = [];\r\n        const clauses = [];\r\n        let changesMade = false;\r\n        if (fullName !== undefined && fullName !== user.full_name) {\r\n            clauses.push('full_name = ?');\r\n            updateParams.push(fullName);\r\n            changesMade = true;\r\n        }\r\n        if (email !== undefined && email !== user.email) {\r\n            try { // Added try-catch for async await in db.get\r\n                const existingUser = await new Promise((resolve, reject) => {\r\n                    db.get(\"SELECT user_id FROM Users WHERE email = ? AND user_id != ?\", [email, userId], (err, row) => {\r\n                        if (err) reject(err);\r\n                        resolve(row);\r\n                    });\r\n                });\r\n                if (existingUser) { return res.status(409).json({ error: 'Email already in use by another account.' }); }\r\n            } catch (dbErr) {\r\n                console.error(\"Database error checking existing email:\", dbErr);\r\n                return next(new Error(\"Server error verifying email availability.\"));\r\n            }\r\n            clauses.push('email = ?');\r\n            updateParams.push(email);\r\n            changesMade = true;\r\n        }\r\n        if (currentPassword && newPassword) {\r\n            const isMatch = await bcrypt.compare(currentPassword, user.password_hash);\r\n            if (!isMatch) { return res.status(401).json({ error: \"Current password incorrect.\" }); }\r\n            const newPasswordHash = await bcrypt.hash(newPassword, 10);\r\n            clauses.push('password_hash = ?');\r\n            updateParams.push(newPasswordHash);\r\n            changesMade = true;\r\n        }\r\n        if (!changesMade) { return res.status(200).json({ message: 'No changes detected. Profile remains the same.' }); }\r\n        updateSql += clauses.join(', ') + ' WHERE user_id = ?';\r\n        updateParams.push(userId);\r\n        db.run(updateSql, updateParams, function(updateErr) {\r\n            if (updateErr) { console.error(\"Database error updating profile:\", updateErr); return next(new Error('Failed to update profile.')); } // Pass error\r\n            if (this.changes > 0) {\r\n                db.get(\"SELECT * FROM Users WHERE user_id = ?\", [userId], (fetchErr, updatedUser) => {\r\n                    if (fetchErr || !updatedUser) { console.error(\"Error fetching updated user for new token:\", fetchErr); return res.status(200).json({ message: 'Profile updated successfully, but token could not be refreshed.' }); }\r\n                    const newPayload = { userId: updatedUser.user_id, email: updatedUser.email, role: updatedUser.role, fullName: updatedUser.full_name, companyId: updatedUser.company_id, locationId: updatedUser.location_id, subscriptionStatus: updatedUser.subscription_status, planId: user.plan_id };\r\n                    const newToken = jwt.sign(newPayload, JWT_SECRET, { expiresIn: '1h' });\r\n                    res.status(200).json({ message: 'Profile updated successfully!', token: newToken });\r\n                });\r\n            } else { res.status(200).json({ message: 'No changes applied as data was identical.' }); }\r\n        });\r\n    });\r\n});\r\n\r\napp.get('/api/locations', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, role } = req.user;\r\n    let sql = 'SELECT location_id, location_name, location_address FROM Locations WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Allowing super_admin, location_admin, and employee to view all locations in their company for dropdowns/selection\r\n    if (!['super_admin', 'location_admin', 'employee'].includes(role)) {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view locations.' });\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching locations:\", err); return next(new Error('Database error fetching locations.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.post('/api/locations', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { location_name, location_address } = req.body;\r\n    const { companyId, role } = req.user;\r\n\r\n    // Input Validation for Create Location\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can create locations.' }); }\r\n    if (!location_name || typeof location_name !== 'string' || location_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Location name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!location_address || typeof location_address !== 'string' || location_address.trim() === '') {\r\n        return res.status(400).json({ error: \"Location address is required and must be a non-empty string.\" });\r\n    }\r\n\r\n    db.run('INSERT INTO Locations (company_id, location_name, location_address) VALUES (?, ?, ?)', [companyId, location_name, location_address], function(err) {\r\n        if (err) { console.error(\"Database error creating location:\", err); return next(new Error('Failed to create location.')); } // Pass error\r\n        res.status(201).json({ message: 'Location created!', locationId: this.lastID });\r\n    });\r\n});\r\n\r\napp.delete('/api/locations/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role } = req.user;\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can delete locations.' }); }\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID provided.' });\r\n    }\r\n\r\n    db.run('DELETE FROM Locations WHERE location_id = ? AND company_id = ?', [id, companyId], function(err) {\r\n        if (err) { console.error(\"Database error deleting location:\", err); return next(new Error('Failed to delete location.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Location not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\napp.get('/api/users', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n    const { filterRole, filterLocationId } = req.query;\r\n\r\n    let sql = `SELECT Users.user_id, Users.full_name, Users.email, Users.role, Locations.location_name\r\n               FROM Users\r\n               LEFT JOIN Locations ON Users.location_id = Locations.location_id\r\n               WHERE Users.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    if (role === 'super_admin') {\r\n        // Super admin can view all users in their company.\r\n    } else if (role === 'location_admin') {\r\n        // Location admin can view all users within their assigned location, plus unassigned users for their company.\r\n        if (currentUserLocationId) {\r\n            sql += ` AND (Users.location_id = ? OR Users.location_id IS NULL)`; // Admins might need to see unassigned users\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Users.user_id = ?`;\r\n        params.push(currentUserId);\r\n    } else {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view users.' });\r\n    }\r\n\r\n    // Input validation for filterRole and filterLocationId\r\n    const allowedRoles = ['super_admin', 'location_admin', 'employee'];\r\n    if (filterRole && (!allowedRoles.includes(filterRole) || (role === 'location_admin' && filterRole === 'super_admin'))) {\r\n        return res.status(400).json({ error: 'Invalid filter role provided or insufficient permissions to filter by this role.' });\r\n    }\r\n    if (filterLocationId && isNaN(parseInt(filterLocationId))) {\r\n        return res.status(400).json({ error: 'Invalid filter location ID provided.' });\r\n    }\r\n\r\n\r\n    if (filterRole) {\r\n        if (role === 'super_admin' || (role === 'location_admin' && (filterRole === 'employee' || filterRole === 'location_admin')) || (role === 'employee' && filterRole === 'employee')) {\r\n            sql += ` AND Users.role = ?`;\r\n            params.push(filterRole);\r\n        } else {\r\n            // This case should ideally be caught by the earlier validation for allowedRoles, but for defense-in-depth:\r\n            return res.status(403).json({ error: 'Access Denied: Insufficient permissions to filter by role.' });\r\n        }\r\n    }\r\n    if (filterLocationId) {\r\n        // Ensure location_admin can only filter by their own location\r\n        if (role === 'super_admin' || (role === 'location_admin' && parseInt(filterLocationId) === currentUserLocationId)) {\r\n            sql += ` AND Users.location_id = ?`;\r\n            params.push(filterLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Insufficient permissions to filter by location.' });\r\n        }\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching users:\", err); return next(new Error('Database error fetching users.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.delete('/api/users/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, userId: authenticatedUserId } = req.user;\r\n    if (role !== 'super_admin') { return res.status(403).json({ error: 'Access Denied: Only super admins can delete users.' }); }\r\n    if (parseInt(id) === authenticatedUserId) { return res.status(403).json({ error: 'Cannot delete your own super admin account via this interface.' }); }\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid user ID provided.' });\r\n    }\r\n\r\n    db.run('DELETE FROM Users WHERE user_id = ? AND company_id = ? AND role != \\'super_admin\\'', [id, companyId], function(err) {\r\n        if (err) { console.error(\"Database error deleting user:\", err); return next(new Error('Failed to delete user.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'User not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\napp.post('/api/create-checkout-session', authenticateToken, async (req, res, next) => { // Added 'next'\r\n    const { planId } = req.body;\r\n    const { userId, email, companyId } = req.user;\r\n\r\n    // Input Validation for planId\r\n    const allowedPlanIds = ['pro', 'enterprise'];\r\n    if (!planId || !allowedPlanIds.includes(planId)) {\r\n        return res.status(400).json({ error: 'Invalid plan ID provided.' });\r\n    }\r\n\r\n    const priceIdMap = {\r\n        'pro': process.env.STRIPE_PRICE_ID_PRO,       // Use environment variable\r\n        'enterprise': process.env.STRIPE_PRICE_ID_ENT // Use environment variable\r\n    };\r\n    const stripePriceId = priceIdMap[planId];\r\n    if (!stripePriceId) { return res.status(500).json({ error: 'Stripe price ID not configured for this plan.' }); } // Changed from 400 to 500 as this is a server-side config issue\r\n    try {\r\n        let customerId;\r\n        const userRecord = await new Promise((resolve, reject) => {\r\n            db.get('SELECT stripe_customer_id FROM Users WHERE user_id = ?', [userId], (err, row) => {\r\n                if (err) reject(err);\r\n                resolve(row);\r\n            });\r\n        });\r\n        if (userRecord && userRecord.stripe_customer_id) {\r\n            customerId = userRecord.stripe_customer_id;\r\n        } else {\r\n            const customer = await stripeInstance.customers.create({ email: email, metadata: { userId: userId, companyId: companyId, }, });\r\n            customerId = customer.id;\r\n            db.run('UPDATE Users SET stripe_customer_id = ? WHERE user_id = ?', [customerId, userId], (err) => {\r\n                if (err) console.error('Failed to save Stripe customer ID to DB:', err);\r\n            });\r\n        }\r\n        const session = await stripeInstance.checkout.sessions.create({\r\n            customer: customerId,\r\n            mode: 'subscription',\r\n            line_items: [{ price: stripePriceId, quantity: 1, }, ],\r\n            // Use environment variables for success/cancel URLs, or relative paths if handled client-side\r\n            success_url: `${process.env.FRONTEND_URL || 'http://localhost:8000'}/suite-hub.html?payment=success&session_id={CHECKOUT_SESSION_ID}`,\r\n            cancel_url: `${process.env.FRONTEND_URL || 'http://localhost:8000'}/pricing.html?payment=cancelled`,\r\n            metadata: { userId: userId, planId: planId, },\r\n        });\r\n        res.status(200).json({ url: session.url });\r\n    } catch (error) { console.error('Error creating Stripe Checkout Session:', error); next(error); } // Pass error\r\n});\r\n\r\napp.post('/api/schedules', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { employee_id, location_id, start_time, end_time, notes } = req.body;\r\n    const { companyId, role, userId: currentUserId } = req.user;\r\n\r\n    // Input Validation for Create Schedule\r\n    if (role !== 'super_admin' && role !== 'location_admin') { return res.status(403).json({ error: 'Access Denied: Only admins can create schedules.' }); }\r\n    if (typeof employee_id !== 'number' || employee_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid employee ID is required.' });\r\n    }\r\n    if (typeof location_id !== 'number' || location_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid location ID is required.' });\r\n    }\r\n    if (!start_time || !end_time || isNaN(new Date(start_time).getTime()) || isNaN(new Date(end_time).getTime())) {\r\n        return res.status(400).json({ error: 'Valid start and end times are required.' });\r\n    }\r\n    if (new Date(start_time) >= new Date(end_time)) {\r\n        return res.status(400).json({ error: 'Start time must be before end time.' });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n\r\n    db.get('SELECT user_id FROM Users WHERE user_id = ? AND company_id = ?', [employee_id, companyId], (err, employee) => {\r\n        if (err) { console.error(\"Database error verifying employee:\", err); return next(new Error('Database error during employee verification.')); } // Pass error\r\n        if (!employee) { return res.status(400).json({ error: 'Employee not found in your company.' }); }\r\n        db.get('SELECT location_id FROM Locations WHERE location_id = ? AND company_id = ?', [location_id, companyId], (err, location) => {\r\n            if (err) { console.error(\"Database error verifying location:\", err); return next(new Error('Database error during location verification.')); } // Pass error\r\n            if (!location) { return res.status(400).json({ error: 'Location not found in your company.' }); }\r\n            db.run(\r\n                'INSERT INTO Schedules (employee_id, location_id, start_time, end_time, notes) VALUES (?, ?, ?, ?, ?)', [employee_id, location_id, start_time, end_time, notes],\r\n                function(insertErr) {\r\n                    if (insertErr) { console.error(\"Database error creating schedule:\", insertErr); return next(new Error('Failed to create schedule.')); } // Pass error\r\n                    res.status(201).json({ message: 'Schedule created successfully!', scheduleId: this.lastID });\r\n                }\r\n            );\r\n        });\r\n    });\r\n});\r\n\r\napp.get('/api/schedules', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { employee_id, location_id, start_date, end_date } = req.query;\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = `SELECT Schedules.*, Users.full_name AS employee_name, Users.email AS employee_email, Locations.location_name\r\n               FROM Schedules\r\n               JOIN Users ON Schedules.employee_id = Users.user_id\r\n               JOIN Locations ON Schedules.location_id = Locations.location_id\r\n               WHERE Users.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    if (role === 'location_admin') {\r\n        if (currentUserLocationId) {\r\n            sql += ` AND Schedules.location_id = ?`;\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Users.user_id = ?`;\r\n        params.push(currentUserId);\r\n    }\r\n\r\n    // Input validation for query parameters\r\n    if (employee_id && isNaN(parseInt(employee_id))) {\r\n        return res.status(400).json({ error: 'Invalid employee ID filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n    if (start_date && isNaN(new Date(start_date).getTime())) {\r\n        return res.status(400).json({ error: 'Invalid start date filter provided.' });\r\n    }\r\n    if (end_date && isNaN(new Date(end_date).getTime())) {\r\n        return res.status(400).json({ error: 'Invalid end date filter provided.' });\r\n    }\r\n\r\n\r\n    if (employee_id && (role === 'super_admin' || (role === 'location_admin' && parseInt(employee_id) === currentUserId) || (role === 'employee' && parseInt(employee_id) === currentUserId))) {\r\n        sql += ` AND Users.role = ?`;\r\n        params.push(filterRole); // This should be employee_id, not filterRole\r\n    }\r\n    if (location_id && (role === 'super_admin' || (role === 'location_admin' && parseInt(location_id) === currentUserLocationId))) {\r\n        sql += ` AND Schedules.location_id = ?`;\r\n        params.push(location_id);\r\n    }\r\n    if (start_date) {\r\n        sql += ` AND Schedules.start_time >= ?`;\r\n        params.push(start_date);\r\n    }\r\n    if (end_date) {\r\n        sql += ` AND Schedules.end_time <= ?`;\r\n        params.push(end_date);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching schedules:\", err); return next(new Error('Database error fetching schedules.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\napp.delete('/api/schedules/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid schedule ID provided.' });\r\n    }\r\n\r\n    if (role === 'employee') {\r\n        return res.status(403).json({ error: 'Access Denied: Employees cannot delete schedules.' });\r\n    }\r\n\r\n    let sql = `DELETE FROM Schedules WHERE schedule_id = ?`;\r\n    const params = [id];\r\n\r\n    if (role === 'location_admin') {\r\n        sql += ` AND employee_id IN (SELECT user_id FROM Users WHERE location_id = ? AND company_id = ?)`;\r\n        params.push(currentUserLocationId, companyId);\r\n    } else if (role === 'super_admin') {\r\n        sql += ` AND employee_id IN (SELECT user_id FROM Users WHERE company_id = ?)`;\r\n        params.push(companyId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting schedule:\", err); return next(new Error('Failed to delete schedule.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Schedule not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// --- Hiring Routes ---\r\n\r\n/**\r\n * POST /api/job-postings\r\n * Creates a new job posting.\r\n * Requires super_admin or location_admin role.\r\n */\r\napp.post('/api/job-postings', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { title, description, requirements, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n    const created_date = new Date().toISOString(); // Current date/time for creation\r\n\r\n    // Input Validation for Create Job Posting\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can create job postings.' });\r\n    }\r\n    if (!title || typeof title !== 'string' || title.trim() === '') {\r\n        return res.status(400).json({ error: \"Job title is required and must be a non-empty string.\" });\r\n    }\r\n    if (!description || typeof description !== 'string' || description.trim() === '') {\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    }\r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) { // location_id can be null\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n\r\n    // If location_admin, ensure location_id matches their assigned location, or is null\r\n    // A location admin can only create job postings for their assigned location or company-wide if their location is null\r\n    if (role === 'location_admin' && location_id && location_id !== currentUserLocationId) {\r\n        return res.status(403).json({ error: 'Access Denied: Location admin can only post jobs for their assigned location.' });\r\n    }\r\n\r\n    db.run(\r\n        'INSERT INTO JobPostings (company_id, location_id, title, description, requirements, status, created_date) VALUES (?, ?, ?, ?, ?, ?, ?)',\r\n        [companyId, location_id, title, description, requirements, 'Open', created_date], // Default status to 'Open'\r\n        function(err) {\r\n            if (err) {\r\n                console.error(\"Database error creating job posting:\", err);\r\n                return next(new Error('Failed to create job posting.')); // Pass error\r\n            }\r\n            res.status(201).json({ message: 'Job posting created successfully!', jobPostingId: this.lastID });\r\n        }\r\n    );\r\n});\r\n\r\n/**\r\n * GET /api/job-postings\r\n * Retrieves job postings.\r\n * Can filter by location_id and status.\r\n * Requires super_admin or location_admin.\r\n */\r\napp.get('/api/job-postings', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { status, location_id } = req.query;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = 'SELECT * FROM JobPostings WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Authorization: super_admin sees all, location_admin sees their location's postings\r\n    if (role === 'location_admin') {\r\n        if (currentUserLocationId) {\r\n            sql += ' AND (location_id = ? OR location_id IS NULL)'; // Location admin sees their location's postings or company-wide\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        // Employees generally shouldn't see job postings list via this admin API\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view job postings.' });\r\n    }\r\n\r\n    // Input validation for query parameters\r\n    const allowedStatuses = ['Open', 'Closed', 'Filled']; // Assuming these are your valid statuses\r\n    if (status && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid job posting status filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n\r\n\r\n    if (status) {\r\n        sql += ' AND status = ?';\r\n        params.push(status);\r\n    }\r\n    // Only super admin can filter by any location_id beyond their own scope\r\n    if (location_id && role === 'super_admin') {\r\n        sql += ' AND location_id = ?';\r\n        params.push(location_id);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching job postings:\", err); return next(new Error('Database error fetching job postings.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * PUT /api/job-postings/:id\r\n * Updates a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\r\napp.put('/api/job-postings/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { title, description, requirements, status, location_id } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Input Validation for Job Posting Update\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can update job postings.' });\r\n    }\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID provided.' });\r\n    }\r\n    if (title !== undefined && (typeof title !== 'string' || title.trim() === '')) {\r\n        return res.status(400).json({ error: 'Job title must be a non-empty string if provided.' });\r\n    }\r\n    if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) {\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    }\r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    }\r\n    const allowedStatuses = ['Open', 'Closed', 'Filled'];\r\n    if (status !== undefined && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid status provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    let updateSql = 'UPDATE JobPostings SET ';\r\n    const updateParams = [];\r\n    const clauses = [];\r\n\r\n    if (title !== undefined) { clauses.push('title = ?'); updateParams.push(title); }\r\n    // Fix: Missing closing parenthesis for this condition\r\n    if (description !== undefined && (typeof description !== 'string' || description.trim() === '')) { // Line 1009\r\n        return res.status(400).json({ error: 'Description must be a non-empty string if provided.' });\r\n    }\r\n    if (requirements !== undefined && typeof requirements !== 'string') {\r\n        return res.status(400).json({ error: 'Requirements must be a string if provided.' });\r\n    }\r\n    if (status !== undefined) { clauses.push('status = ?'); updateParams.push(status); }\r\n    \r\n    // super_admin can change location_id. location_admin cannot change location_id or change to different location\r\n    if (location_id !== undefined) {\r\n        if (role === 'super_admin') {\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        } else if (role === 'location_admin') {\r\n            if (location_id !== currentUserLocationId && location_id !== null) { // location_id can be null (company-wide)\r\n                return res.status(403).json({ error: 'Access Denied: Location admin cannot change job posting location to another location.' });\r\n            }\r\n            // If location admin updates job posting, and it's their location, or setting to null, it's allowed\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        }\r\n    }\r\n\r\n\r\n    if (clauses.length === 0) { return res.status(400).json({ error: 'No fields provided for update.' }); }\r\n\r\n    updateSql += clauses.join(', ') + ' WHERE job_posting_id = ? AND company_id = ?';\r\n    updateParams.push(id, companyId);\r\n\r\n    // Additional security for location_admin: ensure they only update their own location's postings\r\n    if (role === 'location_admin') {\r\n        updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned jobs too\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(updateSql, updateParams, function(err) {\r\n        if (err) { console.error(\"Database error updating job posting:\", err); return next(new Error('Failed to update job posting.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Job posting not found or not authorized to update.' }); }\r\n        res.status(200).json({ message: 'Job posting updated successfully!' });\r\n    });\r\n});\r\n\r\n/**\r\n * DELETE /api/job-postings/:id\r\n * Deletes a job posting.\r\n * Requires super_admin or location_admin (for their location's postings).\r\n */\r\napp.delete('/api/job-postings/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID provided.' });\r\n    }\r\n\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can delete job postings.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM JobPostings WHERE job_posting_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Additional security for location_admin: ensure they only delete their own location's postings\r\n    if (role === 'location_admin') {\r\n        sql += ' AND (location_id = ? OR location_id IS NULL)';\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting job posting:\", err); return next(new Error('Failed to delete job posting.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Job posting not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n\r\n// Update Applicant API endpoints to use job_posting_id\r\napp.post('/api/applicants', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { job_posting_id, full_name, email, notes, location_id, phone_number } = req.body; // Added phone_number\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n    const application_date = new Date().toISOString(); // Current date/time for application\r\n\r\n    // Input Validation for Adding Applicant\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can add applicants.' });\r\n    }\r\n    if (typeof job_posting_id !== 'number' || job_posting_id <= 0) {\r\n        return res.status(400).json({ error: 'A valid job posting ID is required.' });\r\n    }\r\n    if (!full_name || typeof full_name !== 'string' || full_name.trim() === '') {\r\n        return res.status(400).json({ error: \"Full name is required and must be a non-empty string.\" });\r\n    }\r\n    if (!email || !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address is required.\" });\r\n    }\r\n    // Basic phone number validation (simple check for non-empty string, could be more complex with regex)\r\n    if (!phone_number || typeof phone_number !== 'string' || phone_number.trim() === '') {\r\n        return res.status(400).json({ error: \"Phone number is required.\" });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    // Verify job_posting_id belongs to the company, and for location_admin, to their location\r\n    db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], (err, jobPosting) => {\r\n        if (err) { console.error(\"Database error verifying job posting:\", err); return next(new Error('Database error when verifying job posting.')); } // Pass error\r\n        if (!jobPosting) { return res.status(400).json({ error: 'Job Posting not found or does not belong to your company.' }); }\r\n        \r\n        // Location admin can only add applicants to jobs in their assigned location or unassigned jobs\r\n        if (role === 'location_admin' && jobPosting.location_id !== currentUserLocationId && jobPosting.location_id !== null) {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin cannot add applicants to jobs outside their assigned location.' });\r\n        }\r\n\r\n        db.run(\r\n            'INSERT INTO Applicants (company_id, location_id, job_posting_id, full_name, email, phone_number, notes, application_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)',\r\n            [companyId, location_id || jobPosting.location_id, job_posting_id, full_name, email, phone_number, notes, application_date], // Use location_id from payload or job posting\r\n            function(insertErr) {\r\n                if (insertErr) { console.error(\"Database error creating applicant:\", insertErr); return next(new Error('Failed to create applicant.')); } // Pass error\r\n                res.status(201).json({ message: 'Applicant added successfully!', applicantId: this.lastID });\r\n            }\r\n        );\r\n    });\r\n});\r\n\r\napp.get('/api/applicants', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { job_posting_id, status, location_id } = req.query; // Added job_posting_id, status, location_id filters\r\n    const { companyId, role, userId: currentUserId, locationId: currentUserLocationId } = req.user;\r\n\r\n    let sql = `SELECT Applicants.*, JobPostings.title AS job_title_name\r\n               FROM Applicants\r\n               LEFT JOIN JobPostings ON Applicants.job_posting_id = JobPostings.job_posting_id\r\n               WHERE Applicants.company_id = ?`;\r\n    const params = [companyId];\r\n\r\n    // Input validation for query parameters\r\n    const allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired']; // Define valid statuses\r\n    if (status && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid applicant status filter provided.' });\r\n    }\r\n    if (job_posting_id && isNaN(parseInt(job_posting_id))) {\r\n        return res.status(400).json({ error: 'Invalid job posting ID filter provided.' });\r\n    }\r\n    if (location_id && isNaN(parseInt(location_id))) {\r\n        return res.status(400).json({ error: 'Invalid location ID filter provided.' });\r\n    }\r\n\r\n    if (status) {\r\n        sql += ` AND Applicants.status = ?`;\r\n        params.push(status);\r\n    }\r\n\r\n    if (role === 'location_admin') {\r\n        if (currentUserLocationId) {\r\n            sql += ` AND (Applicants.location_id = ? OR Applicants.location_id IS NULL)`; // Location admin sees applicants for their location or unassigned\r\n            params.push(currentUserLocationId);\r\n        } else {\r\n            return res.status(403).json({ error: 'Access Denied: Location admin not assigned to a location.' });\r\n        }\r\n    } else if (role === 'employee') {\r\n        sql += ` AND Applicants.user_id = ?`;\r\n        params.push(currentUserId);\r\n    } else {\r\n        return res.status(403).json({ error: 'Access Denied: Insufficient permissions to view applicants.' });\r\n    }\r\n\r\n    // Apply job_posting_id filter if provided\r\n    if (job_posting_id) {\r\n        sql += ` AND Applicants.job_posting_id = ?`;\r\n        params.push(job_posting_id);\r\n    }\r\n    // Apply location filter from query params for super_admin\r\n    if (location_id && role === 'super_admin') {\r\n        sql += ` AND Applicants.location_id = ?`;\r\n        params.push(location_id);\r\n    }\r\n\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching applicants:\", err); return next(new Error('Database error fetching applicants.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * PUT /api/applicants/:id\r\n * Updates an applicant's details (e.g., status, notes).\r\n */\r\napp.put('/api/applicants/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { full_name, email, status, resume_url, notes, location_id, job_posting_id, phone_number } = req.body;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Input Validation for Applicant Update\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can update applicant records.' });\r\n    }\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid applicant ID provided.' });\r\n    }\r\n    if (full_name !== undefined && (typeof full_name !== 'string' || full_name.trim() === '')) {\r\n        return res.status(400).json({ error: \"Full name must be a non-empty string if provided.\" });\r\n    }\r\n    if (email !== undefined && !isValidEmail(email)) {\r\n        return res.status(400).json({ error: \"A valid email address must be provided if changing email.\" });\r\n    }\r\n    if (phone_number !== undefined && (typeof phone_number !== 'string' || phone_number.trim() === '')) {\r\n        return res.status(400).json({ error: \"Phone number must be a non-empty string if provided.\" });\r\n    }\r\n    const allowedStatuses = ['Applied', 'Interviewing', 'Rejected', 'Hired'];\r\n    if (status !== undefined && !allowedStatuses.includes(status)) {\r\n        return res.status(400).json({ error: 'Invalid status provided.' });\r\n    }\r\n    if (resume_url !== undefined && typeof resume_url !== 'string') { // Assuming resume_url is a string URL\r\n        return res.status(400).json({ error: 'Resume URL must be a string if provided.' });\r\n    }\r\n    if (notes !== undefined && typeof notes !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n    if (location_id !== undefined && typeof location_id !== 'number' && location_id !== null) {\r\n        return res.status(400).json({ error: 'Location ID must be a number or null if provided.' });\r\n    }\r\n    if (job_posting_id !== undefined && typeof job_posting_id !== 'number' && job_posting_id !== null) {\r\n        return res.status(400).json({ error: 'Job posting ID must be a number or null if provided.' });\r\n    }\r\n\r\n\r\n    let updateSql = 'UPDATE Applicants SET ';\r\n    const updateParams = [];\r\n    const clauses = [];\r\n\r\n    // Fields that can be updated\r\n    if (full_name !== undefined) { clauses.push('full_name = ?'); updateParams.push(full_name); }\r\n    if (email !== undefined) { clauses.push('email = ?'); updateParams.push(email); }\r\n    if (phone_number !== undefined) { clauses.push('phone_number = ?'); updateParams.push(phone_number); }\r\n    if (status !== undefined) { clauses.push('status = ?'); updateParams.push(status); }\r\n    if (resume_url !== undefined) { clauses.push('resume_url = ?'); updateParams.push(resume_url); }\r\n    if (notes !== undefined) { clauses.push('notes = ?'); updateParams.push(notes); }\r\n    \r\n    // Admins can update location_id or job_posting_id, with restrictions for location_admin\r\n    if (location_id !== undefined) {\r\n        if (role === 'super_admin') {\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        } else if (role === 'location_admin') {\r\n            if (location_id !== currentUserLocationId && location_id !== null) { // location_id can be null (company-wide)\r\n                return res.status(403).json({ error: 'Access Denied: Location admin cannot assign applicants to another location.' });\r\n            }\r\n            // If location admin updates applicant location, and it's their location, or setting to null, it's allowed\r\n            clauses.push('location_id = ?'); updateParams.push(location_id);\r\n        }\r\n    }\r\n    if (job_posting_id !== undefined) {\r\n         if (role === 'super_admin') {\r\n            clauses.push('job_posting_id = ?'); updateParams.push(job_posting_id);\r\n        } else if (role === 'location_admin') {\r\n            // Verify new job_posting_id belongs to the location admin's assigned location or is company-wide\r\n            db.get('SELECT job_posting_id, location_id FROM JobPostings WHERE job_posting_id = ? AND company_id = ?', [job_posting_id, companyId], (err, job) => {\r\n                if (err) { console.error(\"DB error verifying job posting for update:\", err); return next(new Error('Database error verifying job posting.')); } // Pass error\r\n                if (!job) { return res.status(400).json({ error: 'Job Posting not found or does not belong to your company.' }); }\r\n                if (job.location_id !== null && job.location_id !== currentUserLocationId) {\r\n                    return res.status(403).json({ error: 'Access Denied: Location admin cannot assign applicants to jobs outside their assigned location.' });\r\n                }\r\n            });\r\n            clauses.push('job_posting_id = ?'); updateParams.push(job_posting_id);\r\n        }\r\n    }\r\n\r\n\r\n    if (clauses.length === 0) { return res.status(400).json({ error: 'No fields provided for update.' }); }\r\n\r\n    updateSql += clauses.join(', ') + ' WHERE applicant_id = ? AND company_id = ?';\r\n    updateParams.push(id, companyId);\r\n\r\n    // For location_admin, ensure they can only update applicants within their assigned location\r\n    if (role === 'location_admin') {\r\n        updateSql += ' AND (location_id = ? OR location_id IS NULL)'; // Allow updating unassigned applicants too\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(updateSql, updateParams, function(err) {\r\n        if (err) { console.error(\"Database error updating applicant:\", err); return next(new Error('Failed to update applicant.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Applicant not found or not authorized to update.' }); }\r\n        res.status(200).json({ message: 'Applicant updated successfully!' });\r\n    });\r\n});\r\n\r\n\r\n/**\r\n * DELETE /api/applicants/:id\r\n * Deletes an applicant.\r\n * Requires super_admin or location_admin (for their location's applicants).\r\n */\r\napp.delete('/api/applicants/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, role, locationId: currentUserLocationId } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid applicant ID provided.' });\r\n    }\r\n\r\n    if (role !== 'super_admin' && role !== 'location_admin') {\r\n        return res.status(403).json({ error: 'Access Denied: Only admins can delete applicants.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM Applicants WHERE applicant_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Additional security for location_admin: ensure they only delete applicants in their own location\r\n    if (role === 'location_admin') {\r\n        sql += ' AND (location_id = ? OR location_id IS NULL)';\r\n        params.push(currentUserLocationId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting applicant:\", err); return next(new Error('Failed to delete applicant.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Applicant not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// --- Document Management Routes ---\r\n\r\n/**\r\n * POST /api/documents\r\n * Uploads (saves metadata for) a new document.\r\n * Requires authenticated user.\r\n * Note: Actual file storage is assumed to be handled by a separate service (e.g., S3).\r\n * This endpoint only stores the metadata and a URL.\r\n */\r\napp.post('/api/documents', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { title, file_name, file_type, file_url, description } = req.body;\r\n    const { companyId, userId } = req.user;\r\n    const upload_date = new Date().toISOString();\r\n\r\n    // Input Validation for Document Upload\r\n    if (!title || typeof title !== 'string' || title.trim() === '') {\r\n        return res.status(400).json({ error: 'Document title is required and must be a non-empty string.' });\r\n    }\r\n    if (!file_name || typeof file_name !== 'string' || file_name.trim() === '') {\r\n        return res.status(400).json({ error: 'File name is required and must be a non-empty string.' });\r\n    }\r\n    if (!file_type || typeof file_type !== 'string' || file_type.trim() === '') {\r\n        return res.status(400).json({ error: 'File type is required and must be a non-empty string.' });\r\n    }\r\n    // Basic URL validation: checks for http(s) protocol and some content. Can be more robust.\r\n    const urlRegex = /^https?:\\/\\/[^\\s$.?#].[^\\s]*$/i;\r\n    if (!file_url || typeof file_url !== 'string' || !urlRegex.test(file_url)) {\r\n        return res.status(400).json({ error: 'A valid file URL (starting with http or https) is required.' });\r\n    }\r\n    if (description !== undefined && typeof description !== 'string') {\r\n        return res.status(400).json({ error: 'Notes must be a string if provided.' });\r\n    }\r\n\r\n    db.run(\r\n        'INSERT INTO Documents (company_id, user_id, title, file_name, file_type, file_url, description, upload_date) VALUES (?, ?, ?, ?, ?, ?, ?, ?)',\r\n        [companyId, userId, title, file_name, file_type, file_url, description, upload_date],\r\n        function(err) {\r\n            if (err) {\r\n                console.error(\"Database error uploading document:\", err);\r\n                return next(new Error('Failed to upload document metadata.')); // Pass error\r\n            }\r\n            res.status(201).json({ message: 'Document metadata saved successfully!', documentId: this.lastID });\r\n        }\r\n    );\r\n});\r\n\r\n/**\r\n * GET /api/documents\r\n * Retrieves a list of documents for the company.\r\n * Filters can be added (e.g., by uploader, by type).\r\n * Requires authenticated user. Super admins can see all, others can see own documents.\r\n */\r\napp.get('/api/documents', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { companyId, userId, role } = req.user;\r\n    \r\n    let sql = 'SELECT * FROM Documents WHERE company_id = ?';\r\n    const params = [companyId];\r\n\r\n    // Non-super-admins only see their own documents\r\n    if (role !== 'super_admin') {\r\n        sql += ' AND user_id = ?';\r\n        params.push(userId);\r\n    }\r\n\r\n    db.all(sql, params, (err, rows) => {\r\n        if (err) { console.error(\"Database error fetching documents:\", err); return next(new Error('Database error fetching documents.')); } // Pass error\r\n        res.json(rows);\r\n    });\r\n});\r\n\r\n/**\r\n * DELETE /api/documents/:id\r\n * Deletes a document record.\r\n * Requires super_admin or the user who uploaded it.\r\n */\r\napp.delete('/api/documents/:id', authenticateToken, (req, res, next) => { // Added 'next'\r\n    const { id } = req.params;\r\n    const { companyId, userId, role } = req.user;\r\n\r\n    // Validate ID parameter\r\n    if (!id || isNaN(parseInt(id))) {\r\n        return res.status(400).json({ error: 'Invalid document ID provided.' });\r\n    }\r\n\r\n    let sql = 'DELETE FROM Documents WHERE document_id = ? AND company_id = ?';\r\n    const params = [id, companyId];\r\n\r\n    // Only super_admin or the original uploader can delete\r\n    if (role !== 'super_admin') {\r\n        sql += ' AND user_id = ?';\r\n        params.push(userId);\r\n    }\r\n\r\n    db.run(sql, params, function(err) {\r\n        if (err) { console.error(\"Database error deleting document:\", err); return next(new Error('Failed to delete document.')); } // Pass error\r\n        if (this.changes === 0) { return res.status(404).json({ error: 'Document not found or not authorized to delete.' }); }\r\n        res.status(204).send();\r\n    });\r\n});\r\n\r\n// Fallback for any other GET request not handled by an API route (serves index.html for SPA behavior)\r\n// This should always be the LAST route in your Express app\r\napp.get(/'*'/, (req, res) => {\r\n    // Correctly serve the index.html from the parent directory\r\n    res.sendFile(path.join(__dirname, '..', 'index.html'));\r\n});\r\n\r\n// --- Global Error Handling Middleware ---\r\n// This should be the very last middleware in your Express app\r\napp.use((err, req, res, next) => {\r\n    console.error(`Unhandled Error: ${err.stack}`); // Log the full stack trace for debugging\r\n    // Respond with a generic error message for the client\r\n    res.status(500).json({\r\n        error: 'An unexpected server error occurred. Please try again later.',\r\n        // In development, you might send more details:\r\n        // message: err.message,\r\n        // stack: process.env.NODE_ENV === 'development' ? err.stack : undefined\r\n    });\r\n});\r\n\r\n// --- Server Start ---\r\n// This conditional export allows the app to be imported for testing\r\n// without starting the server listener when the test runner requires it.\r\nif (require.main === module) {\r\n    // Only listen if this file is run directly (not required as a module)\r\n    app.listen(PORT, () => {\r\n        console.log(`Server is running successfully on http://localhost:${PORT}`);\r\n    });\r\n} else {\r\n    // Export the app for testing purposes\r\n    module.exports = app;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1750315066447}}